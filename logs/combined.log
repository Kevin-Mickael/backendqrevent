{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:47:46"}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 11:47:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:48:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:54:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:54:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:55:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:55:24"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:56:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:58:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:58:23"}
{"ip":"::1","level":"info","message":"POST /api/auth/register","service":"qrevent-backend","timestamp":"2026-02-05 11:58:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"Andriatsilavokevin@gmail.com","error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Database error during user existence check","service":"qrevent-backend","timestamp":"2026-02-05 11:59:09"}
{"error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Registration error:","service":"qrevent-backend","stack":"Error: Error finding user by email: TypeError: fetch failed\n    at Object.findByEmail (/home/kevin/Qrevent/backend/utils/db/users.js:44:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (/home/kevin/Qrevent/backend/controllers/authController.js:47:28)","timestamp":"2026-02-05T07:59:09.420Z"}
{"ip":"::1","level":"info","message":"POST /api/auth/register","service":"qrevent-backend","timestamp":"2026-02-05 12:00:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"Andriatsilavokevin@gmail.com","error":"Error finding user by email: Could not find the table 'public.users' in the schema cache","level":"error","message":"Database error during user existence check","service":"qrevent-backend","timestamp":"2026-02-05 12:00:16"}
{"error":"Error finding user by email: Could not find the table 'public.users' in the schema cache","level":"error","message":"Registration error:","service":"qrevent-backend","stack":"Error: Error finding user by email: Could not find the table 'public.users' in the schema cache\n    at Object.findByEmail (/home/kevin/Qrevent/backend/utils/db/users.js:44:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (/home/kevin/Qrevent/backend/controllers/authController.js:47:28)","timestamp":"2026-02-05T08:00:16.475Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:01:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:01:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:02:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:02:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:02:36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:03:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:03:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:03:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:03:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:04:26"}
{"ip":"::1","level":"info","message":"POST /api/auth/register","service":"qrevent-backend","timestamp":"2026-02-05 12:05:05","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"New user registered successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:05:07.529Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:11:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:13:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:14:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:15:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:16:12"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:17:05","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:17:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:17:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:21:20"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:26:48","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:26:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:26:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:27:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:28:08"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:33:22","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:33:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:34:28"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:34:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:34:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:35:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:36:21"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:37:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:37:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:38:25"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:38:31","userAgent":"axios/1.13.4","userId":null}
{"email":"kevin@example.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 12:38:33"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:38:55","userAgent":"axios/1.13.4","userId":null}
{"email":"kevin@example.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 12:38:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:39:14"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/register","service":"qrevent-backend","timestamp":"2026-02-05 12:39:20","userAgent":"axios/1.13.4","userId":null}
{"email":"test.upload.1770280760263@example.com","level":"info","message":"New user registered successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:39:22.105Z","userId":"51f08f54-41f2-4307-be84-e57fa6ddc033"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:39:22","userAgent":"axios/1.13.4","userId":null}
{"email":"test.upload.1770280760263@example.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:39:22.787Z","userId":"51f08f54-41f2-4307-be84-e57fa6ddc033"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 12:39:22","userAgent":"axios/1.13.4","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 12:42:39","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 12:42:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:43:12","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:43:13.818Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:43:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:43:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:43:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:43:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:44:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:44:04","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:44:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:44:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 12:45:28","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 12:46:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/register","service":"qrevent-backend","timestamp":"2026-02-05 12:46:08","userAgent":"axios/1.13.4","userId":null}
{"email":"test.upload.1770281168792@example.com","level":"info","message":"New user registered successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:46:10.184Z","userId":"fb087d45-1b51-4120-bb78-f3df0879a5d3"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:46:10","userAgent":"axios/1.13.4","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 12:46:10","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"test.upload.1770281168792@example.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:46:11.018Z","userId":"fb087d45-1b51-4120-bb78-f3df0879a5d3"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 12:46:11","userAgent":"axios/1.13.4","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 12:46:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:46:28"}
{"ip":"::1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:46:33","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:46:35.195Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:46:35","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:46:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/register","service":"qrevent-backend","timestamp":"2026-02-05 12:46:38","userAgent":"axios/1.13.4","userId":null}
{"email":"test.upload.1770281198342@example.com","level":"info","message":"New user registered successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:46:39.339Z","userId":"f06ba02b-dee8-41b8-92d4-e96c1c27dc8f"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:46:39","userAgent":"axios/1.13.4","userId":null}
{"email":"test.upload.1770281198342@example.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:46:40.458Z","userId":"f06ba02b-dee8-41b8-92d4-e96c1c27dc8f"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 12:46:40","userAgent":"axios/1.13.4","userId":null}
{"ip":"::1","level":"info","message":"GET /health","service":"qrevent-backend","timestamp":"2026-02-05 12:47:49","userAgent":"curl/8.5.0","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:52:13","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:52:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:54:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:54:54"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 13:00:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 13:00:26","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:04:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:07:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:08:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:08:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:09:10"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 13:09:58","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 13:10:00","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:10:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:10:35"}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 13:10:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 13:12:13","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 13:30:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:33:51"}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 13:34:09","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 13:34:16","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:48:40"}
{"ip":"::1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 13:52:20","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:00:30"}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 14:00:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 14:00:55","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T10:00:56.332Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 14:00:56","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 14:00:57","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 14:01:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"PUT /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 14:01:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"0":"E","1":"r","10":"i","100":"9","101":"5","102":":","103":"1","104":"9","105":"\n","106":" ","107":" ","108":" ","109":" ","11":"d","110":"a","111":"t","112":" ","113":"p","114":"r","115":"o","116":"c","117":"e","118":"s","119":"s","12":"a","120":".","121":"p","122":"r","123":"o","124":"c","125":"e","126":"s","127":"s","128":"T","129":"i","13":"t","130":"c","131":"k","132":"s","133":"A","134":"n","135":"d","136":"R","137":"e","138":"j","139":"e","14":"i","140":"c","141":"t","142":"i","143":"o","144":"n","145":"s","146":" ","147":"(","148":"n","149":"o","15":"o","150":"d","151":"e","152":":","153":"i","154":"n","155":"t","156":"e","157":"r","158":"n","159":"a","16":"n","160":"l","161":"/","162":"p","163":"r","164":"o","165":"c","166":"e","167":"s","168":"s","169":"/","17":" ","170":"t","171":"a","172":"s","173":"k","174":"_","175":"q","176":"u","177":"e","178":"u","179":"e","18":"f","180":"s","181":":","182":"1","183":"0","184":"5","185":":","186":"5","187":")","19":"a","2":"r","20":"i","21":"l","22":"e","23":"d","24":"\n","25":" ","26":" ","27":" ","28":" ","29":"a","3":"o","30":"t","31":" ","32":"/","33":"h","34":"o","35":"m","36":"e","37":"/","38":"k","39":"e","4":"r","40":"v","41":"i","42":"n","43":"/","44":"Q","45":"r","46":"e","47":"v","48":"e","49":"n","5":":","50":"t","51":"/","52":"b","53":"a","54":"c","55":"k","56":"e","57":"n","58":"d","59":"/","6":" ","60":"n","61":"o","62":"d","63":"e","64":"_","65":"m","66":"o","67":"d","68":"u","69":"l","7":"V","70":"e","71":"s","72":"/","73":"c","74":"e","75":"l","76":"e","77":"b","78":"r","79":"a","8":"a","80":"t","81":"e","82":"/","83":"l","84":"i","85":"b","86":"/","87":"c","88":"e","89":"l","9":"l","90":"e","91":"b","92":"r","93":"a","94":"t","95":"e","96":".","97":"j","98":"s","99":":","level":"error","message":"Validation failed","service":"qrevent-backend","timestamp":"2026-02-05 14:01:32"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 14:02:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 14:02:32","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 14:02:35","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 14:02:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 14:02:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:06:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:06:36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:06:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:07:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:07:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:07:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:07:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:07:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:08:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:08:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:08:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:08:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:09:06"}
{"0":"E","1":"r","10":"i","100":"9","101":"5","102":":","103":"1","104":"9","105":"\n","106":" ","107":" ","108":" ","109":" ","11":"d","110":"a","111":"t","112":" ","113":"p","114":"r","115":"o","116":"c","117":"e","118":"s","119":"s","12":"a","120":".","121":"p","122":"r","123":"o","124":"c","125":"e","126":"s","127":"s","128":"T","129":"i","13":"t","130":"c","131":"k","132":"s","133":"A","134":"n","135":"d","136":"R","137":"e","138":"j","139":"e","14":"i","140":"c","141":"t","142":"i","143":"o","144":"n","145":"s","146":" ","147":"(","148":"n","149":"o","15":"o","150":"d","151":"e","152":":","153":"i","154":"n","155":"t","156":"e","157":"r","158":"n","159":"a","16":"n","160":"l","161":"/","162":"p","163":"r","164":"o","165":"c","166":"e","167":"s","168":"s","169":"/","17":" ","170":"t","171":"a","172":"s","173":"k","174":"_","175":"q","176":"u","177":"e","178":"u","179":"e","18":"f","180":"s","181":":","182":"1","183":"0","184":"5","185":":","186":"5","187":")","19":"a","2":"r","20":"i","21":"l","22":"e","23":"d","24":"\n","25":" ","26":" ","27":" ","28":" ","29":"a","3":"o","30":"t","31":" ","32":"/","33":"h","34":"o","35":"m","36":"e","37":"/","38":"k","39":"e","4":"r","40":"v","41":"i","42":"n","43":"/","44":"Q","45":"r","46":"e","47":"v","48":"e","49":"n","5":":","50":"t","51":"/","52":"b","53":"a","54":"c","55":"k","56":"e","57":"n","58":"d","59":"/","6":" ","60":"n","61":"o","62":"d","63":"e","64":"_","65":"m","66":"o","67":"d","68":"u","69":"l","7":"V","70":"e","71":"s","72":"/","73":"c","74":"e","75":"l","76":"e","77":"b","78":"r","79":"a","8":"a","80":"t","81":"e","82":"/","83":"l","84":"i","85":"b","86":"/","87":"c","88":"e","89":"l","9":"l","90":"e","91":"b","92":"r","93":"a","94":"t","95":"e","96":".","97":"j","98":"s","99":":","level":"error","message":"Validation failed","service":"qrevent-backend","timestamp":"2026-02-05 14:13:45"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:14:26"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:14:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:14:46"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:14:47"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:15:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:15:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:15:34"}
{"body":{"avatar_url":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/e1a3d655-aef1-435e-b463-a546dd51a8ca.webp"},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 14:17:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:18:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:18:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:18:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:18:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:19:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:19:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:19:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:20:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:20:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:20:38"}
{"error":"Error updating user: Cannot coerce the result to a single JSON object","level":"error","message":"Update profile error:","service":"qrevent-backend","stack":"Error: Error updating user: Cannot coerce the result to a single JSON object\n    at Object.update (/home/kevin/Qrevent/backend/utils/db/users.js:71:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async updateProfile (/home/kevin/Qrevent/backend/controllers/authController.js:415:25)","timestamp":"2026-02-05 14:21:39","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:22:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:23:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:23:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:24:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:24:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:24:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:31:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:31:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:32:12"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:32:46"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:32:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:35:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:35:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:52"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:52"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:55"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:55"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:03"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:03"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:24"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:31"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:31"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:37:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:37:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:37:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:37:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:37:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:37:42"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 14:37:53"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:38:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:38:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:38:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:38:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:38:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:38:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:39:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:39:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:39:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:39:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:39:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:39:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:40:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:40:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:40:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:40:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:40:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:40:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:41:03"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:41:03"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:41:26"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:41:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:41:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:41:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:42:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:42:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:42:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:42:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:42:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:42:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:43:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:43:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:43:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:43:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:43:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:43:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:44:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:44:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:44:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:44:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:44:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:44:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:45:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:45:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:45:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:45:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:45:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:45:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:46:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:46:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:46:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:46:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:46:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:46:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:47:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:47:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:47:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:47:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:47:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:47:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:48:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:48:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:48:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:48:28"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 14:48:39"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:48:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:48:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:49:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:49:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:49:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:49:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:49:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:49:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:08"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:17"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:17"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:20"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:20"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:31"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:31"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:31"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:31"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:32"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:32"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:35"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:43"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:43"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:46"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:46"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:51:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:51:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:51:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:51:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:51:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:51:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:52:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:52:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:52:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:52:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:52:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:52:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:53:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:53:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:53:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:53:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:53:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:53:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:54:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:54:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:54:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:54:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:54:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:54:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:55:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:55:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:55:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:55:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:55:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:55:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:56:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:56:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:56:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:56:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:56:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:56:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:57:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:57:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:57:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:57:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:57:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:57:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:58:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:58:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:58:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:58:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:58:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:58:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:59:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:59:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:59:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:59:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:59:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:59:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:00:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:00:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:00:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:00:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:00:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:00:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:01:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:01:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:01:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:01:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:01:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:01:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:02:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:02:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:02:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:02:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:02:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:02:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:03:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:03:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:03:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:03:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:03:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:03:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:04:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:04:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:04:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:04:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:04:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:04:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:05:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:05:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:05:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:05:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:05:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:05:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:06:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:06:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:06:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:06:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:06:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:06:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:07:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:07:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:07:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:07:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:07:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:07:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:52"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:52"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:55"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:55"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:09:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:09:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:09:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:09:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:09:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:09:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:24"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:32"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:32"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:10:37"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:40"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:40"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:11:00"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:11:00"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.149Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.150Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.156Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.157Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.165Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.166Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.187Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.188Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.246Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.247Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.398Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.400Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.805Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.807Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:12.906Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:12"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:12.906Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:12"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:15.891Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:15"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:15.892Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:15"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:24.000Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:24.002Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:44.008Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:44.010Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:12:04.014Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:12:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:12:04.015Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:12:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:12:24.027Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:12:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:12:24.029Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:12:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:12:44.031Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:12:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:12:44.033Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:12:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:13:04.038Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:13:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:13:04.040Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:13:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:13:24.052Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:13:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:13:24.054Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:13:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:13:44.059Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:13:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:13:44.060Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:13:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:14:04.063Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:14:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:14:04.064Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:14:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:14:24.076Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:14:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:14:24.076Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:14:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:14:44.081Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:14:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:14:44.082Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:14:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:15:04.093Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:15:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:15:04.094Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:15:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:15:24.105Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:15:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:15:24.106Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:15:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:15:44.111Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:15:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:15:44.112Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:15:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:16:04.123Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:16:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:16:04.123Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:16:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:16:24.133Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:16:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:16:24.135Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:16:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:16:44.139Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:16:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:16:44.140Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:16:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:17:04.151Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:17:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:17:04.152Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:17:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:17:24.163Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:17:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:17:24.164Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:17:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:17:44.168Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:17:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:17:44.169Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:17:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:20:40"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error (disabling Redis queue system):","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:20:40.600Z"}
{"level":"warn","message":"Redis connection failed, switched to direct processing mode without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:20:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:21:03"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error (disabling Redis queue system):","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:21:03.035Z"}
{"level":"warn","message":"Redis connection failed, switched to direct processing mode without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:21:03"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:21:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:22:40"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error (disabling Redis queue system):","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:22:40.844Z"}
{"level":"warn","message":"Redis connection failed, switched to direct processing mode without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:22:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:23:58"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error (disabling Redis queue system):","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:23:58.866Z"}
{"level":"warn","message":"Redis connection failed, switched to direct processing mode without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:23:58"}
{"email":"test@example.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:29:41"}
{"email":"nonexistent@test.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:29:51"}
{"error":"Error creating user: Could not find the 'preferences' column of 'users' in the schema cache","level":"error","message":"Registration error:","service":"qrevent-backend","stack":"Error: Error creating user: Could not find the 'preferences' column of 'users' in the schema cache\n    at Object.create (/home/kevin/Qrevent/backend/utils/db/users.js:14:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (/home/kevin/Qrevent/backend/controllers/authController.js:79:18)","timestamp":"2026-02-05T11:30:56.608Z"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:31:33"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:32:38"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:32:41"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:33:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:33:44"}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T11:33:52.180Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T11:33:59.956Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T11:37:38.014Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T11:37:43.340Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:16:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/test-event-id/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:37:51"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:16:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/test-event-id/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:38:16"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:16:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:38:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:38:43"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:24:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:38:49"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:24:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:38:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:39:06"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:25:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:39:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:39:33"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:25:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:39:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:39:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:40:34"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:25:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:40:44"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:25:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:40:56"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:25:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:41:00"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:41:41"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:25:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:41:56"}
{"jobId":"1","level":"info","message":"Added image optimization job to queue","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:42:06","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","jobId":"1","level":"info","message":"Starting image optimization job","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:42:06","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:42:06.913Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","eventId":"859d073e-c34e-4daf-b308-636d510f1154","jobId":"1","level":"error","message":"Image optimization job failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05 15:42:06","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Image optimization job 1 failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05T11:42:06.922Z"}
{"level":"info","message":"Image optimization queue drained","service":"qrevent-backend","timestamp":"2026-02-05T11:42:06.924Z"}
{"jobId":"2","level":"info","message":"Added image optimization job to queue","originalName":"test-image.jpg","service":"qrevent-backend","timestamp":"2026-02-05 15:42:23","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","jobId":"2","level":"info","message":"Starting image optimization job","originalName":"test-image.jpg","service":"qrevent-backend","timestamp":"2026-02-05 15:42:23","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"test-image.jpg","service":"qrevent-backend","timestamp":"2026-02-05T11:42:23.510Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","eventId":"859d073e-c34e-4daf-b308-636d510f1154","jobId":"2","level":"error","message":"Image optimization job failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05 15:42:23","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Image optimization job 2 failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05T11:42:23.515Z"}
{"level":"info","message":"Image optimization queue drained","service":"qrevent-backend","timestamp":"2026-02-05T11:42:23.520Z"}
{"jobId":"3","level":"info","message":"Added image optimization job to queue","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:43:04","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","jobId":"3","level":"info","message":"Starting image optimization job","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:43:04","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:43:04.930Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","eventId":"859d073e-c34e-4daf-b308-636d510f1154","jobId":"3","level":"error","message":"Image optimization job failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05 15:43:04","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Image optimization job 3 failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05T11:43:04.934Z"}
{"level":"info","message":"Image optimization queue drained","service":"qrevent-backend","timestamp":"2026-02-05T11:43:04.936Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:44:21"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:44:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:44:36"}
{"jobId":"4","level":"info","message":"Added image optimization job to queue","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:44:45","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","jobId":"4","level":"info","message":"Starting image optimization job","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:44:45","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:44:45.870Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","eventId":"859d073e-c34e-4daf-b308-636d510f1154","jobId":"4","level":"error","message":"Image optimization job failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05 15:44:45","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Image optimization job 4 failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05T11:44:45.878Z"}
{"level":"info","message":"Image optimization queue drained","service":"qrevent-backend","timestamp":"2026-02-05T11:44:45.879Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:45:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:45:26"}
{"jobId":"5","level":"info","message":"Added image optimization job to queue","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:45:36","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","jobId":"5","level":"info","message":"Starting image optimization job","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:45:36","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:45:36.473Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","eventId":"859d073e-c34e-4daf-b308-636d510f1154","jobId":"5","level":"error","message":"Image optimization job failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05 15:45:36","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Image optimization job 5 failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05T11:45:36.484Z"}
{"level":"info","message":"Image optimization queue drained","service":"qrevent-backend","timestamp":"2026-02-05T11:45:36.488Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:45:46"}
{"jobId":"firr4p2hwfb","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:46:01","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:46:01.623Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Failed to add image optimization job","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:46:01","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"warn","message":"Queue addition failed, attempting direct fallback...","service":"qrevent-backend","timestamp":"2026-02-05 15:46:01"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:46:01.625Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"9yg981hhowu","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:47:04","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:47:04.597Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Failed to add image optimization job","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:47:04","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"warn","message":"Queue addition failed, attempting direct fallback...","service":"qrevent-backend","timestamp":"2026-02-05 15:47:04"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:47:04.598Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:49:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:49:12"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:49:32"}
{"jobId":"bp0cecut64l","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:50:02","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:50:02.877Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/007ce3b4-683c-4685-9f76-b68c5dc7786c.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:50:05.642Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"qrcode.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/007ce3b4-683c-4685-9f76-b68c5dc7786c.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:50:05.643Z"}
{"jobId":"bdtcem04rn","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"test-portrait.jpg","service":"qrevent-backend","timestamp":"2026-02-05 15:50:39","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"test-portrait.jpg","service":"qrevent-backend","timestamp":"2026-02-05T11:50:39.741Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Failed to optimize banner image","level":"error","message":"Failed to add image optimization job","originalName":"test-portrait.jpg","service":"qrevent-backend","timestamp":"2026-02-05 15:50:39","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"warn","message":"Queue addition failed, attempting direct fallback...","service":"qrevent-backend","timestamp":"2026-02-05 15:50:39"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"test-portrait.jpg","service":"qrevent-backend","timestamp":"2026-02-05T11:50:39.751Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"lw0ve9ufkpl","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"favicon.png","service":"qrevent-backend","timestamp":"2026-02-05 15:50:59","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"favicon.png","service":"qrevent-backend","timestamp":"2026-02-05T11:50:59.342Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/aa85e9a9-b8c7-443b-b772-88667db80c15.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:01.040Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"favicon.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/aa85e9a9-b8c7-443b-b772-88667db80c15.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:01.041Z"}
{"jobId":"upggw3vxuvo","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:51:23","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:23.362Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/fb45fbcd-e8c9-4a32-92a9-cc24f0de97a2.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:25.923Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"energie renouvelable.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/fb45fbcd-e8c9-4a32-92a9-cc24f0de97a2.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:25.923Z"}
{"jobId":"2tovif5ihkd","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:51:44","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:44.867Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/0597799d-1082-49a3-962b-5133d049b36a.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:47.324Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"energie renouvelable.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/0597799d-1082-49a3-962b-5133d049b36a.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:47.324Z"}
{"jobId":"r8b2csth5y","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:53:24","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:53:24.407Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/76d93c58-df2c-4494-8516-f0edc04b4376.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:53:27.372Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"qrcode.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/76d93c58-df2c-4494-8516-f0edc04b4376.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:53:27.377Z"}
{"jobId":"c3ypyq1iqvp","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:54:32","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:54:32.066Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/6d26c306-02b0-49ca-8c5d-2325ae6da1c4.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:54:34.556Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"energie renouvelable.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/6d26c306-02b0-49ca-8c5d-2325ae6da1c4.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:54:34.556Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:55:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:58:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:03:15"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:03:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:04:03"}
{"jobId":"mwbud4quuaj","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 16:04:27","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:04:27.144Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/f55f367c-177c-4b3a-b052-4ec0e04460d1.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:04:33.277Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"energie renouvelable.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/f55f367c-177c-4b3a-b052-4ec0e04460d1.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:04:33.278Z"}
{"jobId":"ii7lttd5s0t","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 16:08:17","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:08:17.692Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/653e75e5-2c19-4c0d-b0b0-4069c655247c.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:08:22.169Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"energie renouvelable.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/653e75e5-2c19-4c0d-b0b0-4069c655247c.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:08:22.170Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:11:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:12:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:14:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:14:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:14:52"}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T12:20:32.789Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"8iovl4svx9g","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:20:54","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:20:54.518Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/7681929b-ec12-48a6-b9ac-974e0da7f151.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:20:57.502Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:20:58","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"b0wps0htg1m","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:25:12","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:25:12.872Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/e1371e19-9183-4079-a353-730b6496a87a.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:25:15.441Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:25:16","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:25:19","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:31:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:31:55"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:33:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:33:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:34:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:34:34"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T12:34:56.395Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:36:10"}
{"jobId":"icidro1um6o","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:37:51","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:37:51.947Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/9daa4dcc-ce69-4d05-8b0e-113875a8833c.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:37:53.571Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:37:54","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"1zfj5yedopj","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:39:07","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:39:07.747Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/71099985-b610-4f33-b850-5d6764ab64e3.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:39:09.363Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:39:10","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:50:21"}
{"jobId":"gfqnqv5trnh","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:50:36","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:50:36.482Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:50:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:51:17"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T12:51:56.362Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"am6da78ms4b","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:53:29","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:53:29.189Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/4b2f18c8-57c0-43a7-b95f-ddf0000d696b.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:53:30.809Z"}
{"level":"info","message":"Old avatar deleted from R2","oldUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/71099985-b610-4f33-b850-5d6764ab64e3.webp","service":"qrevent-backend","timestamp":"2026-02-05 16:53:31","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:53:31","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:56:09"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:58:28","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"lfk3r80z17q","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:58:33","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:58:33.586Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Failed to upload file","level":"error","message":"Failed to add image optimization job","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:58:34","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"warn","message":"Queue addition failed, attempting direct fallback...","service":"qrevent-backend","timestamp":"2026-02-05 16:58:34"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:58:34.727Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/61419feb-9298-4d15-ba0e-d877bd23ab77.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:58:37.897Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:58:38","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:18:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:18:21"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T13:18:45.163Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:18:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:19:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:21:04"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:21:53"}
{"jobId":"zlpf1jva35","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 17:27:29","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T13:27:29.918Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/b4da8687-9def-4572-a693-6960a9962b3d.webp","service":"qrevent-backend","timestamp":"2026-02-05T13:27:31.504Z"}
{"level":"info","message":"Old avatar deleted from R2","oldUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/61419feb-9298-4d15-ba0e-d877bd23ab77.webp","service":"qrevent-backend","timestamp":"2026-02-05 17:27:32","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:27:32","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:34:38"}
{"jobId":"4nbnmo42nl9","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"CV.PIC.jpeg","service":"qrevent-backend","timestamp":"2026-02-05 17:36:19","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"CV.PIC.jpeg","service":"qrevent-backend","timestamp":"2026-02-05T13:36:19.342Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"CV.PIC.jpeg","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/10691434-4389-4ffd-824f-c85868577297.webp","service":"qrevent-backend","timestamp":"2026-02-05T13:36:21.982Z"}
{"level":"info","message":"Old avatar deleted from R2","oldUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/b4da8687-9def-4572-a693-6960a9962b3d.webp","service":"qrevent-backend","timestamp":"2026-02-05 17:36:23","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:36:23","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:36:25","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"fe734ur35tr","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 17:36:29","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T13:36:29.581Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/17feaa03-2e74-4bcc-b92f-a57eaa5a2103.webp","service":"qrevent-backend","timestamp":"2026-02-05T13:36:32.435Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:36:33","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:36:34","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:39:29"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:47:43","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"uueq7g6pgs","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 17:47:46","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T13:47:46.886Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/2afae7cb-d935-4fb2-9753-5cb17934ea0d.webp","service":"qrevent-backend","timestamp":"2026-02-05T13:47:48.568Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:47:49","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:13:47","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"heoxfe34crh","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:13:50","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:13:50.470Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/d154f28e-5f4d-4ca7-b993-a1dc26362cb9.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:13:54.280Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:13:54","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:13:57","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:17:04","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"oe70ajnkf5i","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:17:07","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:17:07.175Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/b1fae70a-2d86-4de6-80d9-0595fcf62752.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:17:08.884Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:17:09","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:17:12","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:27:02","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"rs84vg9tqa","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:27:07","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:27:07.437Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Failed to upload file: The request signature we calculated does not match the signature you provided. Check your secret access key and signing method.","level":"error","message":"Failed to add image optimization job","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:27:08","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"warn","message":"Queue addition failed, attempting direct fallback...","service":"qrevent-backend","timestamp":"2026-02-05 18:27:08"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:27:08.126Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:27:11","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:28:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:28:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:28:44"}
{"jobId":"ewm7y11o9v4","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:30:03","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:30:03.051Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/99240c99-9f83-4c51-9966-e5acee27e229.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:30:06.235Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:30:07","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:32:29","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"t5st0kw004l","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:32:34","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:32:34.888Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/1ecfdde4-6e55-44c0-b847-7286ab5b456a.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:32:37.414Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:32:38","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:34:41"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:35:49","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"9e1cbl54nla","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:35:55","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:35:55.060Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/092970e4-9a77-4695-bf53-ecb4795e8c0f.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:35:57.612Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:35:58","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:36:02","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:40:24","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:40:25","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"zsjifu56nl","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"avatar-1770302495967.webp","service":"qrevent-backend","timestamp":"2026-02-05 18:41:36","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"avatar-1770302495967.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:41:36.881Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"avatar-1770302495967.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/116da4b7-2f7c-4848-ace9-414cd00d0394.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:41:39.440Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:41:40","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:41:44","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:42:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:43:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:43:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:44:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:45:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:45:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:45:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:45:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:45:55"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:48:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:48:20"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154","service":"qrevent-backend","timestamp":"2026-02-05 18:48:30"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154","service":"qrevent-backend","timestamp":"2026-02-05 18:48:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:48:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:48:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:48:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:49:39"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154","service":"qrevent-backend","timestamp":"2026-02-05 18:50:32"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154","service":"qrevent-backend","timestamp":"2026-02-05 18:50:32"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154","service":"qrevent-backend","timestamp":"2026-02-05 18:50:32"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154","service":"qrevent-backend","timestamp":"2026-02-05 18:50:32"}
{"jobId":"afi8zuxfb79","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"banner-1770303054765.webp","service":"qrevent-backend","timestamp":"2026-02-05 18:50:56","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"banner-1770303054765.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:50:56.607Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/0864f1f9-5491-4750-89ea-3b9491965b17.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:50:58.778Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"banner-1770303054765.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/0864f1f9-5491-4750-89ea-3b9491965b17.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:50:58.780Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:52:43"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"Found 10 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:48"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:48"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:48"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:49"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:49"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:49"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:50"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:50"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:53:12"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:53:19"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"Found 10 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 18:53:23"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:24"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 18:53:24"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"Found 10 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 18:54:52"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:52"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 18:54:53"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"Found 10 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"\n Migration to apply (002_add_couple_names.sql):","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"-- Migration: Add bride_name and groom_name columns to events table\n-- Date: 2026-02-05\n-- Author: QR Event Team\n-- Description: Adds support for storing couple names for wedding events\n\n-- Add bride_name column to events table\nDO $$\nBEGIN\n    IF NOT EXISTS (\n        SELECT 1 \n        FROM information_schema.columns \n        WHERE table_schema = 'public'\n        AND table_name = 'events' \n        AND column_name = 'bride_name'\n    ) THEN\n        ALTER TABLE public.events ADD COLUMN bride_name VARCHAR(100);\n        \n        COMMENT ON COLUMN public.events.bride_name IS 'Name of the bride for wedding events';\n        \n        RAISE NOTICE ' Column bride_name added to events table';\n    ELSE\n        RAISE NOTICE '  Column bride_name already exists in events table';\n    END IF;\nEND $$;\n\n-- Add groom_name column to events table\nDO $$\nBEGIN\n    IF NOT EXISTS (\n        SELECT 1 \n        FROM information_schema.columns \n        WHERE table_schema = 'public'\n        AND table_name = 'events' \n        AND column_name = 'groom_name'\n    ) THEN\n        ALTER TABLE public.events ADD COLUMN groom_name VARCHAR(100);\n        \n        COMMENT ON COLUMN public.events.groom_name IS 'Name of the groom for wedding events';\n        \n        RAISE NOTICE ' Column groom_name added to events table';\n    ELSE\n        RAISE NOTICE '  Column groom_name already exists in events table';\n    END IF;\nEND $$;\n\n-- Verify migration\nSELECT \n    column_name, \n    data_type,\n    is_nullable,\n    column_default\nFROM information_schema.columns \nWHERE table_schema = 'public'\nAND table_name = 'events' \nORDER BY ordinal_position;\n","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"Applying migration: 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 18:55:09"}
{"level":"info","message":" Migration applied successfully: 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:10"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 18:55:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:55:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:56:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:56:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:56:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:57:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:57:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:58:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:58:47"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:59:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:59:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:00:00"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:00:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:00:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:01:26"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"Found 14 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"\n Migration to apply (007_add_performance_indexes.sql):","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"-- Migration: Ajout d'index de performance critiques\n-- Date: 2026-02-05\n-- Priorit: CRITIQUE\n-- Description: Optimise les requtes frquentes pour la monte en charge\n\n-- ============================================\n-- 1. INDEX QR CODES - Validation rapide\n-- ============================================\n-- Problme: Requte findByCode avec is_valid + expires_at fait un seq scan\n-- Impact: Chaque scan de QR (~1M/jour potentiel) est lent\n\nDROP INDEX IF EXISTS idx_qr_codes_validation;\nCREATE INDEX CONCURRENTLY idx_qr_codes_validation \nON qr_codes(code, is_valid, expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_validation IS 'Index composite pour validation QR rapide';\n\n-- Index pour nettoyage des QR expirs (job de maintenance)\nDROP INDEX IF EXISTS idx_qr_codes_expiry_cleanup;\nCREATE INDEX CONCURRENTLY idx_qr_codes_expiry_cleanup \nON qr_codes(expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_expiry_cleanup IS 'Index pour job de nettoyage des QR expirs';\n\n-- ============================================\n-- 2. INDEX ATTENDANCE - Requtes par vnement\n-- ============================================\n-- Problme: findByEvent fait un seq scan + tri\n-- Impact: Dashboard lent avec beaucoup d'entres\n\nDROP INDEX IF EXISTS idx_attendance_event_timestamp;\nCREATE INDEX CONCURRENTLY idx_attendance_event_timestamp \nON attendance(event_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_timestamp IS 'Index pour requtes attendance rcentes';\n\n-- Index couvrant pour viter le lookup\nDROP INDEX IF EXISTS idx_attendance_event_guest_timestamp;\nCREATE INDEX CONCURRENTLY idx_attendance_event_guest_timestamp \nON attendance(event_id, guest_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_guest_timestamp IS 'Index couvrant pour requtes avec guest';\n\n-- Index pour statistiques par jour (reporting)\nDROP INDEX IF EXISTS idx_attendance_date;\nCREATE INDEX CONCURRENTLY idx_attendance_date \nON attendance(event_id, DATE(timestamp), status);\n\nCOMMENT ON INDEX idx_attendance_date IS 'Index pour agrgations par jour';\n\n-- ============================================\n-- 3. INDEX GUESTS - Recherches frquentes\n-- ============================================\n-- Index pour recherche par statut RSVP (dashboard)\nDROP INDEX IF EXISTS idx_guests_event_rsvp;\nCREATE INDEX CONCURRENTLY idx_guests_event_rsvp \nON guests(event_id, rsvp_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_rsvp IS 'Index pour filtrage par statut RSVP';\n\n-- Index pour recherche par statut prsence (entre/sortie)\nDROP INDEX IF EXISTS idx_guests_event_attendance;\nCREATE INDEX CONCURRENTLY idx_guests_event_attendance \nON guests(event_id, attendance_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_attendance IS 'Index pour filtrage par statut prsence';\n\n-- ============================================\n-- 4. INDEX FILES - Recherches par vnement/menu\n-- ============================================\nDROP INDEX IF EXISTS idx_files_event_menu;\nCREATE INDEX CONCURRENTLY idx_files_event_menu \nON files(event_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_event_menu IS 'Index pour requtes fichiers par vnement/menu';\n\n-- Index pour recherches par user\nDROP INDEX IF EXISTS idx_files_user_menu_active;\nCREATE INDEX CONCURRENTLY idx_files_user_menu_active \nON files(user_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_user_menu_active IS 'Index pour requtes fichiers par utilisateur';\n\n-- ============================================\n-- 5. INDEX EVENTS - Recherches par organisateur\n-- ============================================\n-- Index pour requtes dashboard (events + guests count)\nDROP INDEX IF EXISTS idx_events_organizer_active;\nCREATE INDEX CONCURRENTLY idx_events_organizer_active \nON events(organizer_id, created_at DESC) \nWHERE is_active = true;\n\nCOMMENT ON INDEX idx_events_organizer_active IS 'Index optimis pour requtes dashboard';\n\n-- ============================================\n-- 6. INDEX GAME TABLES - Performance jeux\n-- ============================================\n-- Index pour participations par jeu\nDROP INDEX IF EXISTS idx_game_participations_game_completed;\nCREATE INDEX CONCURRENTLY idx_game_participations_game_completed \nON game_participations(game_id, is_completed, total_score);\n\nCOMMENT ON INDEX idx_game_participations_game_completed IS 'Index pour calcul stats jeu';\n\n-- Index pour rponses rcentes\nDROP INDEX IF EXISTS idx_game_answers_participation_question;\nCREATE INDEX CONCURRENTLY idx_game_answers_participation_question \nON game_answers(participation_id, question_id);\n\nCOMMENT ON INDEX idx_game_answers_participation_question IS 'Index couvrant pour vrification rponses';\n\n-- ============================================\n-- 7. OPTIMISATION: Dsactivation trigger synchrone game_stats\n-- ============================================\n-- Le trigger recalcule les stats  chaque rponse (trop coteux)\n-- Solution: Traitement asynchrone via job queue\n\nDROP TRIGGER IF EXISTS trigger_update_game_stats ON game_participations;\n\nCOMMENT ON TABLE game_participations IS 'Trigger synchrone game_stats dsactiv - utiliser job queue';\n\n-- ============================================\n-- 8. TABLE POUR STATS UPDATE JOBS\n-- ============================================\nCREATE TABLE IF NOT EXISTS game_stats_update_jobs (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID NOT NULL REFERENCES games(id) ON DELETE CASCADE,\n    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),\n    error_message TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    processed_at TIMESTAMP WITH TIME ZONE,\n    retry_count INTEGER DEFAULT 0\n);\n\n-- Index pour rcuprer les jobs pending\nCREATE INDEX idx_game_stats_jobs_pending ON game_stats_update_jobs(status, created_at) \nWHERE status = 'pending';\n\nCOMMENT ON TABLE game_stats_update_jobs IS 'File d''attente pour mise  jour async des stats de jeu';\n\n-- ============================================\n-- 9. FONCTION TRIGGER LGRE\n-- ============================================\nCREATE OR REPLACE FUNCTION queue_game_stats_update()\nRETURNS TRIGGER AS $$\nBEGIN\n    -- Insre juste un job au lieu de recalculer\n    INSERT INTO game_stats_update_jobs (game_id)\n    VALUES (COALESCE(NEW.game_id, OLD.game_id))\n    ON CONFLICT DO NOTHING; -- vite les doublons\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql';\n\n-- Trigger lger (async)\nDROP TRIGGER IF EXISTS trigger_queue_game_stats_update ON game_participations;\nCREATE TRIGGER trigger_queue_game_stats_update\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION queue_game_stats_update();\n\n-- ============================================\n-- 10. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Index de performance crs avec succs';\n    RAISE NOTICE 'Trigger game_stats synchrone remplac par version async';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"Applying migration: 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 19:01:40"}
{"0":"C","1":"R","10":"E","11":"X","12":" ","13":"C","14":"O","15":"N","16":"C","17":"U","18":"R","19":"R","2":"E","20":"E","21":"N","22":"T","23":"L","24":"Y","25":" ","26":"c","27":"a","28":"n","29":"n","3":"A","30":"o","31":"t","32":" ","33":"r","34":"u","35":"n","36":" ","37":"i","38":"n","39":"s","4":"T","40":"i","41":"d","42":"e","43":" ","44":"a","45":" ","46":"t","47":"r","48":"a","49":"n","5":"E","50":"s","51":"a","52":"c","53":"t","54":"i","55":"o","56":"n","57":" ","58":"b","59":"l","6":" ","60":"o","61":"c","62":"k","7":"I","8":"N","9":"D","level":"error","message":" Failed to apply migration 007_add_performance_indexes.sql:","service":"qrevent-backend","timestamp":"2026-02-05 19:01:40"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 19:01:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:01:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:01:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:02:04"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"Found 14 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"\n Migration to apply (007_add_performance_indexes.sql):","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"-- Migration: Ajout d'index de performance critiques\n-- Date: 2026-02-05\n-- Priorit: CRITIQUE\n-- Description: Optimise les requtes frquentes pour la monte en charge\n\n-- ============================================\n-- 1. INDEX QR CODES - Validation rapide\n-- ============================================\n-- Problme: Requte findByCode avec is_valid + expires_at fait un seq scan\n-- Impact: Chaque scan de QR (~1M/jour potentiel) est lent\n\nDROP INDEX IF EXISTS idx_qr_codes_validation;\nCREATE INDEX idx_qr_codes_validation \nON qr_codes(code, is_valid, expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_validation IS 'Index composite pour validation QR rapide';\n\n-- Index pour nettoyage des QR expirs (job de maintenance)\nDROP INDEX IF EXISTS idx_qr_codes_expiry_cleanup;\nCREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_codes(expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_expiry_cleanup IS 'Index pour job de nettoyage des QR expirs';\n\n-- ============================================\n-- 2. INDEX ATTENDANCE - Requtes par vnement\n-- ============================================\n-- Problme: findByEvent fait un seq scan + tri\n-- Impact: Dashboard lent avec beaucoup d'entres\n\nDROP INDEX IF EXISTS idx_attendance_event_timestamp;\nCREATE INDEX idx_attendance_event_timestamp \nON attendance(event_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_timestamp IS 'Index pour requtes attendance rcentes';\n\n-- Index couvrant pour viter le lookup\nDROP INDEX IF EXISTS idx_attendance_event_guest_timestamp;\nCREATE INDEX idx_attendance_event_guest_timestamp \nON attendance(event_id, guest_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_guest_timestamp IS 'Index couvrant pour requtes avec guest';\n\n-- Index pour statistiques par jour (reporting)\nDROP INDEX IF EXISTS idx_attendance_date;\nCREATE INDEX idx_attendance_date \nON attendance(event_id, DATE(timestamp), status);\n\nCOMMENT ON INDEX idx_attendance_date IS 'Index pour agrgations par jour';\n\n-- ============================================\n-- 3. INDEX GUESTS - Recherches frquentes\n-- ============================================\n-- Index pour recherche par statut RSVP (dashboard)\nDROP INDEX IF EXISTS idx_guests_event_rsvp;\nCREATE INDEX idx_guests_event_rsvp \nON guests(event_id, rsvp_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_rsvp IS 'Index pour filtrage par statut RSVP';\n\n-- Index pour recherche par statut prsence (entre/sortie)\nDROP INDEX IF EXISTS idx_guests_event_attendance;\nCREATE INDEX idx_guests_event_attendance \nON guests(event_id, attendance_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_attendance IS 'Index pour filtrage par statut prsence';\n\n-- ============================================\n-- 4. INDEX FILES - Recherches par vnement/menu\n-- ============================================\nDROP INDEX IF EXISTS idx_files_event_menu;\nCREATE INDEX idx_files_event_menu \nON files(event_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_event_menu IS 'Index pour requtes fichiers par vnement/menu';\n\n-- Index pour recherches par user\nDROP INDEX IF EXISTS idx_files_user_menu_active;\nCREATE INDEX idx_files_user_menu_active \nON files(user_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_user_menu_active IS 'Index pour requtes fichiers par utilisateur';\n\n-- ============================================\n-- 5. INDEX EVENTS - Recherches par organisateur\n-- ============================================\n-- Index pour requtes dashboard (events + guests count)\nDROP INDEX IF EXISTS idx_events_organizer_active;\nCREATE INDEX idx_events_organizer_active \nON events(organizer_id, created_at DESC) \nWHERE is_active = true;\n\nCOMMENT ON INDEX idx_events_organizer_active IS 'Index optimis pour requtes dashboard';\n\n-- ============================================\n-- 6. INDEX GAME TABLES - Performance jeux\n-- ============================================\n-- Index pour participations par jeu\nDROP INDEX IF EXISTS idx_game_participations_game_completed;\nCREATE INDEX idx_game_participations_game_completed \nON game_participations(game_id, is_completed, total_score);\n\nCOMMENT ON INDEX idx_game_participations_game_completed IS 'Index pour calcul stats jeu';\n\n-- Index pour rponses rcentes\nDROP INDEX IF EXISTS idx_game_answers_participation_question;\nCREATE INDEX idx_game_answers_participation_question \nON game_answers(participation_id, question_id);\n\nCOMMENT ON INDEX idx_game_answers_participation_question IS 'Index couvrant pour vrification rponses';\n\n-- ============================================\n-- 7. OPTIMISATION: Dsactivation trigger synchrone game_stats\n-- ============================================\n-- Le trigger recalcule les stats  chaque rponse (trop coteux)\n-- Solution: Traitement asynchrone via job queue\n\nDROP TRIGGER IF EXISTS trigger_update_game_stats ON game_participations;\n\nCOMMENT ON TABLE game_participations IS 'Trigger synchrone game_stats dsactiv - utiliser job queue';\n\n-- ============================================\n-- 8. TABLE POUR STATS UPDATE JOBS\n-- ============================================\nCREATE TABLE IF NOT EXISTS game_stats_update_jobs (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID NOT NULL REFERENCES games(id) ON DELETE CASCADE,\n    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),\n    error_message TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    processed_at TIMESTAMP WITH TIME ZONE,\n    retry_count INTEGER DEFAULT 0\n);\n\n-- Index pour rcuprer les jobs pending\nCREATE INDEX idx_game_stats_jobs_pending ON game_stats_update_jobs(status, created_at) \nWHERE status = 'pending';\n\nCOMMENT ON TABLE game_stats_update_jobs IS 'File d''attente pour mise  jour async des stats de jeu';\n\n-- ============================================\n-- 9. FONCTION TRIGGER LGRE\n-- ============================================\nCREATE OR REPLACE FUNCTION queue_game_stats_update()\nRETURNS TRIGGER AS $$\nBEGIN\n    -- Insre juste un job au lieu de recalculer\n    INSERT INTO game_stats_update_jobs (game_id)\n    VALUES (COALESCE(NEW.game_id, OLD.game_id))\n    ON CONFLICT DO NOTHING; -- vite les doublons\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql';\n\n-- Trigger lger (async)\nDROP TRIGGER IF EXISTS trigger_queue_game_stats_update ON game_participations;\nCREATE TRIGGER trigger_queue_game_stats_update\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION queue_game_stats_update();\n\n-- ============================================\n-- 10. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Index de performance crs avec succs';\n    RAISE NOTICE 'Trigger game_stats synchrone remplac par version async';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"Applying migration: 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 19:02:11"}
{"0":"f","1":"u","10":"i","11":"n","12":" ","13":"i","14":"n","15":"d","16":"e","17":"x","18":" ","19":"e","2":"n","20":"x","21":"p","22":"r","23":"e","24":"s","25":"s","26":"i","27":"o","28":"n","29":" ","3":"c","30":"m","31":"u","32":"s","33":"t","34":" ","35":"b","36":"e","37":" ","38":"m","39":"a","4":"t","40":"r","41":"k","42":"e","43":"d","44":" ","45":"I","46":"M","47":"M","48":"U","49":"T","5":"i","50":"A","51":"B","52":"L","53":"E","6":"o","7":"n","8":"s","9":" ","level":"error","message":" Failed to apply migration 007_add_performance_indexes.sql:","service":"qrevent-backend","timestamp":"2026-02-05 19:02:13"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 19:02:13"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"Found 14 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"\n Migration to apply (007_add_performance_indexes.sql):","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"-- Migration: Ajout d'index de performance critiques\n-- Date: 2026-02-05\n-- Priorit: CRITIQUE\n-- Description: Optimise les requtes frquentes pour la monte en charge\n\n-- ============================================\n-- 1. INDEX QR CODES - Validation rapide\n-- ============================================\n-- Problme: Requte findByCode avec is_valid + expires_at fait un seq scan\n-- Impact: Chaque scan de QR (~1M/jour potentiel) est lent\n\nDROP INDEX IF EXISTS idx_qr_codes_validation;\nCREATE INDEX idx_qr_codes_validation \nON qr_codes(code, is_valid, expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_validation IS 'Index composite pour validation QR rapide';\n\n-- Index pour nettoyage des QR expirs (job de maintenance)\nDROP INDEX IF EXISTS idx_qr_codes_expiry_cleanup;\nCREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_codes(expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_expiry_cleanup IS 'Index pour job de nettoyage des QR expirs';\n\n-- ============================================\n-- 2. INDEX ATTENDANCE - Requtes par vnement\n-- ============================================\n-- Problme: findByEvent fait un seq scan + tri\n-- Impact: Dashboard lent avec beaucoup d'entres\n\nDROP INDEX IF EXISTS idx_attendance_event_timestamp;\nCREATE INDEX idx_attendance_event_timestamp \nON attendance(event_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_timestamp IS 'Index pour requtes attendance rcentes';\n\n-- Index couvrant pour viter le lookup\nDROP INDEX IF EXISTS idx_attendance_event_guest_timestamp;\nCREATE INDEX idx_attendance_event_guest_timestamp \nON attendance(event_id, guest_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_guest_timestamp IS 'Index couvrant pour requtes avec guest';\n\n-- Index pour statistiques par jour (reporting)\nDROP INDEX IF EXISTS idx_attendance_date;\nCREATE INDEX idx_attendance_date \nON attendance(event_id, DATE(timestamp), status);\n\nCOMMENT ON INDEX idx_attendance_date IS 'Index pour agrgations par jour';\n\n-- ============================================\n-- 3. INDEX GUESTS - Recherches frquentes\n-- ============================================\n-- Index pour recherche par statut RSVP (dashboard)\nDROP INDEX IF EXISTS idx_guests_event_rsvp;\nCREATE INDEX idx_guests_event_rsvp \nON guests(event_id, rsvp_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_rsvp IS 'Index pour filtrage par statut RSVP';\n\n-- Index pour recherche par statut prsence (entre/sortie)\nDROP INDEX IF EXISTS idx_guests_event_attendance;\nCREATE INDEX idx_guests_event_attendance \nON guests(event_id, attendance_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_attendance IS 'Index pour filtrage par statut prsence';\n\n-- ============================================\n-- 4. INDEX FILES - Recherches par vnement/menu\n-- ============================================\nDROP INDEX IF EXISTS idx_files_event_menu;\nCREATE INDEX idx_files_event_menu \nON files(event_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_event_menu IS 'Index pour requtes fichiers par vnement/menu';\n\n-- Index pour recherches par user\nDROP INDEX IF EXISTS idx_files_user_menu_active;\nCREATE INDEX idx_files_user_menu_active \nON files(user_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_user_menu_active IS 'Index pour requtes fichiers par utilisateur';\n\n-- ============================================\n-- 5. INDEX EVENTS - Recherches par organisateur\n-- ============================================\n-- Index pour requtes dashboard (events + guests count)\nDROP INDEX IF EXISTS idx_events_organizer_active;\nCREATE INDEX idx_events_organizer_active \nON events(organizer_id, created_at DESC) \nWHERE is_active = true;\n\nCOMMENT ON INDEX idx_events_organizer_active IS 'Index optimis pour requtes dashboard';\n\n-- ============================================\n-- 6. INDEX GAME TABLES - Performance jeux\n-- ============================================\n-- Index pour participations par jeu\nDROP INDEX IF EXISTS idx_game_participations_game_completed;\nCREATE INDEX idx_game_participations_game_completed \nON game_participations(game_id, is_completed, total_score);\n\nCOMMENT ON INDEX idx_game_participations_game_completed IS 'Index pour calcul stats jeu';\n\n-- Index pour rponses rcentes\nDROP INDEX IF EXISTS idx_game_answers_participation_question;\nCREATE INDEX idx_game_answers_participation_question \nON game_answers(participation_id, question_id);\n\nCOMMENT ON INDEX idx_game_answers_participation_question IS 'Index couvrant pour vrification rponses';\n\n-- ============================================\n-- 7. OPTIMISATION: Dsactivation trigger synchrone game_stats\n-- ============================================\n-- Le trigger recalcule les stats  chaque rponse (trop coteux)\n-- Solution: Traitement asynchrone via job queue\n\nDROP TRIGGER IF EXISTS trigger_update_game_stats ON game_participations;\n\nCOMMENT ON TABLE game_participations IS 'Trigger synchrone game_stats dsactiv - utiliser job queue';\n\n-- ============================================\n-- 8. TABLE POUR STATS UPDATE JOBS\n-- ============================================\nCREATE TABLE IF NOT EXISTS game_stats_update_jobs (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID NOT NULL REFERENCES games(id) ON DELETE CASCADE,\n    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),\n    error_message TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    processed_at TIMESTAMP WITH TIME ZONE,\n    retry_count INTEGER DEFAULT 0\n);\n\n-- Index pour rcuprer les jobs pending\nCREATE INDEX idx_game_stats_jobs_pending ON game_stats_update_jobs(status, created_at) \nWHERE status = 'pending';\n\nCOMMENT ON TABLE game_stats_update_jobs IS 'File d''attente pour mise  jour async des stats de jeu';\n\n-- ============================================\n-- 9. FONCTION TRIGGER LGRE\n-- ============================================\nCREATE OR REPLACE FUNCTION queue_game_stats_update()\nRETURNS TRIGGER AS $$\nDECLARE\n    v_game_id UUID;\nBEGIN\n    v_game_id := COALESCE(NEW.game_id, OLD.game_id);\n    \n    -- Insre juste un job si pas dj pending pour ce jeu\n    INSERT INTO game_stats_update_jobs (game_id, status, created_at)\n    SELECT v_game_id, 'pending', NOW()\n    WHERE NOT EXISTS (\n        SELECT 1 FROM game_stats_update_jobs \n        WHERE game_id = v_game_id AND status = 'pending'\n    );\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql' VOLATILE;\n\n-- Trigger lger (async)\nDROP TRIGGER IF EXISTS trigger_queue_game_stats_update ON game_participations;\nCREATE TRIGGER trigger_queue_game_stats_update\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION queue_game_stats_update();\n\n-- ============================================\n-- 10. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Index de performance crs avec succs';\n    RAISE NOTICE 'Trigger game_stats synchrone remplac par version async';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"Applying migration: 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 19:02:46"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_qr_codes_validation \nON qr_codes(...","service":"qrevent-backend","timestamp":"2026-02-05 19:02:46"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_co...","service":"qrevent-backend","timestamp":"2026-02-05 19:02:47"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_event_timestamp \nON at...","service":"qrevent-backend","timestamp":"2026-02-05 19:02:47"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_event_guest_timestamp ...","service":"qrevent-backend","timestamp":"2026-02-05 19:02:48"}
{"0":"f","1":"u","10":"i","11":"n","12":" ","13":"i","14":"n","15":"d","16":"e","17":"x","18":" ","19":"e","2":"n","20":"x","21":"p","22":"r","23":"e","24":"s","25":"s","26":"i","27":"o","28":"n","29":" ","3":"c","30":"m","31":"u","32":"s","33":"t","34":" ","35":"b","36":"e","37":" ","38":"m","39":"a","4":"t","40":"r","41":"k","42":"e","43":"d","44":" ","45":"I","46":"M","47":"M","48":"U","49":"T","5":"i","50":"A","51":"B","52":"L","53":"E","6":"o","7":"n","8":"s","9":" ","level":"error","message":" Failed to apply migration 007_add_performance_indexes.sql:","service":"qrevent-backend","timestamp":"2026-02-05 19:02:48"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 19:02:49"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"Found 14 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"\n Migration to apply (007_add_performance_indexes.sql):","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"-- Migration: Ajout d'index de performance critiques\n-- Date: 2026-02-05\n-- Priorit: CRITIQUE\n-- Description: Optimise les requtes frquentes pour la monte en charge\n\n-- ============================================\n-- 1. INDEX QR CODES - Validation rapide\n-- ============================================\n-- Problme: Requte findByCode avec is_valid + expires_at fait un seq scan\n-- Impact: Chaque scan de QR (~1M/jour potentiel) est lent\n\nDROP INDEX IF EXISTS idx_qr_codes_validation;\nCREATE INDEX idx_qr_codes_validation \nON qr_codes(code, is_valid, expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_validation IS 'Index composite pour validation QR rapide';\n\n-- Index pour nettoyage des QR expirs (job de maintenance)\nDROP INDEX IF EXISTS idx_qr_codes_expiry_cleanup;\nCREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_codes(expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_expiry_cleanup IS 'Index pour job de nettoyage des QR expirs';\n\n-- ============================================\n-- 2. INDEX ATTENDANCE - Requtes par vnement\n-- ============================================\n-- Problme: findByEvent fait un seq scan + tri\n-- Impact: Dashboard lent avec beaucoup d'entres\n\nDROP INDEX IF EXISTS idx_attendance_event_timestamp;\nCREATE INDEX idx_attendance_event_timestamp \nON attendance(event_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_timestamp IS 'Index pour requtes attendance rcentes';\n\n-- Index couvrant pour viter le lookup\nDROP INDEX IF EXISTS idx_attendance_event_guest_timestamp;\nCREATE INDEX idx_attendance_event_guest_timestamp \nON attendance(event_id, guest_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_guest_timestamp IS 'Index couvrant pour requtes avec guest';\n\n-- Index pour statistiques par jour (reporting) - sans DATE() pour viter immutable restriction\nDROP INDEX IF EXISTS idx_attendance_date;\nCREATE INDEX idx_attendance_date \nON attendance(event_id, timestamp, status);\n\nCOMMENT ON INDEX idx_attendance_date IS 'Index pour agrgations par jour';\n\n-- ============================================\n-- 3. INDEX GUESTS - Recherches frquentes\n-- ============================================\n-- Index pour recherche par statut RSVP (dashboard)\nDROP INDEX IF EXISTS idx_guests_event_rsvp;\nCREATE INDEX idx_guests_event_rsvp \nON guests(event_id, rsvp_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_rsvp IS 'Index pour filtrage par statut RSVP';\n\n-- Index pour recherche par statut prsence (entre/sortie)\nDROP INDEX IF EXISTS idx_guests_event_attendance;\nCREATE INDEX idx_guests_event_attendance \nON guests(event_id, attendance_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_attendance IS 'Index pour filtrage par statut prsence';\n\n-- ============================================\n-- 4. INDEX FILES - Recherches par vnement/menu\n-- ============================================\nDROP INDEX IF EXISTS idx_files_event_menu;\nCREATE INDEX idx_files_event_menu \nON files(event_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_event_menu IS 'Index pour requtes fichiers par vnement/menu';\n\n-- Index pour recherches par user\nDROP INDEX IF EXISTS idx_files_user_menu_active;\nCREATE INDEX idx_files_user_menu_active \nON files(user_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_user_menu_active IS 'Index pour requtes fichiers par utilisateur';\n\n-- ============================================\n-- 5. INDEX EVENTS - Recherches par organisateur\n-- ============================================\n-- Index pour requtes dashboard (events + guests count)\nDROP INDEX IF EXISTS idx_events_organizer_active;\nCREATE INDEX idx_events_organizer_active \nON events(organizer_id, created_at DESC) \nWHERE is_active = true;\n\nCOMMENT ON INDEX idx_events_organizer_active IS 'Index optimis pour requtes dashboard';\n\n-- ============================================\n-- 6. INDEX GAME TABLES - Performance jeux\n-- ============================================\n-- Index pour participations par jeu\nDROP INDEX IF EXISTS idx_game_participations_game_completed;\nCREATE INDEX idx_game_participations_game_completed \nON game_participations(game_id, is_completed, total_score);\n\nCOMMENT ON INDEX idx_game_participations_game_completed IS 'Index pour calcul stats jeu';\n\n-- Index pour rponses rcentes\nDROP INDEX IF EXISTS idx_game_answers_participation_question;\nCREATE INDEX idx_game_answers_participation_question \nON game_answers(participation_id, question_id);\n\nCOMMENT ON INDEX idx_game_answers_participation_question IS 'Index couvrant pour vrification rponses';\n\n-- ============================================\n-- 7. OPTIMISATION: Dsactivation trigger synchrone game_stats\n-- ============================================\n-- Le trigger recalcule les stats  chaque rponse (trop coteux)\n-- Solution: Traitement asynchrone via job queue\n\nDROP TRIGGER IF EXISTS trigger_update_game_stats ON game_participations;\n\nCOMMENT ON TABLE game_participations IS 'Trigger synchrone game_stats dsactiv - utiliser job queue';\n\n-- ============================================\n-- 8. TABLE POUR STATS UPDATE JOBS\n-- ============================================\nCREATE TABLE IF NOT EXISTS game_stats_update_jobs (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID NOT NULL REFERENCES games(id) ON DELETE CASCADE,\n    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),\n    error_message TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    processed_at TIMESTAMP WITH TIME ZONE,\n    retry_count INTEGER DEFAULT 0\n);\n\n-- Index pour rcuprer les jobs pending\nCREATE INDEX idx_game_stats_jobs_pending ON game_stats_update_jobs(status, created_at) \nWHERE status = 'pending';\n\nCOMMENT ON TABLE game_stats_update_jobs IS 'File d''attente pour mise  jour async des stats de jeu';\n\n-- ============================================\n-- 9. FONCTION TRIGGER LGRE\n-- ============================================\nCREATE OR REPLACE FUNCTION queue_game_stats_update()\nRETURNS TRIGGER AS $$\nDECLARE\n    v_game_id UUID;\nBEGIN\n    v_game_id := COALESCE(NEW.game_id, OLD.game_id);\n    \n    -- Insre juste un job si pas dj pending pour ce jeu\n    INSERT INTO game_stats_update_jobs (game_id, status, created_at)\n    SELECT v_game_id, 'pending', NOW()\n    WHERE NOT EXISTS (\n        SELECT 1 FROM game_stats_update_jobs \n        WHERE game_id = v_game_id AND status = 'pending'\n    );\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql' VOLATILE;\n\n-- Trigger lger (async)\nDROP TRIGGER IF EXISTS trigger_queue_game_stats_update ON game_participations;\nCREATE TRIGGER trigger_queue_game_stats_update\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION queue_game_stats_update();\n\n-- ============================================\n-- 10. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Index de performance crs avec succs';\n    RAISE NOTICE 'Trigger game_stats synchrone remplac par version async';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"Applying migration: 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 19:03:09"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_qr_codes_validation \nON qr_codes(...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:10"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_co...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:10"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_event_timestamp \nON at...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:11"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_event_guest_timestamp ...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:12"}
{"0":"c","1":"o","10":"_","11":"a","12":"c","13":"t","14":"i","15":"v","16":"e","17":"\"","18":" ","19":"d","2":"l","20":"o","21":"e","22":"s","23":" ","24":"n","25":"o","26":"t","27":" ","28":"e","29":"x","3":"u","30":"i","31":"s","32":"t","4":"m","5":"n","6":" ","7":"\"","8":"i","9":"s","level":"error","message":" Failed to apply migration 007_add_performance_indexes.sql:","service":"qrevent-backend","timestamp":"2026-02-05 19:03:13"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 19:03:13"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"Found 14 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"\n Migration to apply (007_add_performance_indexes.sql):","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"-- Migration: Ajout d'index de performance critiques\n-- Date: 2026-02-05\n-- Priorit: CRITIQUE\n-- Description: Optimise les requtes frquentes pour la monte en charge\n\n-- ============================================\n-- 1. INDEX QR CODES - Validation rapide\n-- ============================================\n-- Problme: Requte findByCode avec is_valid + expires_at fait un seq scan\n-- Impact: Chaque scan de QR (~1M/jour potentiel) est lent\n\nDROP INDEX IF EXISTS idx_qr_codes_validation;\nCREATE INDEX idx_qr_codes_validation \nON qr_codes(code, is_valid, expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_validation IS 'Index composite pour validation QR rapide';\n\n-- Index pour nettoyage des QR expirs (job de maintenance)\nDROP INDEX IF EXISTS idx_qr_codes_expiry_cleanup;\nCREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_codes(expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_expiry_cleanup IS 'Index pour job de nettoyage des QR expirs';\n\n-- ============================================\n-- 2. INDEX ATTENDANCE - Requtes par vnement\n-- ============================================\n-- Problme: findByEvent fait un seq scan + tri\n-- Impact: Dashboard lent avec beaucoup d'entres\n\nDROP INDEX IF EXISTS idx_attendance_event_timestamp;\nCREATE INDEX idx_attendance_event_timestamp \nON attendance(event_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_timestamp IS 'Index pour requtes attendance rcentes';\n\n-- Index couvrant pour viter le lookup\nDROP INDEX IF EXISTS idx_attendance_event_guest_timestamp;\nCREATE INDEX idx_attendance_event_guest_timestamp \nON attendance(event_id, guest_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_guest_timestamp IS 'Index couvrant pour requtes avec guest';\n\n-- Index pour statistiques par jour (reporting) - sans DATE() pour viter immutable restriction\nDROP INDEX IF EXISTS idx_attendance_date;\nCREATE INDEX idx_attendance_date \nON attendance(event_id, timestamp, status);\n\nCOMMENT ON INDEX idx_attendance_date IS 'Index pour agrgations par jour';\n\n-- ============================================\n-- 3. INDEX GUESTS - Recherches frquentes\n-- ============================================\n-- Index pour recherche par statut RSVP (dashboard)\nDROP INDEX IF EXISTS idx_guests_event_rsvp;\nCREATE INDEX idx_guests_event_rsvp \nON guests(event_id, rsvp_status);\n\nCOMMENT ON INDEX idx_guests_event_rsvp IS 'Index pour filtrage par statut RSVP';\n\n-- Index pour recherche par statut prsence (entre/sortie)\nDROP INDEX IF EXISTS idx_guests_event_attendance;\nCREATE INDEX idx_guests_event_attendance \nON guests(event_id, attendance_status);\n\nCOMMENT ON INDEX idx_guests_event_attendance IS 'Index pour filtrage par statut prsence';\n\n-- ============================================\n-- 4. INDEX FILES - Recherches par vnement/menu\n-- ============================================\nDROP INDEX IF EXISTS idx_files_event_menu;\nCREATE INDEX idx_files_event_menu \nON files(event_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_event_menu IS 'Index pour requtes fichiers par vnement/menu';\n\n-- Index pour recherches par user\nDROP INDEX IF EXISTS idx_files_user_menu_active;\nCREATE INDEX idx_files_user_menu_active \nON files(user_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_user_menu_active IS 'Index pour requtes fichiers par utilisateur';\n\n-- ============================================\n-- 5. INDEX EVENTS - Recherches par organisateur\n-- ============================================\n-- Index pour requtes dashboard (events + guests count)\nDROP INDEX IF EXISTS idx_events_organizer_active;\nCREATE INDEX idx_events_organizer_active \nON events(organizer_id, created_at DESC) \nWHERE is_active = true;\n\nCOMMENT ON INDEX idx_events_organizer_active IS 'Index optimis pour requtes dashboard';\n\n-- ============================================\n-- 6. INDEX GAME TABLES - Performance jeux\n-- ============================================\n-- Index pour participations par jeu\nDROP INDEX IF EXISTS idx_game_participations_game_completed;\nCREATE INDEX idx_game_participations_game_completed \nON game_participations(game_id, is_completed, total_score);\n\nCOMMENT ON INDEX idx_game_participations_game_completed IS 'Index pour calcul stats jeu';\n\n-- Index pour rponses rcentes\nDROP INDEX IF EXISTS idx_game_answers_participation_question;\nCREATE INDEX idx_game_answers_participation_question \nON game_answers(participation_id, question_id);\n\nCOMMENT ON INDEX idx_game_answers_participation_question IS 'Index couvrant pour vrification rponses';\n\n-- ============================================\n-- 7. OPTIMISATION: Dsactivation trigger synchrone game_stats\n-- ============================================\n-- Le trigger recalcule les stats  chaque rponse (trop coteux)\n-- Solution: Traitement asynchrone via job queue\n\nDROP TRIGGER IF EXISTS trigger_update_game_stats ON game_participations;\n\nCOMMENT ON TABLE game_participations IS 'Trigger synchrone game_stats dsactiv - utiliser job queue';\n\n-- ============================================\n-- 8. TABLE POUR STATS UPDATE JOBS\n-- ============================================\nCREATE TABLE IF NOT EXISTS game_stats_update_jobs (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID NOT NULL REFERENCES games(id) ON DELETE CASCADE,\n    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),\n    error_message TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    processed_at TIMESTAMP WITH TIME ZONE,\n    retry_count INTEGER DEFAULT 0\n);\n\n-- Index pour rcuprer les jobs pending\nCREATE INDEX idx_game_stats_jobs_pending ON game_stats_update_jobs(status, created_at) \nWHERE status = 'pending';\n\nCOMMENT ON TABLE game_stats_update_jobs IS 'File d''attente pour mise  jour async des stats de jeu';\n\n-- ============================================\n-- 9. FONCTION TRIGGER LGRE\n-- ============================================\nCREATE OR REPLACE FUNCTION queue_game_stats_update()\nRETURNS TRIGGER AS $$\nDECLARE\n    v_game_id UUID;\nBEGIN\n    v_game_id := COALESCE(NEW.game_id, OLD.game_id);\n    \n    -- Insre juste un job si pas dj pending pour ce jeu\n    INSERT INTO game_stats_update_jobs (game_id, status, created_at)\n    SELECT v_game_id, 'pending', NOW()\n    WHERE NOT EXISTS (\n        SELECT 1 FROM game_stats_update_jobs \n        WHERE game_id = v_game_id AND status = 'pending'\n    );\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql' VOLATILE;\n\n-- Trigger lger (async)\nDROP TRIGGER IF EXISTS trigger_queue_game_stats_update ON game_participations;\nCREATE TRIGGER trigger_queue_game_stats_update\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION queue_game_stats_update();\n\n-- ============================================\n-- 10. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Index de performance crs avec succs';\n    RAISE NOTICE 'Trigger game_stats synchrone remplac par version async';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"Applying migration: 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 19:03:44"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_qr_codes_validation \nON qr_codes(...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:45"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_co...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:45"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_event_timestamp \nON at...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:46"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_event_guest_timestamp ...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:47"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_date \nON attendance(ev...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:47"}
{"0":"r","1":"e","10":"g","11":"a","12":"m","13":"e","14":"_","15":"p","16":"a","17":"r","18":"t","19":"i","2":"l","20":"c","21":"i","22":"p","23":"a","24":"t","25":"i","26":"o","27":"n","28":"s","29":"\"","3":"a","30":" ","31":"d","32":"o","33":"e","34":"s","35":" ","36":"n","37":"o","38":"t","39":" ","4":"t","40":"e","41":"x","42":"i","43":"s","44":"t","5":"i","6":"o","7":"n","8":" ","9":"\"","level":"error","message":" Failed to apply migration 007_add_performance_indexes.sql:","service":"qrevent-backend","timestamp":"2026-02-05 19:03:51"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 19:03:51"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"Found 14 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"\n Migration to apply (006_add_games_tables.sql):","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"-- Migration: Ajout des tables pour le systme de jeux\n-- Date: 2026-02-05\n-- Description: Cration des tables games, game_questions, game_participations, game_scores\n\n-- Table des jeux\nCREATE TABLE IF NOT EXISTS games (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE NOT NULL,\n    name VARCHAR(200) NOT NULL,\n    type VARCHAR(50) NOT NULL CHECK (type IN ('quiz', 'puzzle', 'shoe_game', 'photo_scavenger', 'blind_test', 'twelve_months', 'memory', 'trivia')),\n    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'active', 'paused', 'completed')),\n    description TEXT,\n    settings JSONB DEFAULT '{}',\n    total_questions INTEGER DEFAULT 0,\n    players_count INTEGER DEFAULT 0,\n    avg_score DECIMAL(5,2) DEFAULT 0,\n    is_active BOOLEAN DEFAULT TRUE,\n    started_at TIMESTAMP WITH TIME ZONE,\n    ended_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des questions pour les jeux\nCREATE TABLE IF NOT EXISTS game_questions (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    question TEXT NOT NULL,\n    question_type VARCHAR(50) DEFAULT 'multiple_choice' CHECK (question_type IN ('multiple_choice', 'text', 'photo', 'boolean', 'ordering')),\n    options JSONB, -- Pour les questions  choix multiples: [{\"text\": \"Option 1\", \"isCorrect\": true}, ...]\n    correct_answer TEXT, -- Rponse correcte pour les questions texte\n    points INTEGER DEFAULT 1,\n    sort_order INTEGER DEFAULT 0,\n    media_url TEXT, -- URL d'image ou vido associe  la question\n    time_limit INTEGER, -- Temps limite en secondes (NULL = pas de limite)\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des participations aux jeux (pour les invits)\nCREATE TABLE IF NOT EXISTS game_participations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE NOT NULL,\n    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    completed_at TIMESTAMP WITH TIME ZONE,\n    total_score INTEGER DEFAULT 0,\n    correct_answers INTEGER DEFAULT 0,\n    total_answers INTEGER DEFAULT 0,\n    is_completed BOOLEAN DEFAULT FALSE,\n    UNIQUE(game_id, guest_id)\n);\n\n-- Table des rponses aux questions\nCREATE TABLE IF NOT EXISTS game_answers (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    participation_id UUID REFERENCES game_participations(id) ON DELETE CASCADE NOT NULL,\n    question_id UUID REFERENCES game_questions(id) ON DELETE CASCADE NOT NULL,\n    answer TEXT NOT NULL,\n    is_correct BOOLEAN DEFAULT FALSE,\n    points_earned INTEGER DEFAULT 0,\n    answered_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(participation_id, question_id)\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_games_event ON games(event_id);\nCREATE INDEX IF NOT EXISTS idx_games_type ON games(type);\nCREATE INDEX IF NOT EXISTS idx_games_status ON games(status);\nCREATE INDEX IF NOT EXISTS idx_game_questions_game ON game_questions(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_questions_sort ON game_questions(game_id, sort_order);\nCREATE INDEX IF NOT EXISTS idx_game_participations_game ON game_participations(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_participations_guest ON game_participations(guest_id);\nCREATE INDEX IF NOT EXISTS idx_game_answers_participation ON game_answers(participation_id);\n\n-- Trigger pour mettre  jour updated_at\nCREATE TRIGGER update_games_updated_at BEFORE UPDATE ON games FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_game_questions_updated_at BEFORE UPDATE ON game_questions FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n\n-- Fonction pour recalculer les statistiques d'un jeu\nCREATE OR REPLACE FUNCTION update_game_stats()\nRETURNS TRIGGER AS $$\nBEGIN\n    UPDATE games\n    SET \n        players_count = (\n            SELECT COUNT(DISTINCT guest_id) \n            FROM game_participations \n            WHERE game_id = COALESCE(NEW.game_id, OLD.game_id)\n        ),\n        avg_score = (\n            SELECT COALESCE(AVG(total_score), 0)\n            FROM game_participations \n            WHERE game_id = COALESCE(NEW.game_id, OLD.game_id) AND is_completed = TRUE\n        ),\n        updated_at = NOW()\n    WHERE id = COALESCE(NEW.game_id, OLD.game_id);\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql';\n\n-- Trigger pour mettre  jour les stats automatiquement\nCREATE TRIGGER trigger_update_game_stats\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION update_game_stats();\n\n-- Fonction pour mettre  jour le compteur de questions\nCREATE OR REPLACE FUNCTION update_game_question_count()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF TG_OP = 'INSERT' THEN\n        UPDATE games SET total_questions = total_questions + 1 WHERE id = NEW.game_id;\n        RETURN NEW;\n    ELSIF TG_OP = 'DELETE' THEN\n        UPDATE games SET total_questions = total_questions - 1 WHERE id = OLD.game_id;\n        RETURN OLD;\n    END IF;\n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql';\n\n-- Trigger pour le compteur de questions\nCREATE TRIGGER trigger_update_question_count\nAFTER INSERT OR DELETE ON game_questions\nFOR EACH ROW\nEXECUTE FUNCTION update_game_question_count();\n","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"Applying migration: 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 19:04:01"}
{"0":"r","1":"e","10":"g","11":"a","12":"m","13":"e","14":"s","15":"\"","16":" ","17":"d","18":"o","19":"e","2":"l","20":"s","21":" ","22":"n","23":"o","24":"t","25":" ","26":"e","27":"x","28":"i","29":"s","3":"a","30":"t","4":"t","5":"i","6":"o","7":"n","8":" ","9":"\"","level":"error","message":" Failed to apply migration 006_add_games_tables.sql:","service":"qrevent-backend","timestamp":"2026-02-05 19:04:02"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 19:04:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:04:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:07:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:08:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:09:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:11:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:11:36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:11:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:12:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:12:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:13:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:13:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:14:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:16:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:16:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:17:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:17:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:18:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:19:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:19:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:19:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:20:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:20:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:20:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:21:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:22:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:22:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:22:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:23:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:23:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:23:36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:23:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:23:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:24:07"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"Found 17 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"\n Migration to apply (006_add_games_tables.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"-- Migration: Ajout des tables pour le systme de jeux\n-- Date: 2026-02-05\n-- Description: Cration des tables games, game_questions, game_participations, game_scores\n\n-- Table des jeux\nCREATE TABLE IF NOT EXISTS games (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE NOT NULL,\n    name VARCHAR(200) NOT NULL,\n    type VARCHAR(50) NOT NULL CHECK (type IN ('quiz', 'puzzle', 'shoe_game', 'photo_scavenger', 'blind_test', 'twelve_months', 'memory', 'trivia')),\n    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'active', 'paused', 'completed')),\n    description TEXT,\n    settings JSONB DEFAULT '{}',\n    total_questions INTEGER DEFAULT 0,\n    players_count INTEGER DEFAULT 0,\n    avg_score DECIMAL(5,2) DEFAULT 0,\n    is_active BOOLEAN DEFAULT TRUE,\n    started_at TIMESTAMP WITH TIME ZONE,\n    ended_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des questions pour les jeux\nCREATE TABLE IF NOT EXISTS game_questions (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    question TEXT NOT NULL,\n    question_type VARCHAR(50) DEFAULT 'multiple_choice' CHECK (question_type IN ('multiple_choice', 'text', 'photo', 'boolean', 'ordering')),\n    options JSONB, -- Pour les questions  choix multiples: [{\"text\": \"Option 1\", \"isCorrect\": true}, ...]\n    correct_answer TEXT, -- Rponse correcte pour les questions texte\n    points INTEGER DEFAULT 1,\n    sort_order INTEGER DEFAULT 0,\n    media_url TEXT, -- URL d'image ou vido associe  la question\n    time_limit INTEGER, -- Temps limite en secondes (NULL = pas de limite)\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des participations aux jeux (pour les invits)\nCREATE TABLE IF NOT EXISTS game_participations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE NOT NULL,\n    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    completed_at TIMESTAMP WITH TIME ZONE,\n    total_score INTEGER DEFAULT 0,\n    correct_answers INTEGER DEFAULT 0,\n    total_answers INTEGER DEFAULT 0,\n    is_completed BOOLEAN DEFAULT FALSE,\n    UNIQUE(game_id, guest_id)\n);\n\n-- Table des rponses aux questions\nCREATE TABLE IF NOT EXISTS game_answers (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    participation_id UUID REFERENCES game_participations(id) ON DELETE CASCADE NOT NULL,\n    question_id UUID REFERENCES game_questions(id) ON DELETE CASCADE NOT NULL,\n    answer TEXT NOT NULL,\n    is_correct BOOLEAN DEFAULT FALSE,\n    points_earned INTEGER DEFAULT 0,\n    answered_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(participation_id, question_id)\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_games_event ON games(event_id);\nCREATE INDEX IF NOT EXISTS idx_games_type ON games(type);\nCREATE INDEX IF NOT EXISTS idx_games_status ON games(status);\nCREATE INDEX IF NOT EXISTS idx_game_questions_game ON game_questions(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_questions_sort ON game_questions(game_id, sort_order);\nCREATE INDEX IF NOT EXISTS idx_game_participations_game ON game_participations(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_participations_guest ON game_participations(guest_id);\nCREATE INDEX IF NOT EXISTS idx_game_answers_participation ON game_answers(participation_id);\n\n-- Trigger pour mettre  jour updated_at\nCREATE TRIGGER update_games_updated_at BEFORE UPDATE ON games FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_game_questions_updated_at BEFORE UPDATE ON game_questions FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n\n-- Fonction pour recalculer les statistiques d'un jeu\nCREATE OR REPLACE FUNCTION update_game_stats()\nRETURNS TRIGGER AS $$\nBEGIN\n    UPDATE games\n    SET \n        players_count = (\n            SELECT COUNT(DISTINCT guest_id) \n            FROM game_participations \n            WHERE game_id = COALESCE(NEW.game_id, OLD.game_id)\n        ),\n        avg_score = (\n            SELECT COALESCE(AVG(total_score), 0)\n            FROM game_participations \n            WHERE game_id = COALESCE(NEW.game_id, OLD.game_id) AND is_completed = TRUE\n        ),\n        updated_at = NOW()\n    WHERE id = COALESCE(NEW.game_id, OLD.game_id);\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql';\n\n-- Trigger pour mettre  jour les stats automatiquement\nCREATE TRIGGER trigger_update_game_stats\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION update_game_stats();\n\n-- Fonction pour mettre  jour le compteur de questions\nCREATE OR REPLACE FUNCTION update_game_question_count()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF TG_OP = 'INSERT' THEN\n        UPDATE games SET total_questions = total_questions + 1 WHERE id = NEW.game_id;\n        RETURN NEW;\n    ELSIF TG_OP = 'DELETE' THEN\n        UPDATE games SET total_questions = total_questions - 1 WHERE id = OLD.game_id;\n        RETURN OLD;\n    END IF;\n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql';\n\n-- Trigger pour le compteur de questions\nCREATE TRIGGER trigger_update_question_count\nAFTER INSERT OR DELETE ON game_questions\nFOR EACH ROW\nEXECUTE FUNCTION update_game_question_count();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"Applying migration: 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:24:31"}
{"0":"r","1":"e","10":"g","11":"a","12":"m","13":"e","14":"s","15":"\"","16":" ","17":"d","18":"o","19":"e","2":"l","20":"s","21":" ","22":"n","23":"o","24":"t","25":" ","26":"e","27":"x","28":"i","29":"s","3":"a","30":"t","4":"t","5":"i","6":"o","7":"n","8":" ","9":"\"","level":"error","message":" Failed to apply migration 006_add_games_tables.sql:","service":"qrevent-backend","timestamp":"2026-02-05 21:24:31"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 21:24:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:24:41"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"Found 17 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"\n Migration to apply (001_create_tables.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"-- SQL script to create tables for Qrevent application\n\n-- Create users table\nCREATE TABLE IF NOT EXISTS users (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    email VARCHAR(255) UNIQUE NOT NULL,\n    password_hash TEXT NOT NULL,\n    role VARCHAR(50) DEFAULT 'organizer',\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create events table\nCREATE TABLE IF NOT EXISTS events (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    title VARCHAR(200) NOT NULL,\n    description TEXT NOT NULL,\n    date TIMESTAMP WITH TIME ZONE NOT NULL,\n    location JSONB, -- Store address and coordinates\n    organizer_id UUID REFERENCES users(id) ON DELETE CASCADE,\n    cover_image TEXT,\n    banner_image TEXT,\n    is_active BOOLEAN DEFAULT TRUE,\n    settings JSONB DEFAULT '{\"enableRSVP\": true, \"enableGames\": true, \"enablePhotoGallery\": true, \"enableGuestBook\": true, \"enableQRVerification\": true}',\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create guests table\nCREATE TABLE IF NOT EXISTS guests (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    first_name VARCHAR(50) NOT NULL,\n    last_name VARCHAR(50) NOT NULL,\n    email VARCHAR(255) NOT NULL,\n    phone VARCHAR(20),\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE,\n    qr_code VARCHAR(50) UNIQUE,\n    qr_generated_at TIMESTAMP WITH TIME ZONE,\n    qr_expires_at TIMESTAMP WITH TIME ZONE,\n    rsvp_status VARCHAR(20) DEFAULT 'pending' CHECK (rsvp_status IN ('pending', 'accepted', 'declined')),\n    attendance_status VARCHAR(20) DEFAULT 'not_arrived' CHECK (attendance_status IN ('not_arrived', 'arrived', 'left')),\n    attendance_time TIMESTAMP WITH TIME ZONE,\n    dietary_restrictions VARCHAR(200),\n    plus_one BOOLEAN DEFAULT FALSE,\n    guest_plus_one JSONB, -- Store first_name and last_name for plus one\n    notes TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(event_id, email) -- Each email can only be registered once per event\n);\n\n-- Create qr_codes table\nCREATE TABLE IF NOT EXISTS qr_codes (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    code VARCHAR(50) UNIQUE NOT NULL,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE,\n    generated_by UUID REFERENCES users(id),\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    expires_at TIMESTAMP WITH TIME ZONE NOT NULL,\n    is_valid BOOLEAN DEFAULT TRUE,\n    scan_count INTEGER DEFAULT 0,\n    last_scanned_at TIMESTAMP WITH TIME ZONE,\n    invalidated_reason TEXT,\n    invalidated_at TIMESTAMP WITH TIME ZONE\n);\n\n-- Create attendance table\nCREATE TABLE IF NOT EXISTS attendance (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE,\n    qr_code VARCHAR(50) NOT NULL,\n    verified_by UUID REFERENCES users(id),\n    timestamp TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    status VARCHAR(20) NOT NULL CHECK (status IN ('arrived', 'left')),\n    location JSONB, -- Store coordinates and IP if needed\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create indexes for better performance\nCREATE INDEX IF NOT EXISTS idx_events_organizer ON events(organizer_id);\nCREATE INDEX IF NOT EXISTS idx_events_date ON events(date);\nCREATE INDEX IF NOT EXISTS idx_guests_event ON guests(event_id);\nCREATE INDEX IF NOT EXISTS idx_guests_email ON guests(email);\nCREATE INDEX IF NOT EXISTS idx_qr_codes_code ON qr_codes(code);\nCREATE INDEX IF NOT EXISTS idx_qr_codes_guest ON qr_codes(guest_id);\nCREATE INDEX IF NOT EXISTS idx_attendance_event ON attendance(event_id);\nCREATE INDEX IF NOT EXISTS idx_attendance_guest ON attendance(guest_id);\nCREATE INDEX IF NOT EXISTS idx_attendance_timestamp ON attendance(timestamp);\n\n-- Create a function to update the updated_at column\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create triggers to automatically update the updated_at column\nCREATE TRIGGER update_users_updated_at BEFORE UPDATE ON users FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_events_updated_at BEFORE UPDATE ON events FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_guests_updated_at BEFORE UPDATE ON guests FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_qr_codes_updated_at BEFORE UPDATE ON qr_codes FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"Applying migration: 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:24:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:24:49"}
{"0":"s","1":"y","10":"o","11":"r","12":" ","13":"a","14":"t","15":" ","16":"o","17":"r","18":" ","19":"n","2":"n","20":"e","21":"a","22":"r","23":" ","24":"\"","25":"R","26":"E","27":"T","28":"U","29":"R","3":"t","30":"N","31":"\"","4":"a","5":"x","6":" ","7":"e","8":"r","9":"r","level":"error","message":" Failed to apply migration 001_create_tables.sql:","service":"qrevent-backend","timestamp":"2026-02-05 21:24:51"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 21:24:51"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"\n Migration to apply (006_add_games_tables_fixed.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"-- Migration: Ajout des tables pour le systme de jeux (version simplifie)\n-- Date: 2026-02-05\n\n-- Crer la fonction update_updated_at_column si elle n'existe pas\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Table des jeux\nCREATE TABLE IF NOT EXISTS games (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE NOT NULL,\n    name VARCHAR(200) NOT NULL,\n    type VARCHAR(50) NOT NULL CHECK (type IN ('quiz', 'puzzle', 'shoe_game', 'photo_scavenger', 'blind_test', 'twelve_months', 'memory', 'trivia')),\n    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'active', 'paused', 'completed')),\n    description TEXT,\n    settings JSONB DEFAULT '{}',\n    total_questions INTEGER DEFAULT 0,\n    players_count INTEGER DEFAULT 0,\n    avg_score DECIMAL(5,2) DEFAULT 0,\n    is_active BOOLEAN DEFAULT TRUE,\n    started_at TIMESTAMP WITH TIME ZONE,\n    ended_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des questions pour les jeux\nCREATE TABLE IF NOT EXISTS game_questions (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    question TEXT NOT NULL,\n    question_type VARCHAR(50) DEFAULT 'multiple_choice' CHECK (question_type IN ('multiple_choice', 'text', 'photo', 'boolean', 'ordering')),\n    options JSONB,\n    correct_answer TEXT,\n    points INTEGER DEFAULT 1,\n    sort_order INTEGER DEFAULT 0,\n    media_url TEXT,\n    time_limit INTEGER,\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des participations aux jeux\nCREATE TABLE IF NOT EXISTS game_participations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE NOT NULL,\n    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    completed_at TIMESTAMP WITH TIME ZONE,\n    total_score INTEGER DEFAULT 0,\n    correct_answers INTEGER DEFAULT 0,\n    total_answers INTEGER DEFAULT 0,\n    is_completed BOOLEAN DEFAULT FALSE,\n    UNIQUE(game_id, guest_id)\n);\n\n-- Table des rponses aux questions\nCREATE TABLE IF NOT EXISTS game_answers (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    participation_id UUID REFERENCES game_participations(id) ON DELETE CASCADE NOT NULL,\n    question_id UUID REFERENCES game_questions(id) ON DELETE CASCADE NOT NULL,\n    answer TEXT NOT NULL,\n    is_correct BOOLEAN DEFAULT FALSE,\n    points_earned INTEGER DEFAULT 0,\n    answered_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(participation_id, question_id)\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_games_event ON games(event_id);\nCREATE INDEX IF NOT EXISTS idx_games_type ON games(type);\nCREATE INDEX IF NOT EXISTS idx_games_status ON games(status);\nCREATE INDEX IF NOT EXISTS idx_game_questions_game ON game_questions(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_questions_sort ON game_questions(game_id, sort_order);\nCREATE INDEX IF NOT EXISTS idx_game_participations_game ON game_participations(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_participations_guest ON game_participations(guest_id);\nCREATE INDEX IF NOT EXISTS idx_game_answers_participation ON game_answers(participation_id);\n\n-- Trigger pour mettre  jour updated_at sur games\nDROP TRIGGER IF EXISTS update_games_updated_at ON games;\nCREATE TRIGGER update_games_updated_at BEFORE UPDATE ON games FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n\n-- Trigger pour mettre  jour updated_at sur game_questions\nDROP TRIGGER IF EXISTS update_game_questions_updated_at ON game_questions;\nCREATE TRIGGER update_game_questions_updated_at BEFORE UPDATE ON game_questions FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"Applying migration: 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:25:13"}
{"0":"s","1":"y","10":"o","11":"r","12":" ","13":"a","14":"t","15":" ","16":"o","17":"r","18":" ","19":"n","2":"n","20":"e","21":"a","22":"r","23":" ","24":"\"","25":"R","26":"E","27":"T","28":"U","29":"R","3":"t","30":"N","31":"\"","4":"a","5":"x","6":" ","7":"e","8":"r","9":"r","level":"error","message":" Failed to apply migration 006_add_games_tables_fixed.sql:","service":"qrevent-backend","timestamp":"2026-02-05 21:25:13"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 21:25:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:25:25"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"\n Migration to apply (006_add_games_tables_fixed.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"-- Migration: Ajout des tables pour le systme de jeux (version simplifie)\n-- Date: 2026-02-05\n\n-- Crer la fonction update_updated_at_column si elle n'existe pas\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Table des jeux\nCREATE TABLE IF NOT EXISTS games (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE NOT NULL,\n    name VARCHAR(200) NOT NULL,\n    type VARCHAR(50) NOT NULL CHECK (type IN ('quiz', 'puzzle', 'shoe_game', 'photo_scavenger', 'blind_test', 'twelve_months', 'memory', 'trivia')),\n    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'active', 'paused', 'completed')),\n    description TEXT,\n    settings JSONB DEFAULT '{}',\n    total_questions INTEGER DEFAULT 0,\n    players_count INTEGER DEFAULT 0,\n    avg_score DECIMAL(5,2) DEFAULT 0,\n    is_active BOOLEAN DEFAULT TRUE,\n    started_at TIMESTAMP WITH TIME ZONE,\n    ended_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des questions pour les jeux\nCREATE TABLE IF NOT EXISTS game_questions (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    question TEXT NOT NULL,\n    question_type VARCHAR(50) DEFAULT 'multiple_choice' CHECK (question_type IN ('multiple_choice', 'text', 'photo', 'boolean', 'ordering')),\n    options JSONB,\n    correct_answer TEXT,\n    points INTEGER DEFAULT 1,\n    sort_order INTEGER DEFAULT 0,\n    media_url TEXT,\n    time_limit INTEGER,\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des participations aux jeux\nCREATE TABLE IF NOT EXISTS game_participations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE NOT NULL,\n    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    completed_at TIMESTAMP WITH TIME ZONE,\n    total_score INTEGER DEFAULT 0,\n    correct_answers INTEGER DEFAULT 0,\n    total_answers INTEGER DEFAULT 0,\n    is_completed BOOLEAN DEFAULT FALSE,\n    UNIQUE(game_id, guest_id)\n);\n\n-- Table des rponses aux questions\nCREATE TABLE IF NOT EXISTS game_answers (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    participation_id UUID REFERENCES game_participations(id) ON DELETE CASCADE NOT NULL,\n    question_id UUID REFERENCES game_questions(id) ON DELETE CASCADE NOT NULL,\n    answer TEXT NOT NULL,\n    is_correct BOOLEAN DEFAULT FALSE,\n    points_earned INTEGER DEFAULT 0,\n    answered_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(participation_id, question_id)\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_games_event ON games(event_id);\nCREATE INDEX IF NOT EXISTS idx_games_type ON games(type);\nCREATE INDEX IF NOT EXISTS idx_games_status ON games(status);\nCREATE INDEX IF NOT EXISTS idx_game_questions_game ON game_questions(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_questions_sort ON game_questions(game_id, sort_order);\nCREATE INDEX IF NOT EXISTS idx_game_participations_game ON game_participations(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_participations_guest ON game_participations(guest_id);\nCREATE INDEX IF NOT EXISTS idx_game_answers_participation ON game_answers(participation_id);\n\n-- Trigger pour mettre  jour updated_at sur games\nDROP TRIGGER IF EXISTS update_games_updated_at ON games;\nCREATE TRIGGER update_games_updated_at BEFORE UPDATE ON games FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n\n-- Trigger pour mettre  jour updated_at sur game_questions\nDROP TRIGGER IF EXISTS update_game_questions_updated_at ON game_questions;\nCREATE TRIGGER update_game_questions_updated_at BEFORE UPDATE ON game_questions FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"Applying migration: 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:25:29"}
{"level":"info","message":" Migration applied successfully: 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:29"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:25:30"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:29:34"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:34"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:29:35"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:29:43"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:43"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:29:43"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"\n Migration to apply (006_create_families_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"-- Migration: Create families table\n-- Description: Add table to store family groups for invitations\n\n-- Create families table\nCREATE TABLE IF NOT EXISTS families (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    members TEXT[], -- Array of member names\n    user_id UUID REFERENCES users(id) ON DELETE CASCADE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by user\nCREATE INDEX IF NOT EXISTS idx_families_user ON families(user_id);\n\n-- Create trigger to automatically update the updated_at column\nCREATE TRIGGER update_families_updated_at BEFORE UPDATE ON families FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"Applying migration: 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:29:53"}
{"level":"info","message":" Migration applied successfully: 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:54"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:29:55"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"\n Migration to apply (006_add_games_tables_fixed.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"-- Migration: Ajout des tables pour le systme de jeux (version simplifie)\n-- Date: 2026-02-05\n\n-- Crer la fonction update_updated_at_column si elle n'existe pas\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Table des jeux\nCREATE TABLE IF NOT EXISTS games (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE NOT NULL,\n    name VARCHAR(200) NOT NULL,\n    type VARCHAR(50) NOT NULL CHECK (type IN ('quiz', 'puzzle', 'shoe_game', 'photo_scavenger', 'blind_test', 'twelve_months', 'memory', 'trivia')),\n    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'active', 'paused', 'completed')),\n    description TEXT,\n    settings JSONB DEFAULT '{}',\n    total_questions INTEGER DEFAULT 0,\n    players_count INTEGER DEFAULT 0,\n    avg_score DECIMAL(5,2) DEFAULT 0,\n    is_active BOOLEAN DEFAULT TRUE,\n    started_at TIMESTAMP WITH TIME ZONE,\n    ended_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des questions pour les jeux\nCREATE TABLE IF NOT EXISTS game_questions (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    question TEXT NOT NULL,\n    question_type VARCHAR(50) DEFAULT 'multiple_choice' CHECK (question_type IN ('multiple_choice', 'text', 'photo', 'boolean', 'ordering')),\n    options JSONB,\n    correct_answer TEXT,\n    points INTEGER DEFAULT 1,\n    sort_order INTEGER DEFAULT 0,\n    media_url TEXT,\n    time_limit INTEGER,\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des participations aux jeux\nCREATE TABLE IF NOT EXISTS game_participations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE NOT NULL,\n    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    completed_at TIMESTAMP WITH TIME ZONE,\n    total_score INTEGER DEFAULT 0,\n    correct_answers INTEGER DEFAULT 0,\n    total_answers INTEGER DEFAULT 0,\n    is_completed BOOLEAN DEFAULT FALSE,\n    UNIQUE(game_id, guest_id)\n);\n\n-- Table des rponses aux questions\nCREATE TABLE IF NOT EXISTS game_answers (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    participation_id UUID REFERENCES game_participations(id) ON DELETE CASCADE NOT NULL,\n    question_id UUID REFERENCES game_questions(id) ON DELETE CASCADE NOT NULL,\n    answer TEXT NOT NULL,\n    is_correct BOOLEAN DEFAULT FALSE,\n    points_earned INTEGER DEFAULT 0,\n    answered_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(participation_id, question_id)\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_games_event ON games(event_id);\nCREATE INDEX IF NOT EXISTS idx_games_type ON games(type);\nCREATE INDEX IF NOT EXISTS idx_games_status ON games(status);\nCREATE INDEX IF NOT EXISTS idx_game_questions_game ON game_questions(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_questions_sort ON game_questions(game_id, sort_order);\nCREATE INDEX IF NOT EXISTS idx_game_participations_game ON game_participations(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_participations_guest ON game_participations(guest_id);\nCREATE INDEX IF NOT EXISTS idx_game_answers_participation ON game_answers(participation_id);\n\n-- Trigger pour mettre  jour updated_at sur games\nDROP TRIGGER IF EXISTS update_games_updated_at ON games;\nCREATE TRIGGER update_games_updated_at BEFORE UPDATE ON games FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n\n-- Trigger pour mettre  jour updated_at sur game_questions\nDROP TRIGGER IF EXISTS update_game_questions_updated_at ON game_questions;\nCREATE TRIGGER update_game_questions_updated_at BEFORE UPDATE ON game_questions FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"Applying migration: 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:01"}
{"level":"info","message":" Migration applied successfully: 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:02"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:02"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"\n Migration to apply (007_create_family_invitations.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"-- Migration: Create family invitations and RSVP tables\n-- Description: Add tables to manage family invitations and their RSVP responses\n\n-- Create family_invitations table (links families to events with QR codes)\nCREATE TABLE IF NOT EXISTS family_invitations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    family_id UUID REFERENCES families(id) ON DELETE CASCADE,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE,\n    user_id UUID REFERENCES users(id) ON DELETE CASCADE,\n    invited_count INTEGER NOT NULL DEFAULT 1,\n    qr_code VARCHAR(100) UNIQUE NOT NULL,\n    qr_expires_at TIMESTAMP WITH TIME ZONE,\n    is_valid BOOLEAN DEFAULT TRUE,\n    scan_count INTEGER DEFAULT 0,\n    last_scanned_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(family_id, event_id) -- One invitation per family per event\n);\n\n-- Create family_rsvp table (stores individual responses from family members)\nCREATE TABLE IF NOT EXISTS family_rsvp (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    family_invitation_id UUID REFERENCES family_invitations(id) ON DELETE CASCADE,\n    member_name VARCHAR(100) NOT NULL,\n    will_attend BOOLEAN DEFAULT NULL, -- NULL = not responded, TRUE = attending, FALSE = not attending\n    dietary_restrictions TEXT,\n    notes TEXT,\n    responded_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create indexes for better performance\nCREATE INDEX IF NOT EXISTS idx_family_invitations_family ON family_invitations(family_id);\nCREATE INDEX IF NOT EXISTS idx_family_invitations_event ON family_invitations(event_id);\nCREATE INDEX IF NOT EXISTS idx_family_invitations_qr ON family_invitations(qr_code);\nCREATE INDEX IF NOT EXISTS idx_family_invitations_user ON family_invitations(user_id);\nCREATE INDEX IF NOT EXISTS idx_family_rsvp_invitation ON family_rsvp(family_invitation_id);\n\n-- Create triggers for updated_at\nCREATE TRIGGER update_family_invitations_updated_at BEFORE UPDATE ON family_invitations FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_family_rsvp_updated_at BEFORE UPDATE ON family_rsvp FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"Applying migration: 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":" Migration applied successfully: 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"\n Migration to apply (008_add_dashboard_optimizations.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"-- Migration: Optimisations Dashboard et vues matrialises\n-- Date: 2026-02-05\n-- Priorit: HAUTE\n-- Description: limine les requtes N+1 et acclre les rapports\n\n-- ============================================\n-- 1. VUE MATRIALISE: Rsum par vnement\n-- ============================================\n-- limine les requtes N+1 dans le dashboard\n\nDROP MATERIALIZED VIEW IF EXISTS mv_event_summary CASCADE;\n\nCREATE MATERIALIZED VIEW mv_event_summary AS\nSELECT \n    e.id as event_id,\n    e.title,\n    e.organizer_id,\n    e.date,\n    e.is_active,\n    e.created_at,\n    -- Compteurs guests\n    COUNT(DISTINCT g.id) as total_guests,\n    COUNT(DISTINCT CASE WHEN g.rsvp_status = 'accepted' THEN g.id END) as confirmed_guests,\n    COUNT(DISTINCT CASE WHEN g.rsvp_status = 'declined' THEN g.id END) as declined_guests,\n    COUNT(DISTINCT CASE WHEN g.rsvp_status = 'pending' THEN g.id END) as pending_guests,\n    -- Compteurs prsence\n    COUNT(DISTINCT CASE WHEN g.attendance_status = 'arrived' THEN g.id END) as arrived_guests,\n    COUNT(DISTINCT CASE WHEN g.attendance_status = 'left' THEN g.id END) as left_guests,\n    -- Dernire activit\n    MAX(g.updated_at) as last_guest_update,\n    MAX(a.timestamp) as last_attendance\nFROM events e\nLEFT JOIN guests g ON g.event_id = e.id AND (g.is_active = true OR g.is_active IS NULL)\nLEFT JOIN attendance a ON a.event_id = e.id\nWHERE e.is_active = true\nGROUP BY e.id, e.title, e.organizer_id, e.date, e.is_active, e.created_at;\n\n-- Index sur la vue matrialise\nCREATE UNIQUE INDEX idx_mv_event_summary_event_id ON mv_event_summary(event_id);\nCREATE INDEX idx_mv_event_summary_organizer ON mv_event_summary(organizer_id);\n\nCOMMENT ON MATERIALIZED VIEW mv_event_summary IS 'Vue matrialise pour dashboard - rafrachir toutes les 5 min';\n\n-- ============================================\n-- 2. FONCTION DE RAFRACHISSEMENT\n-- ============================================\nCREATE OR REPLACE FUNCTION refresh_event_summary()\nRETURNS void AS $$\nBEGIN\n    REFRESH MATERIALIZED VIEW CONCURRENTLY mv_event_summary;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- ============================================\n-- 3. VUE MATRIALISE: Statistiques QR Codes\n-- ============================================\nDROP MATERIALIZED VIEW IF EXISTS mv_qr_code_stats CASCADE;\n\nCREATE MATERIALIZED VIEW mv_qr_code_stats AS\nSELECT \n    event_id,\n    COUNT(*) as total_qr_codes,\n    COUNT(*) FILTER (WHERE is_valid = true AND expires_at > NOW()) as active_qr_codes,\n    COUNT(*) FILTER (WHERE is_valid = false) as invalidated_qr_codes,\n    COUNT(*) FILTER (WHERE expires_at <= NOW()) as expired_qr_codes,\n    COALESCE(SUM(scan_count), 0) as total_scans,\n    MAX(last_scanned_at) as last_scan_at\nFROM qr_codes\nGROUP BY event_id;\n\nCREATE UNIQUE INDEX idx_mv_qr_code_stats_event ON mv_qr_code_stats(event_id);\n\nCOMMENT ON MATERIALIZED VIEW mv_qr_code_stats IS 'Stats QR codes par vnement';\n\n-- ============================================\n-- 4. VUE MATRIALISE: Stats Jeux\n-- ============================================\nDROP MATERIALIZED VIEW IF EXISTS mv_game_stats CASCADE;\n\nCREATE MATERIALIZED VIEW mv_game_stats AS\nSELECT \n    g.id as game_id,\n    g.event_id,\n    g.name,\n    g.type,\n    g.status,\n    COUNT(DISTINCT gp.guest_id) as player_count,\n    COUNT(DISTINCT CASE WHEN gp.is_completed THEN gp.guest_id END) as completed_count,\n    COALESCE(AVG(gp.total_score) FILTER (WHERE gp.is_completed), 0) as avg_score,\n    MAX(gp.total_score) as max_score,\n    COUNT(DISTINCT ga.id) as total_answers,\n    COUNT(DISTINCT CASE WHEN ga.is_correct THEN ga.id END) as correct_answers\nFROM games g\nLEFT JOIN game_participations gp ON gp.game_id = g.id\nLEFT JOIN game_answers ga ON ga.participation_id = gp.id\nWHERE g.is_active = true\nGROUP BY g.id, g.event_id, g.name, g.type, g.status;\n\nCREATE UNIQUE INDEX idx_mv_game_stats_game ON mv_game_stats(game_id);\nCREATE INDEX idx_mv_game_stats_event ON mv_game_stats(event_id);\n\nCOMMENT ON MATERIALIZED VIEW mv_game_stats IS 'Stats jeux calcules - remplace le trigger synchrone';\n\n-- ============================================\n-- 5. FONCTION: Rcuprer dashboard summary optimis\n-- ============================================\nCREATE OR REPLACE FUNCTION get_dashboard_summary(p_organizer_id UUID)\nRETURNS TABLE (\n    total_events BIGINT,\n    total_guests BIGINT,\n    confirmed_guests BIGINT,\n    pending_guests BIGINT,\n    declined_guests BIGINT,\n    arrived_guests BIGINT\n) AS $$\nBEGIN\n    RETURN QUERY\n    SELECT \n        COUNT(DISTINCT es.event_id),\n        COALESCE(SUM(es.total_guests), 0),\n        COALESCE(SUM(es.confirmed_guests), 0),\n        COALESCE(SUM(es.pending_guests), 0),\n        COALESCE(SUM(es.declined_guests), 0),\n        COALESCE(SUM(es.arrived_guests), 0)\n    FROM mv_event_summary es\n    WHERE es.organizer_id = p_organizer_id;\nEND;\n$$ LANGUAGE plpgsql STABLE;\n\nCOMMENT ON FUNCTION get_dashboard_summary IS 'Fonction optimise pour le dashboard - utilise vue matrialise';\n\n-- ============================================\n-- 6. FONCTION: Liste events avec stats (remplace N+1)\n-- ============================================\nCREATE OR REPLACE FUNCTION get_events_with_stats(p_organizer_id UUID)\nRETURNS TABLE (\n    event_id UUID,\n    title VARCHAR,\n    event_date TIMESTAMP WITH TIME ZONE,\n    location JSONB,\n    total_guests BIGINT,\n    confirmed_guests BIGINT,\n    pending_guests BIGINT,\n    declined_guests BIGINT\n) AS $$\nBEGIN\n    RETURN QUERY\n    SELECT \n        es.event_id,\n        es.title,\n        es.date,\n        e.location,\n        es.total_guests,\n        es.confirmed_guests,\n        es.pending_guests,\n        es.declined_guests\n    FROM mv_event_summary es\n    JOIN events e ON e.id = es.event_id\n    WHERE es.organizer_id = p_organizer_id\n    ORDER BY es.created_at DESC;\nEND;\n$$ LANGUAGE plpgsql STABLE;\n\nCOMMENT ON FUNCTION get_events_with_stats IS 'Rcupre events avec stats en une requte';\n\n-- ============================================\n-- 7. INDEX POUR RECHERCHE FULL-TEXT\n-- ============================================\n-- Ajout de recherche textuelle sur guests (nom/prnom/email)\n\nALTER TABLE guests ADD COLUMN IF NOT EXISTS search_vector tsvector;\n\nUPDATE guests SET search_vector = \n    setweight(to_tsvector('simple', COALESCE(first_name, '')), 'A') ||\n    setweight(to_tsvector('simple', COALESCE(last_name, '')), 'A') ||\n    setweight(to_tsvector('simple', COALESCE(email, '')), 'B');\n\nCREATE INDEX idx_guests_search ON guests USING GIN (search_vector);\n\n-- Trigger pour maintenir le search_vector  jour\nCREATE OR REPLACE FUNCTION update_guest_search_vector()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.search_vector := \n        setweight(to_tsvector('simple', COALESCE(NEW.first_name, '')), 'A') ||\n        setweight(to_tsvector('simple', COALESCE(NEW.last_name, '')), 'A') ||\n        setweight(to_tsvector('simple', COALESCE(NEW.email, '')), 'B');\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nDROP TRIGGER IF EXISTS trigger_update_guest_search ON guests;\nCREATE TRIGGER trigger_update_guest_search\n    BEFORE INSERT OR UPDATE ON guests\n    FOR EACH ROW\n    EXECUTE FUNCTION update_guest_search_vector();\n\nCOMMENT ON FUNCTION update_guest_search_vector IS 'Met  jour le search vector pour recherche full-text';\n\n-- ============================================\n-- 8. TABLE: Cache pour rsultats de requtes lourdes\n-- ============================================\nCREATE TABLE IF NOT EXISTS query_result_cache (\n    cache_key VARCHAR(255) PRIMARY KEY,\n    result_data JSONB NOT NULL,\n    expires_at TIMESTAMP WITH TIME ZONE NOT NULL,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\nCREATE INDEX idx_query_cache_expires ON query_result_cache(expires_at);\n\n-- Fonction de nettoyage du cache\nCREATE OR REPLACE FUNCTION cleanup_query_cache()\nRETURNS void AS $$\nBEGIN\n    DELETE FROM query_result_cache WHERE expires_at < NOW();\nEND;\n$$ LANGUAGE plpgsql;\n\nCOMMENT ON TABLE query_result_cache IS 'Cache applicatif pour rsultats de requtes coteuses';\n\n-- ============================================\n-- 9. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Vues matrialises cres: mv_event_summary, mv_qr_code_stats, mv_game_stats';\n    RAISE NOTICE 'Fonctions optimises cres pour dashboard';\n    RAISE NOTICE 'Recherche full-text active sur guests';\n    RAISE NOTICE 'Cache applicatif configur';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"Applying migration: 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:12"}
{"0":"c","1":"o","10":"s","11":"_","12":"a","13":"c","14":"t","15":"i","16":"v","17":"e","18":" ","19":"d","2":"l","20":"o","21":"e","22":"s","23":" ","24":"n","25":"o","26":"t","27":" ","28":"e","29":"x","3":"u","30":"i","31":"s","32":"t","4":"m","5":"n","6":" ","7":"g","8":".","9":"i","level":"error","message":" Failed to apply migration 008_add_dashboard_optimizations.sql:","service":"qrevent-backend","timestamp":"2026-02-05 21:30:13"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 21:30:13"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"Found 19 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"\n Migration to apply (008b_add_is_active_to_guests.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"-- Migration: Add is_active column to guests table\n-- Description: Required for dashboard optimizations\n\n-- Add is_active column to guests table\nALTER TABLE guests ADD COLUMN IF NOT EXISTS is_active BOOLEAN DEFAULT TRUE;\n\n-- Create index for faster queries\nCREATE INDEX IF NOT EXISTS idx_guests_is_active ON guests(is_active);\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"Applying migration: 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:25"}
{"level":"info","message":" Migration applied successfully: 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:25"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:26"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"Found 19 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"\n Migration to apply (008_add_dashboard_optimizations.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"-- Migration: Optimisations Dashboard et vues matrialises\n-- Date: 2026-02-05\n-- Priorit: HAUTE\n-- Description: limine les requtes N+1 et acclre les rapports\n\n-- ============================================\n-- 1. VUE MATRIALISE: Rsum par vnement\n-- ============================================\n-- limine les requtes N+1 dans le dashboard\n\nDROP MATERIALIZED VIEW IF EXISTS mv_event_summary CASCADE;\n\nCREATE MATERIALIZED VIEW mv_event_summary AS\nSELECT \n    e.id as event_id,\n    e.title,\n    e.organizer_id,\n    e.date,\n    e.is_active,\n    e.created_at,\n    -- Compteurs guests\n    COUNT(DISTINCT g.id) as total_guests,\n    COUNT(DISTINCT CASE WHEN g.rsvp_status = 'accepted' THEN g.id END) as confirmed_guests,\n    COUNT(DISTINCT CASE WHEN g.rsvp_status = 'declined' THEN g.id END) as declined_guests,\n    COUNT(DISTINCT CASE WHEN g.rsvp_status = 'pending' THEN g.id END) as pending_guests,\n    -- Compteurs prsence\n    COUNT(DISTINCT CASE WHEN g.attendance_status = 'arrived' THEN g.id END) as arrived_guests,\n    COUNT(DISTINCT CASE WHEN g.attendance_status = 'left' THEN g.id END) as left_guests,\n    -- Dernire activit\n    MAX(g.updated_at) as last_guest_update,\n    MAX(a.timestamp) as last_attendance\nFROM events e\nLEFT JOIN guests g ON g.event_id = e.id AND (g.is_active = true OR g.is_active IS NULL)\nLEFT JOIN attendance a ON a.event_id = e.id\nWHERE e.is_active = true\nGROUP BY e.id, e.title, e.organizer_id, e.date, e.is_active, e.created_at;\n\n-- Index sur la vue matrialise\nCREATE UNIQUE INDEX idx_mv_event_summary_event_id ON mv_event_summary(event_id);\nCREATE INDEX idx_mv_event_summary_organizer ON mv_event_summary(organizer_id);\n\nCOMMENT ON MATERIALIZED VIEW mv_event_summary IS 'Vue matrialise pour dashboard - rafrachir toutes les 5 min';\n\n-- ============================================\n-- 2. FONCTION DE RAFRACHISSEMENT\n-- ============================================\nCREATE OR REPLACE FUNCTION refresh_event_summary()\nRETURNS void AS $$\nBEGIN\n    REFRESH MATERIALIZED VIEW CONCURRENTLY mv_event_summary;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- ============================================\n-- 3. VUE MATRIALISE: Statistiques QR Codes\n-- ============================================\nDROP MATERIALIZED VIEW IF EXISTS mv_qr_code_stats CASCADE;\n\nCREATE MATERIALIZED VIEW mv_qr_code_stats AS\nSELECT \n    event_id,\n    COUNT(*) as total_qr_codes,\n    COUNT(*) FILTER (WHERE is_valid = true AND expires_at > NOW()) as active_qr_codes,\n    COUNT(*) FILTER (WHERE is_valid = false) as invalidated_qr_codes,\n    COUNT(*) FILTER (WHERE expires_at <= NOW()) as expired_qr_codes,\n    COALESCE(SUM(scan_count), 0) as total_scans,\n    MAX(last_scanned_at) as last_scan_at\nFROM qr_codes\nGROUP BY event_id;\n\nCREATE UNIQUE INDEX idx_mv_qr_code_stats_event ON mv_qr_code_stats(event_id);\n\nCOMMENT ON MATERIALIZED VIEW mv_qr_code_stats IS 'Stats QR codes par vnement';\n\n-- ============================================\n-- 4. VUE MATRIALISE: Stats Jeux\n-- ============================================\nDROP MATERIALIZED VIEW IF EXISTS mv_game_stats CASCADE;\n\nCREATE MATERIALIZED VIEW mv_game_stats AS\nSELECT \n    g.id as game_id,\n    g.event_id,\n    g.name,\n    g.type,\n    g.status,\n    COUNT(DISTINCT gp.guest_id) as player_count,\n    COUNT(DISTINCT CASE WHEN gp.is_completed THEN gp.guest_id END) as completed_count,\n    COALESCE(AVG(gp.total_score) FILTER (WHERE gp.is_completed), 0) as avg_score,\n    MAX(gp.total_score) as max_score,\n    COUNT(DISTINCT ga.id) as total_answers,\n    COUNT(DISTINCT CASE WHEN ga.is_correct THEN ga.id END) as correct_answers\nFROM games g\nLEFT JOIN game_participations gp ON gp.game_id = g.id\nLEFT JOIN game_answers ga ON ga.participation_id = gp.id\nWHERE g.is_active = true\nGROUP BY g.id, g.event_id, g.name, g.type, g.status;\n\nCREATE UNIQUE INDEX idx_mv_game_stats_game ON mv_game_stats(game_id);\nCREATE INDEX idx_mv_game_stats_event ON mv_game_stats(event_id);\n\nCOMMENT ON MATERIALIZED VIEW mv_game_stats IS 'Stats jeux calcules - remplace le trigger synchrone';\n\n-- ============================================\n-- 5. FONCTION: Rcuprer dashboard summary optimis\n-- ============================================\nCREATE OR REPLACE FUNCTION get_dashboard_summary(p_organizer_id UUID)\nRETURNS TABLE (\n    total_events BIGINT,\n    total_guests BIGINT,\n    confirmed_guests BIGINT,\n    pending_guests BIGINT,\n    declined_guests BIGINT,\n    arrived_guests BIGINT\n) AS $$\nBEGIN\n    RETURN QUERY\n    SELECT \n        COUNT(DISTINCT es.event_id),\n        COALESCE(SUM(es.total_guests), 0),\n        COALESCE(SUM(es.confirmed_guests), 0),\n        COALESCE(SUM(es.pending_guests), 0),\n        COALESCE(SUM(es.declined_guests), 0),\n        COALESCE(SUM(es.arrived_guests), 0)\n    FROM mv_event_summary es\n    WHERE es.organizer_id = p_organizer_id;\nEND;\n$$ LANGUAGE plpgsql STABLE;\n\nCOMMENT ON FUNCTION get_dashboard_summary IS 'Fonction optimise pour le dashboard - utilise vue matrialise';\n\n-- ============================================\n-- 6. FONCTION: Liste events avec stats (remplace N+1)\n-- ============================================\nCREATE OR REPLACE FUNCTION get_events_with_stats(p_organizer_id UUID)\nRETURNS TABLE (\n    event_id UUID,\n    title VARCHAR,\n    event_date TIMESTAMP WITH TIME ZONE,\n    location JSONB,\n    total_guests BIGINT,\n    confirmed_guests BIGINT,\n    pending_guests BIGINT,\n    declined_guests BIGINT\n) AS $$\nBEGIN\n    RETURN QUERY\n    SELECT \n        es.event_id,\n        es.title,\n        es.date,\n        e.location,\n        es.total_guests,\n        es.confirmed_guests,\n        es.pending_guests,\n        es.declined_guests\n    FROM mv_event_summary es\n    JOIN events e ON e.id = es.event_id\n    WHERE es.organizer_id = p_organizer_id\n    ORDER BY es.created_at DESC;\nEND;\n$$ LANGUAGE plpgsql STABLE;\n\nCOMMENT ON FUNCTION get_events_with_stats IS 'Rcupre events avec stats en une requte';\n\n-- ============================================\n-- 7. INDEX POUR RECHERCHE FULL-TEXT\n-- ============================================\n-- Ajout de recherche textuelle sur guests (nom/prnom/email)\n\nALTER TABLE guests ADD COLUMN IF NOT EXISTS search_vector tsvector;\n\nUPDATE guests SET search_vector = \n    setweight(to_tsvector('simple', COALESCE(first_name, '')), 'A') ||\n    setweight(to_tsvector('simple', COALESCE(last_name, '')), 'A') ||\n    setweight(to_tsvector('simple', COALESCE(email, '')), 'B');\n\nCREATE INDEX idx_guests_search ON guests USING GIN (search_vector);\n\n-- Trigger pour maintenir le search_vector  jour\nCREATE OR REPLACE FUNCTION update_guest_search_vector()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.search_vector := \n        setweight(to_tsvector('simple', COALESCE(NEW.first_name, '')), 'A') ||\n        setweight(to_tsvector('simple', COALESCE(NEW.last_name, '')), 'A') ||\n        setweight(to_tsvector('simple', COALESCE(NEW.email, '')), 'B');\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nDROP TRIGGER IF EXISTS trigger_update_guest_search ON guests;\nCREATE TRIGGER trigger_update_guest_search\n    BEFORE INSERT OR UPDATE ON guests\n    FOR EACH ROW\n    EXECUTE FUNCTION update_guest_search_vector();\n\nCOMMENT ON FUNCTION update_guest_search_vector IS 'Met  jour le search vector pour recherche full-text';\n\n-- ============================================\n-- 8. TABLE: Cache pour rsultats de requtes lourdes\n-- ============================================\nCREATE TABLE IF NOT EXISTS query_result_cache (\n    cache_key VARCHAR(255) PRIMARY KEY,\n    result_data JSONB NOT NULL,\n    expires_at TIMESTAMP WITH TIME ZONE NOT NULL,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\nCREATE INDEX idx_query_cache_expires ON query_result_cache(expires_at);\n\n-- Fonction de nettoyage du cache\nCREATE OR REPLACE FUNCTION cleanup_query_cache()\nRETURNS void AS $$\nBEGIN\n    DELETE FROM query_result_cache WHERE expires_at < NOW();\nEND;\n$$ LANGUAGE plpgsql;\n\nCOMMENT ON TABLE query_result_cache IS 'Cache applicatif pour rsultats de requtes coteuses';\n\n-- ============================================\n-- 9. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Vues matrialises cres: mv_event_summary, mv_qr_code_stats, mv_game_stats';\n    RAISE NOTICE 'Fonctions optimises cres pour dashboard';\n    RAISE NOTICE 'Recherche full-text active sur guests';\n    RAISE NOTICE 'Cache applicatif configur';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"Applying migration: 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:32"}
{"level":"info","message":" Migration applied successfully: 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:33"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:33"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"Found 19 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"\n Migration to apply (009_add_feedback_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"-- Migration: Ajout de la table feedbacks pour les avis et tmoignages\n-- Date: 2026-02-05\n-- Description: Cration de la table pour stocker les avis/feedbacks des invits/familles\n\n-- Table des avis et feedbacks\nCREATE TABLE IF NOT EXISTS feedbacks (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE NOT NULL,\n    family_id UUID REFERENCES families(id) ON DELETE SET NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE SET NULL,\n    \n    -- Informations sur l'auteur\n    author_name VARCHAR(100) NOT NULL,\n    author_email VARCHAR(255),\n    \n    -- Contenu du feedback\n    message TEXT NOT NULL,\n    feedback_type VARCHAR(20) DEFAULT 'wish' CHECK (feedback_type IN ('wish', 'guestbook', 'testimonial')),\n    \n    -- Pour les avis avec notation (guestbook)\n    rating INTEGER CHECK (rating >= 1 AND rating <= 5),\n    category VARCHAR(50), -- Ambiance, Dco, Service, etc.\n    \n    -- Tag/Accent pour l'affichage (wish)\n    tag VARCHAR(50), -- Excellence, Clbration, Joie, Bonheur, etc.\n    accent_color VARCHAR(20), -- Code couleur pour l'affichage\n    \n    -- Mtadonnes\n    is_approved BOOLEAN DEFAULT FALSE, -- Modration\n    is_featured BOOLEAN DEFAULT FALSE,\n    is_active BOOLEAN DEFAULT TRUE,\n    \n    -- Source (qr_code, direct, etc.)\n    source VARCHAR(50) DEFAULT 'direct',\n    qr_code_used VARCHAR(50),\n    \n    -- Timestamps\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_feedbacks_event ON feedbacks(event_id);\nCREATE INDEX IF NOT EXISTS idx_feedbacks_family ON feedbacks(family_id);\nCREATE INDEX IF NOT EXISTS idx_feedbacks_guest ON feedbacks(guest_id);\nCREATE INDEX IF NOT EXISTS idx_feedbacks_type ON feedbacks(feedback_type);\nCREATE INDEX IF NOT EXISTS idx_feedbacks_approved ON feedbacks(event_id, is_approved);\nCREATE INDEX IF NOT EXISTS idx_feedbacks_created ON feedbacks(created_at DESC);\n\n-- Trigger pour mettre  jour updated_at\nCREATE TRIGGER update_feedbacks_updated_at \nBEFORE UPDATE ON feedbacks \nFOR EACH ROW \nEXECUTE FUNCTION update_updated_at_column();\n\n-- Vue pour les statistiques de feedback par vnement\nCREATE OR REPLACE VIEW feedback_stats AS\nSELECT \n    event_id,\n    COUNT(*) as total_feedbacks,\n    COUNT(*) FILTER (WHERE feedback_type = 'wish') as total_wishes,\n    COUNT(*) FILTER (WHERE feedback_type = 'guestbook') as total_guestbook,\n    COUNT(*) FILTER (WHERE is_approved = TRUE) as approved_count,\n    COUNT(*) FILTER (WHERE is_approved = FALSE) as pending_count,\n    AVG(rating) FILTER (WHERE rating IS NOT NULL) as average_rating,\n    COUNT(*) FILTER (WHERE rating = 5) as five_star_count,\n    MAX(created_at) as last_feedback_date\nFROM feedbacks\nWHERE is_active = TRUE\nGROUP BY event_id;\n\n-- Commentaire sur la table\nCOMMENT ON TABLE feedbacks IS 'Stocke les avis, vux et tmoignages des invits et familles';\nCOMMENT ON COLUMN feedbacks.feedback_type IS 'Type de feedback: wish (vux), guestbook (livre d''or), testimonial (tmoignage)';\nCOMMENT ON COLUMN feedbacks.is_approved IS 'Indique si le feedback a t approuv par le modrateur';\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"Applying migration: 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:41"}
{"level":"info","message":" Migration applied successfully: 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"Found 19 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"\n Migration to apply (009_create_wishes_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"-- Migration: Create wishes table for guest book messages\n-- Created: 2026-02-05\n\n-- Create wishes table (vux/livre d'or)\nCREATE TABLE IF NOT EXISTS wishes (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    guest_id UUID REFERENCES guests(id) ON DELETE SET NULL,\n    author_name VARCHAR(100) NOT NULL,\n    author_email VARCHAR(255),\n    message TEXT NOT NULL,\n    style VARCHAR(20) DEFAULT 'serif' CHECK (style IN ('serif', 'cursive', 'modern')),\n    color VARCHAR(50) DEFAULT 'bg-[#F5E6D3]',\n    is_public BOOLEAN DEFAULT TRUE,\n    is_moderated BOOLEAN DEFAULT FALSE,\n    moderated_by UUID REFERENCES users(id) ON DELETE SET NULL,\n    moderated_at TIMESTAMP WITH TIME ZONE,\n    ip_address INET,\n    user_agent TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create indexes for better performance\nCREATE INDEX IF NOT EXISTS idx_wishes_event ON wishes(event_id);\nCREATE INDEX IF NOT EXISTS idx_wishes_guest ON wishes(guest_id);\nCREATE INDEX IF NOT EXISTS idx_wishes_created_at ON wishes(created_at DESC);\nCREATE INDEX IF NOT EXISTS idx_wishes_public ON wishes(event_id, is_public) WHERE is_public = TRUE;\n\n-- Create trigger to automatically update the updated_at column\nDROP TRIGGER IF EXISTS update_wishes_updated_at ON wishes;\nCREATE TRIGGER update_wishes_updated_at \n    BEFORE UPDATE ON wishes \n    FOR EACH ROW \n    EXECUTE FUNCTION update_updated_at_column();\n\n-- Add comment for documentation\nCOMMENT ON TABLE wishes IS 'Table pour stocker les vux/messages des invits (livre d''or)';\nCOMMENT ON COLUMN wishes.style IS 'Style d''affichage du message: serif, cursive, ou modern';\nCOMMENT ON COLUMN wishes.is_public IS 'Si le message est visible publiquement';\nCOMMENT ON COLUMN wishes.is_moderated IS 'Si le message a t modr par l''organisateur';\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"Applying migration: 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:45"}
{"level":"info","message":" Migration applied successfully: 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:45"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"Found 19 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"\n Migration to apply (010_create_seating_tables.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"-- Migration: Create seating tables for event table planning\n-- Description: Add tables to manage seating arrangements at weddings\n\n-- Create seating_tables table (physical tables at the event)\nCREATE TABLE IF NOT EXISTS seating_tables (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    name VARCHAR(100) NOT NULL,\n    seats INTEGER NOT NULL DEFAULT 8 CHECK (seats > 0 AND seats <= 50),\n    table_shape VARCHAR(20) DEFAULT 'round' CHECK (table_shape IN ('round', 'rectangular', 'square', 'oval')),\n    position_x INTEGER DEFAULT 0,\n    position_y INTEGER DEFAULT 0,\n    notes TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create table_assignments table (links guests to tables)\nCREATE TABLE IF NOT EXISTS table_assignments (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    table_id UUID NOT NULL REFERENCES seating_tables(id) ON DELETE CASCADE,\n    guest_id UUID NOT NULL REFERENCES guests(id) ON DELETE CASCADE,\n    seat_number INTEGER,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(table_id, guest_id),\n    UNIQUE(table_id, seat_number)\n);\n\n-- Create indexes for better performance\nCREATE INDEX IF NOT EXISTS idx_seating_tables_event ON seating_tables(event_id);\nCREATE INDEX IF NOT EXISTS idx_table_assignments_table ON table_assignments(table_id);\nCREATE INDEX IF NOT EXISTS idx_table_assignments_guest ON table_assignments(guest_id);\n\n-- Create trigger to automatically update the updated_at column\nCREATE TRIGGER update_seating_tables_updated_at \n    BEFORE UPDATE ON seating_tables \n    FOR EACH ROW \n    EXECUTE FUNCTION update_updated_at_column();\n\n-- Add comment for documentation\nCOMMENT ON TABLE seating_tables IS 'Physical tables at wedding events for seating arrangements';\nCOMMENT ON TABLE table_assignments IS 'Links guests to their assigned tables and seats';\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"Applying migration: 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:48"}
{"level":"info","message":" Migration applied successfully: 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:48"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:31:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:34:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:34:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:34:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:35:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:35:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:37:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:44:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:47:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:01:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:01:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:01:55"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:02:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:02:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:03:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:07:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:08:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:09:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:13:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:14:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:16:09"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:56:13)\n    at Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:365:29)\n    at testSecurity (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:162:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async runTests (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:335:22)","timestamp":"2026-02-05 22:18:03"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:365:7)\n    at async testErrorHandling (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:201:20)\n    at async runTests (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:338:27)","timestamp":"2026-02-05 22:18:06"}
{"level":"error","message":"Error in seatingTablesDb.getAvailableFamilies: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getAvailableFamilies (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:455:7)\n    at async testErrorHandling (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:217:22)\n    at async runTests (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:338:27)","timestamp":"2026-02-05 22:18:07"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:670:7)\n    at async testPerformanceAndLogging (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:248:19)\n    at async runTests (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:341:25)","timestamp":"2026-02-05 22:18:08"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:365:7)\n    at async testPerformanceAndLogging (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:272:5)\n    at async runTests (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:341:25)","timestamp":"2026-02-05 22:18:08"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:18:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:19:42"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:365:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3368:50\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:18:56"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:18:56"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:670:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3395:39\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:18:56"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:365:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3368:50\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:18:57"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:18:57"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:670:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3395:39\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:18:57"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:670:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3395:39\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:19:00"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:19:00"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:19:06"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:19:07"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:19:10"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:26"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:365:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3368:50\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:26"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:670:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3395:39\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:26"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:27"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:365:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3368:50\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:27"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:670:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3395:39\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:27"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:30"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:670:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3395:39\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 10:30:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 10:30:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 10:30:42"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"User logged out successfully","service":"qrevent-backend","timestamp":"2026-02-06 10:32:22","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-06T07:06:14.600Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:15:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:23:12"}
