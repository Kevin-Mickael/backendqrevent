{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:47:46"}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 11:47:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:48:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:54:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:54:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:55:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:55:24"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:56:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:58:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 11:58:23"}
{"ip":"::1","level":"info","message":"POST /api/auth/register","service":"qrevent-backend","timestamp":"2026-02-05 11:58:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"Andriatsilavokevin@gmail.com","error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Database error during user existence check","service":"qrevent-backend","timestamp":"2026-02-05 11:59:09"}
{"error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Registration error:","service":"qrevent-backend","stack":"Error: Error finding user by email: TypeError: fetch failed\n    at Object.findByEmail (/home/kevin/Qrevent/backend/utils/db/users.js:44:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (/home/kevin/Qrevent/backend/controllers/authController.js:47:28)","timestamp":"2026-02-05T07:59:09.420Z"}
{"ip":"::1","level":"info","message":"POST /api/auth/register","service":"qrevent-backend","timestamp":"2026-02-05 12:00:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"Andriatsilavokevin@gmail.com","error":"Error finding user by email: Could not find the table 'public.users' in the schema cache","level":"error","message":"Database error during user existence check","service":"qrevent-backend","timestamp":"2026-02-05 12:00:16"}
{"error":"Error finding user by email: Could not find the table 'public.users' in the schema cache","level":"error","message":"Registration error:","service":"qrevent-backend","stack":"Error: Error finding user by email: Could not find the table 'public.users' in the schema cache\n    at Object.findByEmail (/home/kevin/Qrevent/backend/utils/db/users.js:44:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (/home/kevin/Qrevent/backend/controllers/authController.js:47:28)","timestamp":"2026-02-05T08:00:16.475Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:01:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:01:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:02:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:02:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:02:36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:03:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:03:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:03:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:03:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:04:26"}
{"ip":"::1","level":"info","message":"POST /api/auth/register","service":"qrevent-backend","timestamp":"2026-02-05 12:05:05","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"New user registered successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:05:07.529Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:11:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:13:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:14:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:15:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:16:12"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:17:05","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:17:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:17:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:21:20"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:26:48","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:26:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:26:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:27:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:28:08"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:33:22","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:33:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:34:28"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:34:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:34:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:35:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:36:21"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:37:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:37:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:38:25"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:38:31","userAgent":"axios/1.13.4","userId":null}
{"email":"kevin@example.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 12:38:33"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:38:55","userAgent":"axios/1.13.4","userId":null}
{"email":"kevin@example.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 12:38:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:39:14"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/register","service":"qrevent-backend","timestamp":"2026-02-05 12:39:20","userAgent":"axios/1.13.4","userId":null}
{"email":"test.upload.1770280760263@example.com","level":"info","message":"New user registered successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:39:22.105Z","userId":"51f08f54-41f2-4307-be84-e57fa6ddc033"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:39:22","userAgent":"axios/1.13.4","userId":null}
{"email":"test.upload.1770280760263@example.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:39:22.787Z","userId":"51f08f54-41f2-4307-be84-e57fa6ddc033"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 12:39:22","userAgent":"axios/1.13.4","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 12:42:39","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 12:42:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:43:12","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:43:13.818Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:43:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:43:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:43:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:43:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:44:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:44:04","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:44:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:44:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 12:45:28","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 12:46:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/register","service":"qrevent-backend","timestamp":"2026-02-05 12:46:08","userAgent":"axios/1.13.4","userId":null}
{"email":"test.upload.1770281168792@example.com","level":"info","message":"New user registered successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:46:10.184Z","userId":"fb087d45-1b51-4120-bb78-f3df0879a5d3"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:46:10","userAgent":"axios/1.13.4","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 12:46:10","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"test.upload.1770281168792@example.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:46:11.018Z","userId":"fb087d45-1b51-4120-bb78-f3df0879a5d3"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 12:46:11","userAgent":"axios/1.13.4","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 12:46:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:46:28"}
{"ip":"::1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:46:33","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:46:35.195Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:46:35","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:46:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/register","service":"qrevent-backend","timestamp":"2026-02-05 12:46:38","userAgent":"axios/1.13.4","userId":null}
{"email":"test.upload.1770281198342@example.com","level":"info","message":"New user registered successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:46:39.339Z","userId":"f06ba02b-dee8-41b8-92d4-e96c1c27dc8f"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 12:46:39","userAgent":"axios/1.13.4","userId":null}
{"email":"test.upload.1770281198342@example.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T08:46:40.458Z","userId":"f06ba02b-dee8-41b8-92d4-e96c1c27dc8f"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 12:46:40","userAgent":"axios/1.13.4","userId":null}
{"ip":"::1","level":"info","message":"GET /health","service":"qrevent-backend","timestamp":"2026-02-05 12:47:49","userAgent":"curl/8.5.0","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:52:13","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 12:52:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:54:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 12:54:54"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 13:00:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 13:00:26","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:04:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:07:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:08:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:08:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:09:10"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 13:09:58","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 13:10:00","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:10:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:10:35"}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 13:10:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 13:12:13","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 13:30:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:33:51"}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 13:34:09","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 13:34:16","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 13:48:40"}
{"ip":"::1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 13:52:20","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:00:30"}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 14:00:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"POST /api/auth/login","service":"qrevent-backend","timestamp":"2026-02-05 14:00:55","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T10:00:56.332Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 14:00:56","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 14:00:57","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"POST /api/upload","service":"qrevent-backend","timestamp":"2026-02-05 14:01:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"PUT /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 14:01:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"0":"E","1":"r","10":"i","100":"9","101":"5","102":":","103":"1","104":"9","105":"\n","106":" ","107":" ","108":" ","109":" ","11":"d","110":"a","111":"t","112":" ","113":"p","114":"r","115":"o","116":"c","117":"e","118":"s","119":"s","12":"a","120":".","121":"p","122":"r","123":"o","124":"c","125":"e","126":"s","127":"s","128":"T","129":"i","13":"t","130":"c","131":"k","132":"s","133":"A","134":"n","135":"d","136":"R","137":"e","138":"j","139":"e","14":"i","140":"c","141":"t","142":"i","143":"o","144":"n","145":"s","146":" ","147":"(","148":"n","149":"o","15":"o","150":"d","151":"e","152":":","153":"i","154":"n","155":"t","156":"e","157":"r","158":"n","159":"a","16":"n","160":"l","161":"/","162":"p","163":"r","164":"o","165":"c","166":"e","167":"s","168":"s","169":"/","17":" ","170":"t","171":"a","172":"s","173":"k","174":"_","175":"q","176":"u","177":"e","178":"u","179":"e","18":"f","180":"s","181":":","182":"1","183":"0","184":"5","185":":","186":"5","187":")","19":"a","2":"r","20":"i","21":"l","22":"e","23":"d","24":"\n","25":" ","26":" ","27":" ","28":" ","29":"a","3":"o","30":"t","31":" ","32":"/","33":"h","34":"o","35":"m","36":"e","37":"/","38":"k","39":"e","4":"r","40":"v","41":"i","42":"n","43":"/","44":"Q","45":"r","46":"e","47":"v","48":"e","49":"n","5":":","50":"t","51":"/","52":"b","53":"a","54":"c","55":"k","56":"e","57":"n","58":"d","59":"/","6":" ","60":"n","61":"o","62":"d","63":"e","64":"_","65":"m","66":"o","67":"d","68":"u","69":"l","7":"V","70":"e","71":"s","72":"/","73":"c","74":"e","75":"l","76":"e","77":"b","78":"r","79":"a","8":"a","80":"t","81":"e","82":"/","83":"l","84":"i","85":"b","86":"/","87":"c","88":"e","89":"l","9":"l","90":"e","91":"b","92":"r","93":"a","94":"t","95":"e","96":".","97":"j","98":"s","99":":","level":"error","message":"Validation failed","service":"qrevent-backend","timestamp":"2026-02-05 14:01:32"}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 14:02:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 14:02:32","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 14:02:35","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 14:02:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"ip":"::1","level":"info","message":"GET /api/dashboard/summary","service":"qrevent-backend","timestamp":"2026-02-05 14:02:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:06:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:06:36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:06:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:07:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:07:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:07:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:07:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:07:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:08:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:08:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:08:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:08:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:09:06"}
{"0":"E","1":"r","10":"i","100":"9","101":"5","102":":","103":"1","104":"9","105":"\n","106":" ","107":" ","108":" ","109":" ","11":"d","110":"a","111":"t","112":" ","113":"p","114":"r","115":"o","116":"c","117":"e","118":"s","119":"s","12":"a","120":".","121":"p","122":"r","123":"o","124":"c","125":"e","126":"s","127":"s","128":"T","129":"i","13":"t","130":"c","131":"k","132":"s","133":"A","134":"n","135":"d","136":"R","137":"e","138":"j","139":"e","14":"i","140":"c","141":"t","142":"i","143":"o","144":"n","145":"s","146":" ","147":"(","148":"n","149":"o","15":"o","150":"d","151":"e","152":":","153":"i","154":"n","155":"t","156":"e","157":"r","158":"n","159":"a","16":"n","160":"l","161":"/","162":"p","163":"r","164":"o","165":"c","166":"e","167":"s","168":"s","169":"/","17":" ","170":"t","171":"a","172":"s","173":"k","174":"_","175":"q","176":"u","177":"e","178":"u","179":"e","18":"f","180":"s","181":":","182":"1","183":"0","184":"5","185":":","186":"5","187":")","19":"a","2":"r","20":"i","21":"l","22":"e","23":"d","24":"\n","25":" ","26":" ","27":" ","28":" ","29":"a","3":"o","30":"t","31":" ","32":"/","33":"h","34":"o","35":"m","36":"e","37":"/","38":"k","39":"e","4":"r","40":"v","41":"i","42":"n","43":"/","44":"Q","45":"r","46":"e","47":"v","48":"e","49":"n","5":":","50":"t","51":"/","52":"b","53":"a","54":"c","55":"k","56":"e","57":"n","58":"d","59":"/","6":" ","60":"n","61":"o","62":"d","63":"e","64":"_","65":"m","66":"o","67":"d","68":"u","69":"l","7":"V","70":"e","71":"s","72":"/","73":"c","74":"e","75":"l","76":"e","77":"b","78":"r","79":"a","8":"a","80":"t","81":"e","82":"/","83":"l","84":"i","85":"b","86":"/","87":"c","88":"e","89":"l","9":"l","90":"e","91":"b","92":"r","93":"a","94":"t","95":"e","96":".","97":"j","98":"s","99":":","level":"error","message":"Validation failed","service":"qrevent-backend","timestamp":"2026-02-05 14:13:45"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:14:26"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:14:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:14:46"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:14:47"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:15:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:15:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:15:34"}
{"body":{"avatar_url":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/e1a3d655-aef1-435e-b463-a546dd51a8ca.webp"},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-05 14:17:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:18:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:18:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:18:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:18:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:19:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:19:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:19:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:20:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:20:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:20:38"}
{"error":"Error updating user: Cannot coerce the result to a single JSON object","level":"error","message":"Update profile error:","service":"qrevent-backend","stack":"Error: Error updating user: Cannot coerce the result to a single JSON object\n    at Object.update (/home/kevin/Qrevent/backend/utils/db/users.js:71:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async updateProfile (/home/kevin/Qrevent/backend/controllers/authController.js:415:25)","timestamp":"2026-02-05 14:21:39","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:22:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:23:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:23:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:24:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:24:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:24:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:31:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:31:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:32:12"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:32:46"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:32:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:35:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:35:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:52"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:52"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:55"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:35:55"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:03"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:03"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:24"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:31"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:31"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:36:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:37:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:37:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:37:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:37:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:37:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:37:42"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 14:37:53"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:38:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:38:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:38:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:38:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:38:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:38:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:39:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:39:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:39:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:39:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:39:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:39:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:40:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:40:02"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:40:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:40:22"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:40:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:40:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:41:03"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:41:03"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:41:26"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:41:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:41:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:41:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:42:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:42:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:42:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:42:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:42:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:42:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:43:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:43:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:43:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:43:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:43:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:43:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:44:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:44:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:44:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:44:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:44:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:44:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:45:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:45:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:45:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:45:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:45:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:45:47"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:46:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:46:07"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:46:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:46:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:46:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:46:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:47:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:47:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:47:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:47:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:47:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:47:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:48:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:48:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:48:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:48:28"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 14:48:39"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:48:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:48:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:49:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:49:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:49:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:49:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:49:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:49:48"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:08"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:08"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:16"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:17"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:17"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:20"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:20"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:30"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:31"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:31"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:31"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:31"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:32"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:32"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:35"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:41"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:42"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:43"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:43"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:46"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:46"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:50:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:51:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:51:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:51:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:51:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:51:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:51:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:52:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:52:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:52:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:52:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:52:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:52:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:53:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:53:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:53:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:53:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:53:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:53:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:54:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:54:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:54:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:54:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:54:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:54:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:55:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:55:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:55:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:55:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:55:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:55:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:56:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:56:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:56:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:56:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:56:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:56:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:57:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:57:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:57:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:57:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:57:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:57:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:58:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:58:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:58:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:58:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:58:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:58:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:59:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:59:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:59:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:59:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:59:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 14:59:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:00:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:00:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:00:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:00:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:00:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:00:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:01:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:01:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:01:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:01:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:01:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:01:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:02:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:02:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:02:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:02:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:02:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:02:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:03:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:03:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:03:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:03:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:03:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:03:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:04:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:04:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:04:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:04:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:04:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:04:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:05:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:05:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:05:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:05:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:05:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:05:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:06:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:06:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:06:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:06:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:06:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:06:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:07:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:07:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:07:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:07:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:07:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:07:54"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:14"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:34"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:51"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:52"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:52"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:55"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:08:55"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:09:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:09:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:09:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:09:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:09:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:09:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:24"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:27"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:28"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:29"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:32"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:32"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:10:37"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:40"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:10:40"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:11:00"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05 15:11:00"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.149Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.150Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.156Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.157Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.165Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.166Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.187Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.188Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.246Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.247Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.398Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.400Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.805Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:11.807Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:11"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:12.906Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:12"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:12.906Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:12"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:15.891Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:15"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:15.892Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:15"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:24.000Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:24.002Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:44.008Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:11:44.010Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:11:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:12:04.014Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:12:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:12:04.015Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:12:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:12:24.027Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:12:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:12:24.029Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:12:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:12:44.031Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:12:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:12:44.033Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:12:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:13:04.038Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:13:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:13:04.040Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:13:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:13:24.052Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:13:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:13:24.054Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:13:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:13:44.059Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:13:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:13:44.060Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:13:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:14:04.063Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:14:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:14:04.064Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:14:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:14:24.076Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:14:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:14:24.076Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:14:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:14:44.081Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:14:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:14:44.082Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:14:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:15:04.093Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:15:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:15:04.094Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:15:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:15:24.105Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:15:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:15:24.106Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:15:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:15:44.111Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:15:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:15:44.112Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:15:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:16:04.123Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:16:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:16:04.123Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:16:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:16:24.133Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:16:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:16:24.135Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:16:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:16:44.139Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:16:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:16:44.140Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:16:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:17:04.151Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:17:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:17:04.152Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:17:04"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:17:24.163Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:17:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:17:24.164Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:17:24"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:17:44.168Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:17:44"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error:","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:17:44.169Z"}
{"level":"warn","message":"Redis connection failed, image optimization will be processed directly without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:17:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:20:40"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error (disabling Redis queue system):","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:20:40.600Z"}
{"level":"warn","message":"Redis connection failed, switched to direct processing mode without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:20:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:21:03"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error (disabling Redis queue system):","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:21:03.035Z"}
{"level":"warn","message":"Redis connection failed, switched to direct processing mode without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:21:03"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:21:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:22:40"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error (disabling Redis queue system):","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:22:40.844Z"}
{"level":"warn","message":"Redis connection failed, switched to direct processing mode without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:22:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:23:58"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis/Bull queue error (disabling Redis queue system):","service":"qrevent-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","timestamp":"2026-02-05T11:23:58.866Z"}
{"level":"warn","message":"Redis connection failed, switched to direct processing mode without queueing","service":"qrevent-backend","timestamp":"2026-02-05 15:23:58"}
{"email":"test@example.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:29:41"}
{"email":"nonexistent@test.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:29:51"}
{"error":"Error creating user: Could not find the 'preferences' column of 'users' in the schema cache","level":"error","message":"Registration error:","service":"qrevent-backend","stack":"Error: Error creating user: Could not find the 'preferences' column of 'users' in the schema cache\n    at Object.create (/home/kevin/Qrevent/backend/utils/db/users.js:14:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (/home/kevin/Qrevent/backend/controllers/authController.js:79:18)","timestamp":"2026-02-05T11:30:56.608Z"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:31:33"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:32:38"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:32:41"}
{"email":"Andriatsilavokevin@gmail.com","level":"warn","message":"Login attempt with non-existent email","service":"qrevent-backend","timestamp":"2026-02-05 15:33:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:33:44"}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T11:33:52.180Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T11:33:59.956Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T11:37:38.014Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T11:37:43.340Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:16:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/test-event-id/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:37:51"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:16:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/test-event-id/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:38:16"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:16:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:38:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:38:43"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:24:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:38:49"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:24:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:38:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:39:06"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:25:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:39:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:39:33"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:25:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:39:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:39:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:40:34"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:25:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:40:44"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:25:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:40:56"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:25:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:41:00"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:41:41"}
{"body":{},"error_message":"Only image files are allowed!","error_stack":"Error: Only image files are allowed!\n    at fileFilter (/home/kevin/Qrevent/backend/middleware/upload.js:25:12)\n    at wrappedFileFilter (/home/kevin/Qrevent/backend/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Qrevent/backend/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:219:14)\n    at SBMH.push (/home/kevin/Qrevent/backend/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Qrevent/backend/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154/upload-banner","service":"qrevent-backend","timestamp":"2026-02-05 15:41:56"}
{"jobId":"1","level":"info","message":"Added image optimization job to queue","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:42:06","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","jobId":"1","level":"info","message":"Starting image optimization job","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:42:06","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:42:06.913Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","eventId":"859d073e-c34e-4daf-b308-636d510f1154","jobId":"1","level":"error","message":"Image optimization job failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05 15:42:06","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Image optimization job 1 failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05T11:42:06.922Z"}
{"level":"info","message":"Image optimization queue drained","service":"qrevent-backend","timestamp":"2026-02-05T11:42:06.924Z"}
{"jobId":"2","level":"info","message":"Added image optimization job to queue","originalName":"test-image.jpg","service":"qrevent-backend","timestamp":"2026-02-05 15:42:23","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","jobId":"2","level":"info","message":"Starting image optimization job","originalName":"test-image.jpg","service":"qrevent-backend","timestamp":"2026-02-05 15:42:23","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"test-image.jpg","service":"qrevent-backend","timestamp":"2026-02-05T11:42:23.510Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","eventId":"859d073e-c34e-4daf-b308-636d510f1154","jobId":"2","level":"error","message":"Image optimization job failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05 15:42:23","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Image optimization job 2 failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05T11:42:23.515Z"}
{"level":"info","message":"Image optimization queue drained","service":"qrevent-backend","timestamp":"2026-02-05T11:42:23.520Z"}
{"jobId":"3","level":"info","message":"Added image optimization job to queue","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:43:04","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","jobId":"3","level":"info","message":"Starting image optimization job","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:43:04","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:43:04.930Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","eventId":"859d073e-c34e-4daf-b308-636d510f1154","jobId":"3","level":"error","message":"Image optimization job failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05 15:43:04","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Image optimization job 3 failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05T11:43:04.934Z"}
{"level":"info","message":"Image optimization queue drained","service":"qrevent-backend","timestamp":"2026-02-05T11:43:04.936Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:44:21"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:44:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:44:36"}
{"jobId":"4","level":"info","message":"Added image optimization job to queue","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:44:45","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","jobId":"4","level":"info","message":"Starting image optimization job","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:44:45","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:44:45.870Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","eventId":"859d073e-c34e-4daf-b308-636d510f1154","jobId":"4","level":"error","message":"Image optimization job failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05 15:44:45","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Image optimization job 4 failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05T11:44:45.878Z"}
{"level":"info","message":"Image optimization queue drained","service":"qrevent-backend","timestamp":"2026-02-05T11:44:45.879Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:45:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:45:26"}
{"jobId":"5","level":"info","message":"Added image optimization job to queue","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:45:36","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","jobId":"5","level":"info","message":"Starting image optimization job","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:45:36","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:45:36.473Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","eventId":"859d073e-c34e-4daf-b308-636d510f1154","jobId":"5","level":"error","message":"Image optimization job failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05 15:45:36","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Image optimization job 5 failed","service":"qrevent-backend","stack":"TypeError: this.optimizeCoverImage is not a function\n    at Object.optimizeImageByUsage (/home/kevin/Qrevent/backend/services/imageService.js:105:35)\n    at processImageJobDirectly (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:32:24)\n    at Queue.<anonymous> (/home/kevin/Qrevent/backend/services/imageOptimizationQueue.js:168:28)\n    at handlers.<computed> (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/home/kevin/Qrevent/backend/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-05T11:45:36.484Z"}
{"level":"info","message":"Image optimization queue drained","service":"qrevent-backend","timestamp":"2026-02-05T11:45:36.488Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:45:46"}
{"jobId":"firr4p2hwfb","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:46:01","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:46:01.623Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Failed to add image optimization job","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:46:01","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"warn","message":"Queue addition failed, attempting direct fallback...","service":"qrevent-backend","timestamp":"2026-02-05 15:46:01"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:46:01.625Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"9yg981hhowu","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:47:04","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:47:04.597Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"this.optimizeCoverImage is not a function","level":"error","message":"Failed to add image optimization job","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:47:04","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"warn","message":"Queue addition failed, attempting direct fallback...","service":"qrevent-backend","timestamp":"2026-02-05 15:47:04"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"cover","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:47:04.598Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:49:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:49:12"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:49:32"}
{"jobId":"bp0cecut64l","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:50:02","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:50:02.877Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/007ce3b4-683c-4685-9f76-b68c5dc7786c.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:50:05.642Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"qrcode.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/007ce3b4-683c-4685-9f76-b68c5dc7786c.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:50:05.643Z"}
{"jobId":"bdtcem04rn","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"test-portrait.jpg","service":"qrevent-backend","timestamp":"2026-02-05 15:50:39","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"test-portrait.jpg","service":"qrevent-backend","timestamp":"2026-02-05T11:50:39.741Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Failed to optimize banner image","level":"error","message":"Failed to add image optimization job","originalName":"test-portrait.jpg","service":"qrevent-backend","timestamp":"2026-02-05 15:50:39","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"warn","message":"Queue addition failed, attempting direct fallback...","service":"qrevent-backend","timestamp":"2026-02-05 15:50:39"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"test-portrait.jpg","service":"qrevent-backend","timestamp":"2026-02-05T11:50:39.751Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"lw0ve9ufkpl","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"favicon.png","service":"qrevent-backend","timestamp":"2026-02-05 15:50:59","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"favicon.png","service":"qrevent-backend","timestamp":"2026-02-05T11:50:59.342Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/aa85e9a9-b8c7-443b-b772-88667db80c15.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:01.040Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"favicon.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/aa85e9a9-b8c7-443b-b772-88667db80c15.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:01.041Z"}
{"jobId":"upggw3vxuvo","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:51:23","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:23.362Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/fb45fbcd-e8c9-4a32-92a9-cc24f0de97a2.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:25.923Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"energie renouvelable.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/fb45fbcd-e8c9-4a32-92a9-cc24f0de97a2.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:25.923Z"}
{"jobId":"2tovif5ihkd","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:51:44","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:44.867Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/0597799d-1082-49a3-962b-5133d049b36a.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:47.324Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"energie renouvelable.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/0597799d-1082-49a3-962b-5133d049b36a.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:51:47.324Z"}
{"jobId":"r8b2csth5y","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:53:24","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"qrcode.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:53:24.407Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/76d93c58-df2c-4494-8516-f0edc04b4376.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:53:27.372Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"qrcode.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/76d93c58-df2c-4494-8516-f0edc04b4376.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:53:27.377Z"}
{"jobId":"c3ypyq1iqvp","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 15:54:32","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:54:32.066Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/6d26c306-02b0-49ca-8c5d-2325ae6da1c4.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:54:34.556Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"energie renouvelable.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/6d26c306-02b0-49ca-8c5d-2325ae6da1c4.webp","service":"qrevent-backend","timestamp":"2026-02-05T11:54:34.556Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:55:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 15:58:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:03:15"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:03:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:04:03"}
{"jobId":"mwbud4quuaj","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 16:04:27","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:04:27.144Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/f55f367c-177c-4b3a-b052-4ec0e04460d1.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:04:33.277Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"energie renouvelable.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/f55f367c-177c-4b3a-b052-4ec0e04460d1.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:04:33.278Z"}
{"jobId":"ii7lttd5s0t","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05 16:08:17","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"energie renouvelable.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:08:17.692Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/653e75e5-2c19-4c0d-b0b0-4069c655247c.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:08:22.169Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"energie renouvelable.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/653e75e5-2c19-4c0d-b0b0-4069c655247c.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:08:22.170Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:11:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:12:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:14:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:14:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:14:52"}
{"email":"Andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T12:20:32.789Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"8iovl4svx9g","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:20:54","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:20:54.518Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/7681929b-ec12-48a6-b9ac-974e0da7f151.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:20:57.502Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:20:58","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"b0wps0htg1m","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:25:12","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:25:12.872Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/e1371e19-9183-4079-a353-730b6496a87a.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:25:15.441Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:25:16","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:25:19","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:31:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:31:55"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:33:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:33:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:34:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:34:34"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T12:34:56.395Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:36:10"}
{"jobId":"icidro1um6o","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:37:51","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:37:51.947Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/9daa4dcc-ce69-4d05-8b0e-113875a8833c.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:37:53.571Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:37:54","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"1zfj5yedopj","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:39:07","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:39:07.747Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/71099985-b610-4f33-b850-5d6764ab64e3.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:39:09.363Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:39:10","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:50:21"}
{"jobId":"gfqnqv5trnh","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:50:36","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:50:36.482Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:50:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:51:17"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T12:51:56.362Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"am6da78ms4b","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:53:29","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:53:29.189Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/4b2f18c8-57c0-43a7-b95f-ddf0000d696b.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:53:30.809Z"}
{"level":"info","message":"Old avatar deleted from R2","oldUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/71099985-b610-4f33-b850-5d6764ab64e3.webp","service":"qrevent-backend","timestamp":"2026-02-05 16:53:31","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:53:31","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 16:56:09"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:58:28","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"lfk3r80z17q","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:58:33","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:58:33.586Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Failed to upload file","level":"error","message":"Failed to add image optimization job","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 16:58:34","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"warn","message":"Queue addition failed, attempting direct fallback...","service":"qrevent-backend","timestamp":"2026-02-05 16:58:34"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T12:58:34.727Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/61419feb-9298-4d15-ba0e-d877bd23ab77.webp","service":"qrevent-backend","timestamp":"2026-02-05T12:58:37.897Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 16:58:38","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:18:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:18:21"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-05T13:18:45.163Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:18:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:19:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:21:04"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:21:53"}
{"jobId":"zlpf1jva35","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 17:27:29","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T13:27:29.918Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/b4da8687-9def-4572-a693-6960a9962b3d.webp","service":"qrevent-backend","timestamp":"2026-02-05T13:27:31.504Z"}
{"level":"info","message":"Old avatar deleted from R2","oldUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/61419feb-9298-4d15-ba0e-d877bd23ab77.webp","service":"qrevent-backend","timestamp":"2026-02-05 17:27:32","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:27:32","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:34:38"}
{"jobId":"4nbnmo42nl9","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"CV.PIC.jpeg","service":"qrevent-backend","timestamp":"2026-02-05 17:36:19","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"CV.PIC.jpeg","service":"qrevent-backend","timestamp":"2026-02-05T13:36:19.342Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"CV.PIC.jpeg","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/10691434-4389-4ffd-824f-c85868577297.webp","service":"qrevent-backend","timestamp":"2026-02-05T13:36:21.982Z"}
{"level":"info","message":"Old avatar deleted from R2","oldUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/b4da8687-9def-4572-a693-6960a9962b3d.webp","service":"qrevent-backend","timestamp":"2026-02-05 17:36:23","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:36:23","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:36:25","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"fe734ur35tr","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 17:36:29","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T13:36:29.581Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/17feaa03-2e74-4bcc-b92f-a57eaa5a2103.webp","service":"qrevent-backend","timestamp":"2026-02-05T13:36:32.435Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:36:33","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:36:34","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 17:39:29"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:47:43","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"uueq7g6pgs","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 17:47:46","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T13:47:46.886Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/2afae7cb-d935-4fb2-9753-5cb17934ea0d.webp","service":"qrevent-backend","timestamp":"2026-02-05T13:47:48.568Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 17:47:49","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:13:47","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"heoxfe34crh","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:13:50","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:13:50.470Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/d154f28e-5f4d-4ca7-b993-a1dc26362cb9.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:13:54.280Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:13:54","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:13:57","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:17:04","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"oe70ajnkf5i","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:17:07","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:17:07.175Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/b1fae70a-2d86-4de6-80d9-0595fcf62752.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:17:08.884Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:17:09","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:17:12","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:27:02","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"rs84vg9tqa","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:27:07","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:27:07.437Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Failed to upload file: The request signature we calculated does not match the signature you provided. Check your secret access key and signing method.","level":"error","message":"Failed to add image optimization job","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:27:08","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"warn","message":"Queue addition failed, attempting direct fallback...","service":"qrevent-backend","timestamp":"2026-02-05 18:27:08"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:27:08.126Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:27:11","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:28:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:28:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:28:44"}
{"jobId":"ewm7y11o9v4","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:30:03","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:30:03.051Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/99240c99-9f83-4c51-9966-e5acee27e229.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:30:06.235Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:30:07","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:32:29","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"t5st0kw004l","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:32:34","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:32:34.888Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/1ecfdde4-6e55-44c0-b847-7286ab5b456a.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:32:37.414Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:32:38","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:34:41"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:35:49","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"9e1cbl54nla","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05 18:35:55","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-05T14:35:55.060Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/092970e4-9a77-4695-bf53-ecb4795e8c0f.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:35:57.612Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:35:58","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:36:02","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:40:24","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:40:25","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"jobId":"zsjifu56nl","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"avatar-1770302495967.webp","service":"qrevent-backend","timestamp":"2026-02-05 18:41:36","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"avatars","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"avatar-1770302495967.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:41:36.881Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"avatar-1770302495967.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/116da4b7-2f7c-4848-ace9-414cd00d0394.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:41:39.440Z"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:41:40","updatedFields":["avatar_url"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User profile updated","service":"qrevent-backend","timestamp":"2026-02-05 18:41:44","updatedFields":["name","email"],"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:42:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:43:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:43:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:44:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:45:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:45:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:45:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:45:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:45:55"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:48:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:48:20"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154","service":"qrevent-backend","timestamp":"2026-02-05 18:48:30"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154","service":"qrevent-backend","timestamp":"2026-02-05 18:48:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:48:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:48:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:48:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:49:39"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154","service":"qrevent-backend","timestamp":"2026-02-05 18:50:32"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154","service":"qrevent-backend","timestamp":"2026-02-05 18:50:32"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154","service":"qrevent-backend","timestamp":"2026-02-05 18:50:32"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backend/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/859d073e-c34e-4daf-b308-636d510f1154","service":"qrevent-backend","timestamp":"2026-02-05 18:50:32"}
{"jobId":"afi8zuxfb79","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"banner-1770303054765.webp","service":"qrevent-backend","timestamp":"2026-02-05 18:50:56","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"859d073e-c34e-4daf-b308-636d510f1154","folder":"events/859d073e-c34e-4daf-b308-636d510f1154/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"banner-1770303054765.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:50:56.607Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event 859d073e-c34e-4daf-b308-636d510f1154 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/0864f1f9-5491-4750-89ea-3b9491965b17.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:50:58.778Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"banner-1770303054765.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/859d073e-c34e-4daf-b308-636d510f1154/banners/0864f1f9-5491-4750-89ea-3b9491965b17.webp","service":"qrevent-backend","timestamp":"2026-02-05T14:50:58.780Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:52:43"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"Found 10 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:47"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:48"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:48"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:48"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:49"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:49"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:49"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:50"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:50"}
{"level":"warn","message":"RPC failed for statement, error: Could not find the function public.exec_sql(query) in the schema cache","service":"qrevent-backend","timestamp":"2026-02-05 18:52:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:53:12"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:53:19"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"Found 10 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:21"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 18:53:23"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:53:24"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 18:53:24"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"Found 10 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 18:54:52"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:54:52"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 18:54:53"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"Found 10 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"\n Migration to apply (002_add_couple_names.sql):","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"-- Migration: Add bride_name and groom_name columns to events table\n-- Date: 2026-02-05\n-- Author: QR Event Team\n-- Description: Adds support for storing couple names for wedding events\n\n-- Add bride_name column to events table\nDO $$\nBEGIN\n    IF NOT EXISTS (\n        SELECT 1 \n        FROM information_schema.columns \n        WHERE table_schema = 'public'\n        AND table_name = 'events' \n        AND column_name = 'bride_name'\n    ) THEN\n        ALTER TABLE public.events ADD COLUMN bride_name VARCHAR(100);\n        \n        COMMENT ON COLUMN public.events.bride_name IS 'Name of the bride for wedding events';\n        \n        RAISE NOTICE ' Column bride_name added to events table';\n    ELSE\n        RAISE NOTICE '  Column bride_name already exists in events table';\n    END IF;\nEND $$;\n\n-- Add groom_name column to events table\nDO $$\nBEGIN\n    IF NOT EXISTS (\n        SELECT 1 \n        FROM information_schema.columns \n        WHERE table_schema = 'public'\n        AND table_name = 'events' \n        AND column_name = 'groom_name'\n    ) THEN\n        ALTER TABLE public.events ADD COLUMN groom_name VARCHAR(100);\n        \n        COMMENT ON COLUMN public.events.groom_name IS 'Name of the groom for wedding events';\n        \n        RAISE NOTICE ' Column groom_name added to events table';\n    ELSE\n        RAISE NOTICE '  Column groom_name already exists in events table';\n    END IF;\nEND $$;\n\n-- Verify migration\nSELECT \n    column_name, \n    data_type,\n    is_nullable,\n    column_default\nFROM information_schema.columns \nWHERE table_schema = 'public'\nAND table_name = 'events' \nORDER BY ordinal_position;\n","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":"Applying migration: 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 18:55:09"}
{"level":"info","message":" Migration applied successfully: 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 18:55:10"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 18:55:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:55:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:56:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:56:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:56:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:57:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:57:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:58:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:58:47"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:59:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 18:59:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:00:00"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:00:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:00:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:01:26"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"Found 14 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"\n Migration to apply (007_add_performance_indexes.sql):","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"-- Migration: Ajout d'index de performance critiques\n-- Date: 2026-02-05\n-- Priorit: CRITIQUE\n-- Description: Optimise les requtes frquentes pour la monte en charge\n\n-- ============================================\n-- 1. INDEX QR CODES - Validation rapide\n-- ============================================\n-- Problme: Requte findByCode avec is_valid + expires_at fait un seq scan\n-- Impact: Chaque scan de QR (~1M/jour potentiel) est lent\n\nDROP INDEX IF EXISTS idx_qr_codes_validation;\nCREATE INDEX CONCURRENTLY idx_qr_codes_validation \nON qr_codes(code, is_valid, expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_validation IS 'Index composite pour validation QR rapide';\n\n-- Index pour nettoyage des QR expirs (job de maintenance)\nDROP INDEX IF EXISTS idx_qr_codes_expiry_cleanup;\nCREATE INDEX CONCURRENTLY idx_qr_codes_expiry_cleanup \nON qr_codes(expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_expiry_cleanup IS 'Index pour job de nettoyage des QR expirs';\n\n-- ============================================\n-- 2. INDEX ATTENDANCE - Requtes par vnement\n-- ============================================\n-- Problme: findByEvent fait un seq scan + tri\n-- Impact: Dashboard lent avec beaucoup d'entres\n\nDROP INDEX IF EXISTS idx_attendance_event_timestamp;\nCREATE INDEX CONCURRENTLY idx_attendance_event_timestamp \nON attendance(event_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_timestamp IS 'Index pour requtes attendance rcentes';\n\n-- Index couvrant pour viter le lookup\nDROP INDEX IF EXISTS idx_attendance_event_guest_timestamp;\nCREATE INDEX CONCURRENTLY idx_attendance_event_guest_timestamp \nON attendance(event_id, guest_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_guest_timestamp IS 'Index couvrant pour requtes avec guest';\n\n-- Index pour statistiques par jour (reporting)\nDROP INDEX IF EXISTS idx_attendance_date;\nCREATE INDEX CONCURRENTLY idx_attendance_date \nON attendance(event_id, DATE(timestamp), status);\n\nCOMMENT ON INDEX idx_attendance_date IS 'Index pour agrgations par jour';\n\n-- ============================================\n-- 3. INDEX GUESTS - Recherches frquentes\n-- ============================================\n-- Index pour recherche par statut RSVP (dashboard)\nDROP INDEX IF EXISTS idx_guests_event_rsvp;\nCREATE INDEX CONCURRENTLY idx_guests_event_rsvp \nON guests(event_id, rsvp_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_rsvp IS 'Index pour filtrage par statut RSVP';\n\n-- Index pour recherche par statut prsence (entre/sortie)\nDROP INDEX IF EXISTS idx_guests_event_attendance;\nCREATE INDEX CONCURRENTLY idx_guests_event_attendance \nON guests(event_id, attendance_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_attendance IS 'Index pour filtrage par statut prsence';\n\n-- ============================================\n-- 4. INDEX FILES - Recherches par vnement/menu\n-- ============================================\nDROP INDEX IF EXISTS idx_files_event_menu;\nCREATE INDEX CONCURRENTLY idx_files_event_menu \nON files(event_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_event_menu IS 'Index pour requtes fichiers par vnement/menu';\n\n-- Index pour recherches par user\nDROP INDEX IF EXISTS idx_files_user_menu_active;\nCREATE INDEX CONCURRENTLY idx_files_user_menu_active \nON files(user_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_user_menu_active IS 'Index pour requtes fichiers par utilisateur';\n\n-- ============================================\n-- 5. INDEX EVENTS - Recherches par organisateur\n-- ============================================\n-- Index pour requtes dashboard (events + guests count)\nDROP INDEX IF EXISTS idx_events_organizer_active;\nCREATE INDEX CONCURRENTLY idx_events_organizer_active \nON events(organizer_id, created_at DESC) \nWHERE is_active = true;\n\nCOMMENT ON INDEX idx_events_organizer_active IS 'Index optimis pour requtes dashboard';\n\n-- ============================================\n-- 6. INDEX GAME TABLES - Performance jeux\n-- ============================================\n-- Index pour participations par jeu\nDROP INDEX IF EXISTS idx_game_participations_game_completed;\nCREATE INDEX CONCURRENTLY idx_game_participations_game_completed \nON game_participations(game_id, is_completed, total_score);\n\nCOMMENT ON INDEX idx_game_participations_game_completed IS 'Index pour calcul stats jeu';\n\n-- Index pour rponses rcentes\nDROP INDEX IF EXISTS idx_game_answers_participation_question;\nCREATE INDEX CONCURRENTLY idx_game_answers_participation_question \nON game_answers(participation_id, question_id);\n\nCOMMENT ON INDEX idx_game_answers_participation_question IS 'Index couvrant pour vrification rponses';\n\n-- ============================================\n-- 7. OPTIMISATION: Dsactivation trigger synchrone game_stats\n-- ============================================\n-- Le trigger recalcule les stats  chaque rponse (trop coteux)\n-- Solution: Traitement asynchrone via job queue\n\nDROP TRIGGER IF EXISTS trigger_update_game_stats ON game_participations;\n\nCOMMENT ON TABLE game_participations IS 'Trigger synchrone game_stats dsactiv - utiliser job queue';\n\n-- ============================================\n-- 8. TABLE POUR STATS UPDATE JOBS\n-- ============================================\nCREATE TABLE IF NOT EXISTS game_stats_update_jobs (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID NOT NULL REFERENCES games(id) ON DELETE CASCADE,\n    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),\n    error_message TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    processed_at TIMESTAMP WITH TIME ZONE,\n    retry_count INTEGER DEFAULT 0\n);\n\n-- Index pour rcuprer les jobs pending\nCREATE INDEX idx_game_stats_jobs_pending ON game_stats_update_jobs(status, created_at) \nWHERE status = 'pending';\n\nCOMMENT ON TABLE game_stats_update_jobs IS 'File d''attente pour mise  jour async des stats de jeu';\n\n-- ============================================\n-- 9. FONCTION TRIGGER LGRE\n-- ============================================\nCREATE OR REPLACE FUNCTION queue_game_stats_update()\nRETURNS TRIGGER AS $$\nBEGIN\n    -- Insre juste un job au lieu de recalculer\n    INSERT INTO game_stats_update_jobs (game_id)\n    VALUES (COALESCE(NEW.game_id, OLD.game_id))\n    ON CONFLICT DO NOTHING; -- vite les doublons\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql';\n\n-- Trigger lger (async)\nDROP TRIGGER IF EXISTS trigger_queue_game_stats_update ON game_participations;\nCREATE TRIGGER trigger_queue_game_stats_update\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION queue_game_stats_update();\n\n-- ============================================\n-- 10. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Index de performance crs avec succs';\n    RAISE NOTICE 'Trigger game_stats synchrone remplac par version async';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":"Applying migration: 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:01:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 19:01:40"}
{"0":"C","1":"R","10":"E","11":"X","12":" ","13":"C","14":"O","15":"N","16":"C","17":"U","18":"R","19":"R","2":"E","20":"E","21":"N","22":"T","23":"L","24":"Y","25":" ","26":"c","27":"a","28":"n","29":"n","3":"A","30":"o","31":"t","32":" ","33":"r","34":"u","35":"n","36":" ","37":"i","38":"n","39":"s","4":"T","40":"i","41":"d","42":"e","43":" ","44":"a","45":" ","46":"t","47":"r","48":"a","49":"n","5":"E","50":"s","51":"a","52":"c","53":"t","54":"i","55":"o","56":"n","57":" ","58":"b","59":"l","6":" ","60":"o","61":"c","62":"k","7":"I","8":"N","9":"D","level":"error","message":" Failed to apply migration 007_add_performance_indexes.sql:","service":"qrevent-backend","timestamp":"2026-02-05 19:01:40"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 19:01:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:01:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:01:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:02:04"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"Found 14 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"\n Migration to apply (007_add_performance_indexes.sql):","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"-- Migration: Ajout d'index de performance critiques\n-- Date: 2026-02-05\n-- Priorit: CRITIQUE\n-- Description: Optimise les requtes frquentes pour la monte en charge\n\n-- ============================================\n-- 1. INDEX QR CODES - Validation rapide\n-- ============================================\n-- Problme: Requte findByCode avec is_valid + expires_at fait un seq scan\n-- Impact: Chaque scan de QR (~1M/jour potentiel) est lent\n\nDROP INDEX IF EXISTS idx_qr_codes_validation;\nCREATE INDEX idx_qr_codes_validation \nON qr_codes(code, is_valid, expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_validation IS 'Index composite pour validation QR rapide';\n\n-- Index pour nettoyage des QR expirs (job de maintenance)\nDROP INDEX IF EXISTS idx_qr_codes_expiry_cleanup;\nCREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_codes(expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_expiry_cleanup IS 'Index pour job de nettoyage des QR expirs';\n\n-- ============================================\n-- 2. INDEX ATTENDANCE - Requtes par vnement\n-- ============================================\n-- Problme: findByEvent fait un seq scan + tri\n-- Impact: Dashboard lent avec beaucoup d'entres\n\nDROP INDEX IF EXISTS idx_attendance_event_timestamp;\nCREATE INDEX idx_attendance_event_timestamp \nON attendance(event_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_timestamp IS 'Index pour requtes attendance rcentes';\n\n-- Index couvrant pour viter le lookup\nDROP INDEX IF EXISTS idx_attendance_event_guest_timestamp;\nCREATE INDEX idx_attendance_event_guest_timestamp \nON attendance(event_id, guest_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_guest_timestamp IS 'Index couvrant pour requtes avec guest';\n\n-- Index pour statistiques par jour (reporting)\nDROP INDEX IF EXISTS idx_attendance_date;\nCREATE INDEX idx_attendance_date \nON attendance(event_id, DATE(timestamp), status);\n\nCOMMENT ON INDEX idx_attendance_date IS 'Index pour agrgations par jour';\n\n-- ============================================\n-- 3. INDEX GUESTS - Recherches frquentes\n-- ============================================\n-- Index pour recherche par statut RSVP (dashboard)\nDROP INDEX IF EXISTS idx_guests_event_rsvp;\nCREATE INDEX idx_guests_event_rsvp \nON guests(event_id, rsvp_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_rsvp IS 'Index pour filtrage par statut RSVP';\n\n-- Index pour recherche par statut prsence (entre/sortie)\nDROP INDEX IF EXISTS idx_guests_event_attendance;\nCREATE INDEX idx_guests_event_attendance \nON guests(event_id, attendance_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_attendance IS 'Index pour filtrage par statut prsence';\n\n-- ============================================\n-- 4. INDEX FILES - Recherches par vnement/menu\n-- ============================================\nDROP INDEX IF EXISTS idx_files_event_menu;\nCREATE INDEX idx_files_event_menu \nON files(event_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_event_menu IS 'Index pour requtes fichiers par vnement/menu';\n\n-- Index pour recherches par user\nDROP INDEX IF EXISTS idx_files_user_menu_active;\nCREATE INDEX idx_files_user_menu_active \nON files(user_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_user_menu_active IS 'Index pour requtes fichiers par utilisateur';\n\n-- ============================================\n-- 5. INDEX EVENTS - Recherches par organisateur\n-- ============================================\n-- Index pour requtes dashboard (events + guests count)\nDROP INDEX IF EXISTS idx_events_organizer_active;\nCREATE INDEX idx_events_organizer_active \nON events(organizer_id, created_at DESC) \nWHERE is_active = true;\n\nCOMMENT ON INDEX idx_events_organizer_active IS 'Index optimis pour requtes dashboard';\n\n-- ============================================\n-- 6. INDEX GAME TABLES - Performance jeux\n-- ============================================\n-- Index pour participations par jeu\nDROP INDEX IF EXISTS idx_game_participations_game_completed;\nCREATE INDEX idx_game_participations_game_completed \nON game_participations(game_id, is_completed, total_score);\n\nCOMMENT ON INDEX idx_game_participations_game_completed IS 'Index pour calcul stats jeu';\n\n-- Index pour rponses rcentes\nDROP INDEX IF EXISTS idx_game_answers_participation_question;\nCREATE INDEX idx_game_answers_participation_question \nON game_answers(participation_id, question_id);\n\nCOMMENT ON INDEX idx_game_answers_participation_question IS 'Index couvrant pour vrification rponses';\n\n-- ============================================\n-- 7. OPTIMISATION: Dsactivation trigger synchrone game_stats\n-- ============================================\n-- Le trigger recalcule les stats  chaque rponse (trop coteux)\n-- Solution: Traitement asynchrone via job queue\n\nDROP TRIGGER IF EXISTS trigger_update_game_stats ON game_participations;\n\nCOMMENT ON TABLE game_participations IS 'Trigger synchrone game_stats dsactiv - utiliser job queue';\n\n-- ============================================\n-- 8. TABLE POUR STATS UPDATE JOBS\n-- ============================================\nCREATE TABLE IF NOT EXISTS game_stats_update_jobs (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID NOT NULL REFERENCES games(id) ON DELETE CASCADE,\n    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),\n    error_message TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    processed_at TIMESTAMP WITH TIME ZONE,\n    retry_count INTEGER DEFAULT 0\n);\n\n-- Index pour rcuprer les jobs pending\nCREATE INDEX idx_game_stats_jobs_pending ON game_stats_update_jobs(status, created_at) \nWHERE status = 'pending';\n\nCOMMENT ON TABLE game_stats_update_jobs IS 'File d''attente pour mise  jour async des stats de jeu';\n\n-- ============================================\n-- 9. FONCTION TRIGGER LGRE\n-- ============================================\nCREATE OR REPLACE FUNCTION queue_game_stats_update()\nRETURNS TRIGGER AS $$\nBEGIN\n    -- Insre juste un job au lieu de recalculer\n    INSERT INTO game_stats_update_jobs (game_id)\n    VALUES (COALESCE(NEW.game_id, OLD.game_id))\n    ON CONFLICT DO NOTHING; -- vite les doublons\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql';\n\n-- Trigger lger (async)\nDROP TRIGGER IF EXISTS trigger_queue_game_stats_update ON game_participations;\nCREATE TRIGGER trigger_queue_game_stats_update\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION queue_game_stats_update();\n\n-- ============================================\n-- 10. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Index de performance crs avec succs';\n    RAISE NOTICE 'Trigger game_stats synchrone remplac par version async';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":"Applying migration: 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 19:02:11"}
{"0":"f","1":"u","10":"i","11":"n","12":" ","13":"i","14":"n","15":"d","16":"e","17":"x","18":" ","19":"e","2":"n","20":"x","21":"p","22":"r","23":"e","24":"s","25":"s","26":"i","27":"o","28":"n","29":" ","3":"c","30":"m","31":"u","32":"s","33":"t","34":" ","35":"b","36":"e","37":" ","38":"m","39":"a","4":"t","40":"r","41":"k","42":"e","43":"d","44":" ","45":"I","46":"M","47":"M","48":"U","49":"T","5":"i","50":"A","51":"B","52":"L","53":"E","6":"o","7":"n","8":"s","9":" ","level":"error","message":" Failed to apply migration 007_add_performance_indexes.sql:","service":"qrevent-backend","timestamp":"2026-02-05 19:02:13"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 19:02:13"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"Found 14 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"\n Migration to apply (007_add_performance_indexes.sql):","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"-- Migration: Ajout d'index de performance critiques\n-- Date: 2026-02-05\n-- Priorit: CRITIQUE\n-- Description: Optimise les requtes frquentes pour la monte en charge\n\n-- ============================================\n-- 1. INDEX QR CODES - Validation rapide\n-- ============================================\n-- Problme: Requte findByCode avec is_valid + expires_at fait un seq scan\n-- Impact: Chaque scan de QR (~1M/jour potentiel) est lent\n\nDROP INDEX IF EXISTS idx_qr_codes_validation;\nCREATE INDEX idx_qr_codes_validation \nON qr_codes(code, is_valid, expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_validation IS 'Index composite pour validation QR rapide';\n\n-- Index pour nettoyage des QR expirs (job de maintenance)\nDROP INDEX IF EXISTS idx_qr_codes_expiry_cleanup;\nCREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_codes(expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_expiry_cleanup IS 'Index pour job de nettoyage des QR expirs';\n\n-- ============================================\n-- 2. INDEX ATTENDANCE - Requtes par vnement\n-- ============================================\n-- Problme: findByEvent fait un seq scan + tri\n-- Impact: Dashboard lent avec beaucoup d'entres\n\nDROP INDEX IF EXISTS idx_attendance_event_timestamp;\nCREATE INDEX idx_attendance_event_timestamp \nON attendance(event_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_timestamp IS 'Index pour requtes attendance rcentes';\n\n-- Index couvrant pour viter le lookup\nDROP INDEX IF EXISTS idx_attendance_event_guest_timestamp;\nCREATE INDEX idx_attendance_event_guest_timestamp \nON attendance(event_id, guest_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_guest_timestamp IS 'Index couvrant pour requtes avec guest';\n\n-- Index pour statistiques par jour (reporting)\nDROP INDEX IF EXISTS idx_attendance_date;\nCREATE INDEX idx_attendance_date \nON attendance(event_id, DATE(timestamp), status);\n\nCOMMENT ON INDEX idx_attendance_date IS 'Index pour agrgations par jour';\n\n-- ============================================\n-- 3. INDEX GUESTS - Recherches frquentes\n-- ============================================\n-- Index pour recherche par statut RSVP (dashboard)\nDROP INDEX IF EXISTS idx_guests_event_rsvp;\nCREATE INDEX idx_guests_event_rsvp \nON guests(event_id, rsvp_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_rsvp IS 'Index pour filtrage par statut RSVP';\n\n-- Index pour recherche par statut prsence (entre/sortie)\nDROP INDEX IF EXISTS idx_guests_event_attendance;\nCREATE INDEX idx_guests_event_attendance \nON guests(event_id, attendance_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_attendance IS 'Index pour filtrage par statut prsence';\n\n-- ============================================\n-- 4. INDEX FILES - Recherches par vnement/menu\n-- ============================================\nDROP INDEX IF EXISTS idx_files_event_menu;\nCREATE INDEX idx_files_event_menu \nON files(event_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_event_menu IS 'Index pour requtes fichiers par vnement/menu';\n\n-- Index pour recherches par user\nDROP INDEX IF EXISTS idx_files_user_menu_active;\nCREATE INDEX idx_files_user_menu_active \nON files(user_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_user_menu_active IS 'Index pour requtes fichiers par utilisateur';\n\n-- ============================================\n-- 5. INDEX EVENTS - Recherches par organisateur\n-- ============================================\n-- Index pour requtes dashboard (events + guests count)\nDROP INDEX IF EXISTS idx_events_organizer_active;\nCREATE INDEX idx_events_organizer_active \nON events(organizer_id, created_at DESC) \nWHERE is_active = true;\n\nCOMMENT ON INDEX idx_events_organizer_active IS 'Index optimis pour requtes dashboard';\n\n-- ============================================\n-- 6. INDEX GAME TABLES - Performance jeux\n-- ============================================\n-- Index pour participations par jeu\nDROP INDEX IF EXISTS idx_game_participations_game_completed;\nCREATE INDEX idx_game_participations_game_completed \nON game_participations(game_id, is_completed, total_score);\n\nCOMMENT ON INDEX idx_game_participations_game_completed IS 'Index pour calcul stats jeu';\n\n-- Index pour rponses rcentes\nDROP INDEX IF EXISTS idx_game_answers_participation_question;\nCREATE INDEX idx_game_answers_participation_question \nON game_answers(participation_id, question_id);\n\nCOMMENT ON INDEX idx_game_answers_participation_question IS 'Index couvrant pour vrification rponses';\n\n-- ============================================\n-- 7. OPTIMISATION: Dsactivation trigger synchrone game_stats\n-- ============================================\n-- Le trigger recalcule les stats  chaque rponse (trop coteux)\n-- Solution: Traitement asynchrone via job queue\n\nDROP TRIGGER IF EXISTS trigger_update_game_stats ON game_participations;\n\nCOMMENT ON TABLE game_participations IS 'Trigger synchrone game_stats dsactiv - utiliser job queue';\n\n-- ============================================\n-- 8. TABLE POUR STATS UPDATE JOBS\n-- ============================================\nCREATE TABLE IF NOT EXISTS game_stats_update_jobs (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID NOT NULL REFERENCES games(id) ON DELETE CASCADE,\n    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),\n    error_message TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    processed_at TIMESTAMP WITH TIME ZONE,\n    retry_count INTEGER DEFAULT 0\n);\n\n-- Index pour rcuprer les jobs pending\nCREATE INDEX idx_game_stats_jobs_pending ON game_stats_update_jobs(status, created_at) \nWHERE status = 'pending';\n\nCOMMENT ON TABLE game_stats_update_jobs IS 'File d''attente pour mise  jour async des stats de jeu';\n\n-- ============================================\n-- 9. FONCTION TRIGGER LGRE\n-- ============================================\nCREATE OR REPLACE FUNCTION queue_game_stats_update()\nRETURNS TRIGGER AS $$\nDECLARE\n    v_game_id UUID;\nBEGIN\n    v_game_id := COALESCE(NEW.game_id, OLD.game_id);\n    \n    -- Insre juste un job si pas dj pending pour ce jeu\n    INSERT INTO game_stats_update_jobs (game_id, status, created_at)\n    SELECT v_game_id, 'pending', NOW()\n    WHERE NOT EXISTS (\n        SELECT 1 FROM game_stats_update_jobs \n        WHERE game_id = v_game_id AND status = 'pending'\n    );\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql' VOLATILE;\n\n-- Trigger lger (async)\nDROP TRIGGER IF EXISTS trigger_queue_game_stats_update ON game_participations;\nCREATE TRIGGER trigger_queue_game_stats_update\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION queue_game_stats_update();\n\n-- ============================================\n-- 10. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Index de performance crs avec succs';\n    RAISE NOTICE 'Trigger game_stats synchrone remplac par version async';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":"Applying migration: 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:02:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 19:02:46"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_qr_codes_validation \nON qr_codes(...","service":"qrevent-backend","timestamp":"2026-02-05 19:02:46"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_co...","service":"qrevent-backend","timestamp":"2026-02-05 19:02:47"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_event_timestamp \nON at...","service":"qrevent-backend","timestamp":"2026-02-05 19:02:47"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_event_guest_timestamp ...","service":"qrevent-backend","timestamp":"2026-02-05 19:02:48"}
{"0":"f","1":"u","10":"i","11":"n","12":" ","13":"i","14":"n","15":"d","16":"e","17":"x","18":" ","19":"e","2":"n","20":"x","21":"p","22":"r","23":"e","24":"s","25":"s","26":"i","27":"o","28":"n","29":" ","3":"c","30":"m","31":"u","32":"s","33":"t","34":" ","35":"b","36":"e","37":" ","38":"m","39":"a","4":"t","40":"r","41":"k","42":"e","43":"d","44":" ","45":"I","46":"M","47":"M","48":"U","49":"T","5":"i","50":"A","51":"B","52":"L","53":"E","6":"o","7":"n","8":"s","9":" ","level":"error","message":" Failed to apply migration 007_add_performance_indexes.sql:","service":"qrevent-backend","timestamp":"2026-02-05 19:02:48"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 19:02:49"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"Found 14 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"\n Migration to apply (007_add_performance_indexes.sql):","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"-- Migration: Ajout d'index de performance critiques\n-- Date: 2026-02-05\n-- Priorit: CRITIQUE\n-- Description: Optimise les requtes frquentes pour la monte en charge\n\n-- ============================================\n-- 1. INDEX QR CODES - Validation rapide\n-- ============================================\n-- Problme: Requte findByCode avec is_valid + expires_at fait un seq scan\n-- Impact: Chaque scan de QR (~1M/jour potentiel) est lent\n\nDROP INDEX IF EXISTS idx_qr_codes_validation;\nCREATE INDEX idx_qr_codes_validation \nON qr_codes(code, is_valid, expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_validation IS 'Index composite pour validation QR rapide';\n\n-- Index pour nettoyage des QR expirs (job de maintenance)\nDROP INDEX IF EXISTS idx_qr_codes_expiry_cleanup;\nCREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_codes(expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_expiry_cleanup IS 'Index pour job de nettoyage des QR expirs';\n\n-- ============================================\n-- 2. INDEX ATTENDANCE - Requtes par vnement\n-- ============================================\n-- Problme: findByEvent fait un seq scan + tri\n-- Impact: Dashboard lent avec beaucoup d'entres\n\nDROP INDEX IF EXISTS idx_attendance_event_timestamp;\nCREATE INDEX idx_attendance_event_timestamp \nON attendance(event_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_timestamp IS 'Index pour requtes attendance rcentes';\n\n-- Index couvrant pour viter le lookup\nDROP INDEX IF EXISTS idx_attendance_event_guest_timestamp;\nCREATE INDEX idx_attendance_event_guest_timestamp \nON attendance(event_id, guest_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_guest_timestamp IS 'Index couvrant pour requtes avec guest';\n\n-- Index pour statistiques par jour (reporting) - sans DATE() pour viter immutable restriction\nDROP INDEX IF EXISTS idx_attendance_date;\nCREATE INDEX idx_attendance_date \nON attendance(event_id, timestamp, status);\n\nCOMMENT ON INDEX idx_attendance_date IS 'Index pour agrgations par jour';\n\n-- ============================================\n-- 3. INDEX GUESTS - Recherches frquentes\n-- ============================================\n-- Index pour recherche par statut RSVP (dashboard)\nDROP INDEX IF EXISTS idx_guests_event_rsvp;\nCREATE INDEX idx_guests_event_rsvp \nON guests(event_id, rsvp_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_rsvp IS 'Index pour filtrage par statut RSVP';\n\n-- Index pour recherche par statut prsence (entre/sortie)\nDROP INDEX IF EXISTS idx_guests_event_attendance;\nCREATE INDEX idx_guests_event_attendance \nON guests(event_id, attendance_status) \nWHERE is_active = true OR is_active IS NULL;\n\nCOMMENT ON INDEX idx_guests_event_attendance IS 'Index pour filtrage par statut prsence';\n\n-- ============================================\n-- 4. INDEX FILES - Recherches par vnement/menu\n-- ============================================\nDROP INDEX IF EXISTS idx_files_event_menu;\nCREATE INDEX idx_files_event_menu \nON files(event_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_event_menu IS 'Index pour requtes fichiers par vnement/menu';\n\n-- Index pour recherches par user\nDROP INDEX IF EXISTS idx_files_user_menu_active;\nCREATE INDEX idx_files_user_menu_active \nON files(user_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_user_menu_active IS 'Index pour requtes fichiers par utilisateur';\n\n-- ============================================\n-- 5. INDEX EVENTS - Recherches par organisateur\n-- ============================================\n-- Index pour requtes dashboard (events + guests count)\nDROP INDEX IF EXISTS idx_events_organizer_active;\nCREATE INDEX idx_events_organizer_active \nON events(organizer_id, created_at DESC) \nWHERE is_active = true;\n\nCOMMENT ON INDEX idx_events_organizer_active IS 'Index optimis pour requtes dashboard';\n\n-- ============================================\n-- 6. INDEX GAME TABLES - Performance jeux\n-- ============================================\n-- Index pour participations par jeu\nDROP INDEX IF EXISTS idx_game_participations_game_completed;\nCREATE INDEX idx_game_participations_game_completed \nON game_participations(game_id, is_completed, total_score);\n\nCOMMENT ON INDEX idx_game_participations_game_completed IS 'Index pour calcul stats jeu';\n\n-- Index pour rponses rcentes\nDROP INDEX IF EXISTS idx_game_answers_participation_question;\nCREATE INDEX idx_game_answers_participation_question \nON game_answers(participation_id, question_id);\n\nCOMMENT ON INDEX idx_game_answers_participation_question IS 'Index couvrant pour vrification rponses';\n\n-- ============================================\n-- 7. OPTIMISATION: Dsactivation trigger synchrone game_stats\n-- ============================================\n-- Le trigger recalcule les stats  chaque rponse (trop coteux)\n-- Solution: Traitement asynchrone via job queue\n\nDROP TRIGGER IF EXISTS trigger_update_game_stats ON game_participations;\n\nCOMMENT ON TABLE game_participations IS 'Trigger synchrone game_stats dsactiv - utiliser job queue';\n\n-- ============================================\n-- 8. TABLE POUR STATS UPDATE JOBS\n-- ============================================\nCREATE TABLE IF NOT EXISTS game_stats_update_jobs (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID NOT NULL REFERENCES games(id) ON DELETE CASCADE,\n    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),\n    error_message TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    processed_at TIMESTAMP WITH TIME ZONE,\n    retry_count INTEGER DEFAULT 0\n);\n\n-- Index pour rcuprer les jobs pending\nCREATE INDEX idx_game_stats_jobs_pending ON game_stats_update_jobs(status, created_at) \nWHERE status = 'pending';\n\nCOMMENT ON TABLE game_stats_update_jobs IS 'File d''attente pour mise  jour async des stats de jeu';\n\n-- ============================================\n-- 9. FONCTION TRIGGER LGRE\n-- ============================================\nCREATE OR REPLACE FUNCTION queue_game_stats_update()\nRETURNS TRIGGER AS $$\nDECLARE\n    v_game_id UUID;\nBEGIN\n    v_game_id := COALESCE(NEW.game_id, OLD.game_id);\n    \n    -- Insre juste un job si pas dj pending pour ce jeu\n    INSERT INTO game_stats_update_jobs (game_id, status, created_at)\n    SELECT v_game_id, 'pending', NOW()\n    WHERE NOT EXISTS (\n        SELECT 1 FROM game_stats_update_jobs \n        WHERE game_id = v_game_id AND status = 'pending'\n    );\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql' VOLATILE;\n\n-- Trigger lger (async)\nDROP TRIGGER IF EXISTS trigger_queue_game_stats_update ON game_participations;\nCREATE TRIGGER trigger_queue_game_stats_update\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION queue_game_stats_update();\n\n-- ============================================\n-- 10. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Index de performance crs avec succs';\n    RAISE NOTICE 'Trigger game_stats synchrone remplac par version async';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":"Applying migration: 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 19:03:09"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_qr_codes_validation \nON qr_codes(...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:10"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_co...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:10"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_event_timestamp \nON at...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:11"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_event_guest_timestamp ...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:12"}
{"0":"c","1":"o","10":"_","11":"a","12":"c","13":"t","14":"i","15":"v","16":"e","17":"\"","18":" ","19":"d","2":"l","20":"o","21":"e","22":"s","23":" ","24":"n","25":"o","26":"t","27":" ","28":"e","29":"x","3":"u","30":"i","31":"s","32":"t","4":"m","5":"n","6":" ","7":"\"","8":"i","9":"s","level":"error","message":" Failed to apply migration 007_add_performance_indexes.sql:","service":"qrevent-backend","timestamp":"2026-02-05 19:03:13"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 19:03:13"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"Found 14 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"\n Migration to apply (007_add_performance_indexes.sql):","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"-- Migration: Ajout d'index de performance critiques\n-- Date: 2026-02-05\n-- Priorit: CRITIQUE\n-- Description: Optimise les requtes frquentes pour la monte en charge\n\n-- ============================================\n-- 1. INDEX QR CODES - Validation rapide\n-- ============================================\n-- Problme: Requte findByCode avec is_valid + expires_at fait un seq scan\n-- Impact: Chaque scan de QR (~1M/jour potentiel) est lent\n\nDROP INDEX IF EXISTS idx_qr_codes_validation;\nCREATE INDEX idx_qr_codes_validation \nON qr_codes(code, is_valid, expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_validation IS 'Index composite pour validation QR rapide';\n\n-- Index pour nettoyage des QR expirs (job de maintenance)\nDROP INDEX IF EXISTS idx_qr_codes_expiry_cleanup;\nCREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_codes(expires_at) \nWHERE is_valid = true;\n\nCOMMENT ON INDEX idx_qr_codes_expiry_cleanup IS 'Index pour job de nettoyage des QR expirs';\n\n-- ============================================\n-- 2. INDEX ATTENDANCE - Requtes par vnement\n-- ============================================\n-- Problme: findByEvent fait un seq scan + tri\n-- Impact: Dashboard lent avec beaucoup d'entres\n\nDROP INDEX IF EXISTS idx_attendance_event_timestamp;\nCREATE INDEX idx_attendance_event_timestamp \nON attendance(event_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_timestamp IS 'Index pour requtes attendance rcentes';\n\n-- Index couvrant pour viter le lookup\nDROP INDEX IF EXISTS idx_attendance_event_guest_timestamp;\nCREATE INDEX idx_attendance_event_guest_timestamp \nON attendance(event_id, guest_id, timestamp DESC);\n\nCOMMENT ON INDEX idx_attendance_event_guest_timestamp IS 'Index couvrant pour requtes avec guest';\n\n-- Index pour statistiques par jour (reporting) - sans DATE() pour viter immutable restriction\nDROP INDEX IF EXISTS idx_attendance_date;\nCREATE INDEX idx_attendance_date \nON attendance(event_id, timestamp, status);\n\nCOMMENT ON INDEX idx_attendance_date IS 'Index pour agrgations par jour';\n\n-- ============================================\n-- 3. INDEX GUESTS - Recherches frquentes\n-- ============================================\n-- Index pour recherche par statut RSVP (dashboard)\nDROP INDEX IF EXISTS idx_guests_event_rsvp;\nCREATE INDEX idx_guests_event_rsvp \nON guests(event_id, rsvp_status);\n\nCOMMENT ON INDEX idx_guests_event_rsvp IS 'Index pour filtrage par statut RSVP';\n\n-- Index pour recherche par statut prsence (entre/sortie)\nDROP INDEX IF EXISTS idx_guests_event_attendance;\nCREATE INDEX idx_guests_event_attendance \nON guests(event_id, attendance_status);\n\nCOMMENT ON INDEX idx_guests_event_attendance IS 'Index pour filtrage par statut prsence';\n\n-- ============================================\n-- 4. INDEX FILES - Recherches par vnement/menu\n-- ============================================\nDROP INDEX IF EXISTS idx_files_event_menu;\nCREATE INDEX idx_files_event_menu \nON files(event_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_event_menu IS 'Index pour requtes fichiers par vnement/menu';\n\n-- Index pour recherches par user\nDROP INDEX IF EXISTS idx_files_user_menu_active;\nCREATE INDEX idx_files_user_menu_active \nON files(user_id, menu, submenu) \nWHERE is_deleted = false;\n\nCOMMENT ON INDEX idx_files_user_menu_active IS 'Index pour requtes fichiers par utilisateur';\n\n-- ============================================\n-- 5. INDEX EVENTS - Recherches par organisateur\n-- ============================================\n-- Index pour requtes dashboard (events + guests count)\nDROP INDEX IF EXISTS idx_events_organizer_active;\nCREATE INDEX idx_events_organizer_active \nON events(organizer_id, created_at DESC) \nWHERE is_active = true;\n\nCOMMENT ON INDEX idx_events_organizer_active IS 'Index optimis pour requtes dashboard';\n\n-- ============================================\n-- 6. INDEX GAME TABLES - Performance jeux\n-- ============================================\n-- Index pour participations par jeu\nDROP INDEX IF EXISTS idx_game_participations_game_completed;\nCREATE INDEX idx_game_participations_game_completed \nON game_participations(game_id, is_completed, total_score);\n\nCOMMENT ON INDEX idx_game_participations_game_completed IS 'Index pour calcul stats jeu';\n\n-- Index pour rponses rcentes\nDROP INDEX IF EXISTS idx_game_answers_participation_question;\nCREATE INDEX idx_game_answers_participation_question \nON game_answers(participation_id, question_id);\n\nCOMMENT ON INDEX idx_game_answers_participation_question IS 'Index couvrant pour vrification rponses';\n\n-- ============================================\n-- 7. OPTIMISATION: Dsactivation trigger synchrone game_stats\n-- ============================================\n-- Le trigger recalcule les stats  chaque rponse (trop coteux)\n-- Solution: Traitement asynchrone via job queue\n\nDROP TRIGGER IF EXISTS trigger_update_game_stats ON game_participations;\n\nCOMMENT ON TABLE game_participations IS 'Trigger synchrone game_stats dsactiv - utiliser job queue';\n\n-- ============================================\n-- 8. TABLE POUR STATS UPDATE JOBS\n-- ============================================\nCREATE TABLE IF NOT EXISTS game_stats_update_jobs (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID NOT NULL REFERENCES games(id) ON DELETE CASCADE,\n    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),\n    error_message TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    processed_at TIMESTAMP WITH TIME ZONE,\n    retry_count INTEGER DEFAULT 0\n);\n\n-- Index pour rcuprer les jobs pending\nCREATE INDEX idx_game_stats_jobs_pending ON game_stats_update_jobs(status, created_at) \nWHERE status = 'pending';\n\nCOMMENT ON TABLE game_stats_update_jobs IS 'File d''attente pour mise  jour async des stats de jeu';\n\n-- ============================================\n-- 9. FONCTION TRIGGER LGRE\n-- ============================================\nCREATE OR REPLACE FUNCTION queue_game_stats_update()\nRETURNS TRIGGER AS $$\nDECLARE\n    v_game_id UUID;\nBEGIN\n    v_game_id := COALESCE(NEW.game_id, OLD.game_id);\n    \n    -- Insre juste un job si pas dj pending pour ce jeu\n    INSERT INTO game_stats_update_jobs (game_id, status, created_at)\n    SELECT v_game_id, 'pending', NOW()\n    WHERE NOT EXISTS (\n        SELECT 1 FROM game_stats_update_jobs \n        WHERE game_id = v_game_id AND status = 'pending'\n    );\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql' VOLATILE;\n\n-- Trigger lger (async)\nDROP TRIGGER IF EXISTS trigger_queue_game_stats_update ON game_participations;\nCREATE TRIGGER trigger_queue_game_stats_update\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION queue_game_stats_update();\n\n-- ============================================\n-- 10. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Index de performance crs avec succs';\n    RAISE NOTICE 'Trigger game_stats synchrone remplac par version async';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":"Applying migration: 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 19:03:44"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_qr_codes_validation \nON qr_codes(...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:45"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_qr_codes_expiry_cleanup \nON qr_co...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:45"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_event_timestamp \nON at...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:46"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_event_guest_timestamp ...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:47"}
{"level":"info","message":"    Skipping (already exists): CREATE INDEX idx_attendance_date \nON attendance(ev...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:47"}
{"0":"r","1":"e","10":"g","11":"a","12":"m","13":"e","14":"_","15":"p","16":"a","17":"r","18":"t","19":"i","2":"l","20":"c","21":"i","22":"p","23":"a","24":"t","25":"i","26":"o","27":"n","28":"s","29":"\"","3":"a","30":" ","31":"d","32":"o","33":"e","34":"s","35":" ","36":"n","37":"o","38":"t","39":" ","4":"t","40":"e","41":"x","42":"i","43":"s","44":"t","5":"i","6":"o","7":"n","8":" ","9":"\"","level":"error","message":" Failed to apply migration 007_add_performance_indexes.sql:","service":"qrevent-backend","timestamp":"2026-02-05 19:03:51"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 19:03:51"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"Found 14 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"\n Migration to apply (006_add_games_tables.sql):","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"-- Migration: Ajout des tables pour le systme de jeux\n-- Date: 2026-02-05\n-- Description: Cration des tables games, game_questions, game_participations, game_scores\n\n-- Table des jeux\nCREATE TABLE IF NOT EXISTS games (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE NOT NULL,\n    name VARCHAR(200) NOT NULL,\n    type VARCHAR(50) NOT NULL CHECK (type IN ('quiz', 'puzzle', 'shoe_game', 'photo_scavenger', 'blind_test', 'twelve_months', 'memory', 'trivia')),\n    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'active', 'paused', 'completed')),\n    description TEXT,\n    settings JSONB DEFAULT '{}',\n    total_questions INTEGER DEFAULT 0,\n    players_count INTEGER DEFAULT 0,\n    avg_score DECIMAL(5,2) DEFAULT 0,\n    is_active BOOLEAN DEFAULT TRUE,\n    started_at TIMESTAMP WITH TIME ZONE,\n    ended_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des questions pour les jeux\nCREATE TABLE IF NOT EXISTS game_questions (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    question TEXT NOT NULL,\n    question_type VARCHAR(50) DEFAULT 'multiple_choice' CHECK (question_type IN ('multiple_choice', 'text', 'photo', 'boolean', 'ordering')),\n    options JSONB, -- Pour les questions  choix multiples: [{\"text\": \"Option 1\", \"isCorrect\": true}, ...]\n    correct_answer TEXT, -- Rponse correcte pour les questions texte\n    points INTEGER DEFAULT 1,\n    sort_order INTEGER DEFAULT 0,\n    media_url TEXT, -- URL d'image ou vido associe  la question\n    time_limit INTEGER, -- Temps limite en secondes (NULL = pas de limite)\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des participations aux jeux (pour les invits)\nCREATE TABLE IF NOT EXISTS game_participations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE NOT NULL,\n    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    completed_at TIMESTAMP WITH TIME ZONE,\n    total_score INTEGER DEFAULT 0,\n    correct_answers INTEGER DEFAULT 0,\n    total_answers INTEGER DEFAULT 0,\n    is_completed BOOLEAN DEFAULT FALSE,\n    UNIQUE(game_id, guest_id)\n);\n\n-- Table des rponses aux questions\nCREATE TABLE IF NOT EXISTS game_answers (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    participation_id UUID REFERENCES game_participations(id) ON DELETE CASCADE NOT NULL,\n    question_id UUID REFERENCES game_questions(id) ON DELETE CASCADE NOT NULL,\n    answer TEXT NOT NULL,\n    is_correct BOOLEAN DEFAULT FALSE,\n    points_earned INTEGER DEFAULT 0,\n    answered_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(participation_id, question_id)\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_games_event ON games(event_id);\nCREATE INDEX IF NOT EXISTS idx_games_type ON games(type);\nCREATE INDEX IF NOT EXISTS idx_games_status ON games(status);\nCREATE INDEX IF NOT EXISTS idx_game_questions_game ON game_questions(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_questions_sort ON game_questions(game_id, sort_order);\nCREATE INDEX IF NOT EXISTS idx_game_participations_game ON game_participations(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_participations_guest ON game_participations(guest_id);\nCREATE INDEX IF NOT EXISTS idx_game_answers_participation ON game_answers(participation_id);\n\n-- Trigger pour mettre  jour updated_at\nCREATE TRIGGER update_games_updated_at BEFORE UPDATE ON games FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_game_questions_updated_at BEFORE UPDATE ON game_questions FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n\n-- Fonction pour recalculer les statistiques d'un jeu\nCREATE OR REPLACE FUNCTION update_game_stats()\nRETURNS TRIGGER AS $$\nBEGIN\n    UPDATE games\n    SET \n        players_count = (\n            SELECT COUNT(DISTINCT guest_id) \n            FROM game_participations \n            WHERE game_id = COALESCE(NEW.game_id, OLD.game_id)\n        ),\n        avg_score = (\n            SELECT COALESCE(AVG(total_score), 0)\n            FROM game_participations \n            WHERE game_id = COALESCE(NEW.game_id, OLD.game_id) AND is_completed = TRUE\n        ),\n        updated_at = NOW()\n    WHERE id = COALESCE(NEW.game_id, OLD.game_id);\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql';\n\n-- Trigger pour mettre  jour les stats automatiquement\nCREATE TRIGGER trigger_update_game_stats\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION update_game_stats();\n\n-- Fonction pour mettre  jour le compteur de questions\nCREATE OR REPLACE FUNCTION update_game_question_count()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF TG_OP = 'INSERT' THEN\n        UPDATE games SET total_questions = total_questions + 1 WHERE id = NEW.game_id;\n        RETURN NEW;\n    ELSIF TG_OP = 'DELETE' THEN\n        UPDATE games SET total_questions = total_questions - 1 WHERE id = OLD.game_id;\n        RETURN OLD;\n    END IF;\n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql';\n\n-- Trigger pour le compteur de questions\nCREATE TRIGGER trigger_update_question_count\nAFTER INSERT OR DELETE ON game_questions\nFOR EACH ROW\nEXECUTE FUNCTION update_game_question_count();\n","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":"Applying migration: 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 19:03:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 19:04:01"}
{"0":"r","1":"e","10":"g","11":"a","12":"m","13":"e","14":"s","15":"\"","16":" ","17":"d","18":"o","19":"e","2":"l","20":"s","21":" ","22":"n","23":"o","24":"t","25":" ","26":"e","27":"x","28":"i","29":"s","3":"a","30":"t","4":"t","5":"i","6":"o","7":"n","8":" ","9":"\"","level":"error","message":" Failed to apply migration 006_add_games_tables.sql:","service":"qrevent-backend","timestamp":"2026-02-05 19:04:02"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 19:04:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 19:04:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:07:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:08:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:09:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:11:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:11:36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:11:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:12:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:12:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:13:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:13:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:14:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:16:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:16:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:17:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:17:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:18:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:19:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:19:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:19:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:20:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:20:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:20:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:21:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:22:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:22:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:22:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:23:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:23:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:23:36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:23:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:23:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:24:07"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"Found 17 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"\n Migration to apply (006_add_games_tables.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"-- Migration: Ajout des tables pour le systme de jeux\n-- Date: 2026-02-05\n-- Description: Cration des tables games, game_questions, game_participations, game_scores\n\n-- Table des jeux\nCREATE TABLE IF NOT EXISTS games (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE NOT NULL,\n    name VARCHAR(200) NOT NULL,\n    type VARCHAR(50) NOT NULL CHECK (type IN ('quiz', 'puzzle', 'shoe_game', 'photo_scavenger', 'blind_test', 'twelve_months', 'memory', 'trivia')),\n    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'active', 'paused', 'completed')),\n    description TEXT,\n    settings JSONB DEFAULT '{}',\n    total_questions INTEGER DEFAULT 0,\n    players_count INTEGER DEFAULT 0,\n    avg_score DECIMAL(5,2) DEFAULT 0,\n    is_active BOOLEAN DEFAULT TRUE,\n    started_at TIMESTAMP WITH TIME ZONE,\n    ended_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des questions pour les jeux\nCREATE TABLE IF NOT EXISTS game_questions (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    question TEXT NOT NULL,\n    question_type VARCHAR(50) DEFAULT 'multiple_choice' CHECK (question_type IN ('multiple_choice', 'text', 'photo', 'boolean', 'ordering')),\n    options JSONB, -- Pour les questions  choix multiples: [{\"text\": \"Option 1\", \"isCorrect\": true}, ...]\n    correct_answer TEXT, -- Rponse correcte pour les questions texte\n    points INTEGER DEFAULT 1,\n    sort_order INTEGER DEFAULT 0,\n    media_url TEXT, -- URL d'image ou vido associe  la question\n    time_limit INTEGER, -- Temps limite en secondes (NULL = pas de limite)\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des participations aux jeux (pour les invits)\nCREATE TABLE IF NOT EXISTS game_participations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE NOT NULL,\n    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    completed_at TIMESTAMP WITH TIME ZONE,\n    total_score INTEGER DEFAULT 0,\n    correct_answers INTEGER DEFAULT 0,\n    total_answers INTEGER DEFAULT 0,\n    is_completed BOOLEAN DEFAULT FALSE,\n    UNIQUE(game_id, guest_id)\n);\n\n-- Table des rponses aux questions\nCREATE TABLE IF NOT EXISTS game_answers (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    participation_id UUID REFERENCES game_participations(id) ON DELETE CASCADE NOT NULL,\n    question_id UUID REFERENCES game_questions(id) ON DELETE CASCADE NOT NULL,\n    answer TEXT NOT NULL,\n    is_correct BOOLEAN DEFAULT FALSE,\n    points_earned INTEGER DEFAULT 0,\n    answered_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(participation_id, question_id)\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_games_event ON games(event_id);\nCREATE INDEX IF NOT EXISTS idx_games_type ON games(type);\nCREATE INDEX IF NOT EXISTS idx_games_status ON games(status);\nCREATE INDEX IF NOT EXISTS idx_game_questions_game ON game_questions(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_questions_sort ON game_questions(game_id, sort_order);\nCREATE INDEX IF NOT EXISTS idx_game_participations_game ON game_participations(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_participations_guest ON game_participations(guest_id);\nCREATE INDEX IF NOT EXISTS idx_game_answers_participation ON game_answers(participation_id);\n\n-- Trigger pour mettre  jour updated_at\nCREATE TRIGGER update_games_updated_at BEFORE UPDATE ON games FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_game_questions_updated_at BEFORE UPDATE ON game_questions FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n\n-- Fonction pour recalculer les statistiques d'un jeu\nCREATE OR REPLACE FUNCTION update_game_stats()\nRETURNS TRIGGER AS $$\nBEGIN\n    UPDATE games\n    SET \n        players_count = (\n            SELECT COUNT(DISTINCT guest_id) \n            FROM game_participations \n            WHERE game_id = COALESCE(NEW.game_id, OLD.game_id)\n        ),\n        avg_score = (\n            SELECT COALESCE(AVG(total_score), 0)\n            FROM game_participations \n            WHERE game_id = COALESCE(NEW.game_id, OLD.game_id) AND is_completed = TRUE\n        ),\n        updated_at = NOW()\n    WHERE id = COALESCE(NEW.game_id, OLD.game_id);\n    \n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql';\n\n-- Trigger pour mettre  jour les stats automatiquement\nCREATE TRIGGER trigger_update_game_stats\nAFTER INSERT OR UPDATE OR DELETE ON game_participations\nFOR EACH ROW\nEXECUTE FUNCTION update_game_stats();\n\n-- Fonction pour mettre  jour le compteur de questions\nCREATE OR REPLACE FUNCTION update_game_question_count()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF TG_OP = 'INSERT' THEN\n        UPDATE games SET total_questions = total_questions + 1 WHERE id = NEW.game_id;\n        RETURN NEW;\n    ELSIF TG_OP = 'DELETE' THEN\n        UPDATE games SET total_questions = total_questions - 1 WHERE id = OLD.game_id;\n        RETURN OLD;\n    END IF;\n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ language 'plpgsql';\n\n-- Trigger pour le compteur de questions\nCREATE TRIGGER trigger_update_question_count\nAFTER INSERT OR DELETE ON game_questions\nFOR EACH ROW\nEXECUTE FUNCTION update_game_question_count();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":"Applying migration: 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:24:31"}
{"0":"r","1":"e","10":"g","11":"a","12":"m","13":"e","14":"s","15":"\"","16":" ","17":"d","18":"o","19":"e","2":"l","20":"s","21":" ","22":"n","23":"o","24":"t","25":" ","26":"e","27":"x","28":"i","29":"s","3":"a","30":"t","4":"t","5":"i","6":"o","7":"n","8":" ","9":"\"","level":"error","message":" Failed to apply migration 006_add_games_tables.sql:","service":"qrevent-backend","timestamp":"2026-02-05 21:24:31"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 21:24:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:24:41"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"Found 17 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"\n Migration to apply (001_create_tables.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"-- SQL script to create tables for Qrevent application\n\n-- Create users table\nCREATE TABLE IF NOT EXISTS users (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    email VARCHAR(255) UNIQUE NOT NULL,\n    password_hash TEXT NOT NULL,\n    role VARCHAR(50) DEFAULT 'organizer',\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create events table\nCREATE TABLE IF NOT EXISTS events (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    title VARCHAR(200) NOT NULL,\n    description TEXT NOT NULL,\n    date TIMESTAMP WITH TIME ZONE NOT NULL,\n    location JSONB, -- Store address and coordinates\n    organizer_id UUID REFERENCES users(id) ON DELETE CASCADE,\n    cover_image TEXT,\n    banner_image TEXT,\n    is_active BOOLEAN DEFAULT TRUE,\n    settings JSONB DEFAULT '{\"enableRSVP\": true, \"enableGames\": true, \"enablePhotoGallery\": true, \"enableGuestBook\": true, \"enableQRVerification\": true}',\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create guests table\nCREATE TABLE IF NOT EXISTS guests (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    first_name VARCHAR(50) NOT NULL,\n    last_name VARCHAR(50) NOT NULL,\n    email VARCHAR(255) NOT NULL,\n    phone VARCHAR(20),\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE,\n    qr_code VARCHAR(50) UNIQUE,\n    qr_generated_at TIMESTAMP WITH TIME ZONE,\n    qr_expires_at TIMESTAMP WITH TIME ZONE,\n    rsvp_status VARCHAR(20) DEFAULT 'pending' CHECK (rsvp_status IN ('pending', 'accepted', 'declined')),\n    attendance_status VARCHAR(20) DEFAULT 'not_arrived' CHECK (attendance_status IN ('not_arrived', 'arrived', 'left')),\n    attendance_time TIMESTAMP WITH TIME ZONE,\n    dietary_restrictions VARCHAR(200),\n    plus_one BOOLEAN DEFAULT FALSE,\n    guest_plus_one JSONB, -- Store first_name and last_name for plus one\n    notes TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(event_id, email) -- Each email can only be registered once per event\n);\n\n-- Create qr_codes table\nCREATE TABLE IF NOT EXISTS qr_codes (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    code VARCHAR(50) UNIQUE NOT NULL,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE,\n    generated_by UUID REFERENCES users(id),\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    expires_at TIMESTAMP WITH TIME ZONE NOT NULL,\n    is_valid BOOLEAN DEFAULT TRUE,\n    scan_count INTEGER DEFAULT 0,\n    last_scanned_at TIMESTAMP WITH TIME ZONE,\n    invalidated_reason TEXT,\n    invalidated_at TIMESTAMP WITH TIME ZONE\n);\n\n-- Create attendance table\nCREATE TABLE IF NOT EXISTS attendance (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE,\n    qr_code VARCHAR(50) NOT NULL,\n    verified_by UUID REFERENCES users(id),\n    timestamp TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    status VARCHAR(20) NOT NULL CHECK (status IN ('arrived', 'left')),\n    location JSONB, -- Store coordinates and IP if needed\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create indexes for better performance\nCREATE INDEX IF NOT EXISTS idx_events_organizer ON events(organizer_id);\nCREATE INDEX IF NOT EXISTS idx_events_date ON events(date);\nCREATE INDEX IF NOT EXISTS idx_guests_event ON guests(event_id);\nCREATE INDEX IF NOT EXISTS idx_guests_email ON guests(email);\nCREATE INDEX IF NOT EXISTS idx_qr_codes_code ON qr_codes(code);\nCREATE INDEX IF NOT EXISTS idx_qr_codes_guest ON qr_codes(guest_id);\nCREATE INDEX IF NOT EXISTS idx_attendance_event ON attendance(event_id);\nCREATE INDEX IF NOT EXISTS idx_attendance_guest ON attendance(guest_id);\nCREATE INDEX IF NOT EXISTS idx_attendance_timestamp ON attendance(timestamp);\n\n-- Create a function to update the updated_at column\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create triggers to automatically update the updated_at column\nCREATE TRIGGER update_users_updated_at BEFORE UPDATE ON users FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_events_updated_at BEFORE UPDATE ON events FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_guests_updated_at BEFORE UPDATE ON guests FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_qr_codes_updated_at BEFORE UPDATE ON qr_codes FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":"Applying migration: 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:24:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:24:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:24:49"}
{"0":"s","1":"y","10":"o","11":"r","12":" ","13":"a","14":"t","15":" ","16":"o","17":"r","18":" ","19":"n","2":"n","20":"e","21":"a","22":"r","23":" ","24":"\"","25":"R","26":"E","27":"T","28":"U","29":"R","3":"t","30":"N","31":"\"","4":"a","5":"x","6":" ","7":"e","8":"r","9":"r","level":"error","message":" Failed to apply migration 001_create_tables.sql:","service":"qrevent-backend","timestamp":"2026-02-05 21:24:51"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 21:24:51"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"\n Migration to apply (006_add_games_tables_fixed.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"-- Migration: Ajout des tables pour le systme de jeux (version simplifie)\n-- Date: 2026-02-05\n\n-- Crer la fonction update_updated_at_column si elle n'existe pas\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Table des jeux\nCREATE TABLE IF NOT EXISTS games (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE NOT NULL,\n    name VARCHAR(200) NOT NULL,\n    type VARCHAR(50) NOT NULL CHECK (type IN ('quiz', 'puzzle', 'shoe_game', 'photo_scavenger', 'blind_test', 'twelve_months', 'memory', 'trivia')),\n    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'active', 'paused', 'completed')),\n    description TEXT,\n    settings JSONB DEFAULT '{}',\n    total_questions INTEGER DEFAULT 0,\n    players_count INTEGER DEFAULT 0,\n    avg_score DECIMAL(5,2) DEFAULT 0,\n    is_active BOOLEAN DEFAULT TRUE,\n    started_at TIMESTAMP WITH TIME ZONE,\n    ended_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des questions pour les jeux\nCREATE TABLE IF NOT EXISTS game_questions (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    question TEXT NOT NULL,\n    question_type VARCHAR(50) DEFAULT 'multiple_choice' CHECK (question_type IN ('multiple_choice', 'text', 'photo', 'boolean', 'ordering')),\n    options JSONB,\n    correct_answer TEXT,\n    points INTEGER DEFAULT 1,\n    sort_order INTEGER DEFAULT 0,\n    media_url TEXT,\n    time_limit INTEGER,\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des participations aux jeux\nCREATE TABLE IF NOT EXISTS game_participations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE NOT NULL,\n    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    completed_at TIMESTAMP WITH TIME ZONE,\n    total_score INTEGER DEFAULT 0,\n    correct_answers INTEGER DEFAULT 0,\n    total_answers INTEGER DEFAULT 0,\n    is_completed BOOLEAN DEFAULT FALSE,\n    UNIQUE(game_id, guest_id)\n);\n\n-- Table des rponses aux questions\nCREATE TABLE IF NOT EXISTS game_answers (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    participation_id UUID REFERENCES game_participations(id) ON DELETE CASCADE NOT NULL,\n    question_id UUID REFERENCES game_questions(id) ON DELETE CASCADE NOT NULL,\n    answer TEXT NOT NULL,\n    is_correct BOOLEAN DEFAULT FALSE,\n    points_earned INTEGER DEFAULT 0,\n    answered_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(participation_id, question_id)\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_games_event ON games(event_id);\nCREATE INDEX IF NOT EXISTS idx_games_type ON games(type);\nCREATE INDEX IF NOT EXISTS idx_games_status ON games(status);\nCREATE INDEX IF NOT EXISTS idx_game_questions_game ON game_questions(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_questions_sort ON game_questions(game_id, sort_order);\nCREATE INDEX IF NOT EXISTS idx_game_participations_game ON game_participations(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_participations_guest ON game_participations(guest_id);\nCREATE INDEX IF NOT EXISTS idx_game_answers_participation ON game_answers(participation_id);\n\n-- Trigger pour mettre  jour updated_at sur games\nDROP TRIGGER IF EXISTS update_games_updated_at ON games;\nCREATE TRIGGER update_games_updated_at BEFORE UPDATE ON games FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n\n-- Trigger pour mettre  jour updated_at sur game_questions\nDROP TRIGGER IF EXISTS update_game_questions_updated_at ON game_questions;\nCREATE TRIGGER update_game_questions_updated_at BEFORE UPDATE ON game_questions FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":"Applying migration: 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:25:13"}
{"0":"s","1":"y","10":"o","11":"r","12":" ","13":"a","14":"t","15":" ","16":"o","17":"r","18":" ","19":"n","2":"n","20":"e","21":"a","22":"r","23":" ","24":"\"","25":"R","26":"E","27":"T","28":"U","29":"R","3":"t","30":"N","31":"\"","4":"a","5":"x","6":" ","7":"e","8":"r","9":"r","level":"error","message":" Failed to apply migration 006_add_games_tables_fixed.sql:","service":"qrevent-backend","timestamp":"2026-02-05 21:25:13"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 21:25:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:25:25"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"\n Migration to apply (006_add_games_tables_fixed.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"-- Migration: Ajout des tables pour le systme de jeux (version simplifie)\n-- Date: 2026-02-05\n\n-- Crer la fonction update_updated_at_column si elle n'existe pas\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Table des jeux\nCREATE TABLE IF NOT EXISTS games (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE NOT NULL,\n    name VARCHAR(200) NOT NULL,\n    type VARCHAR(50) NOT NULL CHECK (type IN ('quiz', 'puzzle', 'shoe_game', 'photo_scavenger', 'blind_test', 'twelve_months', 'memory', 'trivia')),\n    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'active', 'paused', 'completed')),\n    description TEXT,\n    settings JSONB DEFAULT '{}',\n    total_questions INTEGER DEFAULT 0,\n    players_count INTEGER DEFAULT 0,\n    avg_score DECIMAL(5,2) DEFAULT 0,\n    is_active BOOLEAN DEFAULT TRUE,\n    started_at TIMESTAMP WITH TIME ZONE,\n    ended_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des questions pour les jeux\nCREATE TABLE IF NOT EXISTS game_questions (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    question TEXT NOT NULL,\n    question_type VARCHAR(50) DEFAULT 'multiple_choice' CHECK (question_type IN ('multiple_choice', 'text', 'photo', 'boolean', 'ordering')),\n    options JSONB,\n    correct_answer TEXT,\n    points INTEGER DEFAULT 1,\n    sort_order INTEGER DEFAULT 0,\n    media_url TEXT,\n    time_limit INTEGER,\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des participations aux jeux\nCREATE TABLE IF NOT EXISTS game_participations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE NOT NULL,\n    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    completed_at TIMESTAMP WITH TIME ZONE,\n    total_score INTEGER DEFAULT 0,\n    correct_answers INTEGER DEFAULT 0,\n    total_answers INTEGER DEFAULT 0,\n    is_completed BOOLEAN DEFAULT FALSE,\n    UNIQUE(game_id, guest_id)\n);\n\n-- Table des rponses aux questions\nCREATE TABLE IF NOT EXISTS game_answers (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    participation_id UUID REFERENCES game_participations(id) ON DELETE CASCADE NOT NULL,\n    question_id UUID REFERENCES game_questions(id) ON DELETE CASCADE NOT NULL,\n    answer TEXT NOT NULL,\n    is_correct BOOLEAN DEFAULT FALSE,\n    points_earned INTEGER DEFAULT 0,\n    answered_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(participation_id, question_id)\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_games_event ON games(event_id);\nCREATE INDEX IF NOT EXISTS idx_games_type ON games(type);\nCREATE INDEX IF NOT EXISTS idx_games_status ON games(status);\nCREATE INDEX IF NOT EXISTS idx_game_questions_game ON game_questions(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_questions_sort ON game_questions(game_id, sort_order);\nCREATE INDEX IF NOT EXISTS idx_game_participations_game ON game_participations(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_participations_guest ON game_participations(guest_id);\nCREATE INDEX IF NOT EXISTS idx_game_answers_participation ON game_answers(participation_id);\n\n-- Trigger pour mettre  jour updated_at sur games\nDROP TRIGGER IF EXISTS update_games_updated_at ON games;\nCREATE TRIGGER update_games_updated_at BEFORE UPDATE ON games FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n\n-- Trigger pour mettre  jour updated_at sur game_questions\nDROP TRIGGER IF EXISTS update_game_questions_updated_at ON game_questions;\nCREATE TRIGGER update_game_questions_updated_at BEFORE UPDATE ON game_questions FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":"Applying migration: 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:25:29"}
{"level":"info","message":" Migration applied successfully: 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:25:29"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:25:30"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:29:34"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:34"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:29:35"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:29:43"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:43"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:29:43"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"\n Migration to apply (006_create_families_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"-- Migration: Create families table\n-- Description: Add table to store family groups for invitations\n\n-- Create families table\nCREATE TABLE IF NOT EXISTS families (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    members TEXT[], -- Array of member names\n    user_id UUID REFERENCES users(id) ON DELETE CASCADE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by user\nCREATE INDEX IF NOT EXISTS idx_families_user ON families(user_id);\n\n-- Create trigger to automatically update the updated_at column\nCREATE TRIGGER update_families_updated_at BEFORE UPDATE ON families FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":"Applying migration: 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:29:53"}
{"level":"info","message":" Migration applied successfully: 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:54"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:29:55"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"\n Migration to apply (006_add_games_tables_fixed.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"-- Migration: Ajout des tables pour le systme de jeux (version simplifie)\n-- Date: 2026-02-05\n\n-- Crer la fonction update_updated_at_column si elle n'existe pas\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Table des jeux\nCREATE TABLE IF NOT EXISTS games (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE NOT NULL,\n    name VARCHAR(200) NOT NULL,\n    type VARCHAR(50) NOT NULL CHECK (type IN ('quiz', 'puzzle', 'shoe_game', 'photo_scavenger', 'blind_test', 'twelve_months', 'memory', 'trivia')),\n    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'active', 'paused', 'completed')),\n    description TEXT,\n    settings JSONB DEFAULT '{}',\n    total_questions INTEGER DEFAULT 0,\n    players_count INTEGER DEFAULT 0,\n    avg_score DECIMAL(5,2) DEFAULT 0,\n    is_active BOOLEAN DEFAULT TRUE,\n    started_at TIMESTAMP WITH TIME ZONE,\n    ended_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des questions pour les jeux\nCREATE TABLE IF NOT EXISTS game_questions (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    question TEXT NOT NULL,\n    question_type VARCHAR(50) DEFAULT 'multiple_choice' CHECK (question_type IN ('multiple_choice', 'text', 'photo', 'boolean', 'ordering')),\n    options JSONB,\n    correct_answer TEXT,\n    points INTEGER DEFAULT 1,\n    sort_order INTEGER DEFAULT 0,\n    media_url TEXT,\n    time_limit INTEGER,\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table des participations aux jeux\nCREATE TABLE IF NOT EXISTS game_participations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE NOT NULL,\n    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    completed_at TIMESTAMP WITH TIME ZONE,\n    total_score INTEGER DEFAULT 0,\n    correct_answers INTEGER DEFAULT 0,\n    total_answers INTEGER DEFAULT 0,\n    is_completed BOOLEAN DEFAULT FALSE,\n    UNIQUE(game_id, guest_id)\n);\n\n-- Table des rponses aux questions\nCREATE TABLE IF NOT EXISTS game_answers (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    participation_id UUID REFERENCES game_participations(id) ON DELETE CASCADE NOT NULL,\n    question_id UUID REFERENCES game_questions(id) ON DELETE CASCADE NOT NULL,\n    answer TEXT NOT NULL,\n    is_correct BOOLEAN DEFAULT FALSE,\n    points_earned INTEGER DEFAULT 0,\n    answered_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(participation_id, question_id)\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_games_event ON games(event_id);\nCREATE INDEX IF NOT EXISTS idx_games_type ON games(type);\nCREATE INDEX IF NOT EXISTS idx_games_status ON games(status);\nCREATE INDEX IF NOT EXISTS idx_game_questions_game ON game_questions(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_questions_sort ON game_questions(game_id, sort_order);\nCREATE INDEX IF NOT EXISTS idx_game_participations_game ON game_participations(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_participations_guest ON game_participations(guest_id);\nCREATE INDEX IF NOT EXISTS idx_game_answers_participation ON game_answers(participation_id);\n\n-- Trigger pour mettre  jour updated_at sur games\nDROP TRIGGER IF EXISTS update_games_updated_at ON games;\nCREATE TRIGGER update_games_updated_at BEFORE UPDATE ON games FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n\n-- Trigger pour mettre  jour updated_at sur game_questions\nDROP TRIGGER IF EXISTS update_game_questions_updated_at ON game_questions;\nCREATE TRIGGER update_game_questions_updated_at BEFORE UPDATE ON game_questions FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":"Applying migration: 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:29:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:01"}
{"level":"info","message":" Migration applied successfully: 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:02"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:02"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"\n Migration to apply (007_create_family_invitations.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"-- Migration: Create family invitations and RSVP tables\n-- Description: Add tables to manage family invitations and their RSVP responses\n\n-- Create family_invitations table (links families to events with QR codes)\nCREATE TABLE IF NOT EXISTS family_invitations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    family_id UUID REFERENCES families(id) ON DELETE CASCADE,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE,\n    user_id UUID REFERENCES users(id) ON DELETE CASCADE,\n    invited_count INTEGER NOT NULL DEFAULT 1,\n    qr_code VARCHAR(100) UNIQUE NOT NULL,\n    qr_expires_at TIMESTAMP WITH TIME ZONE,\n    is_valid BOOLEAN DEFAULT TRUE,\n    scan_count INTEGER DEFAULT 0,\n    last_scanned_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(family_id, event_id) -- One invitation per family per event\n);\n\n-- Create family_rsvp table (stores individual responses from family members)\nCREATE TABLE IF NOT EXISTS family_rsvp (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    family_invitation_id UUID REFERENCES family_invitations(id) ON DELETE CASCADE,\n    member_name VARCHAR(100) NOT NULL,\n    will_attend BOOLEAN DEFAULT NULL, -- NULL = not responded, TRUE = attending, FALSE = not attending\n    dietary_restrictions TEXT,\n    notes TEXT,\n    responded_at TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create indexes for better performance\nCREATE INDEX IF NOT EXISTS idx_family_invitations_family ON family_invitations(family_id);\nCREATE INDEX IF NOT EXISTS idx_family_invitations_event ON family_invitations(event_id);\nCREATE INDEX IF NOT EXISTS idx_family_invitations_qr ON family_invitations(qr_code);\nCREATE INDEX IF NOT EXISTS idx_family_invitations_user ON family_invitations(user_id);\nCREATE INDEX IF NOT EXISTS idx_family_rsvp_invitation ON family_rsvp(family_invitation_id);\n\n-- Create triggers for updated_at\nCREATE TRIGGER update_family_invitations_updated_at BEFORE UPDATE ON family_invitations FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\nCREATE TRIGGER update_family_rsvp_updated_at BEFORE UPDATE ON family_rsvp FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":"Applying migration: 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":" Migration applied successfully: 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"Found 18 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"\n Migration to apply (008_add_dashboard_optimizations.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"-- Migration: Optimisations Dashboard et vues matrialises\n-- Date: 2026-02-05\n-- Priorit: HAUTE\n-- Description: limine les requtes N+1 et acclre les rapports\n\n-- ============================================\n-- 1. VUE MATRIALISE: Rsum par vnement\n-- ============================================\n-- limine les requtes N+1 dans le dashboard\n\nDROP MATERIALIZED VIEW IF EXISTS mv_event_summary CASCADE;\n\nCREATE MATERIALIZED VIEW mv_event_summary AS\nSELECT \n    e.id as event_id,\n    e.title,\n    e.organizer_id,\n    e.date,\n    e.is_active,\n    e.created_at,\n    -- Compteurs guests\n    COUNT(DISTINCT g.id) as total_guests,\n    COUNT(DISTINCT CASE WHEN g.rsvp_status = 'accepted' THEN g.id END) as confirmed_guests,\n    COUNT(DISTINCT CASE WHEN g.rsvp_status = 'declined' THEN g.id END) as declined_guests,\n    COUNT(DISTINCT CASE WHEN g.rsvp_status = 'pending' THEN g.id END) as pending_guests,\n    -- Compteurs prsence\n    COUNT(DISTINCT CASE WHEN g.attendance_status = 'arrived' THEN g.id END) as arrived_guests,\n    COUNT(DISTINCT CASE WHEN g.attendance_status = 'left' THEN g.id END) as left_guests,\n    -- Dernire activit\n    MAX(g.updated_at) as last_guest_update,\n    MAX(a.timestamp) as last_attendance\nFROM events e\nLEFT JOIN guests g ON g.event_id = e.id AND (g.is_active = true OR g.is_active IS NULL)\nLEFT JOIN attendance a ON a.event_id = e.id\nWHERE e.is_active = true\nGROUP BY e.id, e.title, e.organizer_id, e.date, e.is_active, e.created_at;\n\n-- Index sur la vue matrialise\nCREATE UNIQUE INDEX idx_mv_event_summary_event_id ON mv_event_summary(event_id);\nCREATE INDEX idx_mv_event_summary_organizer ON mv_event_summary(organizer_id);\n\nCOMMENT ON MATERIALIZED VIEW mv_event_summary IS 'Vue matrialise pour dashboard - rafrachir toutes les 5 min';\n\n-- ============================================\n-- 2. FONCTION DE RAFRACHISSEMENT\n-- ============================================\nCREATE OR REPLACE FUNCTION refresh_event_summary()\nRETURNS void AS $$\nBEGIN\n    REFRESH MATERIALIZED VIEW CONCURRENTLY mv_event_summary;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- ============================================\n-- 3. VUE MATRIALISE: Statistiques QR Codes\n-- ============================================\nDROP MATERIALIZED VIEW IF EXISTS mv_qr_code_stats CASCADE;\n\nCREATE MATERIALIZED VIEW mv_qr_code_stats AS\nSELECT \n    event_id,\n    COUNT(*) as total_qr_codes,\n    COUNT(*) FILTER (WHERE is_valid = true AND expires_at > NOW()) as active_qr_codes,\n    COUNT(*) FILTER (WHERE is_valid = false) as invalidated_qr_codes,\n    COUNT(*) FILTER (WHERE expires_at <= NOW()) as expired_qr_codes,\n    COALESCE(SUM(scan_count), 0) as total_scans,\n    MAX(last_scanned_at) as last_scan_at\nFROM qr_codes\nGROUP BY event_id;\n\nCREATE UNIQUE INDEX idx_mv_qr_code_stats_event ON mv_qr_code_stats(event_id);\n\nCOMMENT ON MATERIALIZED VIEW mv_qr_code_stats IS 'Stats QR codes par vnement';\n\n-- ============================================\n-- 4. VUE MATRIALISE: Stats Jeux\n-- ============================================\nDROP MATERIALIZED VIEW IF EXISTS mv_game_stats CASCADE;\n\nCREATE MATERIALIZED VIEW mv_game_stats AS\nSELECT \n    g.id as game_id,\n    g.event_id,\n    g.name,\n    g.type,\n    g.status,\n    COUNT(DISTINCT gp.guest_id) as player_count,\n    COUNT(DISTINCT CASE WHEN gp.is_completed THEN gp.guest_id END) as completed_count,\n    COALESCE(AVG(gp.total_score) FILTER (WHERE gp.is_completed), 0) as avg_score,\n    MAX(gp.total_score) as max_score,\n    COUNT(DISTINCT ga.id) as total_answers,\n    COUNT(DISTINCT CASE WHEN ga.is_correct THEN ga.id END) as correct_answers\nFROM games g\nLEFT JOIN game_participations gp ON gp.game_id = g.id\nLEFT JOIN game_answers ga ON ga.participation_id = gp.id\nWHERE g.is_active = true\nGROUP BY g.id, g.event_id, g.name, g.type, g.status;\n\nCREATE UNIQUE INDEX idx_mv_game_stats_game ON mv_game_stats(game_id);\nCREATE INDEX idx_mv_game_stats_event ON mv_game_stats(event_id);\n\nCOMMENT ON MATERIALIZED VIEW mv_game_stats IS 'Stats jeux calcules - remplace le trigger synchrone';\n\n-- ============================================\n-- 5. FONCTION: Rcuprer dashboard summary optimis\n-- ============================================\nCREATE OR REPLACE FUNCTION get_dashboard_summary(p_organizer_id UUID)\nRETURNS TABLE (\n    total_events BIGINT,\n    total_guests BIGINT,\n    confirmed_guests BIGINT,\n    pending_guests BIGINT,\n    declined_guests BIGINT,\n    arrived_guests BIGINT\n) AS $$\nBEGIN\n    RETURN QUERY\n    SELECT \n        COUNT(DISTINCT es.event_id),\n        COALESCE(SUM(es.total_guests), 0),\n        COALESCE(SUM(es.confirmed_guests), 0),\n        COALESCE(SUM(es.pending_guests), 0),\n        COALESCE(SUM(es.declined_guests), 0),\n        COALESCE(SUM(es.arrived_guests), 0)\n    FROM mv_event_summary es\n    WHERE es.organizer_id = p_organizer_id;\nEND;\n$$ LANGUAGE plpgsql STABLE;\n\nCOMMENT ON FUNCTION get_dashboard_summary IS 'Fonction optimise pour le dashboard - utilise vue matrialise';\n\n-- ============================================\n-- 6. FONCTION: Liste events avec stats (remplace N+1)\n-- ============================================\nCREATE OR REPLACE FUNCTION get_events_with_stats(p_organizer_id UUID)\nRETURNS TABLE (\n    event_id UUID,\n    title VARCHAR,\n    event_date TIMESTAMP WITH TIME ZONE,\n    location JSONB,\n    total_guests BIGINT,\n    confirmed_guests BIGINT,\n    pending_guests BIGINT,\n    declined_guests BIGINT\n) AS $$\nBEGIN\n    RETURN QUERY\n    SELECT \n        es.event_id,\n        es.title,\n        es.date,\n        e.location,\n        es.total_guests,\n        es.confirmed_guests,\n        es.pending_guests,\n        es.declined_guests\n    FROM mv_event_summary es\n    JOIN events e ON e.id = es.event_id\n    WHERE es.organizer_id = p_organizer_id\n    ORDER BY es.created_at DESC;\nEND;\n$$ LANGUAGE plpgsql STABLE;\n\nCOMMENT ON FUNCTION get_events_with_stats IS 'Rcupre events avec stats en une requte';\n\n-- ============================================\n-- 7. INDEX POUR RECHERCHE FULL-TEXT\n-- ============================================\n-- Ajout de recherche textuelle sur guests (nom/prnom/email)\n\nALTER TABLE guests ADD COLUMN IF NOT EXISTS search_vector tsvector;\n\nUPDATE guests SET search_vector = \n    setweight(to_tsvector('simple', COALESCE(first_name, '')), 'A') ||\n    setweight(to_tsvector('simple', COALESCE(last_name, '')), 'A') ||\n    setweight(to_tsvector('simple', COALESCE(email, '')), 'B');\n\nCREATE INDEX idx_guests_search ON guests USING GIN (search_vector);\n\n-- Trigger pour maintenir le search_vector  jour\nCREATE OR REPLACE FUNCTION update_guest_search_vector()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.search_vector := \n        setweight(to_tsvector('simple', COALESCE(NEW.first_name, '')), 'A') ||\n        setweight(to_tsvector('simple', COALESCE(NEW.last_name, '')), 'A') ||\n        setweight(to_tsvector('simple', COALESCE(NEW.email, '')), 'B');\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nDROP TRIGGER IF EXISTS trigger_update_guest_search ON guests;\nCREATE TRIGGER trigger_update_guest_search\n    BEFORE INSERT OR UPDATE ON guests\n    FOR EACH ROW\n    EXECUTE FUNCTION update_guest_search_vector();\n\nCOMMENT ON FUNCTION update_guest_search_vector IS 'Met  jour le search vector pour recherche full-text';\n\n-- ============================================\n-- 8. TABLE: Cache pour rsultats de requtes lourdes\n-- ============================================\nCREATE TABLE IF NOT EXISTS query_result_cache (\n    cache_key VARCHAR(255) PRIMARY KEY,\n    result_data JSONB NOT NULL,\n    expires_at TIMESTAMP WITH TIME ZONE NOT NULL,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\nCREATE INDEX idx_query_cache_expires ON query_result_cache(expires_at);\n\n-- Fonction de nettoyage du cache\nCREATE OR REPLACE FUNCTION cleanup_query_cache()\nRETURNS void AS $$\nBEGIN\n    DELETE FROM query_result_cache WHERE expires_at < NOW();\nEND;\n$$ LANGUAGE plpgsql;\n\nCOMMENT ON TABLE query_result_cache IS 'Cache applicatif pour rsultats de requtes coteuses';\n\n-- ============================================\n-- 9. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Vues matrialises cres: mv_event_summary, mv_qr_code_stats, mv_game_stats';\n    RAISE NOTICE 'Fonctions optimises cres pour dashboard';\n    RAISE NOTICE 'Recherche full-text active sur guests';\n    RAISE NOTICE 'Cache applicatif configur';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":"Applying migration: 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:12"}
{"0":"c","1":"o","10":"s","11":"_","12":"a","13":"c","14":"t","15":"i","16":"v","17":"e","18":" ","19":"d","2":"l","20":"o","21":"e","22":"s","23":" ","24":"n","25":"o","26":"t","27":" ","28":"e","29":"x","3":"u","30":"i","31":"s","32":"t","4":"m","5":"n","6":" ","7":"g","8":".","9":"i","level":"error","message":" Failed to apply migration 008_add_dashboard_optimizations.sql:","service":"qrevent-backend","timestamp":"2026-02-05 21:30:13"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-05 21:30:13"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"Found 19 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"\n Migration to apply (008b_add_is_active_to_guests.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"-- Migration: Add is_active column to guests table\n-- Description: Required for dashboard optimizations\n\n-- Add is_active column to guests table\nALTER TABLE guests ADD COLUMN IF NOT EXISTS is_active BOOLEAN DEFAULT TRUE;\n\n-- Create index for faster queries\nCREATE INDEX IF NOT EXISTS idx_guests_is_active ON guests(is_active);\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":"Applying migration: 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:25"}
{"level":"info","message":" Migration applied successfully: 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:25"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:26"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"Found 19 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"\n Migration to apply (008_add_dashboard_optimizations.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"-- Migration: Optimisations Dashboard et vues matrialises\n-- Date: 2026-02-05\n-- Priorit: HAUTE\n-- Description: limine les requtes N+1 et acclre les rapports\n\n-- ============================================\n-- 1. VUE MATRIALISE: Rsum par vnement\n-- ============================================\n-- limine les requtes N+1 dans le dashboard\n\nDROP MATERIALIZED VIEW IF EXISTS mv_event_summary CASCADE;\n\nCREATE MATERIALIZED VIEW mv_event_summary AS\nSELECT \n    e.id as event_id,\n    e.title,\n    e.organizer_id,\n    e.date,\n    e.is_active,\n    e.created_at,\n    -- Compteurs guests\n    COUNT(DISTINCT g.id) as total_guests,\n    COUNT(DISTINCT CASE WHEN g.rsvp_status = 'accepted' THEN g.id END) as confirmed_guests,\n    COUNT(DISTINCT CASE WHEN g.rsvp_status = 'declined' THEN g.id END) as declined_guests,\n    COUNT(DISTINCT CASE WHEN g.rsvp_status = 'pending' THEN g.id END) as pending_guests,\n    -- Compteurs prsence\n    COUNT(DISTINCT CASE WHEN g.attendance_status = 'arrived' THEN g.id END) as arrived_guests,\n    COUNT(DISTINCT CASE WHEN g.attendance_status = 'left' THEN g.id END) as left_guests,\n    -- Dernire activit\n    MAX(g.updated_at) as last_guest_update,\n    MAX(a.timestamp) as last_attendance\nFROM events e\nLEFT JOIN guests g ON g.event_id = e.id AND (g.is_active = true OR g.is_active IS NULL)\nLEFT JOIN attendance a ON a.event_id = e.id\nWHERE e.is_active = true\nGROUP BY e.id, e.title, e.organizer_id, e.date, e.is_active, e.created_at;\n\n-- Index sur la vue matrialise\nCREATE UNIQUE INDEX idx_mv_event_summary_event_id ON mv_event_summary(event_id);\nCREATE INDEX idx_mv_event_summary_organizer ON mv_event_summary(organizer_id);\n\nCOMMENT ON MATERIALIZED VIEW mv_event_summary IS 'Vue matrialise pour dashboard - rafrachir toutes les 5 min';\n\n-- ============================================\n-- 2. FONCTION DE RAFRACHISSEMENT\n-- ============================================\nCREATE OR REPLACE FUNCTION refresh_event_summary()\nRETURNS void AS $$\nBEGIN\n    REFRESH MATERIALIZED VIEW CONCURRENTLY mv_event_summary;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- ============================================\n-- 3. VUE MATRIALISE: Statistiques QR Codes\n-- ============================================\nDROP MATERIALIZED VIEW IF EXISTS mv_qr_code_stats CASCADE;\n\nCREATE MATERIALIZED VIEW mv_qr_code_stats AS\nSELECT \n    event_id,\n    COUNT(*) as total_qr_codes,\n    COUNT(*) FILTER (WHERE is_valid = true AND expires_at > NOW()) as active_qr_codes,\n    COUNT(*) FILTER (WHERE is_valid = false) as invalidated_qr_codes,\n    COUNT(*) FILTER (WHERE expires_at <= NOW()) as expired_qr_codes,\n    COALESCE(SUM(scan_count), 0) as total_scans,\n    MAX(last_scanned_at) as last_scan_at\nFROM qr_codes\nGROUP BY event_id;\n\nCREATE UNIQUE INDEX idx_mv_qr_code_stats_event ON mv_qr_code_stats(event_id);\n\nCOMMENT ON MATERIALIZED VIEW mv_qr_code_stats IS 'Stats QR codes par vnement';\n\n-- ============================================\n-- 4. VUE MATRIALISE: Stats Jeux\n-- ============================================\nDROP MATERIALIZED VIEW IF EXISTS mv_game_stats CASCADE;\n\nCREATE MATERIALIZED VIEW mv_game_stats AS\nSELECT \n    g.id as game_id,\n    g.event_id,\n    g.name,\n    g.type,\n    g.status,\n    COUNT(DISTINCT gp.guest_id) as player_count,\n    COUNT(DISTINCT CASE WHEN gp.is_completed THEN gp.guest_id END) as completed_count,\n    COALESCE(AVG(gp.total_score) FILTER (WHERE gp.is_completed), 0) as avg_score,\n    MAX(gp.total_score) as max_score,\n    COUNT(DISTINCT ga.id) as total_answers,\n    COUNT(DISTINCT CASE WHEN ga.is_correct THEN ga.id END) as correct_answers\nFROM games g\nLEFT JOIN game_participations gp ON gp.game_id = g.id\nLEFT JOIN game_answers ga ON ga.participation_id = gp.id\nWHERE g.is_active = true\nGROUP BY g.id, g.event_id, g.name, g.type, g.status;\n\nCREATE UNIQUE INDEX idx_mv_game_stats_game ON mv_game_stats(game_id);\nCREATE INDEX idx_mv_game_stats_event ON mv_game_stats(event_id);\n\nCOMMENT ON MATERIALIZED VIEW mv_game_stats IS 'Stats jeux calcules - remplace le trigger synchrone';\n\n-- ============================================\n-- 5. FONCTION: Rcuprer dashboard summary optimis\n-- ============================================\nCREATE OR REPLACE FUNCTION get_dashboard_summary(p_organizer_id UUID)\nRETURNS TABLE (\n    total_events BIGINT,\n    total_guests BIGINT,\n    confirmed_guests BIGINT,\n    pending_guests BIGINT,\n    declined_guests BIGINT,\n    arrived_guests BIGINT\n) AS $$\nBEGIN\n    RETURN QUERY\n    SELECT \n        COUNT(DISTINCT es.event_id),\n        COALESCE(SUM(es.total_guests), 0),\n        COALESCE(SUM(es.confirmed_guests), 0),\n        COALESCE(SUM(es.pending_guests), 0),\n        COALESCE(SUM(es.declined_guests), 0),\n        COALESCE(SUM(es.arrived_guests), 0)\n    FROM mv_event_summary es\n    WHERE es.organizer_id = p_organizer_id;\nEND;\n$$ LANGUAGE plpgsql STABLE;\n\nCOMMENT ON FUNCTION get_dashboard_summary IS 'Fonction optimise pour le dashboard - utilise vue matrialise';\n\n-- ============================================\n-- 6. FONCTION: Liste events avec stats (remplace N+1)\n-- ============================================\nCREATE OR REPLACE FUNCTION get_events_with_stats(p_organizer_id UUID)\nRETURNS TABLE (\n    event_id UUID,\n    title VARCHAR,\n    event_date TIMESTAMP WITH TIME ZONE,\n    location JSONB,\n    total_guests BIGINT,\n    confirmed_guests BIGINT,\n    pending_guests BIGINT,\n    declined_guests BIGINT\n) AS $$\nBEGIN\n    RETURN QUERY\n    SELECT \n        es.event_id,\n        es.title,\n        es.date,\n        e.location,\n        es.total_guests,\n        es.confirmed_guests,\n        es.pending_guests,\n        es.declined_guests\n    FROM mv_event_summary es\n    JOIN events e ON e.id = es.event_id\n    WHERE es.organizer_id = p_organizer_id\n    ORDER BY es.created_at DESC;\nEND;\n$$ LANGUAGE plpgsql STABLE;\n\nCOMMENT ON FUNCTION get_events_with_stats IS 'Rcupre events avec stats en une requte';\n\n-- ============================================\n-- 7. INDEX POUR RECHERCHE FULL-TEXT\n-- ============================================\n-- Ajout de recherche textuelle sur guests (nom/prnom/email)\n\nALTER TABLE guests ADD COLUMN IF NOT EXISTS search_vector tsvector;\n\nUPDATE guests SET search_vector = \n    setweight(to_tsvector('simple', COALESCE(first_name, '')), 'A') ||\n    setweight(to_tsvector('simple', COALESCE(last_name, '')), 'A') ||\n    setweight(to_tsvector('simple', COALESCE(email, '')), 'B');\n\nCREATE INDEX idx_guests_search ON guests USING GIN (search_vector);\n\n-- Trigger pour maintenir le search_vector  jour\nCREATE OR REPLACE FUNCTION update_guest_search_vector()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.search_vector := \n        setweight(to_tsvector('simple', COALESCE(NEW.first_name, '')), 'A') ||\n        setweight(to_tsvector('simple', COALESCE(NEW.last_name, '')), 'A') ||\n        setweight(to_tsvector('simple', COALESCE(NEW.email, '')), 'B');\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nDROP TRIGGER IF EXISTS trigger_update_guest_search ON guests;\nCREATE TRIGGER trigger_update_guest_search\n    BEFORE INSERT OR UPDATE ON guests\n    FOR EACH ROW\n    EXECUTE FUNCTION update_guest_search_vector();\n\nCOMMENT ON FUNCTION update_guest_search_vector IS 'Met  jour le search vector pour recherche full-text';\n\n-- ============================================\n-- 8. TABLE: Cache pour rsultats de requtes lourdes\n-- ============================================\nCREATE TABLE IF NOT EXISTS query_result_cache (\n    cache_key VARCHAR(255) PRIMARY KEY,\n    result_data JSONB NOT NULL,\n    expires_at TIMESTAMP WITH TIME ZONE NOT NULL,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\nCREATE INDEX idx_query_cache_expires ON query_result_cache(expires_at);\n\n-- Fonction de nettoyage du cache\nCREATE OR REPLACE FUNCTION cleanup_query_cache()\nRETURNS void AS $$\nBEGIN\n    DELETE FROM query_result_cache WHERE expires_at < NOW();\nEND;\n$$ LANGUAGE plpgsql;\n\nCOMMENT ON TABLE query_result_cache IS 'Cache applicatif pour rsultats de requtes coteuses';\n\n-- ============================================\n-- 9. VERIFICATION\n-- ============================================\nDO $$\nBEGIN\n    RAISE NOTICE 'Vues matrialises cres: mv_event_summary, mv_qr_code_stats, mv_game_stats';\n    RAISE NOTICE 'Fonctions optimises cres pour dashboard';\n    RAISE NOTICE 'Recherche full-text active sur guests';\n    RAISE NOTICE 'Cache applicatif configur';\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":"Applying migration: 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:32"}
{"level":"info","message":" Migration applied successfully: 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:33"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:33"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"Found 19 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"\n Migration to apply (009_add_feedback_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"-- Migration: Ajout de la table feedbacks pour les avis et tmoignages\n-- Date: 2026-02-05\n-- Description: Cration de la table pour stocker les avis/feedbacks des invits/familles\n\n-- Table des avis et feedbacks\nCREATE TABLE IF NOT EXISTS feedbacks (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID REFERENCES events(id) ON DELETE CASCADE NOT NULL,\n    family_id UUID REFERENCES families(id) ON DELETE SET NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE SET NULL,\n    \n    -- Informations sur l'auteur\n    author_name VARCHAR(100) NOT NULL,\n    author_email VARCHAR(255),\n    \n    -- Contenu du feedback\n    message TEXT NOT NULL,\n    feedback_type VARCHAR(20) DEFAULT 'wish' CHECK (feedback_type IN ('wish', 'guestbook', 'testimonial')),\n    \n    -- Pour les avis avec notation (guestbook)\n    rating INTEGER CHECK (rating >= 1 AND rating <= 5),\n    category VARCHAR(50), -- Ambiance, Dco, Service, etc.\n    \n    -- Tag/Accent pour l'affichage (wish)\n    tag VARCHAR(50), -- Excellence, Clbration, Joie, Bonheur, etc.\n    accent_color VARCHAR(20), -- Code couleur pour l'affichage\n    \n    -- Mtadonnes\n    is_approved BOOLEAN DEFAULT FALSE, -- Modration\n    is_featured BOOLEAN DEFAULT FALSE,\n    is_active BOOLEAN DEFAULT TRUE,\n    \n    -- Source (qr_code, direct, etc.)\n    source VARCHAR(50) DEFAULT 'direct',\n    qr_code_used VARCHAR(50),\n    \n    -- Timestamps\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_feedbacks_event ON feedbacks(event_id);\nCREATE INDEX IF NOT EXISTS idx_feedbacks_family ON feedbacks(family_id);\nCREATE INDEX IF NOT EXISTS idx_feedbacks_guest ON feedbacks(guest_id);\nCREATE INDEX IF NOT EXISTS idx_feedbacks_type ON feedbacks(feedback_type);\nCREATE INDEX IF NOT EXISTS idx_feedbacks_approved ON feedbacks(event_id, is_approved);\nCREATE INDEX IF NOT EXISTS idx_feedbacks_created ON feedbacks(created_at DESC);\n\n-- Trigger pour mettre  jour updated_at\nCREATE TRIGGER update_feedbacks_updated_at \nBEFORE UPDATE ON feedbacks \nFOR EACH ROW \nEXECUTE FUNCTION update_updated_at_column();\n\n-- Vue pour les statistiques de feedback par vnement\nCREATE OR REPLACE VIEW feedback_stats AS\nSELECT \n    event_id,\n    COUNT(*) as total_feedbacks,\n    COUNT(*) FILTER (WHERE feedback_type = 'wish') as total_wishes,\n    COUNT(*) FILTER (WHERE feedback_type = 'guestbook') as total_guestbook,\n    COUNT(*) FILTER (WHERE is_approved = TRUE) as approved_count,\n    COUNT(*) FILTER (WHERE is_approved = FALSE) as pending_count,\n    AVG(rating) FILTER (WHERE rating IS NOT NULL) as average_rating,\n    COUNT(*) FILTER (WHERE rating = 5) as five_star_count,\n    MAX(created_at) as last_feedback_date\nFROM feedbacks\nWHERE is_active = TRUE\nGROUP BY event_id;\n\n-- Commentaire sur la table\nCOMMENT ON TABLE feedbacks IS 'Stocke les avis, vux et tmoignages des invits et familles';\nCOMMENT ON COLUMN feedbacks.feedback_type IS 'Type de feedback: wish (vux), guestbook (livre d''or), testimonial (tmoignage)';\nCOMMENT ON COLUMN feedbacks.is_approved IS 'Indique si le feedback a t approuv par le modrateur';\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":"Applying migration: 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:41"}
{"level":"info","message":" Migration applied successfully: 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"Found 19 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"\n Migration to apply (009_create_wishes_table.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"-- Migration: Create wishes table for guest book messages\n-- Created: 2026-02-05\n\n-- Create wishes table (vux/livre d'or)\nCREATE TABLE IF NOT EXISTS wishes (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    guest_id UUID REFERENCES guests(id) ON DELETE SET NULL,\n    author_name VARCHAR(100) NOT NULL,\n    author_email VARCHAR(255),\n    message TEXT NOT NULL,\n    style VARCHAR(20) DEFAULT 'serif' CHECK (style IN ('serif', 'cursive', 'modern')),\n    color VARCHAR(50) DEFAULT 'bg-[#F5E6D3]',\n    is_public BOOLEAN DEFAULT TRUE,\n    is_moderated BOOLEAN DEFAULT FALSE,\n    moderated_by UUID REFERENCES users(id) ON DELETE SET NULL,\n    moderated_at TIMESTAMP WITH TIME ZONE,\n    ip_address INET,\n    user_agent TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create indexes for better performance\nCREATE INDEX IF NOT EXISTS idx_wishes_event ON wishes(event_id);\nCREATE INDEX IF NOT EXISTS idx_wishes_guest ON wishes(guest_id);\nCREATE INDEX IF NOT EXISTS idx_wishes_created_at ON wishes(created_at DESC);\nCREATE INDEX IF NOT EXISTS idx_wishes_public ON wishes(event_id, is_public) WHERE is_public = TRUE;\n\n-- Create trigger to automatically update the updated_at column\nDROP TRIGGER IF EXISTS update_wishes_updated_at ON wishes;\nCREATE TRIGGER update_wishes_updated_at \n    BEFORE UPDATE ON wishes \n    FOR EACH ROW \n    EXECUTE FUNCTION update_updated_at_column();\n\n-- Add comment for documentation\nCOMMENT ON TABLE wishes IS 'Table pour stocker les vux/messages des invits (livre d''or)';\nCOMMENT ON COLUMN wishes.style IS 'Style d''affichage du message: serif, cursive, ou modern';\nCOMMENT ON COLUMN wishes.is_public IS 'Si le message est visible publiquement';\nCOMMENT ON COLUMN wishes.is_moderated IS 'Si le message a t modr par l''organisateur';\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":"Applying migration: 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:45"}
{"level":"info","message":" Migration applied successfully: 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:45"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"Found 19 migration(s):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"\n Migration to apply (010_create_seating_tables.sql):","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"-- Migration: Create seating tables for event table planning\n-- Description: Add tables to manage seating arrangements at weddings\n\n-- Create seating_tables table (physical tables at the event)\nCREATE TABLE IF NOT EXISTS seating_tables (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    name VARCHAR(100) NOT NULL,\n    seats INTEGER NOT NULL DEFAULT 8 CHECK (seats > 0 AND seats <= 50),\n    table_shape VARCHAR(20) DEFAULT 'round' CHECK (table_shape IN ('round', 'rectangular', 'square', 'oval')),\n    position_x INTEGER DEFAULT 0,\n    position_y INTEGER DEFAULT 0,\n    notes TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create table_assignments table (links guests to tables)\nCREATE TABLE IF NOT EXISTS table_assignments (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    table_id UUID NOT NULL REFERENCES seating_tables(id) ON DELETE CASCADE,\n    guest_id UUID NOT NULL REFERENCES guests(id) ON DELETE CASCADE,\n    seat_number INTEGER,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(table_id, guest_id),\n    UNIQUE(table_id, seat_number)\n);\n\n-- Create indexes for better performance\nCREATE INDEX IF NOT EXISTS idx_seating_tables_event ON seating_tables(event_id);\nCREATE INDEX IF NOT EXISTS idx_table_assignments_table ON table_assignments(table_id);\nCREATE INDEX IF NOT EXISTS idx_table_assignments_guest ON table_assignments(guest_id);\n\n-- Create trigger to automatically update the updated_at column\nCREATE TRIGGER update_seating_tables_updated_at \n    BEFORE UPDATE ON seating_tables \n    FOR EACH ROW \n    EXECUTE FUNCTION update_updated_at_column();\n\n-- Add comment for documentation\nCOMMENT ON TABLE seating_tables IS 'Physical tables at wedding events for seating arrangements';\nCOMMENT ON TABLE table_assignments IS 'Links guests to their assigned tables and seats';\n","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":"Applying migration: 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-05 21:30:48"}
{"level":"info","message":" Migration applied successfully: 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-05 21:30:48"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-05 21:30:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:31:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:34:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:34:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:34:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:35:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:35:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:37:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:44:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 21:47:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:01:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:01:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:01:55"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:02:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:02:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:03:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:07:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:08:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:09:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:13:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:14:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:16:09"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:56:13)\n    at Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:365:29)\n    at testSecurity (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:162:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async runTests (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:335:22)","timestamp":"2026-02-05 22:18:03"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:365:7)\n    at async testErrorHandling (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:201:20)\n    at async runTests (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:338:27)","timestamp":"2026-02-05 22:18:06"}
{"level":"error","message":"Error in seatingTablesDb.getAvailableFamilies: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getAvailableFamilies (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:455:7)\n    at async testErrorHandling (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:217:22)\n    at async runTests (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:338:27)","timestamp":"2026-02-05 22:18:07"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:670:7)\n    at async testPerformanceAndLogging (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:248:19)\n    at async runTests (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:341:25)","timestamp":"2026-02-05 22:18:08"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.fixed.js:365:7)\n    at async testPerformanceAndLogging (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:272:5)\n    at async runTests (/home/kevin/Qrevent/backend/scripts/test-seating-tables-fix.js:341:25)","timestamp":"2026-02-05 22:18:08"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:18:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-05 22:19:42"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:365:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3368:50\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:18:56"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:18:56"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:670:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3395:39\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:18:56"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:365:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3368:50\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:18:57"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:18:57"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:670:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3395:39\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:18:57"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:670:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3395:39\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:19:00"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:19:00"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:19:06"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:19:07"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:19:10"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:26"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:365:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3368:50\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:26"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:670:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3395:39\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:26"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:27"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getUnassignedGuests (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:365:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3368:50\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:27"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:670:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3395:39\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:27"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.findByEvent (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:221:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3314:40\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:30"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Invalid event ID or user ID format","service":"qrevent-backend","stack":"Error: Invalid event ID or user ID format\n    at Object.checkEventAccess (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:56:13)\n    at Object.getStats (/home/kevin/Qrevent/backend/utils/db/seatingTables.js:670:29)\n    at /home/kevin/Qrevent/backend/routes/api.js:3395:39\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 10:21:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 10:30:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 10:30:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 10:30:42"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"User logged out successfully","service":"qrevent-backend","timestamp":"2026-02-06 10:32:22","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User logged in successfully","service":"qrevent-backend","timestamp":"2026-02-06T07:06:14.600Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:15:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:23:12"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:29:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:35:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:45:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:45:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:45:41"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:45:54","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:46:18","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:46:18","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:46:18","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:46:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:46:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:46:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:46:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:46:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:47:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:47:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:47:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:47:33"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:47:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:47:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:47:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:47:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:47:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:47:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:47:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:47:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:47:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:47:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:47:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:47:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:47:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:47:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:47:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:47:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:48:12"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:48:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:50:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:50:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:50:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:50:43"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:51:10","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:260:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 11:51:10"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:51:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:51:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:51:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:51:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:51:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:51:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:52:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:52:24"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:52:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:52:39"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:52:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:260:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 11:52:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:53:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:53:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:53:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:54:24"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:54:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:54:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:55:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 11:55:14"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:55:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:261:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 11:55:49"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:56:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:56:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:56:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:56:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:56:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:56:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 11:56:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 11:56:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/refresh-token","service":"qrevent-backend","timestamp":"2026-02-06 11:56:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:56:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:01","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:05","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:09","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:12","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:16","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:18","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:20","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:22","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:26","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:28","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:32","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:38","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:40","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:40","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:46","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:46","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:48","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:48","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:54","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:55","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:56","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:57","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:58","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:57:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:00","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:01","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:02","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:04","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:04","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:06","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:06","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:08","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:08","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:10","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:11","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:12","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:13","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:15","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:16","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:17","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:21","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:21","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:23","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:23","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:27","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:27","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:32","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:32","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:38","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:38","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:40","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:40","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:46","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:46","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:48","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:48","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:54","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:54","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:56","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:56","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:58","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:58:58","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:00","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:00","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:02","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:02","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:04","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:04","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:06","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:06","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:08","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:08","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:10","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:11","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:12","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:13","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:15","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:17","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:17","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:21","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:21","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:23","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:23","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:27","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:27","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:33","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:33","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:35","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:35","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:37","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:37","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:39","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:39","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:43","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:43","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:47","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:47","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:55","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:55","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:57","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:57","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 11:59:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:01","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:01","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:05","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:05","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:09","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:09","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:11","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:11","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:13","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:13","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:15","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:15","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:17","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:17","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:21","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:21","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:23","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:26","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:27","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:28","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:32","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:33","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:35","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:37","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:38","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:40","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:47","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:47","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:55","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:55","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:57","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:57","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:00:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:01","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:01","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:05","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:05","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:09","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:09","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:11","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:11","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:13","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:13","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:15","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:16","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:17","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:18","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:20","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:21","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:22","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:23","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:27","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:27","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:33","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:33","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:35","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:35","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:37","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:37","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:39","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:39","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:43","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:43","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:47","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:47","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:55","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:55","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:57","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:57","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:01:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:01","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:01","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:05","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:05","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:09","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:09","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:11","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:11","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:13","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:13","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:15","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:15","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:17","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:17","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:21","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:21","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:23","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:23","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:26","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:27","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:28","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:32","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:33","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:38","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:38","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:40","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:40","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:46","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:46","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:48","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:48","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:54","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:54","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:56","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:56","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:58","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:02:58","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:00","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:00","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:02","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:02","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:04","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:04","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:06","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:06","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:08","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:08","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:10","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:10","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:12","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:12","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:16","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:16","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:18","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:18","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:20","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:20","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:22","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:22","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:26","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:26","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:28","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:28","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:32","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:32","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:39","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:39","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:43","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:43","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:47","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:47","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:55","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:55","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:57","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:57","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:03:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:00","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:02","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:02","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:04","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:04","userAgent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:06","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:06","userAgent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:08","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:08","userAgent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:10","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:10","userAgent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:12","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:12","userAgent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:14","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:14","userAgent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:16","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:16","userAgent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:18","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:18","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:20","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:20","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:22","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:22","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:24","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:25","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:26","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:27","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:28","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:29","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:32","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:33","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:35","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:36","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:37","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:38","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:39","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:40","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:43","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:46","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:47","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:48","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:52","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:54","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:55","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:56","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/profile","service":"qrevent-backend","timestamp":"2026-02-06 12:04:57","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:04:59"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:04:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:261:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 12:04:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:05:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:05:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:05:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:06:45"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:06:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:07:12"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:07:14"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:07:22","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:261:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 12:07:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:07:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:07:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:08:02"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:08:17","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:261:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 12:08:17"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:08:28"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:08:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:08:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:08:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:08:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:08:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:09:00"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:09:15"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:09:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:09:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:09:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:09:59"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:10:09","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:261:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 12:10:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:10:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:10:19"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:10:21","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:261:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 12:10:21"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:10:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:10:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:10:39"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:10:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:261:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 12:10:51"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:10:54","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:10:54","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:10:54","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:10:54","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:10:54","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:11:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:11:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:11:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:11:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:11:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:11:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:11:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:11:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:11:48"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:11:59","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:261:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 12:11:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:12:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:12:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:13:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:13:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:13:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:14:46"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:14:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:15:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:15:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:16:02"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:20:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:261:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 12:20:42"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:20:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:20:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:20:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:20:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:20:44","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:28:37","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:28:37","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:28:37","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:29:19"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:29:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:29:46"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:30:11","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:261:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 12:30:11"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:32:08","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:32:08","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:32:08","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:33:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:33:22"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:34:11","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"error","message":"Stream isn't writeable and enableOfflineQueue options is false","name":"Error","service":"qrevent-backend","stack":"Error: Stream isn't writeable and enableOfflineQueue options is false\n    at EventEmitter.sendCommand (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/Redis.js:365:32)\n    at EventEmitter.del (/home/kevin/Qrevent/backendqrevent/node_modules/ioredis/built/utils/Commander.js:90:25)\n    at revokeRefreshToken (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:261:18)\n    at handleTokenRefresh (/home/kevin/Qrevent/backendqrevent/middleware/refreshToken.js:175:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 12:34:11"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:35:23","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:35:23","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:35:23","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:36:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:37:12"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:37:40","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 12:37:40"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:37:40","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:37:40","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:38:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:38:26"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:38:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 12:38:30"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:38:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:38:30","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:38:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:38:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:38:50","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:39:34"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:39:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 12:39:53"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:39:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:39:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:39:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:40:09"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:40:12","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 12:40:12"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:40:12","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:40:12","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:40:24"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:40:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 12:40:31"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:40:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:40:31","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:40:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:40:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:40:41","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:40:43"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:40:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 12:40:53"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:40:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:40:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:41:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:41:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:41:03","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:41:19"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:42:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:42:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:43:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:43:45"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:44:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:44:21"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:44:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 12:44:34"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:44:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:44:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:44:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:44:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:44:42","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:45:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:45:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:45:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:46:20","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/refresh-token","service":"qrevent-backend","timestamp":"2026-02-06 12:46:20","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:46:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:46:46","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:46:46","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:47:10","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:47:10","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:47:10","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:48:01","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/refresh-token","service":"qrevent-backend","timestamp":"2026-02-06 12:48:01","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:48:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/refresh-token","service":"qrevent-backend","timestamp":"2026-02-06 12:48:34","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:48:39"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:48:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 12:48:45"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:48:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:49:20"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:52:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 12:52:49"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:52:49","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:52:54"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:53:04","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 12:53:04"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:53:04","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token","service":"qrevent-backend","timestamp":"2026-02-06 12:53:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:53:45","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:54:47"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:54:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:55:45"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:55:56"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:56:00","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 12:56:00"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:56:08","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:56:46","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:57:35","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:58:19"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:58:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 12:59:11"}
{"email":"test@test.com","error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Login error:","service":"qrevent-backend","stack":"Error: Error finding user by email: TypeError: fetch failed\n    at Object.findByEmail (/home/kevin/Qrevent/backendqrevent/utils/db/users.js:55:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (/home/kevin/Qrevent/backendqrevent/controllers/authController.js:145:18)","timestamp":"2026-02-06T08:59:14.143Z"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 12:59:46","userAgent":"curl/8.5.0"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 12:59:46"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:00:45"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:02:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:05:24"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 13:06:19","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"0":"c","1":"l","10":" ","11":"i","12":"s","13":" ","14":"n","15":"o","16":"t","17":" ","18":"a","19":" ","2":"i","20":"f","21":"u","22":"n","23":"c","24":"t","25":"i","26":"o","27":"n","3":"e","4":"n","5":"t","6":".","7":"d","8":"e","9":"l","level":"warn","message":"Failed to revoke refresh token:","service":"qrevent-backend","timestamp":"2026-02-06 13:06:19"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 13:06:19"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:07:55"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 13:08:00","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"0":"c","1":"l","10":" ","11":"i","12":"s","13":" ","14":"n","15":"o","16":"t","17":" ","18":"a","19":" ","2":"i","20":"f","21":"u","22":"n","23":"c","24":"t","25":"i","26":"o","27":"n","3":"e","4":"n","5":"t","6":".","7":"d","8":"e","9":"l","level":"warn","message":"Failed to revoke refresh token:","service":"qrevent-backend","timestamp":"2026-02-06 13:08:00"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 13:08:00"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 13:08:07","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"0":"c","1":"l","10":" ","11":"i","12":"s","13":" ","14":"n","15":"o","16":"t","17":" ","18":"a","19":" ","2":"i","20":"f","21":"u","22":"n","23":"c","24":"t","25":"i","26":"o","27":"n","3":"e","4":"n","5":"t","6":".","7":"d","8":"e","9":"l","level":"warn","message":"Failed to revoke refresh token:","service":"qrevent-backend","timestamp":"2026-02-06 13:08:07"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 13:08:33","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"0":"c","1":"l","10":" ","11":"i","12":"s","13":" ","14":"n","15":"o","16":"t","17":" ","18":"a","19":" ","2":"i","20":"f","21":"u","22":"n","23":"c","24":"t","25":"i","26":"o","27":"n","3":"e","4":"n","5":"t","6":".","7":"d","8":"e","9":"l","level":"warn","message":"Failed to revoke refresh token:","service":"qrevent-backend","timestamp":"2026-02-06 13:08:33"}
{"error":"Invalid refresh token","ip":"::ffff:127.0.0.1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-06 13:08:53","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"0":"c","1":"l","10":" ","11":"i","12":"s","13":" ","14":"n","15":"o","16":"t","17":" ","18":"a","19":" ","2":"i","20":"f","21":"u","22":"n","23":"c","24":"t","25":"i","26":"o","27":"n","3":"e","4":"n","5":"t","6":".","7":"d","8":"e","9":"l","level":"warn","message":"Failed to revoke refresh token:","service":"qrevent-backend","timestamp":"2026-02-06 13:08:53"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/refresh-token","service":"qrevent-backend","timestamp":"2026-02-06 13:09:08","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/login","service":"qrevent-backend","timestamp":"2026-02-06 13:11:46","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"warn","message":" General rate limit exceeded","path":"/api/auth/login","service":"qrevent-backend","timestamp":"2026-02-06 13:11:58","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:13:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:13:30"}
{"email":"Andriatsilavokevin@gmail.com","error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Login error:","service":"qrevent-backend","stack":"Error: Error finding user by email: TypeError: fetch failed\n    at Object.findByEmail (/home/kevin/Qrevent/backendqrevent/utils/db/users.js:55:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (/home/kevin/Qrevent/backendqrevent/controllers/authController.js:145:18)","timestamp":"2026-02-06T09:14:34.890Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:16:39"}
{"email":"Andriatsilavokevin@gmail.com","error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Login error:","service":"qrevent-backend","stack":"Error: Error finding user by email: TypeError: fetch failed\n    at Object.findByEmail (/home/kevin/Qrevent/backendqrevent/utils/db/users.js:55:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (/home/kevin/Qrevent/backendqrevent/controllers/authController.js:145:18)","timestamp":"2026-02-06T09:19:37.294Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:25:20"}
{"email":"Andriatsilavokevin@gmail.com","error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Login error:","service":"qrevent-backend","stack":"Error: Error finding user by email: TypeError: fetch failed\n    at Object.findByEmail (/home/kevin/Qrevent/backendqrevent/utils/db/users.js:55:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (/home/kevin/Qrevent/backendqrevent/controllers/authController.js:145:18)","timestamp":"2026-02-06T09:31:55.740Z"}
{"email":"Andriatsilavokevin@gmail.com","error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Login error:","service":"qrevent-backend","stack":"Error: Error finding user by email: TypeError: fetch failed\n    at Object.findByEmail (/home/kevin/Qrevent/backendqrevent/utils/db/users.js:55:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (/home/kevin/Qrevent/backendqrevent/controllers/authController.js:145:18)","timestamp":"2026-02-06T09:32:23.165Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:38:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:40:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:46:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:46:12"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:46:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 13:47:13"}
{"email":"Andriatsilavokevin@gmail.com","error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Login error:","service":"qrevent-backend","stack":"Error: Error finding user by email: TypeError: fetch failed\n    at Object.findByEmail (/home/kevin/Qrevent/backendqrevent/utils/db/users.js:55:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (/home/kevin/Qrevent/backendqrevent/controllers/authController.js:145:18)","timestamp":"2026-02-06T09:54:48.214Z"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 14:08:20"}
{"error":"Error finding user by email: TypeError: fetch failed","hint":"Check if Supabase is properly configured in .env file","level":"error","message":"Database error during user lookup:","service":"qrevent-backend","stack":"Error: Error finding user by email: TypeError: fetch failed\n    at Object.findByEmail (/home/kevin/Qrevent/backendqrevent/utils/db/users.js:55:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (/home/kevin/Qrevent/backendqrevent/controllers/authController.js:174:14)","timestamp":"2026-02-06 14:08:32"}
{"error":"Error finding user by email: TypeError: fetch failed","hint":"Check if Supabase is properly configured in .env file","level":"error","message":"Database error during user lookup:","service":"qrevent-backend","stack":"Error: Error finding user by email: TypeError: fetch failed\n    at Object.findByEmail (/home/kevin/Qrevent/backendqrevent/utils/db/users.js:55:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async login (/home/kevin/Qrevent/backendqrevent/controllers/authController.js:174:14)","timestamp":"2026-02-06 14:11:08"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 14:14:04"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 14:20:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 14:20:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 14:20:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 14:21:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 14:22:29"}
{"error":"Error creating user: Could not find the 'preferences' column of 'users' in the schema cache","level":"error","message":"Database error:","service":"qrevent-backend","timestamp":"2026-02-06 14:23:55"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 14:27:36"}
{"level":"info","message":"Refresh token stored in memory fallback","service":"qrevent-backend","timestamp":"2026-02-06 14:27:45","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 14:27:45","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 14:27:45"}
{"level":"info","message":"Refresh token stored in memory fallback","service":"qrevent-backend","timestamp":"2026-02-06 15:31:48","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 15:31:48","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"client.del is not a function","level":"warn","message":"Failed to revoke refresh token:","service":"qrevent-backend","timestamp":"2026-02-06 15:32:01"}
{"level":"info","message":"Refresh token stored in memory fallback","service":"qrevent-backend","timestamp":"2026-02-06 15:34:14","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 15:34:14","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"client.del is not a function","level":"warn","message":"Failed to revoke refresh token:","service":"qrevent-backend","timestamp":"2026-02-06 15:37:02"}
{"level":"info","message":"Refresh token stored in memory fallback","service":"qrevent-backend","timestamp":"2026-02-06 15:59:03","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 15:59:03","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:03:45"}
{"level":"info","message":"Refresh token stored in memory fallback","service":"qrevent-backend","timestamp":"2026-02-06 16:04:29","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 16:04:29","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 16:04:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:11:42"}
{"level":"info","message":"Refresh token stored in memory fallback","service":"qrevent-backend","timestamp":"2026-02-06 16:12:07","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 16:12:07","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 16:12:07"}
{"level":"info","message":"Refresh token stored in memory fallback","service":"qrevent-backend","timestamp":"2026-02-06 16:16:22","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 16:16:22","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:17:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:17:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:18:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:18:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:20:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:20:12"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:20:21"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:20:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:20:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:20:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:20:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:20:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:21:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:21:10"}
{"level":"info","message":"Refresh token stored in memory fallback","service":"qrevent-backend","timestamp":"2026-02-06 16:22:38","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"an***@gmail.com","error":"Cannot read properties of undefined (reading 'query')","level":"error","message":"Failed to log login attempt","service":"qrevent-backend","success":true,"timestamp":"2026-02-06 16:22:38"}
{"error":"Cannot read properties of undefined (reading 'query')","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-06 16:22:38"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 16:22:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:23:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:24:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:24:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:24:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:27:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 16:51:58"}
{"level":"info","message":"Refresh token stored in memory fallback","service":"qrevent-backend","timestamp":"2026-02-06 17:43:44","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"an***@gmail.com","failureReason":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Login Attempt (File Log)","service":"qrevent-backend","success":true,"timestamp":"2026-02-06T13:43:44.064Z","userAgent":"Mozilla/***"}
{"error":"Cannot read properties of undefined (reading 'LOGIN_SUCCESS')","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-06 17:43:44"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 17:43:44"}
{"level":"info","message":"Refresh token stored in memory fallback","service":"qrevent-backend","timestamp":"2026-02-06 17:57:54","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"an***@gmail.com","failureReason":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Login Attempt (File Log)","service":"qrevent-backend","success":true,"timestamp":"2026-02-06T13:57:54.997Z","userAgent":"Mozilla/***"}
{"error":"Cannot read properties of undefined (reading 'LOGIN_SUCCESS')","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-06 17:57:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 18:01:18"}
{"level":"info","message":"Redis connected for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 18:02:56"}
{"level":"info","message":"Refresh token stored in Redis","service":"qrevent-backend","timestamp":"2026-02-06 18:02:56","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"an***@gmail.com","failureReason":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Login Attempt (File Log)","service":"qrevent-backend","success":true,"timestamp":"2026-02-06T14:02:56.566Z","userAgent":"Mozilla/***"}
{"error":"Cannot read properties of undefined (reading 'LOGIN_SUCCESS')","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-06 18:02:56"}
{"level":"info","message":"Refresh token stored in Redis","service":"qrevent-backend","timestamp":"2026-02-06 18:03:43","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"email":"an***@gmail.com","failureReason":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Login Attempt (File Log)","service":"qrevent-backend","success":true,"timestamp":"2026-02-06T14:03:43.347Z","userAgent":"Mozilla/***"}
{"error":"Cannot read properties of undefined (reading 'LOGIN_SUCCESS')","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-06 18:03:43"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 18:05:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 18:07:18"}
{"error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Database error:","service":"qrevent-backend","timestamp":"2026-02-06 18:08:04"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 18:13:02"}
{"email":"te***@test.com","error":"logger[logLevel] is not a function","level":"error","message":"Failed to log login attempt","service":"qrevent-backend","success":false,"timestamp":"2026-02-06 18:24:46"}
{"action":"login_failed","details":"{\"email\":\"test@test.com\",\"reason\":\"user_not_found\",\"timestamp\":\"2026-02-06T14:24:46.124Z\"}","errorMessage":"Invalid credentials","eventId":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Audit Event (File Log)","resourceId":null,"resourceType":"user","service":"qrevent-backend","severity":"warning","success":false,"timestamp":"2026-02-06T14:24:46.124Z","userAgent":"curl/***","userId":null}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 18:32:19"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 18:32:35"}
{"email":"an***@gmail.com","failureReason":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Login Attempt (File Log)","service":"qrevent-backend","success":true,"timestamp":"2026-02-06T14:32:35.062Z","userAgent":"Mozilla/***"}
{"action":"login_success","details":"{\"email\":\"andriatsilavokevin@gmail.com\",\"loginMethod\":\"password\",\"timestamp\":\"2026-02-06T14:32:35.063Z\"}","errorMessage":null,"eventId":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Audit Event (File Log)","resourceId":"97324839-b03d-41f1-bef4-47011885453a","resourceType":"user","service":"qrevent-backend","severity":"info","success":true,"timestamp":"2026-02-06T14:32:35.064Z","userAgent":"Mozilla/***","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 18:32:35","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 18:35:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 18:35:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 18:36:10"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 18:38:34"}
{"email":"an***@gmail.com","failureReason":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Login Attempt (File Log)","service":"qrevent-backend","success":true,"timestamp":"2026-02-06T14:38:34.202Z","userAgent":"Mozilla/***"}
{"action":"login_success","details":"{\"email\":\"andriatsilavokevin@gmail.com\",\"loginMethod\":\"password\",\"timestamp\":\"2026-02-06T14:38:34.210Z\"}","errorMessage":null,"eventId":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Audit Event (File Log)","resourceId":"97324839-b03d-41f1-bef4-47011885453a","resourceType":"user","service":"qrevent-backend","severity":"info","success":true,"timestamp":"2026-02-06T14:38:34.211Z","userAgent":"Mozilla/***","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 18:38:34","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 18:46:32"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 18:46:47"}
{"email":"an***@gmail.com","failureReason":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Login Attempt (File Log)","service":"qrevent-backend","success":true,"timestamp":"2026-02-06T14:46:47.294Z","userAgent":"Mozilla/***"}
{"action":"login_success","details":"{\"email\":\"andriatsilavokevin@gmail.com\",\"loginMethod\":\"password\",\"timestamp\":\"2026-02-06T14:46:47.298Z\"}","errorMessage":null,"eventId":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Audit Event (File Log)","resourceId":"97324839-b03d-41f1-bef4-47011885453a","resourceType":"user","service":"qrevent-backend","severity":"info","success":true,"timestamp":"2026-02-06T14:46:47.298Z","userAgent":"Mozilla/***","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 18:46:47","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.guests'","level":"error","message":"Could not find the table 'public.budget_items' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-06 18:46:58"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.guests'","level":"error","message":"Could not find the table 'public.budget_items' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-06 18:46:58"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.guests'","level":"error","message":"Could not find the table 'public.budget_items' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-06 18:47:00"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.guests'","level":"error","message":"Could not find the table 'public.budget_items' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-06 18:47:00"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.guests'","level":"error","message":"Could not find the table 'public.budget_items' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-06 18:47:03"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.guests'","level":"error","message":"Could not find the table 'public.budget_items' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-06 18:47:03"}
{"error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Database error:","service":"qrevent-backend","timestamp":"2026-02-06 18:53:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 19:00:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 19:02:49"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 19:03:07"}
{"email":"an***@gmail.com","failureReason":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Login Attempt (File Log)","service":"qrevent-backend","success":true,"timestamp":"2026-02-06T15:03:07.737Z","userAgent":"Mozilla/***"}
{"action":"login_success","details":"{\"email\":\"andriatsilavokevin@gmail.com\",\"loginMethod\":\"password\",\"timestamp\":\"2026-02-06T15:03:07.738Z\"}","errorMessage":null,"eventId":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Audit Event (File Log)","resourceId":"97324839-b03d-41f1-bef4-47011885453a","resourceType":"user","service":"qrevent-backend","severity":"info","success":true,"timestamp":"2026-02-06T15:03:07.738Z","userAgent":"Mozilla/***","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 19:03:07","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 19:10:15"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 19:11:34"}
{"email":"an***@gmail.com","failureReason":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Login Attempt (File Log)","service":"qrevent-backend","success":true,"timestamp":"2026-02-06T15:11:34.822Z","userAgent":"Mozilla/***"}
{"action":"login_success","details":"{\"email\":\"andriatsilavokevin@gmail.com\",\"loginMethod\":\"password\",\"timestamp\":\"2026-02-06T15:11:34.823Z\"}","errorMessage":null,"eventId":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Audit Event (File Log)","resourceId":"97324839-b03d-41f1-bef4-47011885453a","resourceType":"user","service":"qrevent-backend","severity":"info","success":true,"timestamp":"2026-02-06T15:11:34.823Z","userAgent":"Mozilla/***","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 19:11:34","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:221:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 19:15:59"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 19:15:59"}
{"level":"error","message":"Error in seatingTablesDb.getAvailableFamilies: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getAvailableFamilies (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:455:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3414:31","timestamp":"2026-02-06 19:15:59"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching available families:","service":"qrevent-backend","timestamp":"2026-02-06 19:15:59"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getUnassignedGuests (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:365:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3441:30","timestamp":"2026-02-06 19:15:59"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching unassigned guests:","service":"qrevent-backend","timestamp":"2026-02-06 19:15:59"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:670:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 19:16:00"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:00"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:221:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 19:16:01"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:01"}
{"level":"error","message":"Error in seatingTablesDb.getAvailableFamilies: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getAvailableFamilies (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:455:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3414:31","timestamp":"2026-02-06 19:16:01"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching available families:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:01"}
{"level":"error","message":"Error in seatingTablesDb.getUnassignedGuests: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getUnassignedGuests (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:365:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3441:30","timestamp":"2026-02-06 19:16:01"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching unassigned guests:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:01"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:670:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 19:16:02"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:02"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:221:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 19:16:04"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:04"}
{"level":"error","message":"Error in seatingTablesDb.getAvailableFamilies: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getAvailableFamilies (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:455:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3414:31","timestamp":"2026-02-06 19:16:04"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching available families:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:04"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:670:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 19:16:05"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:05"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:221:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 19:16:16"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:16"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:221:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 19:16:17"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:17"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:221:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 19:16:20"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:20"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:221:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 19:16:46"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:46"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:221:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 19:16:48"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:48"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:221:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 19:16:51"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 19:16:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 19:20:04"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 19:21:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 19:22:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 19:22:30"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-06 19:26:03"}
{"email":"an***@gmail.com","failureReason":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Login Attempt (File Log)","service":"qrevent-backend","success":true,"timestamp":"2026-02-06T15:26:03.110Z","userAgent":"Mozilla/***"}
{"action":"login_success","details":"{\"email\":\"andriatsilavokevin@gmail.com\",\"loginMethod\":\"password\",\"timestamp\":\"2026-02-06T15:26:03.110Z\"}","errorMessage":null,"eventId":null,"ipAddress":"::1:xxxx:xxxx:xxxx:xxxx","level":"info","message":"Audit Event (File Log)","resourceId":"97324839-b03d-41f1-bef4-47011885453a","resourceType":"user","service":"qrevent-backend","severity":"info","success":true,"timestamp":"2026-02-06T15:26:03.111Z","userAgent":"Mozilla/***","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-06 19:26:03","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 19:29:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 19:29:17"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 19:29:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 19:29:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 19:30:01"}
{"level":"error","message":"Create budget item error: sanitizeInput is not a function","service":"qrevent-backend","stack":"TypeError: sanitizeInput is not a function\n    at /home/kevin/Qrevent/backendqrevent/routes/budget.js:294:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 19:40:34"}
{"level":"error","message":"Create budget item error: sanitizeInput is not a function","service":"qrevent-backend","stack":"TypeError: sanitizeInput is not a function\n    at /home/kevin/Qrevent/backendqrevent/routes/budget.js:294:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 19:40:36"}
{"level":"error","message":"Create budget item error: sanitizeInput is not a function","service":"qrevent-backend","stack":"TypeError: sanitizeInput is not a function\n    at /home/kevin/Qrevent/backendqrevent/routes/budget.js:294:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 19:40:36"}
{"level":"error","message":"Create budget item error: sanitizeInput is not a function","service":"qrevent-backend","stack":"TypeError: sanitizeInput is not a function\n    at /home/kevin/Qrevent/backendqrevent/routes/budget.js:294:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 19:40:38"}
{"level":"error","message":"Create budget item error: sanitizeInput is not a function","service":"qrevent-backend","stack":"TypeError: sanitizeInput is not a function\n    at /home/kevin/Qrevent/backendqrevent/routes/budget.js:294:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 19:40:39"}
{"level":"error","message":"Create budget item error: sanitizeInput is not a function","service":"qrevent-backend","stack":"TypeError: sanitizeInput is not a function\n    at /home/kevin/Qrevent/backendqrevent/routes/budget.js:294:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-06 19:40:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 20:07:54"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 20:07:57"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:07:57"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:07:57"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 20:07:57"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:07:58"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:07:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 20:07:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 20:08:02"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 20:13:01"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:13:01"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:13:01"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:13:01"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:13:01"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 20:13:01"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:13:03"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:13:03"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:13:03"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:13:03"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:13:06"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:13:06"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:13:06"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:13:06"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 20:16:16"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:16:16"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:16:16"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 20:16:16"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:16:16"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:16:16"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:16:18"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:16:18"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:16:18"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:16:18"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:16:21"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:16:21"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:16:21"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:16:21"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:25:03"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:25:03"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 20:25:03"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:25:03"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:25:03"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 20:25:03"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:25:04"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:25:04"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:25:05"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:25:05"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:25:08"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:25:08"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:25:08"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:25:08"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:30:13"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:30:13"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 20:30:14"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 20:30:14"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:30:14"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:30:14"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:30:15"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:30:15"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:30:16"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:30:16"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:30:18"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:30:18"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:30:19"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:30:19"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 20:34:15"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:34:15"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:34:15"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:34:15"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:34:15"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 20:34:15"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:34:17"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:34:17"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:34:17"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:34:17"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:34:20"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:34:20"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 20:34:20"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 20:34:20"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:34:26"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:34:26"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:34:28"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:34:28"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:34:31"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:34:31"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:34:58"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:34:58"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:35:01"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:35:01"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:35:03"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:35:03"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:35:30"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:35:30"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:35:33"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:35:33"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 20:35:36"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 20:35:36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 20:36:09"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-06 20:37:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 20:37:19"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-06 20:37:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 20:37:58"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-06 20:37:58"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-06 20:37:58"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"Found 26 migration(s):","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"\n Migration to apply (013_create_audit_logging.sql):","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"--  SECURITY AUDIT LOGGING SYSTEM\n-- Migration 013: Create comprehensive audit logging infrastructure\n-- Critical for compliance and security monitoring\n\n-- Create audit_logs table for tracking sensitive operations\nCREATE TABLE IF NOT EXISTS audit_logs (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    user_id UUID REFERENCES users(id) ON DELETE SET NULL,\n    event_id UUID REFERENCES events(id) ON DELETE SET NULL,\n    action VARCHAR(50) NOT NULL, -- login, logout, qr_generate, qr_scan, data_export, etc.\n    resource_type VARCHAR(50) NOT NULL, -- user, event, guest, qr_code, etc.\n    resource_id UUID, -- ID of the affected resource\n    ip_address INET,\n    user_agent TEXT,\n    session_id VARCHAR(255),\n    details JSONB, -- Store additional context specific to the action\n    timestamp TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    severity VARCHAR(20) DEFAULT 'info' CHECK (severity IN ('info', 'warning', 'critical')),\n    success BOOLEAN DEFAULT TRUE,\n    error_message TEXT\n);\n\n-- Create indexes for efficient audit log queries\nCREATE INDEX IF NOT EXISTS idx_audit_logs_user_id ON audit_logs(user_id);\nCREATE INDEX IF NOT EXISTS idx_audit_logs_event_id ON audit_logs(event_id);\nCREATE INDEX IF NOT EXISTS idx_audit_logs_action ON audit_logs(action);\nCREATE INDEX IF NOT EXISTS idx_audit_logs_timestamp ON audit_logs(timestamp DESC);\nCREATE INDEX IF NOT EXISTS idx_audit_logs_severity ON audit_logs(severity);\nCREATE INDEX IF NOT EXISTS idx_audit_logs_resource ON audit_logs(resource_type, resource_id);\n\n-- Create login_attempts table for security monitoring\nCREATE TABLE IF NOT EXISTS login_attempts (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    email VARCHAR(255) NOT NULL,\n    ip_address INET NOT NULL,\n    user_agent TEXT,\n    success BOOLEAN NOT NULL DEFAULT FALSE,\n    failure_reason VARCHAR(100), -- invalid_password, user_not_found, rate_limited, etc.\n    timestamp TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create indexes for login_attempts\nCREATE INDEX IF NOT EXISTS idx_login_attempts_email ON login_attempts(email);\nCREATE INDEX IF NOT EXISTS idx_login_attempts_ip ON login_attempts(ip_address);\nCREATE INDEX IF NOT EXISTS idx_login_attempts_timestamp ON login_attempts(timestamp DESC);\nCREATE INDEX IF NOT EXISTS idx_login_attempts_success ON login_attempts(success, timestamp DESC);\n\n-- Function to log audit events with automatic context detection\nCREATE OR REPLACE FUNCTION log_audit_event(\n    p_user_id UUID,\n    p_action VARCHAR(50),\n    p_resource_type VARCHAR(50),\n    p_resource_id UUID DEFAULT NULL,\n    p_event_id UUID DEFAULT NULL,\n    p_ip_address INET DEFAULT NULL,\n    p_user_agent TEXT DEFAULT NULL,\n    p_session_id VARCHAR(255) DEFAULT NULL,\n    p_details JSONB DEFAULT '{}',\n    p_severity VARCHAR(20) DEFAULT 'info',\n    p_success BOOLEAN DEFAULT TRUE,\n    p_error_message TEXT DEFAULT NULL\n)\nRETURNS UUID AS $$\nDECLARE\n    audit_id UUID;\nBEGIN\n    INSERT INTO audit_logs (\n        user_id, action, resource_type, resource_id, event_id,\n        ip_address, user_agent, session_id, details, severity, success, error_message\n    ) VALUES (\n        p_user_id, p_action, p_resource_type, p_resource_id, p_event_id,\n        p_ip_address, p_user_agent, p_session_id, p_details, p_severity, p_success, p_error_message\n    ) RETURNING id INTO audit_id;\n    \n    RETURN audit_id;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\n-- Function to log login attempts\nCREATE OR REPLACE FUNCTION log_login_attempt(\n    p_email VARCHAR(255),\n    p_ip_address INET,\n    p_user_agent TEXT DEFAULT NULL,\n    p_success BOOLEAN DEFAULT FALSE,\n    p_failure_reason VARCHAR(100) DEFAULT NULL\n)\nRETURNS UUID AS $$\nDECLARE\n    attempt_id UUID;\nBEGIN\n    INSERT INTO login_attempts (email, ip_address, user_agent, success, failure_reason)\n    VALUES (p_email, p_ip_address, p_user_agent, p_success, p_failure_reason)\n    RETURNING id INTO attempt_id;\n    \n    RETURN attempt_id;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\n-- Function to get failed login attempts for an IP in last N minutes\nCREATE OR REPLACE FUNCTION get_failed_login_attempts(\n    p_ip_address INET,\n    p_minutes INTEGER DEFAULT 15\n)\nRETURNS INTEGER AS $$\nBEGIN\n    RETURN (\n        SELECT COUNT(*)\n        FROM login_attempts\n        WHERE ip_address = p_ip_address\n        AND success = FALSE\n        AND timestamp > NOW() - INTERVAL '1 minute' * p_minutes\n    );\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\n-- Function to get failed login attempts for an email in last N minutes\nCREATE OR REPLACE FUNCTION get_failed_login_attempts_by_email(\n    p_email VARCHAR(255),\n    p_minutes INTEGER DEFAULT 15\n)\nRETURNS INTEGER AS $$\nBEGIN\n    RETURN (\n        SELECT COUNT(*)\n        FROM login_attempts\n        WHERE LOWER(email) = LOWER(p_email)\n        AND success = FALSE\n        AND timestamp > NOW() - INTERVAL '1 minute' * p_minutes\n    );\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\n-- Function to clean up old audit logs (keep last 1 year by default)\nCREATE OR REPLACE FUNCTION cleanup_old_audit_logs(\n    p_retention_days INTEGER DEFAULT 365\n)\nRETURNS INTEGER AS $$\nDECLARE\n    deleted_count INTEGER;\nBEGIN\n    DELETE FROM audit_logs\n    WHERE timestamp < NOW() - INTERVAL '1 day' * p_retention_days;\n    \n    GET DIAGNOSTICS deleted_count = ROW_COUNT;\n    \n    -- Log the cleanup operation\n    INSERT INTO audit_logs (user_id, action, resource_type, details, severity)\n    VALUES (NULL, 'audit_cleanup', 'system', \n            jsonb_build_object('deleted_count', deleted_count, 'retention_days', p_retention_days),\n            'info');\n    \n    RETURN deleted_count;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\n-- Function to clean up old login attempts (keep last 30 days by default)\nCREATE OR REPLACE FUNCTION cleanup_old_login_attempts(\n    p_retention_days INTEGER DEFAULT 30\n)\nRETURNS INTEGER AS $$\nDECLARE\n    deleted_count INTEGER;\nBEGIN\n    DELETE FROM login_attempts\n    WHERE timestamp < NOW() - INTERVAL '1 day' * p_retention_days;\n    \n    GET DIAGNOSTICS deleted_count = ROW_COUNT;\n    \n    RETURN deleted_count;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\n-- Create RLS policies for audit_logs (only admins and owners can read their own logs)\nALTER TABLE audit_logs ENABLE ROW LEVEL SECURITY;\n\n-- Policy: Users can only see their own audit logs\nCREATE POLICY audit_logs_user_access ON audit_logs\n    FOR SELECT TO authenticated\n    USING (user_id = auth.uid() OR auth.role() = 'admin');\n\n-- Policy: Only system can insert audit logs\nCREATE POLICY audit_logs_system_insert ON audit_logs\n    FOR INSERT TO service_role\n    WITH CHECK (true);\n\n-- Create RLS policies for login_attempts (only admins can read)\nALTER TABLE login_attempts ENABLE ROW LEVEL SECURITY;\n\n-- Policy: Only admins can read login attempts\nCREATE POLICY login_attempts_admin_access ON login_attempts\n    FOR SELECT TO authenticated\n    USING (auth.role() = 'admin');\n\n-- Policy: Only system can insert login attempts\nCREATE POLICY login_attempts_system_insert ON login_attempts\n    FOR INSERT TO service_role\n    WITH CHECK (true);\n\n-- Create a view for security monitoring dashboard\nCREATE OR REPLACE VIEW security_dashboard AS\nSELECT \n    'total_users'::text as metric,\n    COUNT(*)::bigint as value,\n    'info'::text as severity\nFROM users\nWHERE is_active = true\n\nUNION ALL\n\nSELECT \n    'failed_logins_24h'::text as metric,\n    COUNT(*)::bigint as value,\n    CASE \n        WHEN COUNT(*) > 100 THEN 'critical'::text\n        WHEN COUNT(*) > 50 THEN 'warning'::text\n        ELSE 'info'::text\n    END as severity\nFROM login_attempts\nWHERE success = false AND timestamp > NOW() - INTERVAL '24 hours'\n\nUNION ALL\n\nSELECT \n    'qr_scans_24h'::text as metric,\n    COUNT(*)::bigint as value,\n    'info'::text as severity\nFROM audit_logs\nWHERE action = 'qr_scan' AND timestamp > NOW() - INTERVAL '24 hours'\n\nUNION ALL\n\nSELECT \n    'critical_events_24h'::text as metric,\n    COUNT(*)::bigint as value,\n    CASE \n        WHEN COUNT(*) > 10 THEN 'critical'::text\n        WHEN COUNT(*) > 5 THEN 'warning'::text\n        ELSE 'info'::text\n    END as severity\nFROM audit_logs\nWHERE severity = 'critical' AND timestamp > NOW() - INTERVAL '24 hours';\n\n-- Grant necessary permissions\nGRANT EXECUTE ON FUNCTION log_audit_event TO service_role;\nGRANT EXECUTE ON FUNCTION log_login_attempt TO service_role;\nGRANT EXECUTE ON FUNCTION get_failed_login_attempts TO service_role;\nGRANT EXECUTE ON FUNCTION get_failed_login_attempts_by_email TO service_role;\nGRANT EXECUTE ON FUNCTION cleanup_old_audit_logs TO service_role;\nGRANT EXECUTE ON FUNCTION cleanup_old_login_attempts TO service_role;\nGRANT SELECT ON security_dashboard TO authenticated;\n\n-- Log the successful creation of audit system\nINSERT INTO audit_logs (user_id, action, resource_type, details, severity)\nVALUES (NULL, 'audit_system_created', 'system', \n        jsonb_build_object('migration', '013_create_audit_logging', 'tables', ARRAY['audit_logs', 'login_attempts']),\n        'info');","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":"Applying migration: 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-06 20:38:12"}
{"level":"info","message":" Migration applied successfully: 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-06 20:38:12"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-06 20:38:13"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-06 21:16:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 21:17:00"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-06 21:17:00"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-06 21:17:00"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 21:34:14"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 21:34:14"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 21:34:14"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 21:34:14"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 21:34:14"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 21:34:14"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 21:34:16"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 21:34:16"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 21:34:16"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 21:34:16"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 21:34:19"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 21:34:19"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 21:34:19"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 21:34:19"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-06 21:46:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 21:46:23"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-06 21:46:23"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-06 21:46:23"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-06 21:48:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 21:48:54"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-06 21:48:54"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-06 21:48:54"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-06 21:49:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 21:49:08"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-06 21:49:08"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-06 21:49:08"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"Found 27 migration(s):","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-06 21:53:06"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-06 21:53:07"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-06 21:53:07"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-06 21:54:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 21:54:20"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-06 21:54:20"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-06 21:54:20"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 21:54:58"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 21:54:58"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 21:54:58"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 21:54:58"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 21:54:58"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-06 21:54:58"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 21:55:00"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 21:55:00"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 21:55:00"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 21:55:00"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-06 21:55:03"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-06 21:55:03"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 21:55:03"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 21:55:03"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 21:55:15"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 21:55:15"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 21:55:17"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 21:55:17"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 21:55:20"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 21:55:20"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 21:55:31"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 21:55:31"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 21:55:33"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 21:55:33"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-06 21:55:36"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-06 21:55:36"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-06 22:04:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-06 22:04:20"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-06 22:04:20"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-06 22:04:20"}
{"level":"info","message":"Redis: Connection closed","service":"qrevent-backend","timestamp":"2026-02-07 08:42:46"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 08:45:21"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 08:45:22"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 08:45:22"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 08:45:22"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-07 08:46:51"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-07 08:46:52","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 09:06:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 09:06:03"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 09:06:03"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 09:06:03"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 09:07:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 09:07:45"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 09:07:45"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 09:07:45"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 09:11:19"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:19"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 09:11:19"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:19"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:19"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:19"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 09:11:21"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:21"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 09:11:21"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:21"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 09:11:24"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:24"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 09:11:24"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:24"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 09:11:25"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:25"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 09:11:25"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:25"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:26"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:26"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 09:11:27"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:27"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 09:11:27"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:27"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 09:11:30"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:30"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 09:11:30"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 09:11:30"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 09:16:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 09:16:40"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 09:16:40"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 09:16:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 09:17:12"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 09:17:12"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 09:17:12"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 09:17:12"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 09:28:06"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 09:28:06"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 09:28:06"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 09:28:06"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 09:28:06"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 09:28:06"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 09:28:08"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 09:28:08"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 09:28:08"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 09:28:08"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 09:28:10"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 09:28:10"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 09:28:11"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 09:28:11"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"Found 29 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 09:31:34"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:31:35"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 09:31:35"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"Found 29 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:19"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 09:32:21"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:21"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 09:32:21"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 09:32:28"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 09:32:28"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 09:32:28"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 09:32:28"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 09:32:28"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 09:32:28"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 09:32:30"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 09:32:30"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 09:32:30"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 09:32:30"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 09:32:33"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 09:32:33"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 09:32:33"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 09:32:33"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"Found 29 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"\n Migration to apply (018_create_messages_tables.sql):","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"-- Migration 018: Cration des tables pour la messagerie\n-- Cette migration cre les tables ncessaires pour les conversations entre organisateurs et invits\n\n-- Table des conversations\nCREATE TABLE IF NOT EXISTS conversations (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    guest_id UUID REFERENCES guests(id) ON DELETE SET NULL,\n    family_id UUID REFERENCES families(id) ON DELETE SET NULL,\n    organizer_id UUID REFERENCES users(id) ON DELETE SET NULL,\n    subject VARCHAR(200),\n    is_active BOOLEAN DEFAULT TRUE,\n    last_message_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    -- Une conversation doit tre lie  un invit OU une famille\n    CONSTRAINT conversation_participant_check CHECK (\n        (guest_id IS NOT NULL) OR (family_id IS NOT NULL)\n    )\n);\n\n-- Table des messages\nCREATE TABLE IF NOT EXISTS messages (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    conversation_id UUID NOT NULL REFERENCES conversations(id) ON DELETE CASCADE,\n    sender_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n    sender_type VARCHAR(20) NOT NULL CHECK (sender_type IN ('organizer', 'guest', 'system')),\n    content TEXT NOT NULL,\n    is_read BOOLEAN DEFAULT FALSE,\n    read_at TIMESTAMP WITH TIME ZONE,\n    attachments JSONB DEFAULT '[]',\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Table pour les pices jointes des messages (optionnel, pour stockage mtadonnes)\nCREATE TABLE IF NOT EXISTS message_attachments (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    message_id UUID NOT NULL REFERENCES messages(id) ON DELETE CASCADE,\n    file_name VARCHAR(255) NOT NULL,\n    file_type VARCHAR(100) NOT NULL,\n    file_size INTEGER NOT NULL,\n    file_url TEXT NOT NULL,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Index pour amliorer les performances\nCREATE INDEX IF NOT EXISTS idx_conversations_event ON conversations(event_id);\nCREATE INDEX IF NOT EXISTS idx_conversations_guest ON conversations(guest_id);\nCREATE INDEX IF NOT EXISTS idx_conversations_family ON conversations(family_id);\nCREATE INDEX IF NOT EXISTS idx_conversations_last_message ON conversations(last_message_at DESC);\nCREATE INDEX IF NOT EXISTS idx_conversations_organizer ON conversations(organizer_id);\nCREATE INDEX IF NOT EXISTS idx_messages_conversation ON messages(conversation_id);\nCREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages(created_at DESC);\nCREATE INDEX IF NOT EXISTS idx_messages_sender ON messages(sender_id);\nCREATE INDEX IF NOT EXISTS idx_messages_unread ON messages(is_read) WHERE is_read = FALSE;\n\n-- Trigger pour mettre  jour updated_at\nCREATE TRIGGER update_conversations_updated_at \n    BEFORE UPDATE ON conversations \n    FOR EACH ROW \n    EXECUTE FUNCTION update_updated_at_column();\n\nCREATE TRIGGER update_messages_updated_at \n    BEFORE UPDATE ON messages \n    FOR EACH ROW \n    EXECUTE FUNCTION update_updated_at_column();\n\n-- Vue pour obtenir les conversations avec le dernier message et le nombre de messages non lus\nCREATE OR REPLACE VIEW conversation_summary AS\nSELECT \n    c.id,\n    c.event_id,\n    c.guest_id,\n    c.family_id,\n    c.organizer_id,\n    c.subject,\n    c.is_active,\n    c.last_message_at,\n    c.created_at,\n    (\n        SELECT COUNT(*) \n        FROM messages m \n        WHERE m.conversation_id = c.id AND m.is_read = FALSE AND m.sender_type = 'guest'\n    ) as unread_count,\n    (\n        SELECT json_build_object(\n            'id', m.id,\n            'content', LEFT(m.content, 100),\n            'sender_type', m.sender_type,\n            'created_at', m.created_at\n        )\n        FROM messages m \n        WHERE m.conversation_id = c.id \n        ORDER BY m.created_at DESC \n        LIMIT 1\n    ) as last_message,\n    CASE \n        WHEN c.guest_id IS NOT NULL THEN \n            json_build_object(\n                'id', g.id,\n                'name', CONCAT(g.first_name, ' ', g.last_name),\n                'email', g.email,\n                'type', 'guest'\n            )\n        WHEN c.family_id IS NOT NULL THEN \n            json_build_object(\n                'id', f.id,\n                'name', f.name,\n                'type', 'family'\n            )\n    END as participant\nFROM conversations c\nLEFT JOIN guests g ON c.guest_id = g.id\nLEFT JOIN families f ON c.family_id = f.id\nWHERE c.is_active = TRUE;\n\n-- Commentaire sur la migration\nCOMMENT ON TABLE conversations IS 'Table des conversations entre organisateurs et invits/familles';\nCOMMENT ON TABLE messages IS 'Table des messages dans les conversations';\n","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":"Applying migration: 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 09:32:39"}
{"level":"info","message":" Migration applied successfully: 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:32:40"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 09:32:40"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"Found 29 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"\n Migration to apply (016_add_total_budget_to_events.sql):","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"ALTER TABLE events\nADD COLUMN total_budget DECIMAL(12, 2) DEFAULT 0;\n","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":"Applying migration: 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 09:33:28"}
{"level":"info","message":" Migration applied successfully: 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:28"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"Found 29 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"\n Migration to apply (017_add_menu_settings_to_events.sql):","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"-- Migration: Add menu settings to events table\n-- Description: Add column to store menu visibility settings for each event\n\n-- Add menu_settings column to events table\nALTER TABLE events \nADD COLUMN IF NOT EXISTS menu_settings JSONB DEFAULT '{\n  \"message\": true,\n  \"histoire\": true,\n  \"invitation\": true,\n  \"table\": false,\n  \"game\": true,\n  \"avis\": true\n}'::jsonb;\n\n-- Create index for menu_settings queries\nCREATE INDEX IF NOT EXISTS idx_events_menu_settings ON events USING GIN (menu_settings);\n\n-- Update existing events to have default menu settings if null\nUPDATE events \nSET menu_settings = '{\n  \"message\": true,\n  \"histoire\": true,\n  \"invitation\": true,\n  \"table\": false,\n  \"game\": true,\n  \"avis\": true\n}'::jsonb \nWHERE menu_settings IS NULL;\n\n-- Add comment for documentation\nCOMMENT ON COLUMN events.menu_settings IS 'JSON object storing menu visibility settings for guest interface';","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":"Applying migration: 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 09:33:31"}
{"level":"info","message":" Migration applied successfully: 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:33:31"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 09:33:32"}
{"error":"Error fetching events with stats: <!DOCTYPE html>\n<!--[if lt IE 7]> <html class=\"no-js ie6 oldie\" lang=\"en-US\"> <![endif]-->\n<!--[if IE 7]>    <html class=\"no-js ie7 oldie\" lang=\"en-US\"> <![endif]-->\n<!--[if IE 8]>    <html class=\"no-js ie8 oldie\" lang=\"en-US\"> <![endif]-->\n<!--[if gt IE 8]><!--> <html class=\"no-js\" lang=\"en-US\"> <!--<![endif]-->\n<head>\n\n<title> | 500: Internal server error</title>\n<meta charset=\"UTF-8\" />\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=Edge\" />\n<meta name=\"robots\" content=\"noindex, nofollow\" />\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n<link rel=\"stylesheet\" id=\"cf_styles-css\" href=\"/cdn-cgi/styles/main.css\" />\n</head>\n<body>\n<div id=\"cf-wrapper\">\n    <div id=\"cf-error-details\" class=\"p-0\">\n        <header class=\"mx-auto pt-10 lg:pt-6 lg:px-8 w-240 lg:w-full mb-8\">\n            <h1 class=\"inline-block sm:block sm:mb-2 font-light text-60 lg:text-4xl text-black-dark leading-tight mr-2\">\n                <span class=\"inline-block\">Internal server error</span>\n                <span class=\"code-label\">Error code 500</span>\n            </h1>\n            <div>\n                Visit <a href=\"https://www.cloudflare.com/5xx-error-landing?utm_source=errorcode_500&utm_campaign=cjwjwhesaypyiahyiylp.supabase.co\" target=\"_blank\" rel=\"noopener noreferrer\">cloudflare.com</a> for more information.\n            </div>\n            <div class=\"mt-3\">2026-02-07 05:45:40 UTC</div>\n        </header>\n        <div class=\"my-8 bg-gradient-gray\">\n            <div class=\"w-240 lg:w-full mx-auto\">\n                <div class=\"clearfix md:px-8\">\n                    <div id=\"cf-browser-status\" class=\" relative w-1/3 md:w-full py-15 md:p-0 md:py-8 md:text-left md:border-solid md:border-0 md:border-b md:border-gray-400 overflow-hidden float-left md:float-none text-center\">\n  <div class=\"relative mb-10 md:m-0\">\n    \n    <span class=\"cf-icon-browser block md:hidden h-20 bg-center bg-no-repeat\"></span>\n    <span class=\"cf-icon-ok w-12 h-12 absolute left-1/2 md:left-auto md:right-0 md:top-0 -ml-6 -bottom-4\"></span>\n    \n  </div>\n  <span class=\"md:block w-full truncate\">You</span>\n  <h3 class=\"md:inline-block mt-3 md:mt-0 text-2xl text-gray-600 font-light leading-1.3\">\n  \n    Browser\n  \n  </h3>\n  \n  <span class=\"leading-1.3 text-2xl text-green-success\">Working</span>\n  \n</div>\n                    <div id=\"cf-cloudflare-status\" class=\"cf-error-source relative w-1/3 md:w-full py-15 md:p-0 md:py-8 md:text-left md:border-solid md:border-0 md:border-b md:border-gray-400 overflow-hidden float-left md:float-none text-center\">\n  <div class=\"relative mb-10 md:m-0\">\n    <a href=\"https://www.cloudflare.com/5xx-error-landing?utm_source=errorcode_500&#38;utm_campaign=cjwjwhesaypyiahyiylp.supabase.co\" target=\"_blank\" rel=\"noopener noreferrer\">\n    <span class=\"cf-icon-cloud block md:hidden h-20 bg-center bg-no-repeat\"></span>\n    <span class=\"cf-icon-error w-12 h-12 absolute left-1/2 md:left-auto md:right-0 md:top-0 -ml-6 -bottom-4\"></span>\n    </a>\n  </div>\n  <span class=\"md:block w-full truncate\">Port Louis</span>\n  <h3 class=\"md:inline-block mt-3 md:mt-0 text-2xl text-gray-600 font-light leading-1.3\">\n  <a href=\"https://www.cloudflare.com/5xx-error-landing?utm_source=errorcode_500&utm_campaign=cjwjwhesaypyiahyiylp.supabase.co\" target=\"_blank\" rel=\"noopener noreferrer\">\n    Cloudflare\n  </a>\n  </h3>\n  \n  <span class=\"leading-1.3 text-2xl text-red-error\">Error</span>\n  \n</div>\n                    <div id=\"cf-host-status\" class=\" relative w-1/3 md:w-full py-15 md:p-0 md:py-8 md:text-left md:border-solid md:border-0 md:border-b md:border-gray-400 overflow-hidden float-left md:float-none text-center\">\n  <div class=\"relative mb-10 md:m-0\">\n    \n    <span class=\"cf-icon-server block md:hidden h-20 bg-center bg-no-repeat\"></span>\n    <span class=\"cf-icon-ok w-12 h-12 absolute left-1/2 md:left-auto md:right-0 md:top-0 -ml-6 -bottom-4\"></span>\n    \n  </div>\n  <span class=\"md:block w-full truncate\">cjwjwhesaypyiahyiylp.supabase.co</span>\n  <h3 class=\"md:inline-block mt-3 md:mt-0 text-2xl text-gray-600 font-light leading-1.3\">\n  \n    Host\n  \n  </h3>\n  \n  <span class=\"leading-1.3 text-2xl text-green-success\">Working</span>\n  \n</div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"w-240 lg:w-full mx-auto mb-8 lg:px-8\">\n            <div class=\"clearfix\">\n                <div class=\"w-1/2 md:w-full float-left pr-6 md:pb-10 md:pr-0 leading-relaxed\">\n                    <h2 class=\"text-3xl font-normal leading-1.3 mb-4\">What happened?</h2>\n                    <p>There is an internal server error on Cloudflare's network.</p>\n                </div>\n                <div class=\"w-1/2 md:w-full float-left leading-relaxed\">\n                    <h2 class=\"text-3xl font-normal leading-1.3 mb-4\">What can I do?</h2>\n                    <p class=\"mb-6\">Please try again in a few minutes.</p>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"cf-error-footer cf-wrapper w-240 lg:w-full py-10 sm:py-4 sm:px-8 mx-auto text-center sm:text-left border-solid border-0 border-t border-gray-300\">\n    <p class=\"text-13\">\n      <span class=\"cf-footer-item sm:block sm:mb-1\">Cloudflare Ray ID: <strong class=\"font-semibold\">9ca0951a48aa3877</strong></span>\n      <span class=\"cf-footer-separator sm:hidden\">&bull;</span>\n      <span id=\"cf-footer-item-ip\" class=\"cf-footer-item hidden sm:block sm:mb-1\">\n        Your IP:\n        <button type=\"button\" id=\"cf-footer-ip-reveal\" class=\"cf-footer-ip-reveal-btn\">Click to reveal</button>\n        <span class=\"hidden\" id=\"cf-footer-ip\">196.20.218.190</span>\n        <span class=\"cf-footer-separator sm:hidden\">&bull;</span>\n      </span>\n      <span class=\"cf-footer-item sm:block sm:mb-1\"><span>Performance &amp; security by</span> <a rel=\"noopener noreferrer\" href=\"https://www.cloudflare.com/5xx-error-landing?utm_source=errorcode_500&#38;utm_campaign=cjwjwhesaypyiahyiylp.supabase.co\" id=\"brand_link\" target=\"_blank\">Cloudflare</a></span>\n      \n    </p>\n    <script>(function(){function d(){var b=a.getElementById(\"cf-footer-item-ip\"),c=a.getElementById(\"cf-footer-ip-reveal\");b&&\"classList\"in b&&(b.classList.remove(\"hidden\"),c.addEventListener(\"click\",function(){c.classList.add(\"hidden\");a.getElementById(\"cf-footer-ip\").classList.remove(\"hidden\")}))}var a=document;document.addEventListener&&a.addEventListener(\"DOMContentLoaded\",d)})();</script>\n  </div><!-- /.error-footer -->\n\n    </div>\n</div>\n</body>\n</html>","level":"error","message":"Error fetching dashboard summary:","service":"qrevent-backend","timestamp":"2026-02-07 09:45:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 09:51:04"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 09:51:04"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 09:51:04"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 09:51:04"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"Found 30 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"\n Migration to apply (019_secure_messages_rls.sql):","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"-- Migration 019: Scurisation des tables de messagerie avec RLS\n-- Cette migration ajoute Row Level Security et des contraintes de scurit\n\n-- ============================================\n-- 1. ACTIVER RLS SUR LES TABLES\n-- ============================================\n\nALTER TABLE conversations ENABLE ROW LEVEL SECURITY;\nALTER TABLE messages ENABLE ROW LEVEL SECURITY;\nALTER TABLE message_attachments ENABLE ROW LEVEL SECURITY;\n\n-- ============================================\n-- 2. FONCTION UTILITAIRE POUR RCUPRER L'ORGANIZER_ID\n-- ============================================\n\nCREATE OR REPLACE FUNCTION get_conversation_organizer(conv_id UUID)\nRETURNS UUID AS $$\nDECLARE\n    org_id UUID;\nBEGIN\n    SELECT c.organizer_id INTO org_id\n    FROM conversations c\n    WHERE c.id = conv_id;\n    RETURN org_id;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\nCREATE OR REPLACE FUNCTION get_event_organizer(evt_id UUID)\nRETURNS UUID AS $$\nDECLARE\n    org_id UUID;\nBEGIN\n    SELECT e.organizer_id INTO org_id\n    FROM events e\n    WHERE e.id = evt_id;\n    RETURN org_id;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\n-- ============================================\n-- 3. POLICIES POUR LA TABLE CONVERSATIONS\n-- ============================================\n\n-- Policy: Les organisateurs peuvent voir leurs propres conversations\nCREATE POLICY conversations_select_own ON conversations\n    FOR SELECT\n    USING (\n        organizer_id = current_setting('app.current_user_id', true)::UUID\n        OR EXISTS (\n            SELECT 1 FROM events e \n            WHERE e.id = conversations.event_id \n            AND e.organizer_id = current_setting('app.current_user_id', true)::UUID\n        )\n    );\n\n-- Policy: Les organisateurs peuvent crer des conversations pour leurs vnements\nCREATE POLICY conversations_insert_own ON conversations\n    FOR INSERT\n    WITH CHECK (\n        EXISTS (\n            SELECT 1 FROM events e \n            WHERE e.id = conversations.event_id \n            AND e.organizer_id = current_setting('app.current_user_id', true)::UUID\n        )\n    );\n\n-- Policy: Les organisateurs peuvent modifier leurs conversations\nCREATE POLICY conversations_update_own ON conversations\n    FOR UPDATE\n    USING (\n        organizer_id = current_setting('app.current_user_id', true)::UUID\n        OR EXISTS (\n            SELECT 1 FROM events e \n            WHERE e.id = conversations.event_id \n            AND e.organizer_id = current_setting('app.current_user_id', true)::UUID\n        )\n    );\n\n-- Policy: Les organisateurs peuvent supprimer (soft delete) leurs conversations\nCREATE POLICY conversations_delete_own ON conversations\n    FOR DELETE\n    USING (\n        organizer_id = current_setting('app.current_user_id', true)::UUID\n        OR EXISTS (\n            SELECT 1 FROM events e \n            WHERE e.id = conversations.event_id \n            AND e.organizer_id = current_setting('app.current_user_id', true)::UUID\n        )\n    );\n\n-- ============================================\n-- 4. POLICIES POUR LA TABLE MESSAGES\n-- ============================================\n\n-- Policy: Voir les messages des conversations accessibles\nCREATE POLICY messages_select_accessible ON messages\n    FOR SELECT\n    USING (\n        EXISTS (\n            SELECT 1 FROM conversations c\n            JOIN events e ON c.event_id = e.id\n            WHERE c.id = messages.conversation_id\n            AND (c.organizer_id = current_setting('app.current_user_id', true)::UUID\n                 OR e.organizer_id = current_setting('app.current_user_id', true)::UUID)\n        )\n    );\n\n-- Policy: Insrer des messages dans les conversations accessibles\nCREATE POLICY messages_insert_accessible ON messages\n    FOR INSERT\n    WITH CHECK (\n        sender_id = current_setting('app.current_user_id', true)::UUID\n        AND EXISTS (\n            SELECT 1 FROM conversations c\n            JOIN events e ON c.event_id = e.id\n            WHERE c.id = messages.conversation_id\n            AND c.is_active = true\n            AND (c.organizer_id = current_setting('app.current_user_id', true)::UUID\n                 OR e.organizer_id = current_setting('app.current_user_id', true)::UUID)\n        )\n    );\n\n-- Policy: Mettre  jour ses propres messages (ou marquer comme lu)\nCREATE POLICY messages_update_accessible ON messages\n    FOR UPDATE\n    USING (\n        sender_id = current_setting('app.current_user_id', true)::UUID\n        OR EXISTS (\n            SELECT 1 FROM conversations c\n            JOIN events e ON c.event_id = e.id\n            WHERE c.id = messages.conversation_id\n            AND (c.organizer_id = current_setting('app.current_user_id', true)::UUID\n                 OR e.organizer_id = current_setting('app.current_user_id', true)::UUID)\n        )\n    );\n\n-- ============================================\n-- 5. POLICIES POUR LES PICES JOINTES\n-- ============================================\n\nCREATE POLICY attachments_select_accessible ON message_attachments\n    FOR SELECT\n    USING (\n        EXISTS (\n            SELECT 1 FROM messages m\n            JOIN conversations c ON m.conversation_id = c.id\n            JOIN events e ON c.event_id = e.id\n            WHERE m.id = message_attachments.message_id\n            AND (c.organizer_id = current_setting('app.current_user_id', true)::UUID\n                 OR e.organizer_id = current_setting('app.current_user_id', true)::UUID)\n        )\n    );\n\nCREATE POLICY attachments_insert_accessible ON message_attachments\n    FOR INSERT\n    WITH CHECK (\n        EXISTS (\n            SELECT 1 FROM messages m\n            JOIN conversations c ON m.conversation_id = c.id\n            JOIN events e ON c.event_id = e.id\n            WHERE m.id = message_attachments.message_id\n            AND m.sender_id = current_setting('app.current_user_id', true)::UUID\n            AND (c.organizer_id = current_setting('app.current_user_id', true)::UUID\n                 OR e.organizer_id = current_setting('app.current_user_id', true)::UUID)\n        )\n    );\n\n-- ============================================\n-- 6. VUE SCURISE AVEC FILTRAGE\n-- ============================================\n\n-- Supprimer l'ancienne vue si elle existe\nDROP VIEW IF EXISTS conversation_summary;\nDROP VIEW IF EXISTS conversation_summary_secure;\n\n-- Crer la vue scurise avec filtrage par organizer_id\nCREATE VIEW conversation_summary_secure AS\nSELECT \n    c.id,\n    c.event_id,\n    c.guest_id,\n    c.family_id,\n    c.organizer_id,\n    c.subject,\n    c.is_active,\n    c.last_message_at,\n    c.created_at,\n    (\n        SELECT COUNT(*) \n        FROM messages m \n        WHERE m.conversation_id = c.id \n        AND m.is_read = FALSE \n        AND m.sender_type = 'guest'\n    ) as unread_count,\n    (\n        SELECT json_build_object(\n            'id', m.id,\n            'content', LEFT(m.content, 100),\n            'sender_type', m.sender_type,\n            'created_at', m.created_at\n        )\n        FROM messages m \n        WHERE m.conversation_id = c.id \n        ORDER BY m.created_at DESC \n        LIMIT 1\n    ) as last_message,\n    CASE \n        WHEN c.guest_id IS NOT NULL THEN \n            json_build_object(\n                'id', g.id,\n                'name', CONCAT(g.first_name, ' ', g.last_name),\n                'email', g.email,\n                'type', 'guest'\n            )\n        WHEN c.family_id IS NOT NULL THEN \n            json_build_object(\n                'id', f.id,\n                'name', f.name,\n                'type', 'family'\n            )\n    END as participant\nFROM conversations c\nLEFT JOIN guests g ON c.guest_id = g.id\nLEFT JOIN families f ON c.family_id = f.id\nWHERE c.is_active = TRUE;\n\n-- ============================================\n-- 7. CONTRAINTES SUPPLMENTAIRES\n-- ============================================\n\n-- Limite de taille sur les attachments (max 5 lments via validation applicative)\n-- Mais on ajoute une contrainte CHECK pour renforcer\nALTER TABLE messages \n    ADD CONSTRAINT check_attachments_is_array \n    CHECK (jsonb_typeof(attachments) = 'array');\n\n-- Index supplmentaires pour les performances\nCREATE INDEX IF NOT EXISTS idx_messages_is_read_sender \n    ON messages(is_read, sender_type) \n    WHERE is_read = FALSE AND sender_type = 'guest';\n\nCREATE INDEX IF NOT EXISTS idx_conversations_active_organizer \n    ON conversations(is_active, organizer_id) \n    WHERE is_active = TRUE;\n\n-- ============================================\n-- 8. FONCTION POUR MARQUER TOUS LES MESSAGES COMME LUS\n-- ============================================\n\nCREATE OR REPLACE FUNCTION mark_conversation_as_read(conv_id UUID, user_id UUID)\nRETURNS INTEGER AS $$\nDECLARE\n    updated_count INTEGER;\n    is_authorized BOOLEAN;\nBEGIN\n    -- Vrifier l'autorisation\n    SELECT EXISTS (\n        SELECT 1 FROM conversations c\n        JOIN events e ON c.event_id = e.id\n        WHERE c.id = conv_id\n        AND (c.organizer_id = user_id OR e.organizer_id = user_id)\n    ) INTO is_authorized;\n\n    IF NOT is_authorized THEN\n        RAISE EXCEPTION 'Access denied';\n    END IF;\n\n    -- Mettre  jour les messages\n    UPDATE messages \n    SET is_read = TRUE, read_at = NOW()\n    WHERE conversation_id = conv_id\n    AND sender_type = 'guest'\n    AND is_read = FALSE;\n\n    GET DIAGNOSTICS updated_count = ROW_COUNT;\n    RETURN updated_count;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\n-- ============================================\n-- 9. COMMENTAIRES\n-- ============================================\n\nCOMMENT ON TABLE conversations IS 'Table des conversations - RLS activ';\nCOMMENT ON TABLE messages IS 'Table des messages - RLS activ';\nCOMMENT ON VIEW conversation_summary_secure IS 'Vue scurise des conversations avec filtrage RLS';\n\n-- ============================================\n-- 10. DONNER LES PERMISSIONS SUR LA VUE\n-- ============================================\n\nGRANT SELECT ON conversation_summary_secure TO authenticated;\n\n-- Vrification\nSELECT 'Migration 019 applied successfully' as status;\n","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":"Applying migration: 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 09:59:40"}
{"level":"info","message":" Migration applied successfully: 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 09:59:40"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 09:59:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 10:00:26"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 10:00:26"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 10:00:26"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 10:00:26"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 10:02:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 10:02:05"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 10:02:05"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 10:02:05"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 10:02:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 10:02:48"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 10:02:48"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 10:02:48"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 10:02:55"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 10:02:55"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 10:02:55"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 10:02:55"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 10:12:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 10:12:22"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 10:12:22"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 10:12:22"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 10:27:36"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 10:27:36"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 10:27:36"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 10:27:36"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 10:27:36"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 10:27:36"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 10:27:38"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 10:27:38"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 10:27:38"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 10:27:38"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3387:20","timestamp":"2026-02-07 10:27:41"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 10:27:41"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3468:19","timestamp":"2026-02-07 10:27:41"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 10:27:41"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 15:46:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 15:46:33"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 15:46:33"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 15:46:33"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 15:46:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 15:46:44"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 15:46:44"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 15:46:44"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 15:49:21"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 15:49:21"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 15:49:21"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 15:49:21"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"Found 32 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"\n Migration to apply (020_security_fixes.sql):","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"-- Migration 020: Corrections de scurit suite  audit\n-- Applique les corrections pour les vulnrabilits trouves\n\n-- ============================================\n-- 1. CONTRAINTE UNIQUE POUR VITER LES RACE CONDITIONS\n-- ============================================\n\n-- Une seule conversation active par guest_id par vnement\nCREATE UNIQUE INDEX IF NOT EXISTS idx_unique_conversation_guest \n    ON conversations(event_id, guest_id) \n    WHERE guest_id IS NOT NULL AND is_active = TRUE;\n\n-- Une seule conversation active par family_id par vnement  \nCREATE UNIQUE INDEX IF NOT EXISTS idx_unique_conversation_family\n    ON conversations(event_id, family_id)\n    WHERE family_id IS NOT NULL AND is_active = TRUE;\n\n-- ============================================\n-- 2. CORRECTION RLS - VRIFICATION NULL\n-- ============================================\n\n-- Supprimer les anciennes policies\nDROP POLICY IF EXISTS conversations_select_own ON conversations;\nDROP POLICY IF EXISTS conversations_insert_own ON conversations;\nDROP POLICY IF EXISTS conversations_update_own ON conversations;\nDROP POLICY IF EXISTS conversations_delete_own ON conversations;\n\n-- Recrer avec vrification NULL\nCREATE POLICY conversations_select_own ON conversations\n    FOR SELECT\n    USING (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND (\n            organizer_id = current_setting('app.current_user_id', true)::UUID\n            OR EXISTS (\n                SELECT 1 FROM events e \n                WHERE e.id = conversations.event_id \n                AND e.organizer_id = current_setting('app.current_user_id', true)::UUID\n            )\n        )\n    );\n\nCREATE POLICY conversations_insert_own ON conversations\n    FOR INSERT\n    WITH CHECK (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND EXISTS (\n            SELECT 1 FROM events e \n            WHERE e.id = conversations.event_id \n            AND e.organizer_id = current_setting('app.current_user_id', true)::UUID\n        )\n    );\n\nCREATE POLICY conversations_update_own ON conversations\n    FOR UPDATE\n    USING (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND (\n            organizer_id = current_setting('app.current_user_id', true)::UUID\n            OR EXISTS (\n                SELECT 1 FROM events e \n                WHERE e.id = conversations.event_id \n                AND e.organizer_id = current_setting('app.current_user_id', true)::UUID\n            )\n        )\n    );\n\nCREATE POLICY conversations_delete_own ON conversations\n    FOR DELETE\n    USING (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND (\n            organizer_id = current_setting('app.current_user_id', true)::UUID\n            OR EXISTS (\n                SELECT 1 FROM events e \n                WHERE e.id = conversations.event_id \n                AND e.organizer_id = current_setting('app.current_user_id', true)::UUID\n            )\n        )\n    );\n\n-- Mme chose pour messages\nDROP POLICY IF EXISTS messages_select_accessible ON messages;\nDROP POLICY IF EXISTS messages_insert_accessible ON messages;\nDROP POLICY IF EXISTS messages_update_accessible ON messages;\n\nCREATE POLICY messages_select_accessible ON messages\n    FOR SELECT\n    USING (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND EXISTS (\n            SELECT 1 FROM conversations c\n            JOIN events e ON c.event_id = e.id\n            WHERE c.id = messages.conversation_id\n            AND (c.organizer_id = current_setting('app.current_user_id', true)::UUID\n                 OR e.organizer_id = current_setting('app.current_user_id', true)::UUID)\n        )\n    );\n\nCREATE POLICY messages_insert_accessible ON messages\n    FOR INSERT\n    WITH CHECK (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND sender_id = current_setting('app.current_user_id', true)::UUID\n        AND EXISTS (\n            SELECT 1 FROM conversations c\n            JOIN events e ON c.event_id = e.id\n            WHERE c.id = messages.conversation_id\n            AND c.is_active = true\n            AND (c.organizer_id = current_setting('app.current_user_id', true)::UUID\n                 OR e.organizer_id = current_setting('app.current_user_id', true)::UUID)\n        )\n    );\n\nCREATE POLICY messages_update_accessible ON messages\n    FOR UPDATE\n    USING (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND (\n            sender_id = current_setting('app.current_user_id', true)::UUID\n            OR EXISTS (\n                SELECT 1 FROM conversations c\n                JOIN events e ON c.event_id = e.id\n                WHERE c.id = messages.conversation_id\n                AND (c.organizer_id = current_setting('app.current_user_id', true)::UUID\n                     OR e.organizer_id = current_setting('app.current_user_id', true)::UUID)\n            )\n        )\n    );\n\n-- ============================================\n-- 3. INDEX MANQUANTS POUR PERFORMANCES\n-- ============================================\n\nCREATE INDEX IF NOT EXISTS idx_conversations_event_organizer \n    ON conversations(event_id, organizer_id) \n    WHERE is_active = TRUE;\n\nCREATE INDEX IF NOT EXISTS idx_messages_conversation_sender_read \n    ON messages(conversation_id, sender_type, is_read) \n    WHERE sender_type = 'guest' AND is_read = FALSE;\n\n-- Index pour la vrification d'appartenance guest/family\nCREATE INDEX IF NOT EXISTS idx_guests_event_lookup \n    ON guests(id, event_id);\n\nCREATE INDEX IF NOT EXISTS idx_families_event_lookup \n    ON families(id, event_id);\n\n-- ============================================\n-- 4. VUE SCURISE CORRIGE (AVEC FILTRAGE)\n-- ============================================\n\nDROP VIEW IF EXISTS conversation_summary_secure;\n\nCREATE VIEW conversation_summary_secure AS\nSELECT \n    c.id,\n    c.event_id,\n    c.guest_id,\n    c.family_id,\n    c.organizer_id,\n    c.subject,\n    c.is_active,\n    c.last_message_at,\n    c.created_at,\n    (\n        SELECT COUNT(*) \n        FROM messages m \n        WHERE m.conversation_id = c.id \n        AND m.is_read = FALSE \n        AND m.sender_type = 'guest'\n    ) as unread_count,\n    (\n        SELECT json_build_object(\n            'id', m.id,\n            'content', LEFT(m.content, 100),\n            'sender_type', m.sender_type,\n            'created_at', m.created_at\n        )\n        FROM messages m \n        WHERE m.conversation_id = c.id \n        ORDER BY m.created_at DESC \n        LIMIT 1\n    ) as last_message,\n    CASE \n        WHEN c.guest_id IS NOT NULL THEN \n            json_build_object(\n                'id', g.id,\n                'name', CONCAT(g.first_name, ' ', g.last_name),\n                'email', g.email,\n                'type', 'guest'\n            )\n        WHEN c.family_id IS NOT NULL THEN \n            json_build_object(\n                'id', f.id,\n                'name', f.name,\n                'type', 'family'\n            )\n    END as participant\nFROM conversations c\nLEFT JOIN guests g ON c.guest_id = g.id\nLEFT JOIN families f ON c.family_id = f.id\nWHERE c.is_active = TRUE\n--  La vue est filtre par RLS, pas besoin de filtre supplmentaire ici\n;\n\n-- ============================================\n-- 5. FONCTION STATS SCURISE AVEC LIMITE\n-- ============================================\n\nCREATE OR REPLACE FUNCTION get_message_stats_secure(\n    p_user_id UUID,\n    p_event_id UUID DEFAULT NULL\n)\nRETURNS TABLE (\n    total_conversations BIGINT,\n    total_messages BIGINT,\n    unread_messages BIGINT\n) AS $$\nBEGIN\n    RETURN QUERY\n    WITH user_events AS (\n        SELECT e.id as evt_id\n        FROM events e\n        WHERE e.organizer_id = p_user_id\n        AND (p_event_id IS NULL OR e.id = p_event_id)\n        LIMIT 1000  --  Protection DoS\n    ),\n    user_conversations AS (\n        SELECT c.id as conv_id\n        FROM conversations c\n        WHERE c.event_id IN (SELECT evt_id FROM user_events)\n        AND c.is_active = TRUE\n        LIMIT 1000  --  Protection DoS\n    )\n    SELECT \n        (SELECT COUNT(*) FROM user_conversations) as total_conversations,\n        (SELECT COUNT(*) FROM messages m WHERE m.conversation_id IN (SELECT conv_id FROM user_conversations)) as total_messages,\n        (SELECT COUNT(*) FROM messages m \n         WHERE m.conversation_id IN (SELECT conv_id FROM user_conversations)\n         AND m.is_read = FALSE AND m.sender_type = 'guest') as unread_messages;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\n-- ============================================\n-- 6. COMMENTAIRES\n-- ============================================\n\nCOMMENT ON INDEX idx_unique_conversation_guest IS 'Contrainte implicite: un seul conversation par guest';\nCOMMENT ON INDEX idx_unique_conversation_family IS 'Contrainte implicite: un seul conversation par family';\nCOMMENT ON FUNCTION get_message_stats_secure IS 'Fonction scurise pour stats avec limites DoS';\n\n-- Vrification\nSELECT 'Migration 020 applied successfully' as status;\n","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":"Applying migration: 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:51:20"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 15:51:23"}
{"0":"c","1":"o","10":"e","11":"n","12":"t","13":"_","14":"i","15":"d","16":"\"","17":" ","18":"d","19":"o","2":"l","20":"e","21":"s","22":" ","23":"n","24":"o","25":"t","26":" ","27":"e","28":"x","29":"i","3":"u","30":"s","31":"t","4":"m","5":"n","6":" ","7":"\"","8":"e","9":"v","level":"error","message":" Failed to apply migration 020_security_fixes.sql:","service":"qrevent-backend","timestamp":"2026-02-07 15:51:24"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-07 15:51:24"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 15:53:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 15:53:51"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 15:53:51"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 15:53:51"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"Found 32 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"\n Migration to apply (020_security_fixes.sql):","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"-- Migration 020: Corrections de scurit suite  audit\n-- Applique les corrections pour les vulnrabilits trouves\n\n-- ============================================\n-- 1. CONTRAINTE UNIQUE POUR VITER LES RACE CONDITIONS\n-- ============================================\n\n-- Une seule conversation active par guest_id par vnement\nCREATE UNIQUE INDEX IF NOT EXISTS idx_unique_conversation_guest \n    ON conversations(event_id, guest_id) \n    WHERE guest_id IS NOT NULL AND is_active = TRUE;\n\n-- Une seule conversation active par family_id par vnement  \nCREATE UNIQUE INDEX IF NOT EXISTS idx_unique_conversation_family\n    ON conversations(event_id, family_id)\n    WHERE family_id IS NOT NULL AND is_active = TRUE;\n\n-- ============================================\n-- 2. CORRECTION RLS - VRIFICATION NULL\n-- ============================================\n\n-- Supprimer les anciennes policies\nDROP POLICY IF EXISTS conversations_select_own ON conversations;\nDROP POLICY IF EXISTS conversations_insert_own ON conversations;\nDROP POLICY IF EXISTS conversations_update_own ON conversations;\nDROP POLICY IF EXISTS conversations_delete_own ON conversations;\n\n-- Recrer avec vrification NULL\nCREATE POLICY conversations_select_own ON conversations\n    FOR SELECT\n    USING (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND (\n            organizer_id = current_setting('app.current_user_id', true)::UUID\n            OR EXISTS (\n                SELECT 1 FROM events e \n                WHERE e.id = conversations.event_id \n                AND e.organizer_id = current_setting('app.current_user_id', true)::UUID\n            )\n        )\n    );\n\nCREATE POLICY conversations_insert_own ON conversations\n    FOR INSERT\n    WITH CHECK (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND EXISTS (\n            SELECT 1 FROM events e \n            WHERE e.id = conversations.event_id \n            AND e.organizer_id = current_setting('app.current_user_id', true)::UUID\n        )\n    );\n\nCREATE POLICY conversations_update_own ON conversations\n    FOR UPDATE\n    USING (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND (\n            organizer_id = current_setting('app.current_user_id', true)::UUID\n            OR EXISTS (\n                SELECT 1 FROM events e \n                WHERE e.id = conversations.event_id \n                AND e.organizer_id = current_setting('app.current_user_id', true)::UUID\n            )\n        )\n    );\n\nCREATE POLICY conversations_delete_own ON conversations\n    FOR DELETE\n    USING (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND (\n            organizer_id = current_setting('app.current_user_id', true)::UUID\n            OR EXISTS (\n                SELECT 1 FROM events e \n                WHERE e.id = conversations.event_id \n                AND e.organizer_id = current_setting('app.current_user_id', true)::UUID\n            )\n        )\n    );\n\n-- Mme chose pour messages\nDROP POLICY IF EXISTS messages_select_accessible ON messages;\nDROP POLICY IF EXISTS messages_insert_accessible ON messages;\nDROP POLICY IF EXISTS messages_update_accessible ON messages;\n\nCREATE POLICY messages_select_accessible ON messages\n    FOR SELECT\n    USING (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND EXISTS (\n            SELECT 1 FROM conversations c\n            JOIN events e ON c.event_id = e.id\n            WHERE c.id = messages.conversation_id\n            AND (c.organizer_id = current_setting('app.current_user_id', true)::UUID\n                 OR e.organizer_id = current_setting('app.current_user_id', true)::UUID)\n        )\n    );\n\nCREATE POLICY messages_insert_accessible ON messages\n    FOR INSERT\n    WITH CHECK (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND sender_id = current_setting('app.current_user_id', true)::UUID\n        AND EXISTS (\n            SELECT 1 FROM conversations c\n            JOIN events e ON c.event_id = e.id\n            WHERE c.id = messages.conversation_id\n            AND c.is_active = true\n            AND (c.organizer_id = current_setting('app.current_user_id', true)::UUID\n                 OR e.organizer_id = current_setting('app.current_user_id', true)::UUID)\n        )\n    );\n\nCREATE POLICY messages_update_accessible ON messages\n    FOR UPDATE\n    USING (\n        current_setting('app.current_user_id', true) IS NOT NULL\n        AND (\n            sender_id = current_setting('app.current_user_id', true)::UUID\n            OR EXISTS (\n                SELECT 1 FROM conversations c\n                JOIN events e ON c.event_id = e.id\n                WHERE c.id = messages.conversation_id\n                AND (c.organizer_id = current_setting('app.current_user_id', true)::UUID\n                     OR e.organizer_id = current_setting('app.current_user_id', true)::UUID)\n            )\n        )\n    );\n\n-- ============================================\n-- 3. INDEX MANQUANTS POUR PERFORMANCES\n-- ============================================\n\nCREATE INDEX IF NOT EXISTS idx_conversations_event_organizer \n    ON conversations(event_id, organizer_id) \n    WHERE is_active = TRUE;\n\nCREATE INDEX IF NOT EXISTS idx_messages_conversation_sender_read \n    ON messages(conversation_id, sender_type, is_read) \n    WHERE sender_type = 'guest' AND is_read = FALSE;\n\n-- Index pour la vrification d'appartenance guest/family\nCREATE INDEX IF NOT EXISTS idx_guests_event_lookup \n    ON guests(id, event_id);\n\n-- Note: families n'a pas de event_id direct, elle est lie via family_invitations\n-- L'index sur family_invitations existe dj dans la migration 007\n-- CREATE INDEX IF NOT EXISTS idx_family_invitations_event ON family_invitations(event_id);\n\n-- ============================================\n-- 4. VUE SCURISE CORRIGE (AVEC FILTRAGE)\n-- ============================================\n\nDROP VIEW IF EXISTS conversation_summary_secure;\n\nCREATE VIEW conversation_summary_secure AS\nSELECT \n    c.id,\n    c.event_id,\n    c.guest_id,\n    c.family_id,\n    c.organizer_id,\n    c.subject,\n    c.is_active,\n    c.last_message_at,\n    c.created_at,\n    (\n        SELECT COUNT(*) \n        FROM messages m \n        WHERE m.conversation_id = c.id \n        AND m.is_read = FALSE \n        AND m.sender_type = 'guest'\n    ) as unread_count,\n    (\n        SELECT json_build_object(\n            'id', m.id,\n            'content', LEFT(m.content, 100),\n            'sender_type', m.sender_type,\n            'created_at', m.created_at\n        )\n        FROM messages m \n        WHERE m.conversation_id = c.id \n        ORDER BY m.created_at DESC \n        LIMIT 1\n    ) as last_message,\n    CASE \n        WHEN c.guest_id IS NOT NULL THEN \n            json_build_object(\n                'id', g.id,\n                'name', CONCAT(g.first_name, ' ', g.last_name),\n                'email', g.email,\n                'type', 'guest'\n            )\n        WHEN c.family_id IS NOT NULL THEN \n            json_build_object(\n                'id', f.id,\n                'name', f.name,\n                'type', 'family'\n            )\n    END as participant\nFROM conversations c\nLEFT JOIN guests g ON c.guest_id = g.id\nLEFT JOIN families f ON c.family_id = f.id\nWHERE c.is_active = TRUE\n--  La vue est filtre par RLS, pas besoin de filtre supplmentaire ici\n;\n\n-- ============================================\n-- 5. FONCTION STATS SCURISE AVEC LIMITE\n-- ============================================\n\nCREATE OR REPLACE FUNCTION get_message_stats_secure(\n    p_user_id UUID,\n    p_event_id UUID DEFAULT NULL\n)\nRETURNS TABLE (\n    total_conversations BIGINT,\n    total_messages BIGINT,\n    unread_messages BIGINT\n) AS $$\nBEGIN\n    RETURN QUERY\n    WITH user_events AS (\n        SELECT e.id as evt_id\n        FROM events e\n        WHERE e.organizer_id = p_user_id\n        AND (p_event_id IS NULL OR e.id = p_event_id)\n        LIMIT 1000  --  Protection DoS\n    ),\n    user_conversations AS (\n        SELECT c.id as conv_id\n        FROM conversations c\n        WHERE c.event_id IN (SELECT evt_id FROM user_events)\n        AND c.is_active = TRUE\n        LIMIT 1000  --  Protection DoS\n    )\n    SELECT \n        (SELECT COUNT(*) FROM user_conversations) as total_conversations,\n        (SELECT COUNT(*) FROM messages m WHERE m.conversation_id IN (SELECT conv_id FROM user_conversations)) as total_messages,\n        (SELECT COUNT(*) FROM messages m \n         WHERE m.conversation_id IN (SELECT conv_id FROM user_conversations)\n         AND m.is_read = FALSE AND m.sender_type = 'guest') as unread_messages;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\n-- ============================================\n-- 6. COMMENTAIRES\n-- ============================================\n\nCOMMENT ON INDEX idx_unique_conversation_guest IS 'Contrainte implicite: un seul conversation par guest';\nCOMMENT ON INDEX idx_unique_conversation_family IS 'Contrainte implicite: un seul conversation par family';\nCOMMENT ON FUNCTION get_message_stats_secure IS 'Fonction scurise pour stats avec limites DoS';\n\n-- Vrification\nSELECT 'Migration 020 applied successfully' as status;\n","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":"Applying migration: 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 15:53:57"}
{"level":"info","message":" Migration applied successfully: 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:53:57"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 15:53:57"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"Found 32 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 15:54:02"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 15:54:03"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 15:54:03"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 15:58:24"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 15:58:24"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 15:58:24"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 15:58:24"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 15:59:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 15:59:43"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 15:59:43"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 15:59:43"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:16:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:16:22"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:16:22"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:16:22"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:16:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:16:48"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:16:48"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:16:48"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3472:19","timestamp":"2026-02-07 16:18:05"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:05"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:05"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3391:20","timestamp":"2026-02-07 16:18:05"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:05"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:06"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3391:20","timestamp":"2026-02-07 16:18:07"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:07"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:07"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3472:19","timestamp":"2026-02-07 16:18:07"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:07"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:07"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3391:20","timestamp":"2026-02-07 16:18:08"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:08"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3472:19","timestamp":"2026-02-07 16:18:09"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:09"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3391:20","timestamp":"2026-02-07 16:18:11"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:11"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3472:19","timestamp":"2026-02-07 16:18:12"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:12"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3391:20","timestamp":"2026-02-07 16:18:19"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:19"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:19"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:19"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3472:19","timestamp":"2026-02-07 16:18:19"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:19"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3391:20","timestamp":"2026-02-07 16:18:21"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:21"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3472:19","timestamp":"2026-02-07 16:18:21"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:21"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3391:20","timestamp":"2026-02-07 16:18:23"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:23"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:23"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:23"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3472:19","timestamp":"2026-02-07 16:18:23"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:23"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3391:20","timestamp":"2026-02-07 16:18:25"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:25"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3472:19","timestamp":"2026-02-07 16:18:25"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:25"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3391:20","timestamp":"2026-02-07 16:18:28"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:28"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3472:19","timestamp":"2026-02-07 16:18:28"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 16:18:28"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 16:19:58"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3391:20","timestamp":"2026-02-07 16:19:58"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 16:19:58"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 16:19:58"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3472:19","timestamp":"2026-02-07 16:19:58"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 16:19:58"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3391:20","timestamp":"2026-02-07 16:20:00"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 16:20:00"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3472:19","timestamp":"2026-02-07 16:20:00"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 16:20:00"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3391:20","timestamp":"2026-02-07 16:20:03"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 16:20:03"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3472:19","timestamp":"2026-02-07 16:20:03"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 16:20:03"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-07 16:22:29"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:22:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:22:38"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:22:38"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:22:38"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-07 16:23:00"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-07 16:23:01","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:23:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:23:13"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:23:13"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:23:13"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"Found 34 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 16:24:10"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:24:10"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 16:24:10"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:27:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:27:52"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:27:52"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:27:52"}
{"error":"Event not found or you do not have permission to delete it","level":"error","message":"Error deleting event:","service":"qrevent-backend","timestamp":"2026-02-07 16:32:20"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"Found 35 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 16:33:31"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 16:33:31"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 16:33:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:34:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:34:32"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:34:32"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:34:32"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:35:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:35:11"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:35:11"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:35:11"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:35:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:35:32"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:35:32"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:35:32"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 16:35:35","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 16:35:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Error creating family: Could not find the 'max_people' column of 'families' in the schema cache","level":"error","message":"Error creating family:","service":"qrevent-backend","timestamp":"2026-02-07 16:36:49"}
{"error":"Error creating family: Could not find the 'max_people' column of 'families' in the schema cache","level":"error","message":"Error creating family:","service":"qrevent-backend","timestamp":"2026-02-07 16:36:51"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:36:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:36:53"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:36:53"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:36:53"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:39:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:39:39"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:39:39"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:39:39"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:40:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:40:11"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:40:11"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:40:11"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:40:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:40:32"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:40:32"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:40:32"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:41:04"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:41:05"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:41:05"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:41:05"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:41:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:41:41"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:41:41"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:41:41"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:41:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:41:56"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:41:56"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:41:56"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 16:44:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 16:44:34","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:45:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:45:51"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:45:51"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:45:51"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:46:26"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:46:27"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:46:27"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:46:27"}
{"body":{"date":{},"guest_count":150,"location":{"address":"Ilafy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Kevin Mino"},"error":"Error creating event: Could not find the 'guest_count' column of 'events' in the schema cache","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-07 16:48:13","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"body":{"date":{},"guest_count":150,"location":{"address":"Ilafy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Kevin Mino"},"error":"Error creating event: Could not find the 'guest_count' column of 'events' in the schema cache","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-07 16:48:14","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"body":{"date":{},"guest_count":150,"location":{"address":"Ilafy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Kevin Mino"},"error":"Error creating event: Could not find the 'guest_count' column of 'events' in the schema cache","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-07 16:48:17","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:50:19"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:50:19"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:50:19"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:50:19"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:50:36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:50:37"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:50:37"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:50:37"}
{"error":"Error creating family: Could not find the 'max_people' column of 'families' in the schema cache","level":"error","message":"Error creating family:","service":"qrevent-backend","timestamp":"2026-02-07 16:50:38"}
{"error":"Error creating family: Could not find the 'max_people' column of 'families' in the schema cache","level":"error","message":"Error creating family:","service":"qrevent-backend","timestamp":"2026-02-07 16:50:41"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:51:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:51:14"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:51:14"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:51:14"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:51:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:51:53"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:51:53"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:51:53"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:53:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:53:31"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:53:31"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:53:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:53:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:53:44"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:53:44"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:53:44"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:54:28"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:54:28"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:54:28"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:54:29"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:59:45"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:59:45"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:59:45"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:59:45"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 16:59:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 16:59:59"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 16:59:59"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 16:59:59"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:00:28"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:00:29"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:00:29"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:00:29"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:01:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:01:01"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:01:01"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:01:01"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:01:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:01:53"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:01:53"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:01:53"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:01:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:01:58"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:01:58"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:01:58"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:02:24"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:02:24"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:02:24"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:02:24"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:07:54"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:07:54"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:07:54"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:07:54"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:07:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:07:56"}
{"0":"s","1":"y","10":"o","11":"r","12":" ","13":"a","14":"t","15":" ","16":"o","17":"r","18":" ","19":"n","2":"n","20":"e","21":"a","22":"r","23":" ","24":"\"","25":"","26":"v","27":"","28":"n","29":"e","3":"t","30":"m","31":"e","32":"n","33":"t","34":"\"","4":"a","5":"x","6":" ","7":"e","8":"r","9":"r","level":"error","message":" Failed to apply migration 021_add_guest_count_to_events.sql:","service":"qrevent-backend","timestamp":"2026-02-07 17:07:56"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:07:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:07:56"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:08:58","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:08:59","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:09:31","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:09:32","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:10:32","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:10:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:10:44","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:10:45","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:10:47","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:10:48","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:10:58","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:10:59","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:11:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:11:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:11:16","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:11:17","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:12:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:12:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:12:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:12:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:13:59"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:13:59"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:13:59"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:13:59"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:13:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:14:01"}
{"0":"s","1":"y","10":"o","11":"r","12":" ","13":"a","14":"t","15":" ","16":"o","17":"r","18":" ","19":"n","2":"n","20":"e","21":"a","22":"r","23":" ","24":"\"","25":"","26":"v","27":"","28":"n","29":"e","3":"t","30":"m","31":"e","32":"n","33":"t","34":"\"","4":"a","5":"x","6":" ","7":"e","8":"r","9":"r","level":"error","message":" Failed to apply migration 021_add_guest_count_to_events.sql:","service":"qrevent-backend","timestamp":"2026-02-07 17:14:01"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:14:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:14:01"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"Found 42 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:15:14"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:14"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 17:15:15"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:15:21"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:15:21"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:15:21"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:15:21"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:15:21"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:15:23"}
{"0":"s","1":"y","10":"o","11":"r","12":" ","13":"a","14":"t","15":" ","16":"o","17":"r","18":" ","19":"n","2":"n","20":"e","21":"a","22":"r","23":" ","24":"\"","25":"","26":"v","27":"","28":"n","29":"e","3":"t","30":"m","31":"e","32":"n","33":"t","34":"\"","4":"a","5":"x","6":" ","7":"e","8":"r","9":"r","level":"error","message":" Failed to apply migration 021_add_guest_count_to_events.sql:","service":"qrevent-backend","timestamp":"2026-02-07 17:15:23"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:15:23"}
{"level":"error","message":"supabaseService.getClient is not a function","name":"TypeError","service":"qrevent-backend","stack":"TypeError: supabaseService.getClient is not a function\n    at /home/kevin/Qrevent/backendqrevent/routes/api.js:369:40\n    at Layer.handle [as handle_request] (/home/kevin/Qrevent/backendqrevent/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/kevin/Qrevent/backendqrevent/node_modules/express/lib/router/route.js:149:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-07 17:16:36"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:17:35","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:17:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:17:40","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"Found 42 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:18:40"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:41"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 17:18:41"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:18:45"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:18:46"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:46"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:18:46"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:18:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:18:47"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:18:48"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:18:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:18:48"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:19:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:19:20","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"code":"UNKNOWN_ERROR","error":"Cannot read properties of undefined (reading 'validate')","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-07 17:19:48","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"code":"UNKNOWN_ERROR","error":"Cannot read properties of undefined (reading 'validate')","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-07 17:19:49","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"code":"UNKNOWN_ERROR","error":"Cannot read properties of undefined (reading 'validate')","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-07 17:19:51","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:20:14"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:20:14"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:20:14"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:20:15"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:20:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:20:17"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:20:17"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:20:18"}
{"code":"UNKNOWN_ERROR","error":"Cannot read properties of undefined (reading 'validate')","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-07 17:20:23","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"code":"UNKNOWN_ERROR","error":"Cannot read properties of undefined (reading 'validate')","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-07 17:20:25","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"code":"UNKNOWN_ERROR","error":"Cannot read properties of undefined (reading 'validate')","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-07 17:20:27","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:21:00","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:26:22"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:26:22"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:26:22"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:26:23"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:26:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:26:25"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:26:25"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:26:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:26:25"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:26:44"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:26:45"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:26:45"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:26:45"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:26:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:26:46"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:26:47"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:26:47"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:26:47"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:27:07","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:27:08","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"code":"UNKNOWN_ERROR","error":"Cannot read properties of undefined (reading 'validate')","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-07 17:28:12","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"code":"UNKNOWN_ERROR","error":"Cannot read properties of undefined (reading 'validate')","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-07 17:28:13","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"code":"UNKNOWN_ERROR","error":"Cannot read properties of undefined (reading 'validate')","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-07 17:28:15","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:29:15"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:29:15"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:29:15"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:29:15"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:29:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:29:17"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:29:17"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:29:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:29:18"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:29:40","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05","guestCount":0,"level":"info","message":"Event created successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:30:42","titleLength":13,"userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"body":{"bride_name":"Kevin","groom_name":"Mino"},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backendqrevent/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05","service":"qrevent-backend","timestamp":"2026-02-07 17:31:29"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:32:24","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:33:18","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:33:32","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:33:44"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:33:44"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:33:44"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:33:44"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:33:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:33:46"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:33:46"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:33:47"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:33:47"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:33:52","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 17:33:53"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 17:33:53"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3718:20","timestamp":"2026-02-07 17:33:53"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 17:33:53"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3799:19","timestamp":"2026-02-07 17:33:53"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 17:33:53"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:33:54"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:33:54"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:33:54"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:33:54"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:33:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:33:56"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:33:57"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:33:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:33:57"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:34:01","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 17:34:02"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3720:20","timestamp":"2026-02-07 17:34:02"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 17:34:02"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 17:34:02"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3801:19","timestamp":"2026-02-07 17:34:02"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 17:34:02"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3720:20","timestamp":"2026-02-07 17:34:04"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 17:34:04"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3801:19","timestamp":"2026-02-07 17:34:04"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 17:34:04"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3720:20","timestamp":"2026-02-07 17:34:07"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 17:34:07"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3801:19","timestamp":"2026-02-07 17:34:07"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 17:34:07"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:34:57"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:34:58"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:34:58"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:34:58"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:34:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:34:59"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:34:59"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:35:00"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:35:00"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:37:55"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:37:56"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:37:56"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:37:56"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:37:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:37:57"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:37:58"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:37:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:37:58"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:39:55","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 17:39:56"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3720:20","timestamp":"2026-02-07 17:39:56"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 17:39:56"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 17:39:56"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3801:19","timestamp":"2026-02-07 17:39:57"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 17:39:57"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3720:20","timestamp":"2026-02-07 17:39:58"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 17:39:58"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3801:19","timestamp":"2026-02-07 17:39:59"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 17:39:59"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3720:20","timestamp":"2026-02-07 17:40:01"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 17:40:01"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3801:19","timestamp":"2026-02-07 17:40:02"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 17:40:02"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 17:40:22","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 17:40:22"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 17:40:22"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3720:20","timestamp":"2026-02-07 17:40:22"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 17:40:22"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3801:19","timestamp":"2026-02-07 17:40:23"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 17:40:23"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3720:20","timestamp":"2026-02-07 17:40:24"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 17:40:24"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3801:19","timestamp":"2026-02-07 17:40:25"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 17:40:25"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3720:20","timestamp":"2026-02-07 17:40:27"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating tables:","service":"qrevent-backend","timestamp":"2026-02-07 17:40:27"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3801:19","timestamp":"2026-02-07 17:40:28"}
{"error":"Event not found or access denied","level":"error","message":"Error fetching seating stats:","service":"qrevent-backend","timestamp":"2026-02-07 17:40:28"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:42:35"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:42:35"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:42:35"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:42:35"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:42:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:42:37"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:42:37"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:42:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:42:37"}
{"error":"Error fetching gallery: Could not find the table 'public.event_gallery' in the schema cache","level":"error","message":"Error fetching all gallery items:","service":"qrevent-backend","timestamp":"2026-02-07 17:42:49"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:42:56"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:42:56"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:42:56"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:42:56"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:42:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:42:58"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:42:58"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:42:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:42:58"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:43:28"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:43:28"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:43:28"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:43:28"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:43:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:43:30"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:43:31"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:43:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:43:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:43:49"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:43:49"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:43:49"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:43:49"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:43:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:43:51"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:43:51"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:43:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:43:52"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:44:11"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:44:11"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:44:11"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:44:11"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:44:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:44:13"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:44:13"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:44:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:44:14"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:44:17"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:44:17"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:44:17"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:44:17"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:44:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:44:19"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:44:19"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:44:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:44:20"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:44:26"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:44:27"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:44:27"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:44:27"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:44:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:44:28"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:44:29"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:44:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:44:29"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:45:46"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:45:46"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:45:46"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:45:46"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:45:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:45:48"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:45:48"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:45:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:45:49"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:51:04"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:51:04"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:51:04"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:51:04"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:51:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:51:06"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:51:06"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:51:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:51:07"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 17:51:20"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 17:51:20"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:51:20"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:51:20"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 17:51:20"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 17:51:22"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 17:51:22"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 17:51:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 17:51:23"}
{"jobId":"juyc80zpbfr","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"banner-1770472312240.webp","service":"qrevent-backend","timestamp":"2026-02-07 17:51:53","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05","folder":"events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"banner-1770472312240.webp","service":"qrevent-backend","timestamp":"2026-02-07T13:51:53.002Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/banners/92f24cd5-1613-46fd-89aa-f384d909ba9d.webp","service":"qrevent-backend","timestamp":"2026-02-07T13:51:56.025Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"banner-1770472312240.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/banners/92f24cd5-1613-46fd-89aa-f384d909ba9d.webp","service":"qrevent-backend","timestamp":"2026-02-07T13:51:56.026Z"}
{"error":"Error creating family: Could not find the 'max_people' column of 'families' in the schema cache","level":"error","message":"Error creating family:","service":"qrevent-backend","timestamp":"2026-02-07 18:05:56"}
{"error":"Error creating family: Could not find the 'max_people' column of 'families' in the schema cache","level":"error","message":"Error creating family:","service":"qrevent-backend","timestamp":"2026-02-07 18:05:58"}
{"error":"Error creating family: Could not find the 'max_people' column of 'families' in the schema cache","level":"error","message":"Error creating family:","service":"qrevent-backend","timestamp":"2026-02-07 18:06:01"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:07:44"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:07:44"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:07:44"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:07:44"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:07:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:07:46"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:07:47"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:07:47"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:07:47"}
{"level":"info","message":"[Banner Upload] Deleting old banner","service":"qrevent-backend","timestamp":"2026-02-07 18:08:32","url":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/banners/92f24cd5-1613-46fd-89aa-f384d909ba9d.webp"}
{"level":"info","message":"[Banner Upload] Old banner deleted successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:08:33"}
{"jobId":"rbrjeas3jk","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"banner-1770473311058.webp","service":"qrevent-backend","timestamp":"2026-02-07 18:08:33","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05","folder":"events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"banner-1770473311058.webp","service":"qrevent-backend","timestamp":"2026-02-07T14:08:33.167Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/banners/8dd253a9-fec8-419a-a8e8-c5f66c3f6e27.webp","service":"qrevent-backend","timestamp":"2026-02-07T14:08:35.554Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"banner-1770473311058.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/banners/8dd253a9-fec8-419a-a8e8-c5f66c3f6e27.webp","service":"qrevent-backend","timestamp":"2026-02-07T14:08:35.554Z"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:09:29"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:09:29"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:09:29"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:09:29"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:09:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:09:31"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:09:31"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:09:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:09:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:10:10"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:10:11"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:10:11"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:10:11"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:10:11"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:10:10"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:10:11"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:10:11"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:10:11"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:10:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:10:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:10:13"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:10:13"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:10:13"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:10:13"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:10:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:10:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:10:15"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:10:15"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:10:15"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:10:15"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:10:15"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:10:15"}
{"level":"info","message":"[Banner Upload] Deleting old banner","service":"qrevent-backend","timestamp":"2026-02-07 18:10:29","url":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/banners/8dd253a9-fec8-419a-a8e8-c5f66c3f6e27.webp"}
{"level":"info","message":"[Banner Upload] Old banner deleted successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:10:30"}
{"jobId":"d13jmx4ok0e","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"banner-1770473428063.webp","service":"qrevent-backend","timestamp":"2026-02-07 18:10:30","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"eventId":"c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05","folder":"events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"banner-1770473428063.webp","service":"qrevent-backend","timestamp":"2026-02-07T14:10:30.253Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Event c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05 banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/banners/9167929f-4e04-4b54-8363-917798734f94.webp","service":"qrevent-backend","timestamp":"2026-02-07T14:10:33.572Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"banner-1770473428063.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/banners/9167929f-4e04-4b54-8363-917798734f94.webp","service":"qrevent-backend","timestamp":"2026-02-07T14:10:33.573Z"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:11:23","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:12:35"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:12:35"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:12:35"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:12:35"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:12:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:12:38"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:12:38"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:12:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:12:40"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:12:40"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:12:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:12:40"}
{"error":"Could not generate unique QR code after multiple attempts","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:16:41"}
{"error":"Could not generate unique QR code after multiple attempts","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:16:49"}
{"error":"Could not generate unique QR code after multiple attempts","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:16:58"}
{"error":"Could not generate unique QR code after multiple attempts","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:17:41"}
{"error":"Could not generate unique QR code after multiple attempts","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:17:47"}
{"error":"Could not generate unique QR code after multiple attempts","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:17:54"}
{"error":"Could not generate unique QR code after multiple attempts","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:17:55"}
{"error":"Could not generate unique QR code after multiple attempts","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:18:01"}
{"error":"Could not generate unique QR code after multiple attempts","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:18:09"}
{"error":"Could not generate unique QR code after multiple attempts","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:18:33"}
{"error":"Could not generate unique QR code after multiple attempts","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:18:40"}
{"error":"Could not generate unique QR code after multiple attempts","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:18:48"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:19:29","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"body":{},"error_message":"Invalid JSON","error_stack":"Error: Invalid JSON\n    at verify (/home/kevin/Qrevent/backendqrevent/server.js:198:13)\n    at /home/kevin/Qrevent/backendqrevent/node_modules/body-parser/lib/read.js:111:9\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/home/kevin/Qrevent/backendqrevent/node_modules/raw-body/index.js:238:16)\n    at done (/home/kevin/Qrevent/backendqrevent/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/home/kevin/Qrevent/backendqrevent/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/dashboard-summary","service":"qrevent-backend","timestamp":"2026-02-07 18:19:47"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:19:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:20:10","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:20:47","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3726:22","timestamp":"2026-02-07 18:20:49"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 18:20:49"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3818:21","timestamp":"2026-02-07 18:20:49"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 18:20:49"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:21:28"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:21:28"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:21:28"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:21:28"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:21:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:21:30"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:21:30"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:21:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:21:32"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:21:33"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:21:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:21:33"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:21:38"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:21:38"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:21:38"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:21:38"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:21:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:21:40"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:21:40"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:21:41"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:21:43"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:21:43"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:21:43"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:21:43"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:21:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:22:22","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:22:23","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:23:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:23:07","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:23:27","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:23:28","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"fileSize":946874,"level":"info","message":"Avatar upload request","mimeType":"image/jpeg","originalName":"UNDP-MRU-SEY-STAFF-2024-5 (1).jpg","service":"qrevent-backend","timestamp":"2026-02-07 18:25:54","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Bull Queue: Image processing queue initialized","service":"qrevent-backend","timestamp":"2026-02-07 18:25:54"}
{"error":"Stream isn't writeable and enableOfflineQueue options is false","level":"warn","message":"Bull Queue: Failed to add job, using fallback","service":"qrevent-backend","timestamp":"2026-02-07 18:25:54"}
{"jobName":"processImage","level":"info","message":"Image processing fallback (async immediate)","service":"qrevent-backend","timestamp":"2026-02-07 18:25:54","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Avatar queued for background processing","service":"qrevent-backend","timestamp":"2026-02-07 18:25:54"}
{"error":"imageService.processAvatarWithFallback is not a function","jobId":"fallback-1770474354156-pjlvknebj","jobName":"processImage","level":"error","message":"Image fallback processing failed","service":"qrevent-backend","timestamp":"2026-02-07 18:25:54"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:28:43","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:28:44","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:30:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:30:14","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:30:45","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:30:46","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:32:00","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:32:02","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:33:51","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:35:56"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:35:56"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:35:56"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:35:56"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:35:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:35:59"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:35:59"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:35:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:36:01"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:36:02"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:36:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:36:02"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:37:41"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:37:41"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:37:41"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:37:41"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:37:41"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:37:43"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:37:43"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:37:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:37:45"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:37:45"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:37:45"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:37:46"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:37:47"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:37:47"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:37:47"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:37:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:37:48"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:37:49"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:37:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:37:50"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:37:51"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:37:51"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:42:54"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:42:54"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:42:54"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:42:54"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:42:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:42:56"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:42:56"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:42:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:42:58"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:42:58"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:42:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:42:58"}
{"error":"Error creating QR code: Could not find the 'family_id' column of 'qr_codes' in the schema cache","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:43:24"}
{"error":"Error creating QR code: Could not find the 'family_id' column of 'qr_codes' in the schema cache","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:43:28"}
{"error":"Error creating QR code: Could not find the 'family_id' column of 'qr_codes' in the schema cache","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:43:34"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:45:39"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:45:39"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:45:39"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:45:39"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:45:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:45:41"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:45:41"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:45:41"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:45:43"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:45:43"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:45:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:45:44"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:45:48","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:46:20","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:46:31","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:46:34","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:47:16","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:47:42","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:48:12","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:49:12","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:50:14","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:50:22"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:50:23"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:50:23"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:50:23"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:50:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:50:25"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:50:25"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:50:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:50:27"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:50:27"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:50:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:50:27"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:51:17","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Error creating QR code: Could not find the 'family_id' column of 'qr_codes' in the schema cache","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:51:27"}
{"error":"Error creating QR code: Could not find the 'family_id' column of 'qr_codes' in the schema cache","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:51:31"}
{"error":"Error creating QR code: Could not find the 'family_id' column of 'qr_codes' in the schema cache","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:51:36"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:51:58"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:51:58"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:51:58"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:51:58"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:51:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:52:01"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:02"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:52:05"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:05"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:52:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:52:05"}
{"error":"Error creating QR code: Could not find the 'family_id' column of 'qr_codes' in the schema cache","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:52:15"}
{"error":"Error creating QR code: Could not find the 'family_id' column of 'qr_codes' in the schema cache","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:52:19"}
{"error":"Error creating QR code: Could not find the 'family_id' column of 'qr_codes' in the schema cache","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 18:52:24"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"Found 44 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:52:46"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:47"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 18:52:47"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"Found 44 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:52:56"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:52:56"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 18:52:57"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:53:01","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:53:12"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:53:12"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:53:12"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:53:12"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:53:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:53:15"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:53:15"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:53:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:53:17"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:53:17"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:53:17"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:53:17"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:53:19","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:53:42"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:53:42"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:53:42"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:53:42"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:53:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:53:45"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:53:45"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:53:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:53:48"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:53:48"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:53:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:53:49"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:54:00","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:54:03"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:54:03"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:54:03"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:54:03"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:54:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:54:05"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:54:05"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:54:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:54:07"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:54:08"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:54:08"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:54:08"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:54:33"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:54:33"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:54:33"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:54:33"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:54:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:54:35"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:54:35"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:54:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:54:37"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:54:37"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:54:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:54:38"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:54:49"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:54:50"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:54:50"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:54:50"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:54:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:54:52"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:54:52"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:54:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:54:54"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:54:54"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:54:55"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:54:55"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:55:00"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:55:00"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:55:00"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:55:00"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:55:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:55:02"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:55:03"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:55:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:55:04"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:55:05"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:55:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:55:05"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:55:26"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:55:26"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:55:26"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:55:26"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:55:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:55:28"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:55:28"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:55:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:55:30"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:55:31"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:55:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:55:31"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:55:35","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:56:01"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:56:02"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:56:02"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:56:02"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:56:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:56:03"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:56:04"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:56:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:56:06"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:56:06"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:56:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:56:06"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 18:56:13"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 18:56:13"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:56:13"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:56:13"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 18:56:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:56:15"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:56:15"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:56:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 18:56:17"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 18:56:17"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 18:56:17"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 18:56:17"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:56:20","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:56:21","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:57:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:57:38","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:58:29","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 18:58:30","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:02:19","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3726:22","timestamp":"2026-02-07 19:02:28"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:02:28"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:02:28"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3818:21","timestamp":"2026-02-07 19:02:28"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:19:55","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:19:56","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:22:35"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:22:35"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:22:35"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:22:35"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:22:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:22:37"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:22:37"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:22:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:22:39"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:22:39"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:22:39"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:23:35"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:23:35"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:23:35"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:23:35"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:23:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:23:37"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:23:38"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:23:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:23:41"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:23:41"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:23:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 19:23:41"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:23:46","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3726:22","timestamp":"2026-02-07 19:23:47"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:23:47"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:23:47"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3818:21","timestamp":"2026-02-07 19:23:47"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:25:24","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3726:22","timestamp":"2026-02-07 19:25:25"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:25:25"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:25:25"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3818:21","timestamp":"2026-02-07 19:25:25"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:25:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3726:22","timestamp":"2026-02-07 19:25:36"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:25:36"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:25:37"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3818:21","timestamp":"2026-02-07 19:25:37"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:26:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:27:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:28:27","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3726:22","timestamp":"2026-02-07 19:28:28"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:28:28"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:28:29"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3818:21","timestamp":"2026-02-07 19:28:29"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:28:53"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:28:53"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:28:53"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:28:53"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:28:53"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:28:55"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:28:55"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:28:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:28:57"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:28:58"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:28:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 19:28:58"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:29:07","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:29:08"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3726:22","timestamp":"2026-02-07 19:29:08"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:29:09"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3818:21","timestamp":"2026-02-07 19:29:09"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:30:39","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:30:42"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3726:22","timestamp":"2026-02-07 19:30:42"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:30:42"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3818:21","timestamp":"2026-02-07 19:30:42"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:30:45","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3726:22","timestamp":"2026-02-07 19:30:45"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:30:45"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:30:46"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3818:21","timestamp":"2026-02-07 19:30:46"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:31:45","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:32:26","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"error","message":"Error in seatingTablesDb.findByEvent: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.findByEvent (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:226:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3726:22","timestamp":"2026-02-07 19:32:27"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getUnassignedGuests - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:32:27"}
{"level":"error","message":"Error in seatingTablesDb.getStats: Event not found or access denied","service":"qrevent-backend","stack":"Error: Event not found or access denied\n    at Object.checkEventAccess (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:69:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.getStats (/home/kevin/Qrevent/backendqrevent/utils/db/seatingTables.js:709:7)\n    at async /home/kevin/Qrevent/backendqrevent/routes/api.js:3818:21","timestamp":"2026-02-07 19:32:28"}
{"0":"E","1":"v","10":"f","11":"o","12":"u","13":"n","14":"d","15":" ","16":"o","17":"r","18":" ","19":"a","2":"e","20":"c","21":"c","22":"e","23":"s","24":"s","25":" ","26":"d","27":"e","28":"n","29":"i","3":"n","30":"e","31":"d","4":"t","5":" ","6":"n","7":"o","8":"t","9":" ","level":"error","message":"Error in getAvailableFamilies - returning empty array:","service":"qrevent-backend","timestamp":"2026-02-07 19:32:28"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:33:26","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:35:04"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:35:04"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:35:04"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:35:04"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:35:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:35:06"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:35:07"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:35:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:35:09"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:35:09"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:35:09"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:35:11"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:35:11"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:35:11"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:35:11"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:35:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:35:13"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:35:13"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:35:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:35:15"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:35:15"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:35:15"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:36:48"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:36:49"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:36:49"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:36:49"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:36:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:36:51"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:36:51"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:36:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:36:53"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:36:53"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:36:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 19:36:53"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:37:40","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:40:11","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:40:17","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:40:19","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:40:34","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Checking database tables...","service":"qrevent-backend","timestamp":"2026-02-07 19:40:39"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table users:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:40"}
{"level":"warn","message":" Table missing: users","service":"qrevent-backend","timestamp":"2026-02-07 19:40:40"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table events:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:40"}
{"level":"warn","message":" Table missing: events","service":"qrevent-backend","timestamp":"2026-02-07 19:40:40"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table guests:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:41"}
{"level":"warn","message":" Table missing: guests","service":"qrevent-backend","timestamp":"2026-02-07 19:40:41"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table qr_codes:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:41"}
{"level":"warn","message":" Table missing: qr_codes","service":"qrevent-backend","timestamp":"2026-02-07 19:40:41"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table attendance:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:41"}
{"level":"warn","message":" Table missing: attendance","service":"qrevent-backend","timestamp":"2026-02-07 19:40:41"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table families:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:42"}
{"level":"warn","message":" Table missing: families","service":"qrevent-backend","timestamp":"2026-02-07 19:40:42"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table family_invitations:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:42"}
{"level":"warn","message":" Table missing: family_invitations","service":"qrevent-backend","timestamp":"2026-02-07 19:40:42"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table family_rsvp:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:42"}
{"level":"warn","message":" Table missing: family_rsvp","service":"qrevent-backend","timestamp":"2026-02-07 19:40:42"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table story_events:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:43"}
{"level":"warn","message":" Table missing: story_events","service":"qrevent-backend","timestamp":"2026-02-07 19:40:43"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table games:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:43"}
{"level":"warn","message":" Table missing: games","service":"qrevent-backend","timestamp":"2026-02-07 19:40:43"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table game_questions:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:43"}
{"level":"warn","message":" Table missing: game_questions","service":"qrevent-backend","timestamp":"2026-02-07 19:40:43"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table game_participations:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:43"}
{"level":"warn","message":" Table missing: game_participations","service":"qrevent-backend","timestamp":"2026-02-07 19:40:43"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table feedbacks:","service":"qrevent-backend","timestamp":"2026-02-07 19:40:44"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"Found 44 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:40:52"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:40:52"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 19:40:52"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:41:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:42:35","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:43:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:44:35","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:45:34","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:45:36"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:45:36"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:45:36"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:45:36"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:45:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:45:38"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:45:38"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:45:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:45:41"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:45:41"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:45:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 19:45:41"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:45:43","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:45:55"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:45:55"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:45:55"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:45:55"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:45:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:45:57"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:45:57"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:45:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:45:59"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:45:59"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:45:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 19:45:59"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:46:43","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:47:02","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:48:02","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:48:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:49:05"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:49:05"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:49:05"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:49:05"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:49:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:49:08"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:49:08"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:49:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:49:10"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:49:10"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:49:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 19:49:10"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:49:21"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:49:21"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:49:21"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:49:21"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:49:21"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:49:24"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:49:24"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:49:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:49:27"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:49:28"}
{"level":"info","message":"Starting QR codes to family invitations migration...","service":"qrevent-backend","timestamp":"2026-02-07 19:49:28"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:49:28"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 19:49:28"}
{"level":"info","message":"Found 23 family QR codes to migrate","service":"qrevent-backend","timestamp":"2026-02-07 19:49:28"}
{"level":"info","message":" Created family invitation for QR code 91680414-9086-4093-b124-c42e101d4ea5","service":"qrevent-backend","timestamp":"2026-02-07 19:49:29"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 2c99059a-0aec-4a04-aaeb-1d280503fb0d:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:30"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code a5bfaa0c-de1b-415e-828b-f858abc97116:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:30"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 685f5a31-8907-4a0d-869f-9b400b685659:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:31"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 181126b6-eea3-4c2c-a491-705bb461bfec:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:32"}
{"level":"info","message":" Created family invitation for QR code 629f5287-8fab-4edb-872a-1fd8d9abe29d","service":"qrevent-backend","timestamp":"2026-02-07 19:49:33"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code c6c494af-c1c3-444f-b81e-bd9ad451a219:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:33"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 41b01f46-4c76-44a9-b260-51fba64bb99d:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:34"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 6b27e698-388c-4e43-b1f5-73824495a0ca:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:35"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code d25f10f7-c4ea-42f8-99a1-ed669915f215:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:35"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 1674a4a5-7b0d-4720-b427-7a63490786cd:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:36"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 3f395571-60ca-431d-96e4-186cfc35bcf2:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:37"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 7fc92cd2-e0e8-44d0-9f69-1ffdc820de0a:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:37"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code d7aab1a1-a6c4-4762-bd95-8a629405ce42:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:38"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 76455bfe-2336-4338-9bd8-4a0d329fd7a5:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:39"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 5325c3ce-5af2-42aa-a069-d57b1ffa88ee:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:39"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 2fda24e3-3e3b-435f-9490-a38bd5a36898:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:40"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 78a3277e-89ce-4303-a501-856d81c6a17a:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:41"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 0089e491-a9a6-4293-95c6-54057b9c28da:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:41"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code c54c3cb6-5f56-45ad-980b-c6037ae7d5f9:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:42"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code c8f29e81-413d-4576-9ffe-032b396b6797:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:43"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code 3e0ac19f-2df8-445c-ba57-c7c78cc7a5ec:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:43"}
{"0":"E","1":"r","10":"t","100":"_","101":"f","102":"a","103":"m","104":"i","105":"l","106":"y","107":"_","108":"i","109":"d","11":"i","110":"_","111":"e","112":"v","113":"e","114":"n","115":"t","116":"_","117":"i","118":"d","119":"_","12":"n","120":"k","121":"e","122":"y","123":"\"","13":"g","14":" ","15":"f","16":"a","17":"m","18":"i","19":"l","2":"r","20":"y","21":" ","22":"i","23":"n","24":"v","25":"i","26":"t","27":"a","28":"t","29":"i","3":"o","30":"o","31":"n","32":":","33":" ","34":"d","35":"u","36":"p","37":"l","38":"i","39":"c","4":"r","40":"a","41":"t","42":"e","43":" ","44":"k","45":"e","46":"y","47":" ","48":"v","49":"a","5":" ","50":"l","51":"u","52":"e","53":" ","54":"v","55":"i","56":"o","57":"l","58":"a","59":"t","6":"c","60":"e","61":"s","62":" ","63":"u","64":"n","65":"i","66":"q","67":"u","68":"e","69":" ","7":"r","70":"c","71":"o","72":"n","73":"s","74":"t","75":"r","76":"a","77":"i","78":"n","79":"t","8":"e","80":" ","81":"\"","82":"f","83":"a","84":"m","85":"i","86":"l","87":"y","88":"_","89":"i","9":"a","90":"n","91":"v","92":"i","93":"t","94":"a","95":"t","96":"i","97":"o","98":"n","99":"s","level":"error","message":" Error migrating QR code bc693c58-47cb-465c-b09b-06690cbf4d7b:","service":"qrevent-backend","timestamp":"2026-02-07 19:49:44"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:50:19","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:50:48","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:50:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:50:57","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:52:34","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:52:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:52:56"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:52:56"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:52:56"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:52:56"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:52:56"}
{"level":"info","message":"Dmarrage de la migration force des QR codes rcents...","service":"qrevent-backend","timestamp":"2026-02-07 19:53:02"}
{"level":"info","message":"Trouv 23 QR codes famille  traiter","service":"qrevent-backend","timestamp":"2026-02-07 19:53:02"}
{"level":"info","message":" Invitation existe dj pour QR code 91680414-9086-4093-b124-c42e101d4ea5","service":"qrevent-backend","timestamp":"2026-02-07 19:53:03"}
{"level":"info","message":"Suppression de l'ancienne invitation 2e995b62-cbe8-4b6e-a437-4633716ff106 pour famille 17060da4-3af9-4f80-b69a-bca75068039b","service":"qrevent-backend","timestamp":"2026-02-07 19:53:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:53:04"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:53:04"}
{"level":"info","message":" Migration russie pour QR code 2c99059a-0aec-4a04-aaeb-1d280503fb0d","service":"qrevent-backend","timestamp":"2026-02-07 19:53:04"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:53:04"}
{"level":"info","message":"Suppression de l'ancienne invitation 3546b268-a389-49a5-8ea9-e7d209403df6 pour famille 17060da4-3af9-4f80-b69a-bca75068039b","service":"qrevent-backend","timestamp":"2026-02-07 19:53:05"}
{"level":"info","message":" Migration russie pour QR code a5bfaa0c-de1b-415e-828b-f858abc97116","service":"qrevent-backend","timestamp":"2026-02-07 19:53:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:53:06"}
{"level":"info","message":"Suppression de l'ancienne invitation 50a43031-5878-4c8e-be00-26f7984f3158 pour famille 17060da4-3af9-4f80-b69a-bca75068039b","service":"qrevent-backend","timestamp":"2026-02-07 19:53:06"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:53:06"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:53:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 19:53:07"}
{"level":"info","message":" Migration russie pour QR code 685f5a31-8907-4a0d-869f-9b400b685659","service":"qrevent-backend","timestamp":"2026-02-07 19:53:07"}
{"level":"info","message":"Suppression de l'ancienne invitation cdf49507-870c-404d-b34d-9779d643f553 pour famille 17060da4-3af9-4f80-b69a-bca75068039b","service":"qrevent-backend","timestamp":"2026-02-07 19:53:07"}
{"level":"info","message":" Migration russie pour QR code 181126b6-eea3-4c2c-a491-705bb461bfec","service":"qrevent-backend","timestamp":"2026-02-07 19:53:08"}
{"level":"info","message":" Invitation existe dj pour QR code 629f5287-8fab-4edb-872a-1fd8d9abe29d","service":"qrevent-backend","timestamp":"2026-02-07 19:53:08"}
{"level":"info","message":"Suppression de l'ancienne invitation 7af238cb-88a8-427b-81f4-4f20abab0c4e pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:09"}
{"level":"info","message":" Migration russie pour QR code c6c494af-c1c3-444f-b81e-bd9ad451a219","service":"qrevent-backend","timestamp":"2026-02-07 19:53:09"}
{"level":"info","message":"Suppression de l'ancienne invitation 48d0a6e4-7e5a-4429-8400-0f61909df529 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:10"}
{"level":"info","message":" Migration russie pour QR code 41b01f46-4c76-44a9-b260-51fba64bb99d","service":"qrevent-backend","timestamp":"2026-02-07 19:53:10"}
{"level":"info","message":"Suppression de l'ancienne invitation ce353585-d51f-4fd7-9db9-5460780d734b pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:11"}
{"level":"info","message":" Migration russie pour QR code 6b27e698-388c-4e43-b1f5-73824495a0ca","service":"qrevent-backend","timestamp":"2026-02-07 19:53:12"}
{"level":"info","message":"Suppression de l'ancienne invitation 40334faf-b7e6-4cdc-a56f-116fedb07286 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:12"}
{"level":"info","message":" Migration russie pour QR code d25f10f7-c4ea-42f8-99a1-ed669915f215","service":"qrevent-backend","timestamp":"2026-02-07 19:53:13"}
{"level":"info","message":"Suppression de l'ancienne invitation 6c420650-becd-4375-ba10-3e4ccc55bc70 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:14"}
{"level":"info","message":" Migration russie pour QR code 1674a4a5-7b0d-4720-b427-7a63490786cd","service":"qrevent-backend","timestamp":"2026-02-07 19:53:14"}
{"level":"info","message":"Suppression de l'ancienne invitation dfc571f6-4372-4da7-9143-21fffd1cc053 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:15"}
{"level":"info","message":" Migration russie pour QR code 3f395571-60ca-431d-96e4-186cfc35bcf2","service":"qrevent-backend","timestamp":"2026-02-07 19:53:15"}
{"level":"info","message":"Suppression de l'ancienne invitation 8c8cd189-cb05-4ee3-a756-608eb8f19c13 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:16"}
{"level":"info","message":" Migration russie pour QR code 7fc92cd2-e0e8-44d0-9f69-1ffdc820de0a","service":"qrevent-backend","timestamp":"2026-02-07 19:53:17"}
{"level":"info","message":"Suppression de l'ancienne invitation 5506bdc2-2bca-48d8-8608-8644eb4bc819 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:17"}
{"level":"info","message":" Migration russie pour QR code d7aab1a1-a6c4-4762-bd95-8a629405ce42","service":"qrevent-backend","timestamp":"2026-02-07 19:53:18"}
{"level":"info","message":"Suppression de l'ancienne invitation 3f78bdbf-9849-4861-bd97-8af0ce5525b5 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:18"}
{"level":"info","message":" Migration russie pour QR code 76455bfe-2336-4338-9bd8-4a0d329fd7a5","service":"qrevent-backend","timestamp":"2026-02-07 19:53:19"}
{"level":"info","message":"Suppression de l'ancienne invitation 8e9409f9-7c1a-4078-8fb9-9b4ed488a418 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:20"}
{"level":"info","message":" Migration russie pour QR code 5325c3ce-5af2-42aa-a069-d57b1ffa88ee","service":"qrevent-backend","timestamp":"2026-02-07 19:53:20"}
{"level":"info","message":"Suppression de l'ancienne invitation 5d533c67-fd78-473f-8d66-8ae46238c5d9 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:21"}
{"level":"info","message":" Migration russie pour QR code 2fda24e3-3e3b-435f-9490-a38bd5a36898","service":"qrevent-backend","timestamp":"2026-02-07 19:53:21"}
{"level":"info","message":"Suppression de l'ancienne invitation c12fcce3-4bf1-410e-8d13-ca3ff2c77e97 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:22"}
{"level":"info","message":" Migration russie pour QR code 78a3277e-89ce-4303-a501-856d81c6a17a","service":"qrevent-backend","timestamp":"2026-02-07 19:53:23"}
{"level":"info","message":"Suppression de l'ancienne invitation a63cabc4-1aec-4d77-98d1-bf97f2742fbd pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:23"}
{"level":"info","message":" Migration russie pour QR code 0089e491-a9a6-4293-95c6-54057b9c28da","service":"qrevent-backend","timestamp":"2026-02-07 19:53:24"}
{"level":"info","message":"Suppression de l'ancienne invitation b5e6b5f3-3c10-42ad-baf3-6e1e0e7630fc pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:24"}
{"level":"info","message":" Migration russie pour QR code c54c3cb6-5f56-45ad-980b-c6037ae7d5f9","service":"qrevent-backend","timestamp":"2026-02-07 19:53:25"}
{"level":"info","message":"Suppression de l'ancienne invitation d30c82bc-bf69-4d87-b6b2-8952978830b0 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:26"}
{"level":"info","message":" Migration russie pour QR code c8f29e81-413d-4576-9ffe-032b396b6797","service":"qrevent-backend","timestamp":"2026-02-07 19:53:26"}
{"level":"info","message":"Suppression de l'ancienne invitation dbf218ac-ee43-47a4-864f-42440f371467 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:27"}
{"level":"info","message":" Migration russie pour QR code 3e0ac19f-2df8-445c-ba57-c7c78cc7a5ec","service":"qrevent-backend","timestamp":"2026-02-07 19:53:27"}
{"level":"info","message":"Suppression de l'ancienne invitation e1094200-775a-4a4a-a75d-706aef67fb11 pour famille b4e6c5a2-f742-47a7-a401-62892cf7e34c","service":"qrevent-backend","timestamp":"2026-02-07 19:53:28"}
{"level":"info","message":" Migration russie pour QR code bc693c58-47cb-465c-b09b-06690cbf4d7b","service":"qrevent-backend","timestamp":"2026-02-07 19:53:29"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:53:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:55:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 19:55:42","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 19:57:40"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 19:57:43"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 19:57:45"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 19:57:48"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 19:57:53"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 19:57:55"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 19:57:57"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 19:57:59"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 19:58:03"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:58:37"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:58:37"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:58:37"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:58:37"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:58:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:58:39"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:58:39"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:58:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:58:41"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:58:41"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:58:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 19:58:42"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 19:58:49"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 19:58:49"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:58:49"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:58:49"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 19:58:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:58:50"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:58:51"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:58:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 19:58:53"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 19:58:54"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 19:58:54"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 20:00:21"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 20:00:22"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 20:00:26"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 20:00:27"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 20:00:31"}
{"error":"Error creating family invitation: duplicate key value violates unique constraint \"family_invitations_family_id_event_id_key\"","level":"error","message":"Error generating multiple QR codes for family:","service":"qrevent-backend","timestamp":"2026-02-07 20:00:33"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 20:01:42"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 20:01:42"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:01:42"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:01:42"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 20:01:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:01:44"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:01:45"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:01:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:01:46"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:01:47"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:01:47"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 20:01:47"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:02:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 20:03:10"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 20:03:10"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:03:10"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:03:10"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 20:03:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:03:12"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:03:12"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:03:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:03:14"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:03:14"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:03:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 20:03:14"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:06:20","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Dmarrage de la migration force des QR codes rcents...","service":"qrevent-backend","timestamp":"2026-02-07 20:08:59"}
{"level":"info","message":"Trouv 26 QR codes famille  traiter","service":"qrevent-backend","timestamp":"2026-02-07 20:09:00"}
{"level":"info","message":" Invitation existe dj pour QR code c3937c46-31cf-4ccc-a6c6-fa6ffcc581c6","service":"qrevent-backend","timestamp":"2026-02-07 20:09:00"}
{"level":"info","message":"Suppression de l'ancienne invitation 91621a68-a27c-4a33-a2fa-e6fd4fe9009b pour famille cd2d584e-9d7b-43eb-8c03-d8143cae5a70","service":"qrevent-backend","timestamp":"2026-02-07 20:09:01"}
{"level":"info","message":" Migration russie pour QR code a9174bfb-2a19-44e4-ba2b-a6288363b07c","service":"qrevent-backend","timestamp":"2026-02-07 20:09:02"}
{"level":"info","message":" Invitation existe dj pour QR code 5e051735-129a-4260-96d4-e2bd43004502","service":"qrevent-backend","timestamp":"2026-02-07 20:09:02"}
{"level":"info","message":"Suppression de l'ancienne invitation aae88a33-1601-4362-bf9f-ccc7e6abd99c pour famille cd2d584e-9d7b-43eb-8c03-d8143cae5a70","service":"qrevent-backend","timestamp":"2026-02-07 20:09:03"}
{"level":"info","message":" Migration russie pour QR code f2b8e194-d7d8-4753-81b8-4b24ba85fa2a","service":"qrevent-backend","timestamp":"2026-02-07 20:09:03"}
{"level":"info","message":"Suppression de l'ancienne invitation 20de3312-6160-4662-bb89-4eb56215ddf5 pour famille b4ba24b0-0866-4361-adff-01b8727c3fbf","service":"qrevent-backend","timestamp":"2026-02-07 20:09:04"}
{"level":"info","message":" Migration russie pour QR code 8602fa7f-9b46-4f02-adfd-10ad2f75634b","service":"qrevent-backend","timestamp":"2026-02-07 20:09:05"}
{"level":"info","message":"Suppression de l'ancienne invitation 8ad5c114-44e3-4dbe-a230-e53010d87898 pour famille cd2d584e-9d7b-43eb-8c03-d8143cae5a70","service":"qrevent-backend","timestamp":"2026-02-07 20:09:05"}
{"level":"info","message":" Migration russie pour QR code cf41ab86-562e-4674-bf26-af3ac3cdd274","service":"qrevent-backend","timestamp":"2026-02-07 20:09:06"}
{"level":"info","message":"Suppression de l'ancienne invitation 17a6a582-1cfb-42f0-a18a-21cb540c5694 pour famille b4ba24b0-0866-4361-adff-01b8727c3fbf","service":"qrevent-backend","timestamp":"2026-02-07 20:09:06"}
{"level":"info","message":" Migration russie pour QR code e69636ba-0f0b-4118-8e09-cae814b7bf48","service":"qrevent-backend","timestamp":"2026-02-07 20:09:07"}
{"level":"info","message":"Suppression de l'ancienne invitation 6475b6cf-35a8-4a3a-be52-60e0f551deae pour famille cd2d584e-9d7b-43eb-8c03-d8143cae5a70","service":"qrevent-backend","timestamp":"2026-02-07 20:09:08"}
{"level":"info","message":" Migration russie pour QR code bf174e41-9dc9-4cb5-a1eb-67a673ab46d3","service":"qrevent-backend","timestamp":"2026-02-07 20:09:08"}
{"level":"info","message":"Suppression de l'ancienne invitation 2e3dd436-c7a7-445c-b61a-850a314e1790 pour famille b4ba24b0-0866-4361-adff-01b8727c3fbf","service":"qrevent-backend","timestamp":"2026-02-07 20:09:09"}
{"level":"info","message":" Migration russie pour QR code a79f33d3-55e7-45dc-8348-9cef00fc31b7","service":"qrevent-backend","timestamp":"2026-02-07 20:09:09"}
{"level":"info","message":"Suppression de l'ancienne invitation 59835933-faba-4580-86df-6c3092faa3d8 pour famille cd2d584e-9d7b-43eb-8c03-d8143cae5a70","service":"qrevent-backend","timestamp":"2026-02-07 20:09:10"}
{"level":"info","message":" Migration russie pour QR code 5938a75e-e5f1-401c-a44b-abeabd95ff69","service":"qrevent-backend","timestamp":"2026-02-07 20:09:11"}
{"level":"info","message":"Suppression de l'ancienne invitation 4f25fd27-64b5-46e0-a38c-6bf0450d15a2 pour famille b4ba24b0-0866-4361-adff-01b8727c3fbf","service":"qrevent-backend","timestamp":"2026-02-07 20:09:11"}
{"level":"info","message":" Migration russie pour QR code 9fdf497e-74c4-4625-ab40-8d62c1edbfba","service":"qrevent-backend","timestamp":"2026-02-07 20:09:12"}
{"level":"info","message":"Suppression de l'ancienne invitation 532a6ba6-9555-4c1d-9193-94fbe69ce7c8 pour famille cd2d584e-9d7b-43eb-8c03-d8143cae5a70","service":"qrevent-backend","timestamp":"2026-02-07 20:09:13"}
{"level":"info","message":" Migration russie pour QR code 253f4daf-7c29-4cb9-9369-2fb5f6eeb75a","service":"qrevent-backend","timestamp":"2026-02-07 20:09:14"}
{"level":"info","message":"Suppression de l'ancienne invitation 76252352-b7ce-4464-af5f-fa044b0ec304 pour famille b4ba24b0-0866-4361-adff-01b8727c3fbf","service":"qrevent-backend","timestamp":"2026-02-07 20:09:14"}
{"level":"info","message":" Migration russie pour QR code 64d81573-8b0b-48c4-acba-eccfef7df4dd","service":"qrevent-backend","timestamp":"2026-02-07 20:09:15"}
{"level":"info","message":"Suppression de l'ancienne invitation a7d4476e-74a1-42e3-9091-26f358ed663a pour famille cd2d584e-9d7b-43eb-8c03-d8143cae5a70","service":"qrevent-backend","timestamp":"2026-02-07 20:09:16"}
{"level":"info","message":" Migration russie pour QR code 4c498e13-84d0-4321-95bf-a5c842ef4d0c","service":"qrevent-backend","timestamp":"2026-02-07 20:09:16"}
{"level":"info","message":"Suppression de l'ancienne invitation cd95a4f9-8198-4b0c-942c-518c795a70fb pour famille b4ba24b0-0866-4361-adff-01b8727c3fbf","service":"qrevent-backend","timestamp":"2026-02-07 20:09:17"}
{"level":"info","message":" Migration russie pour QR code 5af3c80f-b38d-4475-83a2-bbeb05f98d96","service":"qrevent-backend","timestamp":"2026-02-07 20:09:18"}
{"level":"info","message":"Suppression de l'ancienne invitation 1e935398-36de-49c5-923f-782eb7cb0a49 pour famille cd2d584e-9d7b-43eb-8c03-d8143cae5a70","service":"qrevent-backend","timestamp":"2026-02-07 20:09:19"}
{"level":"info","message":" Migration russie pour QR code 38fde1df-18fa-4969-bed7-63cc80890e51","service":"qrevent-backend","timestamp":"2026-02-07 20:09:19"}
{"level":"info","message":"Suppression de l'ancienne invitation 369e469b-260d-4ed6-891f-ec0658271064 pour famille cd2d584e-9d7b-43eb-8c03-d8143cae5a70","service":"qrevent-backend","timestamp":"2026-02-07 20:09:20"}
{"level":"info","message":" Migration russie pour QR code b9be5db7-a548-41b9-80a6-d1acb98df3a8","service":"qrevent-backend","timestamp":"2026-02-07 20:09:21"}
{"level":"info","message":"Suppression de l'ancienne invitation 6aeeafca-575d-47e0-9705-9bfd2fc605fd pour famille b4ba24b0-0866-4361-adff-01b8727c3fbf","service":"qrevent-backend","timestamp":"2026-02-07 20:09:21"}
{"level":"info","message":" Migration russie pour QR code ba9eb03b-9d99-471c-ba0d-12ca8bad7526","service":"qrevent-backend","timestamp":"2026-02-07 20:09:22"}
{"level":"info","message":"Suppression de l'ancienne invitation 478097da-abfe-4cca-a69f-fba04da565b1 pour famille cd2d584e-9d7b-43eb-8c03-d8143cae5a70","service":"qrevent-backend","timestamp":"2026-02-07 20:09:22"}
{"level":"info","message":" Migration russie pour QR code 3d20e6bb-b6b2-4df4-a224-408c25403f27","service":"qrevent-backend","timestamp":"2026-02-07 20:09:24"}
{"level":"info","message":"Suppression de l'ancienne invitation 90ee71c3-55c1-4d3f-8646-5de30d0ce4fe pour famille b4ba24b0-0866-4361-adff-01b8727c3fbf","service":"qrevent-backend","timestamp":"2026-02-07 20:09:24"}
{"level":"info","message":" Migration russie pour QR code e585a956-c7c9-40a4-82e6-bf68ebbbdc63","service":"qrevent-backend","timestamp":"2026-02-07 20:09:25"}
{"level":"info","message":"Suppression de l'ancienne invitation 236fdde4-ff2f-4e39-aad6-e5d57a1c5462 pour famille b4ba24b0-0866-4361-adff-01b8727c3fbf","service":"qrevent-backend","timestamp":"2026-02-07 20:09:26"}
{"level":"info","message":" Migration russie pour QR code 3c75355a-4d26-4354-bf4a-d3fccc3669e8","service":"qrevent-backend","timestamp":"2026-02-07 20:09:27"}
{"level":"info","message":"Suppression de l'ancienne invitation 89f866cb-0f76-4493-a994-5a2e6b3d195d pour famille b4ba24b0-0866-4361-adff-01b8727c3fbf","service":"qrevent-backend","timestamp":"2026-02-07 20:09:27"}
{"level":"info","message":" Migration russie pour QR code 391c6c4f-a640-4944-8c25-173fef8e773e","service":"qrevent-backend","timestamp":"2026-02-07 20:09:28"}
{"level":"info","message":"Suppression de l'ancienne invitation 669becde-ab32-4eed-a9d4-502adbf1f824 pour famille cd2d584e-9d7b-43eb-8c03-d8143cae5a70","service":"qrevent-backend","timestamp":"2026-02-07 20:09:28"}
{"level":"info","message":" Migration russie pour QR code 1abdabd4-9091-4ba6-86bc-845bc389b02d","service":"qrevent-backend","timestamp":"2026-02-07 20:09:29"}
{"level":"info","message":"Suppression de l'ancienne invitation e378b303-8ac8-4632-93de-2e0d55866544 pour famille cd2d584e-9d7b-43eb-8c03-d8143cae5a70","service":"qrevent-backend","timestamp":"2026-02-07 20:09:30"}
{"level":"info","message":" Migration russie pour QR code 9e7f0be7-6fb1-40e2-9947-7f00833a3082","service":"qrevent-backend","timestamp":"2026-02-07 20:09:30"}
{"level":"info","message":"Suppression de l'ancienne invitation 07b3fb17-6210-4933-ae7b-f0bf34bbb5e1 pour famille b4ba24b0-0866-4361-adff-01b8727c3fbf","service":"qrevent-backend","timestamp":"2026-02-07 20:09:31"}
{"level":"info","message":" Migration russie pour QR code 47a15c8b-d78b-4c2d-a26c-76fab5328650","service":"qrevent-backend","timestamp":"2026-02-07 20:09:32"}
{"level":"info","message":"Suppression de l'ancienne invitation 4b6fe58d-6204-4460-8b1e-ef4f253772e4 pour famille b4ba24b0-0866-4361-adff-01b8727c3fbf","service":"qrevent-backend","timestamp":"2026-02-07 20:09:33"}
{"level":"info","message":" Migration russie pour QR code 4dbec31f-dfc6-4f98-a109-fd7495800f80","service":"qrevent-backend","timestamp":"2026-02-07 20:09:33"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 20:09:54"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 20:09:54"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:09:54"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:09:54"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 20:09:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:09:56"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:09:56"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:09:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:09:58"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:09:59"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:09:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 20:09:59"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:10:19","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:10:20","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:10:31","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:10:32","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:10:47","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:11:48","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:12:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:15:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:16:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:17:38","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:18:40","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:19:28","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:20:27","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:21:15","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:22:03","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:23:18","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:24:18","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:24:32","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 20:25:17"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 20:25:17"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:25:17"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:25:17"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 20:25:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:25:20"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:25:20"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:25:21"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:25:22"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:25:23"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:25:23"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 20:25:23"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:25:24","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 20:28:09"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 20:28:09"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:28:09"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:28:09"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 20:28:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:28:11"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:28:11"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:28:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:28:14"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:28:14"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:28:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 20:28:14"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:28:18","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:29:12","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:30:12","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 20:30:37"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 20:30:37"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:30:37"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:30:37"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 20:30:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:30:40"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:30:40"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:30:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:30:42"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:30:42"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:30:43"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 20:30:43"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:31:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:32:15","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 20:32:32"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 20:32:32"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:32:32"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:32:32"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 20:32:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:32:34"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:32:34"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:32:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:32:37"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:32:38"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:32:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 20:32:38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:33:16","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:34:18","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-07 20:34:37"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-07 20:34:48","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:34:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:34:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:35:25","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:36:26","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 20:36:28"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 20:36:28"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:36:28"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:36:28"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 20:36:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:36:31"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:36:31"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:36:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:36:33"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:36:33"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:36:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 20:36:34"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 20:36:44"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 20:36:44"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:36:44"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:36:44"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 20:36:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:36:46"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:36:46"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:36:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 20:36:49"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 20:36:49"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 20:36:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 20:36:49"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:37:27","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-07 20:38:27"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:38:28","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-07 20:38:28","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:38:29","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:38:30","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:39:03","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:39:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:40:03","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:40:34","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:41:05","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:42:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:46:25","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:47:25","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:56:35","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 20:59:20","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-07 21:02:30","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:02:32","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:02:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:02:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:03:51","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:04:52","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:05:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:06:07"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:06:07"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:06:07"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:06:07"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:06:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:06:09"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:06:10"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:06:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:06:11"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:06:12"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:06:12"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:07:30"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:07:30"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:07:30"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:07:30"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:07:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:07:32"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:07:32"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:07:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:07:34"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:07:35"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:07:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:07:35"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:07:48","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:08:48","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:09:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:10:51","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:11:01"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:11:01"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:11:01"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:11:01"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:11:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:11:03"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:11:03"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:11:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:11:06"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:11:06"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:11:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:11:07"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:11:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Error incrementing scan count: Cannot coerce the result to a single JSON object","level":"error","message":"Error fetching public invitation:","service":"qrevent-backend","timestamp":"2026-02-07 21:12:19"}
{"error":"Error incrementing scan count: Cannot coerce the result to a single JSON object","level":"error","message":"Error fetching public invitation:","service":"qrevent-backend","timestamp":"2026-02-07 21:12:22"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:12:55","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Error incrementing scan count: Cannot coerce the result to a single JSON object","level":"error","message":"Error fetching public invitation:","service":"qrevent-backend","timestamp":"2026-02-07 21:13:20"}
{"error":"Error incrementing scan count: Cannot coerce the result to a single JSON object","level":"error","message":"Error fetching public invitation:","service":"qrevent-backend","timestamp":"2026-02-07 21:13:23"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:13:57","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:14:50"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:14:50"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:14:50"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:14:50"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:14:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:14:52"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:14:53"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:14:53"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:14:55"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:14:55"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:14:55"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:14:55"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:14:58","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:15:02"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:15:03"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:15:03"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:15:03"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:15:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:15:04"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:15:05"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:15:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:15:07"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:15:07"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:15:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:15:07"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:15:12"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:15:12"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:15:12"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:15:12"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:15:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:15:14"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:15:14"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:15:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:15:16"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:15:17"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:15:17"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:15:17"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:16:00","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:17:02","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:18:03","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:19:05","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:20:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:21:07","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:22:08","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:23:10","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:24:12","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:25:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:26:14","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:27:13"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:27:14"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:27:14"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:27:14"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:27:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:27:16"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:27:16"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:27:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:27:18"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:27:18"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:27:19"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:27:19"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:27:25","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:28:19","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:29:20","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:29:53"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:29:54"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:29:54"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:29:54"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:29:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:29:56"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:29:56"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:29:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:29:58"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:29:59"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:29:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:29:59"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:30:22","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:31:23","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:32:25","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:34:14"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:34:14"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:34:14"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:34:14"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:34:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:34:16"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:34:16"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:34:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:34:19"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:34:19"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:34:19"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:34:19"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:34:22"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:34:23"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:34:23"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:34:23"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:34:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:34:24"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:34:25"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:34:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:34:26"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:34:27"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:34:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:34:27"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:38:27"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:38:27"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:38:27"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:38:27"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:38:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:38:29"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:38:30"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:38:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:38:31"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:38:32"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:38:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:38:32"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:38:33"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:38:34"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:38:34"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:38:34"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:38:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:38:35"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:38:35"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:38:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:38:37"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:38:38"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:38:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:38:38"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:46:37"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:46:38"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:46:38"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:46:38"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:46:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:46:40"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:46:40"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:46:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:46:42"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:46:42"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:46:42"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:47:01"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:47:01"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:47:01"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:47:01"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:47:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:47:03"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:47:04"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:47:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:47:06"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:47:06"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:47:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:47:06"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:47:30","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:48:58","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:49:45","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:50:46","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:56:39"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:56:39"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:56:39"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:56:39"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:56:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:56:41"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:56:41"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:56:41"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:56:43"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:56:43"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:56:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:56:44"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:56:53"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:56:53"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:56:53"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:56:53"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:56:53"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:56:55"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:56:55"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:56:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:56:57"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:56:57"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:56:57"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:56:59"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:57:00"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:57:00"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:57:00"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:57:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:57:02"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:57:02"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:57:03"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:57:04","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:57:04"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:57:05"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:57:05"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:57:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:58:20"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:58:21"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:58:21"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:58:21"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:58:21"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:58:23"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:58:23"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:58:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:58:25"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:58:25"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:58:25"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:06"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:07"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:59:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:08"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:08"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:08"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:08"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:08"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:08"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:09"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:09"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:10"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:10"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:10"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:11"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 21:59:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:11"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:59:11"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:59:11"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:11"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:11"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:59:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:13"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:13"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:15"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:16"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:59:16"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:59:16"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:16"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:16"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:59:16"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:18"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:18"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:18"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:20"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:20"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:59:20"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:59:20"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:20"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:20"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:59:20"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:20"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:22"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:22"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:22"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 21:59:23"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 21:59:24"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:24"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:24"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 21:59:24"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:24"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:24"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:24"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:26"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:26"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 21:59:28"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 21:59:28"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 21:59:29"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:59:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 21:59:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 22:01:12","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 22:01:32"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 22:01:33"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:01:33"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 22:01:33"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 22:01:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:01:35"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:01:35"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:01:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:01:37"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:01:37"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 22:01:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 22:01:37"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 22:01:38"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 22:01:38"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:01:38"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 22:01:38"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 22:01:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:01:40"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:01:40"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:01:41"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:01:42"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:01:42"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 22:01:43"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 22:02:35"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 22:02:35"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:02:35"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 22:02:35"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 22:02:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:02:36"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:02:37"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:02:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:02:38"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:02:39"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 22:02:39"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 22:02:56","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 22:03:46"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 22:03:46"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:03:46"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 22:03:46"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 22:03:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:03:48"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:03:48"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:03:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:03:51"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:03:51"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 22:03:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 22:03:51"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 22:05:35","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 22:05:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"Found 45 migration(s):","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:06:25"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:26"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-07 22:06:26"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 22:06:33"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 22:06:33"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:33"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 22:06:33"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 22:06:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:06:35"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:35"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:06:37"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:38"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 22:06:38"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-07 22:06:52"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-07 22:06:52"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:52"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-07 22:06:52"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-07 22:06:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:06:54"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:54"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-07 22:06:56"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-07 22:06:56"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-07 22:06:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-07 22:06:56"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-07 22:13:18","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 07:38:46"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 07:38:47"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 07:38:47"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 07:38:47"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 07:38:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 07:38:49"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 07:38:49"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 07:38:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 07:38:51"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 07:38:51"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 07:38:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 07:38:52"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 07:47:06"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 07:47:07"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 07:47:07"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 07:47:07"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 07:47:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 07:47:09"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 07:47:09"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 07:47:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 07:47:11"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 07:47:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 07:47:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 07:47:11"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-08 07:48:50"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-08 07:48:51","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 07:48:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 07:48:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 07:50:19","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 07:50:52","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 07:51:17","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 07:51:18","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 07:53:01"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 07:53:01"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 07:53:01"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 07:53:02"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 07:53:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 07:53:03"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 07:53:04"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 07:53:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 07:53:05"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 07:53:06"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 07:53:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 07:53:06"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 07:55:48"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 07:55:48"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 07:55:48","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 07:55:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 07:55:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 07:55:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 08:02:54"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 08:02:54"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:02:54"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:02:54"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 08:02:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:02:56"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:02:56"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:02:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:02:58"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:02:59"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:02:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 08:02:59"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:09:35","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 08:09:35"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 08:09:35"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:09:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 08:27:14"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 08:27:15"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:27:15"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:27:15"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 08:27:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:27:17"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:27:18"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:27:18"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:27:20"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:27:20"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:27:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 08:27:20"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 08:27:26"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 08:27:26"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 08:34:22"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 08:34:22"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:34:22"}
{"0":"I","1":"n","10":"L","2":"v","3":"a","4":"l","5":"i","6":"d","7":" ","8":"U","9":"R","level":"warn","message":"Migration check completed (may already be applied):","service":"qrevent-backend","timestamp":"2026-02-08 08:34:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 08:34:22"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:34:22"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 08:34:22"}
{"error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Database error:","service":"qrevent-backend","timestamp":"2026-02-08 08:35:12"}
{"error":"Error finding user by email: TypeError: fetch failed","level":"error","message":"Database error:","service":"qrevent-backend","timestamp":"2026-02-08 08:35:58"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 08:36:14"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 08:36:14"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:36:14"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:36:14"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 08:36:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:36:16"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:36:16"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:36:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:36:18"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:36:19"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:36:19"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 08:36:19"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 08:36:25"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 08:36:25"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:36:25"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:36:25"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 08:36:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:36:27"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:36:27"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:36:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:36:30"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:36:30"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:36:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 08:36:30"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 08:36:43"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 08:36:44"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:36:44"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:36:44"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 08:36:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:36:45"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:36:46"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:36:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:36:47"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:36:48"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:36:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 08:36:48"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 08:37:03"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 08:37:03"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:03"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:37:03"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 08:37:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:37:05"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:05"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:37:07"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:08"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:37:08"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 08:37:08"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 08:37:22"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 08:37:23"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:23"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:37:23"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 08:37:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:37:25"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:25"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:37:27"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:27"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:37:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 08:37:27"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 08:37:39"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 08:37:39"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:39"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:37:39"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 08:37:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:37:41"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:41"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:37:44"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:44"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:37:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 08:37:44"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 08:37:44"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 08:37:51"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 08:37:51"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:51"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:37:51"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 08:37:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:37:53"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:54"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:37:55"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:37:56"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:37:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 08:37:56"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 08:37:56"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 08:38:10"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 08:38:10"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:38:10"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:38:10"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 08:38:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:38:12"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:38:12"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:38:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:38:14"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:38:15"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:38:15"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 08:38:15"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 08:38:15"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 08:38:23"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 08:38:23"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:38:23"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:38:23"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 08:38:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:38:25"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:38:25"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:38:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 08:38:28"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 08:38:28"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 08:38:28"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 08:38:28"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 08:38:28"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-08 08:38:58"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-08 08:38:59","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-08 08:41:41","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:41:42","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:41:43","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-08 08:47:06","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:47:07","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:47:08","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:47:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:47:10","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:47:21","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:47:22","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:02","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:03","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:11","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:18","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:19","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:21","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:22","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:25","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:26","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:34","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:50:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:51:05","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:51:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:52:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:52:07","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:52:08","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:54:44","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:54:45","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:56:59","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:57:00","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:57:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:57:51","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:59:23","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:59:24","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:59:40","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 08:59:41","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 09:20:11","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 09:20:12","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 09:23:07","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 09:23:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 09:24:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 09:46:33"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 09:46:34"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:46:34"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 09:46:34"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 09:46:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 09:46:36"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:46:36"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:46:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 09:46:38"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:46:38"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 09:46:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 09:46:38"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 09:46:38"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 09:52:04"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 09:52:04"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:04"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 09:52:04"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 09:52:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 09:52:06"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:06"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 09:52:08"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:08"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 09:52:08"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 09:52:08"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 09:52:08"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 09:52:24"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 09:52:25"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:25"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 09:52:25"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 09:52:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 09:52:26"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:27"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 09:52:28"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:29"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 09:52:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 09:52:29"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 09:52:29"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"Found 46 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"\n Migration to apply (029_add_ceremony_reception_venues.sql):","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"-- Migration 029: Add ceremony and reception venues support\n-- Enhances the events table to support separate venues for ceremony and reception\n\nDO $$ \nBEGIN\n  -- Add new columns for ceremony and reception venues\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'ceremony_venue'\n  ) THEN\n    ALTER TABLE events ADD COLUMN ceremony_venue JSONB;\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'reception_venue'\n  ) THEN\n    ALTER TABLE events ADD COLUMN reception_venue JSONB;\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'ceremony_date'\n  ) THEN\n    ALTER TABLE events ADD COLUMN ceremony_date DATE;\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'ceremony_time'\n  ) THEN\n    ALTER TABLE events ADD COLUMN ceremony_time TIME;\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'reception_date'\n  ) THEN\n    ALTER TABLE events ADD COLUMN reception_date DATE;\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'reception_time'\n  ) THEN\n    ALTER TABLE events ADD COLUMN reception_time TIME;\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'venue_type'\n  ) THEN\n    ALTER TABLE events ADD COLUMN venue_type VARCHAR(20) DEFAULT 'single' \n    CHECK (venue_type IN ('single', 'separate'));\n  END IF;\n\n  -- Add indexes for performance\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_indexes \n    WHERE tablename = 'events' \n    AND indexname = 'idx_events_ceremony_date'\n  ) THEN\n    CREATE INDEX idx_events_ceremony_date ON events(ceremony_date);\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_indexes \n    WHERE tablename = 'events' \n    AND indexname = 'idx_events_reception_date'\n  ) THEN\n    CREATE INDEX idx_events_reception_date ON events(reception_date);\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_indexes \n    WHERE tablename = 'events' \n    AND indexname = 'idx_events_venue_type'\n  ) THEN\n    CREATE INDEX idx_events_venue_type ON events(venue_type);\n  END IF;\n\nEND $$;\n\n-- Create a function to migrate existing events to new structure\nCREATE OR REPLACE FUNCTION migrate_existing_events_to_venues()\nRETURNS void AS $$\nBEGIN\n  -- Update existing events to use the new structure\n  -- If they have a location, consider it as ceremony venue for single venue type\n  UPDATE events \n  SET \n    venue_type = 'single',\n    ceremony_venue = COALESCE(location, '{\"name\": \"\", \"address\": \"\", \"city\": \"\", \"postalCode\": \"\"}'),\n    ceremony_date = date::DATE,\n    ceremony_time = date::TIME\n  WHERE venue_type IS NULL AND location IS NOT NULL;\n\n  -- For events without location, set default structure\n  UPDATE events \n  SET \n    venue_type = 'single',\n    ceremony_venue = '{\"name\": \"\", \"address\": \"\", \"city\": \"\", \"postalCode\": \"\"}',\n    ceremony_date = date::DATE,\n    ceremony_time = date::TIME\n  WHERE venue_type IS NULL AND location IS NULL;\n\n  -- Log the migration\n  RAISE NOTICE 'Migrated % events to new venue structure', \n    (SELECT COUNT(*) FROM events WHERE venue_type IS NOT NULL);\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Execute the migration function\nSELECT migrate_existing_events_to_venues();\n\n-- Add comments for documentation\nCOMMENT ON COLUMN events.ceremony_venue IS 'JSONB object containing ceremony venue details: {name, address, city, postalCode, coordinates}';\nCOMMENT ON COLUMN events.reception_venue IS 'JSONB object containing reception venue details: {name, address, city, postalCode, coordinates}';\nCOMMENT ON COLUMN events.ceremony_date IS 'Date of the ceremony (separate from time for better UI/UX)';\nCOMMENT ON COLUMN events.ceremony_time IS 'Time of the ceremony';\nCOMMENT ON COLUMN events.reception_date IS 'Date of the reception (separate from time for better UI/UX)';\nCOMMENT ON COLUMN events.reception_time IS 'Time of the reception';\nCOMMENT ON COLUMN events.venue_type IS 'Type of venue: single (same venue for ceremony and reception) or separate';\n\n-- Create validation function\nCREATE OR REPLACE FUNCTION validate_event_venues()\nRETURNS trigger AS $$\nBEGIN\n  -- Validate venue_type and corresponding data\n  IF NEW.venue_type = 'separate' THEN\n    -- For separate venues, both ceremony and reception venues must be provided\n    IF NEW.ceremony_venue IS NULL OR NEW.reception_venue IS NULL THEN\n      RAISE EXCEPTION 'Both ceremony_venue and reception_venue must be provided for separate venue type';\n    END IF;\n    \n    IF NEW.ceremony_date IS NULL OR NEW.reception_date IS NULL THEN\n      RAISE EXCEPTION 'Both ceremony_date and reception_date must be provided for separate venue type';\n    END IF;\n  ELSE\n    -- For single venue, ceremony venue is required, reception venue should be null\n    IF NEW.ceremony_venue IS NULL THEN\n      RAISE EXCEPTION 'ceremony_venue is required for single venue type';\n    END IF;\n    \n    IF NEW.ceremony_date IS NULL THEN\n      RAISE EXCEPTION 'ceremony_date is required';\n    END IF;\n  END IF;\n  \n  RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Create trigger for validation\nDO $$\nBEGIN\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_trigger WHERE tgname = 'validate_event_venues_trigger'\n  ) THEN\n    CREATE TRIGGER validate_event_venues_trigger\n      BEFORE INSERT OR UPDATE ON events\n      FOR EACH ROW EXECUTE FUNCTION validate_event_venues();\n  END IF;\nEND $$;","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":"Applying migration: 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 09:52:33"}
{"level":"info","message":" Migration applied successfully: 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:52:33"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 09:52:33"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"Found 46 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"\n Migration to apply (029_add_ceremony_reception_venues.sql):","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"-- Migration 029: Add ceremony and reception venues support\n-- Enhances the events table to support separate venues for ceremony and reception\n\nDO $$ \nBEGIN\n  -- Add new columns for ceremony and reception venues\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'ceremony_venue'\n  ) THEN\n    ALTER TABLE events ADD COLUMN ceremony_venue JSONB;\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'reception_venue'\n  ) THEN\n    ALTER TABLE events ADD COLUMN reception_venue JSONB;\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'ceremony_date'\n  ) THEN\n    ALTER TABLE events ADD COLUMN ceremony_date DATE;\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'ceremony_time'\n  ) THEN\n    ALTER TABLE events ADD COLUMN ceremony_time TIME;\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'reception_date'\n  ) THEN\n    ALTER TABLE events ADD COLUMN reception_date DATE;\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'reception_time'\n  ) THEN\n    ALTER TABLE events ADD COLUMN reception_time TIME;\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'venue_type'\n  ) THEN\n    ALTER TABLE events ADD COLUMN venue_type VARCHAR(20) DEFAULT 'single' \n    CHECK (venue_type IN ('single', 'separate'));\n  END IF;\n\n  -- Add indexes for performance\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_indexes \n    WHERE tablename = 'events' \n    AND indexname = 'idx_events_ceremony_date'\n  ) THEN\n    CREATE INDEX idx_events_ceremony_date ON events(ceremony_date);\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_indexes \n    WHERE tablename = 'events' \n    AND indexname = 'idx_events_reception_date'\n  ) THEN\n    CREATE INDEX idx_events_reception_date ON events(reception_date);\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_indexes \n    WHERE tablename = 'events' \n    AND indexname = 'idx_events_venue_type'\n  ) THEN\n    CREATE INDEX idx_events_venue_type ON events(venue_type);\n  END IF;\n\nEND $$;\n\n-- Create a function to migrate existing events to new structure\nCREATE OR REPLACE FUNCTION migrate_existing_events_to_venues()\nRETURNS void AS $$\nBEGIN\n  -- Update existing events to use the new structure\n  -- If they have a location, consider it as ceremony venue for single venue type\n  UPDATE events \n  SET \n    venue_type = 'single',\n    ceremony_venue = COALESCE(location, '{\"name\": \"\", \"address\": \"\", \"city\": \"\", \"postalCode\": \"\"}'),\n    ceremony_date = date::DATE,\n    ceremony_time = date::TIME\n  WHERE venue_type IS NULL AND location IS NOT NULL;\n\n  -- For events without location, set default structure\n  UPDATE events \n  SET \n    venue_type = 'single',\n    ceremony_venue = '{\"name\": \"\", \"address\": \"\", \"city\": \"\", \"postalCode\": \"\"}',\n    ceremony_date = date::DATE,\n    ceremony_time = date::TIME\n  WHERE venue_type IS NULL AND location IS NULL;\n\n  -- Log the migration\n  RAISE NOTICE 'Migrated % events to new venue structure', \n    (SELECT COUNT(*) FROM events WHERE venue_type IS NOT NULL);\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Execute the migration function\nSELECT migrate_existing_events_to_venues();\n\n-- Add comments for documentation\nCOMMENT ON COLUMN events.ceremony_venue IS 'JSONB object containing ceremony venue details: {name, address, city, postalCode, coordinates}';\nCOMMENT ON COLUMN events.reception_venue IS 'JSONB object containing reception venue details: {name, address, city, postalCode, coordinates}';\nCOMMENT ON COLUMN events.ceremony_date IS 'Date of the ceremony (separate from time for better UI/UX)';\nCOMMENT ON COLUMN events.ceremony_time IS 'Time of the ceremony';\nCOMMENT ON COLUMN events.reception_date IS 'Date of the reception (separate from time for better UI/UX)';\nCOMMENT ON COLUMN events.reception_time IS 'Time of the reception';\nCOMMENT ON COLUMN events.venue_type IS 'Type of venue: single (same venue for ceremony and reception) or separate';\n\n-- Create validation function\nCREATE OR REPLACE FUNCTION validate_event_venues()\nRETURNS trigger AS $$\nBEGIN\n  -- Validate venue_type and corresponding data\n  IF NEW.venue_type = 'separate' THEN\n    -- For separate venues, both ceremony and reception venues must be provided\n    IF NEW.ceremony_venue IS NULL OR NEW.reception_venue IS NULL THEN\n      RAISE EXCEPTION 'Both ceremony_venue and reception_venue must be provided for separate venue type';\n    END IF;\n    \n    IF NEW.ceremony_date IS NULL OR NEW.reception_date IS NULL THEN\n      RAISE EXCEPTION 'Both ceremony_date and reception_date must be provided for separate venue type';\n    END IF;\n  ELSE\n    -- For single venue, ceremony venue is required, reception venue should be null\n    IF NEW.ceremony_venue IS NULL THEN\n      RAISE EXCEPTION 'ceremony_venue is required for single venue type';\n    END IF;\n    \n    IF NEW.ceremony_date IS NULL THEN\n      RAISE EXCEPTION 'ceremony_date is required';\n    END IF;\n  END IF;\n  \n  RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Create trigger for validation\nDO $$\nBEGIN\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_trigger WHERE tgname = 'validate_event_venues_trigger'\n  ) THEN\n    CREATE TRIGGER validate_event_venues_trigger\n      BEFORE INSERT OR UPDATE ON events\n      FOR EACH ROW EXECUTE FUNCTION validate_event_venues();\n  END IF;\nEND $$;","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":"Applying migration: 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 09:55:40"}
{"level":"info","message":" Migration applied successfully: 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:40"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 09:55:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 09:55:47"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 09:55:47"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:47"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 09:55:47"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 09:55:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 09:55:49"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:49"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 09:55:51"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 09:55:51"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 09:55:52"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"Found 47 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"\n Migration to apply (030_add_event_schedule.sql):","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"-- Migration 030: Add simple event schedule support\n-- Replaces complex venue system with simple event schedule steps\n\nDO $$ \nBEGIN\n  -- Add event_schedule column to store the program steps\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'event_schedule'\n  ) THEN\n    ALTER TABLE events ADD COLUMN event_schedule JSONB DEFAULT '[]';\n  END IF;\n\n  -- Add index for performance on schedule queries\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_indexes \n    WHERE tablename = 'events' \n    AND indexname = 'idx_events_schedule'\n  ) THEN\n    CREATE INDEX idx_events_schedule ON events USING GIN (event_schedule);\n  END IF;\n\nEND $$;\n\n-- Create function to migrate existing venue data to schedule format\nCREATE OR REPLACE FUNCTION migrate_venues_to_schedule()\nRETURNS void AS $$\nBEGIN\n  -- Convert existing venue data to simple schedule format\n  UPDATE events \n  SET event_schedule = (\n    SELECT jsonb_agg(\n      jsonb_build_object(\n        'id', gen_random_uuid()::text,\n        'name', step_name,\n        'location', step_location,\n        'time', step_time\n      )\n    )\n    FROM (\n      VALUES \n        ('Crmonie', \n         COALESCE(ceremony_venue->>'name', ceremony_venue->>'address', location->>'address', 'Lieu non dfini'),\n         COALESCE(ceremony_time::text, '14:00')),\n        ('Rception',\n         COALESCE(reception_venue->>'name', reception_venue->>'address', ceremony_venue->>'address', location->>'address', 'Lieu non dfini'),\n         COALESCE(reception_time::text, '18:00'))\n    ) AS schedule_data(step_name, step_location, step_time)\n    WHERE step_location != 'Lieu non dfini' OR step_name = 'Crmonie'\n  )\n  WHERE event_schedule = '[]' \n  AND (ceremony_venue IS NOT NULL OR location IS NOT NULL);\n\n  -- For events without venue data, set default schedule\n  UPDATE events \n  SET event_schedule = '[\n    {\"id\": \"1\", \"name\": \"Crmonie\", \"location\": \"\", \"time\": \"14:00\"},\n    {\"id\": \"2\", \"name\": \"Rception\", \"location\": \"\", \"time\": \"18:00\"}\n  ]'::jsonb\n  WHERE event_schedule = '[]';\n\n  RAISE NOTICE 'Migrated % events to new schedule format', \n    (SELECT COUNT(*) FROM events WHERE event_schedule != '[]');\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Execute the migration\nSELECT migrate_venues_to_schedule();\n\n-- Add validation function for schedule\nCREATE OR REPLACE FUNCTION validate_event_schedule()\nRETURNS trigger AS $$\nBEGIN\n  -- Validate that schedule is a proper JSON array\n  IF NEW.event_schedule IS NOT NULL THEN\n    -- Check if it's an array\n    IF jsonb_typeof(NEW.event_schedule) != 'array' THEN\n      RAISE EXCEPTION 'event_schedule must be a JSON array';\n    END IF;\n    \n    -- Validate each schedule item has required fields\n    IF EXISTS (\n      SELECT 1 \n      FROM jsonb_array_elements(NEW.event_schedule) as schedule_item\n      WHERE NOT (schedule_item ? 'name' AND schedule_item ? 'location' AND schedule_item ? 'time')\n    ) THEN\n      RAISE EXCEPTION 'Each schedule item must have name, location, and time fields';\n    END IF;\n  END IF;\n  \n  RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Create trigger for schedule validation\nDO $$\nBEGIN\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_trigger WHERE tgname = 'validate_event_schedule_trigger'\n  ) THEN\n    CREATE TRIGGER validate_event_schedule_trigger\n      BEFORE INSERT OR UPDATE ON events\n      FOR EACH ROW EXECUTE FUNCTION validate_event_schedule();\n  END IF;\nEND $$;\n\n-- Add comment for documentation\nCOMMENT ON COLUMN events.event_schedule IS 'JSONB array containing event schedule steps: [{\"id\": \"1\", \"name\": \"Crmonie\", \"location\": \"glise\", \"time\": \"14:00\"}]';\n\n-- Clean up old venue columns (optional - comment out if you want to keep them)\n/*\nDO $$\nBEGIN\n  -- Remove old venue columns if they exist\n  IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'ceremony_venue') THEN\n    ALTER TABLE events DROP COLUMN IF EXISTS ceremony_venue;\n  END IF;\n  IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'reception_venue') THEN\n    ALTER TABLE events DROP COLUMN IF EXISTS reception_venue;\n  END IF;\n  IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'ceremony_date') THEN\n    ALTER TABLE events DROP COLUMN IF EXISTS ceremony_date;\n  END IF;\n  IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'ceremony_time') THEN\n    ALTER TABLE events DROP COLUMN IF EXISTS ceremony_time;\n  END IF;\n  IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'reception_date') THEN\n    ALTER TABLE events DROP COLUMN IF EXISTS reception_date;\n  END IF;\n  IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'reception_time') THEN\n    ALTER TABLE events DROP COLUMN IF EXISTS reception_time;\n  END IF;\n  IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'venue_type') THEN\n    ALTER TABLE events DROP COLUMN IF EXISTS venue_type;\n  END IF;\nEND $$;\n*/","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":"Applying migration: 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:00:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:00:04"}
{"0":"c","1":"e","10":"e","11":"n","12":"u","13":"e","14":" ","15":"i","16":"s","17":" ","18":"r","19":"e","2":"r","20":"q","21":"u","22":"i","23":"r","24":"e","25":"d","26":" ","27":"f","28":"o","29":"r","3":"e","30":" ","31":"s","32":"i","33":"n","34":"g","35":"l","36":"e","37":" ","38":"v","39":"e","4":"m","40":"n","41":"u","42":"e","43":" ","44":"t","45":"y","46":"p","47":"e","5":"o","6":"n","7":"y","8":"_","9":"v","level":"error","message":" Failed to apply migration 030_add_event_schedule.sql:","service":"qrevent-backend","timestamp":"2026-02-08 10:00:04"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-08 10:00:04"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 10:01:27"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 10:01:28"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:28"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:01:28"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 10:01:28"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 10:01:28"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 10:01:28"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:28"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:01:28"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 10:01:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:01:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:01:29"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:30"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:30"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:30"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:01:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:01:32"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:32"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:32"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:01:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 10:01:33"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 10:01:33"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:01:33"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"Found 48 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"\n Migration to apply (031_add_simple_event_schedule.sql):","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"-- Migration 031: Add simple event schedule support\n-- Simple approach: just add event_schedule column\n\nDO $$ \nBEGIN\n  -- Add event_schedule column to store the program steps\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'event_schedule'\n  ) THEN\n    ALTER TABLE events ADD COLUMN event_schedule JSONB DEFAULT '[]';\n    RAISE NOTICE 'Added event_schedule column';\n  ELSE\n    RAISE NOTICE 'Column event_schedule already exists';\n  END IF;\n\n  -- Add index for performance on schedule queries\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_indexes \n    WHERE tablename = 'events' \n    AND indexname = 'idx_events_schedule'\n  ) THEN\n    CREATE INDEX idx_events_schedule ON events USING GIN (event_schedule);\n    RAISE NOTICE 'Created index on event_schedule';\n  ELSE\n    RAISE NOTICE 'Index idx_events_schedule already exists';\n  END IF;\n\nEND $$;\n\n-- Set default schedule for existing events\nUPDATE events \nSET event_schedule = '[\n  {\"id\": \"1\", \"name\": \"Crmonie\", \"location\": \"\", \"time\": \"14:00\"},\n  {\"id\": \"2\", \"name\": \"Rception\", \"location\": \"\", \"time\": \"18:00\"}\n]'::jsonb\nWHERE event_schedule = '[]' OR event_schedule IS NULL;\n\n-- Add comment for documentation\nCOMMENT ON COLUMN events.event_schedule IS 'JSONB array containing event schedule steps: [{\"id\": \"1\", \"name\": \"Crmonie\", \"location\": \"glise\", \"time\": \"14:00\"}]';","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":"Applying migration: 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:01:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:01:45"}
{"0":"c","1":"e","10":"e","11":"n","12":"u","13":"e","14":" ","15":"i","16":"s","17":" ","18":"r","19":"e","2":"r","20":"q","21":"u","22":"i","23":"r","24":"e","25":"d","26":" ","27":"f","28":"o","29":"r","3":"e","30":" ","31":"s","32":"i","33":"n","34":"g","35":"l","36":"e","37":" ","38":"v","39":"e","4":"m","40":"n","41":"u","42":"e","43":" ","44":"t","45":"y","46":"p","47":"e","5":"o","6":"n","7":"y","8":"_","9":"v","level":"error","message":" Failed to apply migration 031_add_simple_event_schedule.sql:","service":"qrevent-backend","timestamp":"2026-02-08 10:01:45"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-08 10:01:45"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 10:07:08"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 10:07:08"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 10:29:15","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 10:29:16","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"Found 49 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"\n Migration to apply (032_add_partner_names_and_schedule.sql):","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"-- Migration 032: Add partner names and ensure event schedule is properly configured\n-- Adds partner1_name, partner2_name, and ensures event_schedule column exists\n\nDO $$ \nBEGIN\n  -- Add partner names columns\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'partner1_name'\n  ) THEN\n    ALTER TABLE events ADD COLUMN partner1_name VARCHAR(100);\n    RAISE NOTICE 'Added partner1_name column';\n  ELSE\n    RAISE NOTICE 'Column partner1_name already exists';\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'partner2_name'\n  ) THEN\n    ALTER TABLE events ADD COLUMN partner2_name VARCHAR(100);\n    RAISE NOTICE 'Added partner2_name column';\n  ELSE\n    RAISE NOTICE 'Column partner2_name already exists';\n  END IF;\n\n  -- Ensure event_schedule column exists\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'event_schedule'\n  ) THEN\n    ALTER TABLE events ADD COLUMN event_schedule JSONB DEFAULT '[]';\n    RAISE NOTICE 'Added event_schedule column';\n  ELSE\n    RAISE NOTICE 'Column event_schedule already exists';\n  END IF;\n\n  -- Add index for performance on schedule queries\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_indexes \n    WHERE tablename = 'events' \n    AND indexname = 'idx_events_schedule'\n  ) THEN\n    CREATE INDEX idx_events_schedule ON events USING GIN (event_schedule);\n    RAISE NOTICE 'Created index on event_schedule';\n  ELSE\n    RAISE NOTICE 'Index idx_events_schedule already exists';\n  END IF;\n\n  -- Add indexes for partner names\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_indexes \n    WHERE tablename = 'events' \n    AND indexname = 'idx_events_partner1_name'\n  ) THEN\n    CREATE INDEX idx_events_partner1_name ON events(partner1_name);\n    RAISE NOTICE 'Created index on partner1_name';\n  ELSE\n    RAISE NOTICE 'Index idx_events_partner1_name already exists';\n  END IF;\n\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_indexes \n    WHERE tablename = 'events' \n    AND indexname = 'idx_events_partner2_name'\n  ) THEN\n    CREATE INDEX idx_events_partner2_name ON events(partner2_name);\n    RAISE NOTICE 'Created index on partner2_name';\n  ELSE\n    RAISE NOTICE 'Index idx_events_partner2_name already exists';\n  END IF;\n\nEND $$;\n\n-- Set default schedule for existing events that don't have one\nUPDATE events \nSET event_schedule = '[\n  {\"id\": \"1\", \"name\": \"Crmonie\", \"location\": \"\", \"time\": \"14:00\"},\n  {\"id\": \"2\", \"name\": \"Rception\", \"location\": \"\", \"time\": \"18:00\"}\n]'::jsonb\nWHERE event_schedule = '[]' OR event_schedule IS NULL;\n\n-- Migrate existing bride_name and groom_name to new partner fields if they exist\nDO $$\nBEGIN\n  -- Check if bride_name column exists and migrate data\n  IF EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' AND column_name = 'bride_name'\n  ) THEN\n    UPDATE events \n    SET partner2_name = bride_name \n    WHERE bride_name IS NOT NULL AND partner2_name IS NULL;\n    \n    RAISE NOTICE 'Migrated bride_name to partner2_name';\n  END IF;\n\n  -- Check if groom_name column exists and migrate data\n  IF EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' AND column_name = 'groom_name'\n  ) THEN\n    UPDATE events \n    SET partner1_name = groom_name \n    WHERE groom_name IS NOT NULL AND partner1_name IS NULL;\n    \n    RAISE NOTICE 'Migrated groom_name to partner1_name';\n  END IF;\nEND $$;\n\n-- Add comments for documentation\nCOMMENT ON COLUMN events.partner1_name IS 'Nom du premier partenaire (mari)';\nCOMMENT ON COLUMN events.partner2_name IS 'Nom du second partenaire (marie)';\nCOMMENT ON COLUMN events.event_schedule IS 'JSONB array containing event schedule steps: [{\"id\": \"1\", \"name\": \"Crmonie\", \"location\": \"glise\", \"time\": \"14:00\"}]';","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":"Applying migration: 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:31:11"}
{"0":"c","1":"e","10":"e","11":"n","12":"u","13":"e","14":" ","15":"i","16":"s","17":" ","18":"r","19":"e","2":"r","20":"q","21":"u","22":"i","23":"r","24":"e","25":"d","26":" ","27":"f","28":"o","29":"r","3":"e","30":" ","31":"s","32":"i","33":"n","34":"g","35":"l","36":"e","37":" ","38":"v","39":"e","4":"m","40":"n","41":"u","42":"e","43":" ","44":"t","45":"y","46":"p","47":"e","5":"o","6":"n","7":"y","8":"_","9":"v","level":"error","message":" Failed to apply migration 032_add_partner_names_and_schedule.sql:","service":"qrevent-backend","timestamp":"2026-02-08 10:31:12"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-08 10:31:12"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 10:31:29"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 10:31:30"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:30"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:31:30"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 10:31:30"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 10:31:29"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 10:31:30"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:30"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:31:30"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 10:31:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:31:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:31:31"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:32"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:32"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:32"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:31:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:31:34"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:34"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:31:34"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:31:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 10:31:35"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 10:31:35"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:31:35"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 10:32:34"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 10:32:34"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:32:34"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:32:34"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 10:32:34"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 10:32:34"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 10:32:34"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:32:34"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:32:34"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 10:32:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:32:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:32:36"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:32:37"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:32:37"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:32:37"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:32:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:32:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:32:39"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:32:39"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:32:39"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:32:39"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:32:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 10:32:39"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 10:32:39"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 10:32:58"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 10:32:59"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:32:59"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:32:59"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 10:32:59"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 10:32:59"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 10:32:59"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:32:59"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:32:59"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 10:32:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:33:01"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:33:01"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:01"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:01"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:33:03"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:33:03"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:33:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 10:33:03"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 10:33:03"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:04"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:33:04"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 10:33:32"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 10:33:33"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:33"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:33:33"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 10:33:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:33:35"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:35"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:33:37"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:37"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:33:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 10:33:38"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 10:33:38"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"Found 50 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"\n Migration to apply (033_simple_add_columns.sql):","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"-- Migration 033: Simple add columns (without validation conflicts)\n-- Adds partner1_name, partner2_name, and event_schedule columns\n\n-- Add partner1_name column\nDO $$ \nBEGIN\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'partner1_name'\n  ) THEN\n    ALTER TABLE events ADD COLUMN partner1_name VARCHAR(100);\n  END IF;\nEND $$;\n\n-- Add partner2_name column\nDO $$ \nBEGIN\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'partner2_name'\n  ) THEN\n    ALTER TABLE events ADD COLUMN partner2_name VARCHAR(100);\n  END IF;\nEND $$;\n\n-- Add event_schedule column\nDO $$ \nBEGIN\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns \n    WHERE table_name = 'events' \n    AND column_name = 'event_schedule'\n  ) THEN\n    ALTER TABLE events ADD COLUMN event_schedule JSONB DEFAULT '[]';\n  END IF;\nEND $$;\n\n-- Create indexes\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'idx_events_schedule') THEN\n    CREATE INDEX idx_events_schedule ON events USING GIN (event_schedule);\n  END IF;\n  \n  IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'idx_events_partner1') THEN\n    CREATE INDEX idx_events_partner1 ON events(partner1_name);\n  END IF;\n  \n  IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'idx_events_partner2') THEN\n    CREATE INDEX idx_events_partner2 ON events(partner2_name);\n  END IF;\nEND $$;","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":"Applying migration: 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:33:57"}
{"level":"info","message":" Migration applied successfully: 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:33:58"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 10:33:58"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-08 10:37:54"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-08 10:37:54","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 10:37:55","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 10:37:56","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 10:38:52"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 10:38:52"}
{"code":"EPIPE","errno":-32,"level":"error","message":"Uncaught Exception: write EPIPE","service":"qrevent-backend","stack":"Error: write EPIPE\n    at afterWriteDispatched (node:internal/stream_base_commons:159:15)\n    at writeGeneric (node:internal/stream_base_commons:150:3)\n    at Socket._writeGeneric (node:net:971:11)\n    at Socket._write (node:net:983:8)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at Writable.write (node:internal/streams/writable:510:10)\n    at console.value (node:internal/console/constructor:298:16)\n    at console.warn (node:internal/console/constructor:405:26)\n    at /home/kevin/Qrevent/backendqrevent/routes/budget.js:500:21","syscall":"write","timestamp":"2026-02-08 10:40:19"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 10:51:08"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 10:51:08"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:51:08"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:51:08"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 10:51:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:51:11"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:51:11"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:51:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 10:51:13"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 10:51:13"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 10:51:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 10:51:13"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 10:51:13"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 10:52:35"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 10:52:35"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:04:07","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:40:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:41:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:42:25","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:42:26","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:43:48","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:45:00","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:46:01","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:47:03","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:48:04","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:48:46","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:48:47","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:53:16","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:53:17","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:53:58","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 11:53:59","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:00:55","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:00:57","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:04:10","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:04:11","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:23:08","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:23:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:28:52","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:28:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:30:42","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:30:43","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:35:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:35:10","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:35:22","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:35:23","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:36:31","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:36:32","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:37:45","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:37:46","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:38:05","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:38:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:38:14","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:38:15","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:45:28","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:45:29","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:49:58","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:49:59","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:52:12","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:52:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:53:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:53:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:55:47","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:55:48","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:56:08","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:56:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:58:04","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:58:05","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:58:15","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:58:17","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:59:42","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:59:43","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:59:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 12:59:51","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:01:04","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:01:05","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 13:03:53"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 13:03:53"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 13:03:53"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 13:03:53"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 13:03:53"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 13:03:56"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 13:03:56"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 13:03:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 13:03:59"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 13:03:59"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 13:03:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 13:03:59"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 13:03:59"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 13:04:21"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 13:04:21"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:04:22","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:04:23","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-08 13:05:21","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-08 13:05:21"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-08 13:05:32","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-08 13:05:40","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36"}
{"error":"Invalid refresh token","ip":"::1","level":"warn","message":"Failed to refresh access token via endpoint","service":"qrevent-backend","timestamp":"2026-02-08 13:05:51","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:10:51","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:10:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:11:05","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:11:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:11:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:11:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:12:48","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:12:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:13:15","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:13:16","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:13:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:13:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:14:05","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:14:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:14:59","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:15:00","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:15:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:15:17","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:15:18","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:15:35","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:15:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:16:12","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:16:14","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:18:59","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:18:59","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:19:03","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:19:04","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:20:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:20:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:44:56","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:58:15","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:58:16","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:58:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 13:58:39","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:00:39","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:00:40","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:01:27","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:01:29","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:53:03","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:53:04","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:54:29","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:54:30","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:54:41","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:54:42","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:54:43","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:54:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:54:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:54:51","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:55:04","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:55:05","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:55:12","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:55:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:55:32","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:55:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:55:45","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:55:46","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:56:20","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:56:21","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:56:56","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 14:56:57","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:00:45","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:00:47","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:05:03","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:05:04","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:07:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:07:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:08:01","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:08:02","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:08:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:08:10","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:08:46","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:08:47","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:08:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 15:08:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:27:10","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:27:11","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:30:08","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:30:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:31:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:31:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:31:59","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:32:00","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:32:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:32:07","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:34:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:34:34","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"body":{},"error_message":"Invalid JSON","error_stack":"Error: Invalid JSON\n    at verify (/home/kevin/Qrevent/backendqrevent/server.js:200:13)\n    at /home/kevin/Qrevent/backendqrevent/node_modules/body-parser/lib/read.js:111:9\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/home/kevin/Qrevent/backendqrevent/node_modules/raw-body/index.js:238:16)\n    at done (/home/kevin/Qrevent/backendqrevent/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/home/kevin/Qrevent/backendqrevent/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/games/ed5961b6-ddb5-45cc-9d8f-9f48d4e21145/qr-code","service":"qrevent-backend","timestamp":"2026-02-08 17:34:48"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:36:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:36:55","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:37:55","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:37:56","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:39:10","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:40:10","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:40:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:40:19","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:40:20","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:40:41","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:40:42","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:40:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:40:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:41:25","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:41:26","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:43:27","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:43:28","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:44:41","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:44:43","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:44:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:44:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:45:22","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:45:23","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"body":{},"error_message":"Invalid JSON","error_stack":"Error: Invalid JSON\n    at verify (/home/kevin/Qrevent/backendqrevent/server.js:200:13)\n    at /home/kevin/Qrevent/backendqrevent/node_modules/body-parser/lib/read.js:111:9\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/home/kevin/Qrevent/backendqrevent/node_modules/raw-body/index.js:238:16)\n    at done (/home/kevin/Qrevent/backendqrevent/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/home/kevin/Qrevent/backendqrevent/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/games/92a6e24b-90ef-47d8-bd5e-770cfa32b2d4/qr-code","service":"qrevent-backend","timestamp":"2026-02-08 17:46:03"}
{"body":{},"error_message":"Invalid JSON","error_stack":"Error: Invalid JSON\n    at verify (/home/kevin/Qrevent/backendqrevent/server.js:200:13)\n    at /home/kevin/Qrevent/backendqrevent/node_modules/body-parser/lib/read.js:111:9\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/home/kevin/Qrevent/backendqrevent/node_modules/raw-body/index.js:238:16)\n    at done (/home/kevin/Qrevent/backendqrevent/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/home/kevin/Qrevent/backendqrevent/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/games/cb81d837-684f-425f-8112-f87ca73b7f9f/qr-code","service":"qrevent-backend","timestamp":"2026-02-08 17:46:05"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:49:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:49:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Could not find the table 'public.game_leaderboard' in the schema cache","level":"error","message":"Error fetching full leaderboard:","service":"qrevent-backend","timestamp":"2026-02-08 17:50:11"}
{"body":{"status":"paused"},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backendqrevent/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PATCH","path":"/api/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/games/92a6e24b-90ef-47d8-bd5e-770cfa32b2d4/status","service":"qrevent-backend","timestamp":"2026-02-08 17:50:11"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:50:34","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:50:35","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:51:08","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:51:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:51:20","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:51:21","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:51:30","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:51:31","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:51:59","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:52:00","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:54:22","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:54:23","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:55:07","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:55:08","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:59:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 17:59:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:03:02"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:03:02"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:03:02"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:03:02"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:03:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:03:05"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:03:05"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:03:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:03:08"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:03:08"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:03:08"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:03:08"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:03:08"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:03:33"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:03:33"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:03:33"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:03:33"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:03:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:03:36"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:03:36"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:03:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:03:37"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:03:38"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:03:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:03:38"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:03:38"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:04:05"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:04:05"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:04:05"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:04:05"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:04:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:04:07"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:04:08"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:04:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:04:10"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:04:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:04:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:04:11"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:04:11"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:06:35","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:06:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:09:14","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:09:15","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:13:11"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:13:11"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:13:11"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:13:11"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:13:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:13:13"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:13:14"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:13:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:13:15"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:13:15"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:13:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:13:16"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:13:16"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:13:30"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:13:30"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:13:30"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:13:30"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:13:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:13:31"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:13:32"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:13:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:13:34"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:13:35"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:13:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:13:35"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:13:35"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:14:13"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:14:14"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:14:14"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:14:14"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:14:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:14:16"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:14:16"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:14:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:14:19"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:14:19"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:14:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:14:20"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:14:20"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:19:17","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:19:18","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 18:19:27"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 18:19:27"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:19:28","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:19:29","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Could not find the table 'public.game_leaderboard' in the schema cache","level":"error","message":"Error fetching full leaderboard:","service":"qrevent-backend","timestamp":"2026-02-08 18:19:34"}
{"error":"Could not find the table 'public.game_leaderboard' in the schema cache","level":"error","message":"Error fetching full leaderboard:","service":"qrevent-backend","timestamp":"2026-02-08 18:19:36"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:21:16"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:21:16"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:21:16"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:21:16"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:21:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:21:18"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:21:18"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:21:18"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:21:20"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:21:20"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:21:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:21:20"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:21:20"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:22:26"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:22:26"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:22:26"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:22:26"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:22:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:22:28"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:22:28"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:22:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:22:30"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:22:30"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:22:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:22:31"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:22:31"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 18:23:10"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 18:23:10"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:23:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:23:55","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:24:05","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:24:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:24:35","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:24:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:28:51"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:28:51"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:28:51"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:28:51"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:28:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:28:53"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:28:54"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:28:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:28:56"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:28:56"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:28:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:28:57"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:28:57"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:29:31"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:29:31"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:29:31"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:29:31"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:29:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:29:33"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:29:34"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:29:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:29:35"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:29:36"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:29:36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:29:36"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:29:36"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:30:07"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:30:07"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:30:07"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:30:07"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:30:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:30:09"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:30:09"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:30:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:30:12"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:30:13"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:30:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:30:13"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:30:13"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:30:51"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:30:51"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:30:51"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:30:51"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:30:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:30:53"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:30:53"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:30:53"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:30:56"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:30:56"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:30:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:30:56"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:30:56"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:31:08"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:31:08"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:31:08"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:31:08"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:31:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:31:10"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:31:10"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:31:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:31:13"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:31:13"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:31:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:31:14"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:31:14"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:32:05","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:32:19","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:33:08","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:33:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:38:44","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:38:45","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:40:20"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:40:20"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:40:20"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:40:20"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:40:20"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:40:21"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:40:22"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:40:22"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:40:23"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:40:24"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:40:24"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:40:24"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:40:24"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:41:35"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:41:36"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:41:36"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:41:36"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:41:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:41:38"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:41:38"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:41:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:41:40"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:41:40"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:41:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:41:40"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:41:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:42:47"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:42:47"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:42:47"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:42:47"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:42:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:42:49"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:42:49"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:42:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:42:51"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:42:52"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:42:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:42:52"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:42:52"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:43:05"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:43:06"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:43:06"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:43:06"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:43:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:43:07"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:43:08"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:43:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:43:10"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:43:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:43:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:43:11"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:43:11"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:45:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:45:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Could not find the table 'public.game_guest_access' in the schema cache","level":"error","message":"Error creating game access:","service":"qrevent-backend","timestamp":"2026-02-08 18:50:47"}
{"error":"Could not find the table 'public.game_guest_access' in the schema cache","level":"error","message":"Error generating game QR code:","service":"qrevent-backend","timestamp":"2026-02-08 18:50:47"}
{"error":"Could not find the table 'public.game_guest_access' in the schema cache","level":"error","message":"Error creating game access:","service":"qrevent-backend","timestamp":"2026-02-08 18:50:51"}
{"error":"Could not find the table 'public.game_guest_access' in the schema cache","level":"error","message":"Error generating game QR code:","service":"qrevent-backend","timestamp":"2026-02-08 18:50:51"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:53:06"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:53:07"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:53:07"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:53:07"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:53:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:53:09"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:53:09"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:53:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:53:11"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:53:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:53:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:53:11"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:53:11"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 18:53:55"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 18:53:55"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:53:56","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:53:57","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"insert or update on table \"game_guest_access\" violates foreign key constraint \"game_guest_access_qr_code_fkey\"","level":"error","message":"Error creating game access:","service":"qrevent-backend","timestamp":"2026-02-08 18:54:08"}
{"error":"insert or update on table \"game_guest_access\" violates foreign key constraint \"game_guest_access_qr_code_fkey\"","level":"error","message":"Error generating game QR code:","service":"qrevent-backend","timestamp":"2026-02-08 18:54:08"}
{"error":"insert or update on table \"game_guest_access\" violates foreign key constraint \"game_guest_access_qr_code_fkey\"","level":"error","message":"Error creating game access:","service":"qrevent-backend","timestamp":"2026-02-08 18:54:33"}
{"error":"insert or update on table \"game_guest_access\" violates foreign key constraint \"game_guest_access_qr_code_fkey\"","level":"error","message":"Error generating game QR code:","service":"qrevent-backend","timestamp":"2026-02-08 18:54:33"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:54:47"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:54:47"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:54:47"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:54:47"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:54:47"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:55:00"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:55:00"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:55:00"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:55:00"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:55:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:55:02"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:55:03"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:55:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:55:05"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:55:06"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:55:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:55:06"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:55:06"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 18:56:46"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 18:56:46"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:56:46","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 18:56:47","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 18:58:45"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 18:58:45"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:58:45"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:58:45"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 18:58:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:58:52"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:58:53"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:58:53"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 18:58:56"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 18:58:56"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 18:58:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 18:58:57"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 18:58:57"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 19:00:19"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 19:00:19"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:02:24"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:02:24"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:02:24"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:02:24"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:02:24"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:02:25"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:02:26"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:02:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:02:28"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:02:28"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:02:29"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:02:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:02:34","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:03:55"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:03:56"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:03:56"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:03:56"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:03:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:03:59"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:03:59"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:03:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:04:02"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:04:02"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:04:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:04:03"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:04:03"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:04:40","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:04:41","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 19:04:50"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 19:04:50"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:11:00"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:11:01"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:11:01"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:11:01"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:11:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:11:03"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:11:03"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:11:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:11:06"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:11:07"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:11:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:11:07"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:11:07"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 19:14:11"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 19:14:11"}
{"body":{"accessToken":"[REDACTED]","answers":{"0":{"answer":" l'universit","questionId":"7f8918ed-728f-4cc7-898b-f39f7f502cb1","timeSpent":6},"1":{"answer":"Le mari","questionId":"7c0b4123-837e-4164-8910-75e39c149d79","timeSpent":3},"2":{"answer":"1-3 ans","questionId":"22dd9670-f47d-4ce3-87e0-60cfa37cd685","timeSpent":20},"3":{"answer":"La Thalande","questionId":"74067975-075d-42df-8779-70ca15bb4890","timeSpent":1},"4":{"answer":"2028","questionId":"fb500025-4ced-4d62-b0d8-249797d3ad7c","timeSpent":1}},"playerName":"kevin"},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backendqrevent/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/games/public/f5650059-b81c-49b0-88b0-d71fa76b6784/play","service":"qrevent-backend","timestamp":"2026-02-08 19:15:59"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:19:18"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:19:18"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:19:18"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:19:18"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:19:18"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:19:20"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:19:20"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:19:20"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:19:22"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:19:22"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:19:23"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:19:25"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:19:25"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:19:25"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:19:25"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:19:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:19:27"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:19:27"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:19:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:19:30"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:19:30"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:19:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:19:46"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:19:46"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:19:46"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:19:46"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:19:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:19:49"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:19:49"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:19:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:19:52"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:19:52"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:19:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:19:53"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:19:53"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 19:21:53"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 19:21:53"}
{"body":{"accessToken":"[REDACTED]","answers":{"0":{"answer":"Dans un caf","questionId":"7f8918ed-728f-4cc7-898b-f39f7f502cb1","timeSpent":1},"1":{"answer":"La marie","questionId":"7c0b4123-837e-4164-8910-75e39c149d79","timeSpent":1},"2":{"answer":"Plus de 5 ans","questionId":"22dd9670-f47d-4ce3-87e0-60cfa37cd685","timeSpent":1},"3":{"answer":"Paris","questionId":"74067975-075d-42df-8779-70ca15bb4890","timeSpent":1},"4":{"answer":"2024","questionId":"fb500025-4ced-4d62-b0d8-249797d3ad7c","timeSpent":4}},"playerName":"kevin"},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backendqrevent/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/games/public/f5650059-b81c-49b0-88b0-d71fa76b6784/play","service":"qrevent-backend","timestamp":"2026-02-08 19:22:30"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:25:31"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:25:31"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:25:31"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:25:31"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:25:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:25:33"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:25:33"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:25:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:25:35"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:25:35"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:25:35"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:25:50"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:25:51"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:25:51"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:25:51"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:25:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:25:53"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:25:53"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:25:53"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:25:55"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:25:55"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:25:55"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:26:53"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:26:53"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:26:53"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:26:53"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:26:53"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:26:55"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:26:55"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:26:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:26:57"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:26:57"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:26:57"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:27:13"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:27:13"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:27:13"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:27:13"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:27:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:27:15"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:27:15"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:27:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:27:17"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:27:17"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:27:18"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:27:41"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:27:41"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:27:41"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:27:41"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:27:41"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:27:42"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:27:43"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:27:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:27:44"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:27:45"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:27:45"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:27:45"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:27:45"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 19:27:50"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 19:27:50"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:29:51","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:29:52","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:30:01","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:30:02","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:30:39","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:30:40","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:36:08"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:36:08"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:36:08"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:36:08"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:36:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:36:11"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:36:11"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:36:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:36:15"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:36:15"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:36:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:36:16"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:36:16"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-08 19:36:49"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-08 19:36:51","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:36:52","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:36:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"warn","message":" Invalid event ID in path construction","service":"qrevent-backend","timestamp":"2026-02-08 19:38:57"}
{"jobId":"thhbxn5jd2","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-08 19:38:57","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":null,"imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-08T15:38:57.742Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/a2f470b6-7f26-42cb-9a47-902e86b10ea8.webp","service":"qrevent-backend","timestamp":"2026-02-08T15:39:00.510Z"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 19:42:09"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 19:42:09"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:43:21","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:43:22","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:44:00"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:44:00"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:44:00"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:44:00"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:44:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:44:03"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:44:04"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:44:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:44:05"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:44:06"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:44:06"}
{"error":"null value in column \"guest_id\" of relation \"game_participations\" violates not-null constraint","level":"error","message":"Error playing game:","service":"qrevent-backend","timestamp":"2026-02-08 19:44:19"}
{"jobId":"errgi9ofpoj","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-08 19:45:25","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"stories/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-08T15:45:25.905Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/stories/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/ad829982-4c65-4883-b1e9-609093f7d28a.webp","service":"qrevent-backend","timestamp":"2026-02-08T15:45:28.168Z"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:45:56"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:45:57"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:45:57"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:45:57"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:45:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:45:58"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:45:59"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:45:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:46:00"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:46:01"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:46:01"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:46:11"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:46:12"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:46:12"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:46:12"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:46:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:46:15"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:46:15"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:46:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:46:17"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:46:18"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:46:18"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:46:52"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:46:52"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:46:52"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:46:52"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:46:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:46:55"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:46:56"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:46:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:46:58"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:46:59"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:46:59"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:46:59"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:46:59"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:47:38","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:47:39","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 19:47:51"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 19:47:51"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:48:28","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:48:29","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"new row for relation \"game_participations\" violates check constraint \"game_participations_player_type_check\"","level":"error","message":"Error playing game:","service":"qrevent-backend","timestamp":"2026-02-08 19:48:30"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:50:40"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:50:40"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:50:40"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:50:40"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:50:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:50:42"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:50:42"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:50:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:50:44"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:50:44"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:50:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:50:44"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:50:44"}
{"level":"info","message":"Checking database tables...","service":"qrevent-backend","timestamp":"2026-02-08 19:51:08"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table users:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:08"}
{"level":"warn","message":" Table missing: users","service":"qrevent-backend","timestamp":"2026-02-08 19:51:08"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table events:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:09"}
{"level":"warn","message":" Table missing: events","service":"qrevent-backend","timestamp":"2026-02-08 19:51:09"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table guests:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:09"}
{"level":"warn","message":" Table missing: guests","service":"qrevent-backend","timestamp":"2026-02-08 19:51:09"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table qr_codes:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:09"}
{"level":"warn","message":" Table missing: qr_codes","service":"qrevent-backend","timestamp":"2026-02-08 19:51:09"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table attendance:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:09"}
{"level":"warn","message":" Table missing: attendance","service":"qrevent-backend","timestamp":"2026-02-08 19:51:09"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table families:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:10"}
{"level":"warn","message":" Table missing: families","service":"qrevent-backend","timestamp":"2026-02-08 19:51:10"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table family_invitations:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:10"}
{"level":"warn","message":" Table missing: family_invitations","service":"qrevent-backend","timestamp":"2026-02-08 19:51:10"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table family_rsvp:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:10"}
{"level":"warn","message":" Table missing: family_rsvp","service":"qrevent-backend","timestamp":"2026-02-08 19:51:10"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table story_events:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:11"}
{"level":"warn","message":" Table missing: story_events","service":"qrevent-backend","timestamp":"2026-02-08 19:51:11"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table games:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:11"}
{"level":"warn","message":" Table missing: games","service":"qrevent-backend","timestamp":"2026-02-08 19:51:11"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table game_questions:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:11"}
{"level":"warn","message":" Table missing: game_questions","service":"qrevent-backend","timestamp":"2026-02-08 19:51:11"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table game_participations:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:12"}
{"level":"warn","message":" Table missing: game_participations","service":"qrevent-backend","timestamp":"2026-02-08 19:51:12"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table feedbacks:","service":"qrevent-backend","timestamp":"2026-02-08 19:51:12"}
{"jobId":"4wnopgi4c2p","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-08 19:51:17","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"folder":"stories/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05","imageUsage":"general","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-08T15:51:17.132Z","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/stories/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05/9cb2feea-5c8c-43ab-a200-e9914d61412b.webp","service":"qrevent-backend","timestamp":"2026-02-08T15:51:19.515Z"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:51:26"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:51:27"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:51:27"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:51:27"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:51:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:51:28"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:51:29"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:51:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:51:30"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:51:31"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:51:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:51:31"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:51:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:51:38"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:51:38"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:51:38"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:51:38"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:51:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:51:40"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:51:40"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:51:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:51:42"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:51:42"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:51:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:51:42"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:51:42"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 19:53:26"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 19:53:26"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:53:55","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:53:56","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:54:12","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:54:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"new row for relation \"game_participations\" violates check constraint \"game_participations_player_type_check\"","gameId":"f5650059-b81c-49b0-88b0-d71fa76b6784","guestEventId":"c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05","guestType":"public","level":"error","message":"Error playing game:","playerName":"kevin","service":"qrevent-backend","timestamp":"2026-02-08 19:54:33"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:54:34"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:54:35"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:54:35"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:54:35"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:54:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:54:37"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:54:37"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:54:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:54:39"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:54:40"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:54:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:54:40"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:54:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:54:52"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:54:52"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:54:52"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:54:52"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:54:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:54:54"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:54:54"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:54:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:54:57"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:54:57"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:54:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:54:57"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:54:57"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:55:00"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:55:00"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:00"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:55:01"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:55:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:55:02"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:02"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:55:04"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:04"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:55:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:55:05"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:55:05"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:55:21"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:55:21"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:21"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:55:21"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:55:21"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:55:23"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:23"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:55:25"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:25"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:55:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:55:25"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:55:25"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 19:55:40"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 19:55:40"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"Found 55 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:55:44"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:45"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 19:55:45"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"Found 55 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:55:55"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:55:56"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 19:55:56"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:56:46"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:56:46"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:56:46"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:56:46"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:56:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:56:48"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:56:48"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:56:48"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:56:50"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:56:50"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:56:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:56:51"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:56:51"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:57:36"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:57:36"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:57:36"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:57:36"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:57:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:57:38"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:57:39"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:57:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:57:41"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:57:41"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:57:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:57:41"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:57:41"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:57:59"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:57:59"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:57:59"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:57:59"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:57:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:58:01"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:58:02"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:58:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:58:04"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:58:04"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:58:04"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:58:04"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:58:04"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:58:31","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:58:32","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 19:58:48"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 19:58:48"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 19:59:11"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 19:59:11"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:59:11"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:59:11"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 19:59:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:59:13"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:59:13"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:59:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 19:59:16"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 19:59:16"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 19:59:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 19:59:16"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 19:59:16"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 19:59:56"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 19:59:56"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:59:57","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 19:59:58","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"new row for relation \"game_participations\" violates check constraint \"game_participations_player_type_check\"","gameId":"f5650059-b81c-49b0-88b0-d71fa76b6784","guestEventId":"c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05","guestType":"public","level":"error","message":"Error playing game:","playerName":"kevin rakotonindrina","service":"qrevent-backend","timestamp":"2026-02-08 20:00:25"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:00:36"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:36"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:00:37"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:00:40"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:40"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:00:40"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:00:44"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:44"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:00:44"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:00:47"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:48"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:00:48"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:00:51"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:52"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:00:52"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:53"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:00:55"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:55"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:00:55"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:00:59"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:00:59"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:00:59"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:02"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:03"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:03"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:06"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:06"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:07"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:10"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:10"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:11"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:14"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:14"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:15"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:18"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:18"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:18"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:19"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:19"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:19"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:19"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:20"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:21"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:21"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:22"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:25"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:25"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:25"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:29"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:29"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:29"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:32"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:32"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:33"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:36"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:36"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:36"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:39"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:40"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:40"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:41"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:45"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:45"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:45"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:48"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:49"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:49"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:54"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:55"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:55"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:01:58"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:01:59"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:01:59"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:02"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:02"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:02"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:05"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:06"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:06"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:10"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:10"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:10"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:15"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:15"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:15"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:19"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:19"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:20"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:21"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:23"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:23"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:23"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:24"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:26"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:27"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:27"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:30"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:31"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:31"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:34"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:34"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:35"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:38"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:38"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:38"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:41"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:42"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:42"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:45"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:45"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:46"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:49"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:49"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:49"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:50"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:50"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:50"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:53"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:53"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:53"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:56"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:56"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:02:56"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:02:59"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:02:59"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:00"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:03"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:03"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:03"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:07"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:07"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:07"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:10"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:10"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:11"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:14"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:14"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:14"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:17"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:17"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:18"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:19"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:20"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:21"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:21"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:22"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:24"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:24"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:24"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:27"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:28"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:28"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:31"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:31"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:31"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:34"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:35"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:35"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:38"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:38"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:38"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:41"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:42"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:42"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:45"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:45"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:45"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:48"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:48"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:49"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:52"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:52"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:52"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:53"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:56"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:56"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:03:56"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:03:59"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:03:59"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:00"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:03"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:03"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:03"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:07"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:07"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:07"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:10"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:11"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:11"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:14"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:14"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:14"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:17"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:18"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:18"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:19"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:21"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:21"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:21"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:22"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:25"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:25"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:25"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:28"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:28"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:29"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:32"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:32"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:32"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:35"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:35"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:36"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:39"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:39"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:39"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:41"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:42"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:43"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:43"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:46"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:46"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:46"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:48"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:49"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:50"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:50"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:53"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:53"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:53"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:04:56"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:57"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:04:57"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:04:58"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:04:59"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:00"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:00"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:05:00"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:05:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:00"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:00"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:05:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:01"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:02"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:04"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:04"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:05:04"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:04"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:05:04"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:05:04"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:05:04"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:07"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:07"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:05:07"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:10"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:11"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:05:11"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:14"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:14"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:05:15"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:05:15"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:15"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:15"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:05:15"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:05:15"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:16"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:17"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:18"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:18"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:05:18"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:19"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:21"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:22"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:05:22"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:25"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:25"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:05:25"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:28"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:28"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:05:29"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:05:31"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:32"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:05:32"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"Found 58 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 040_fix_all_game_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:05:33"}
{"level":"info","message":"Checking database tables...","service":"qrevent-backend","timestamp":"2026-02-08 20:05:40"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table users:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:40"}
{"level":"warn","message":" Table missing: users","service":"qrevent-backend","timestamp":"2026-02-08 20:05:40"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table events:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:40"}
{"level":"warn","message":" Table missing: events","service":"qrevent-backend","timestamp":"2026-02-08 20:05:40"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table guests:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:41"}
{"level":"warn","message":" Table missing: guests","service":"qrevent-backend","timestamp":"2026-02-08 20:05:41"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table qr_codes:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:41"}
{"level":"warn","message":" Table missing: qr_codes","service":"qrevent-backend","timestamp":"2026-02-08 20:05:41"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table attendance:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:41"}
{"level":"warn","message":" Table missing: attendance","service":"qrevent-backend","timestamp":"2026-02-08 20:05:41"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table families:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:42"}
{"level":"warn","message":" Table missing: families","service":"qrevent-backend","timestamp":"2026-02-08 20:05:42"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table family_invitations:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:42"}
{"level":"warn","message":" Table missing: family_invitations","service":"qrevent-backend","timestamp":"2026-02-08 20:05:42"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table family_rsvp:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:42"}
{"level":"warn","message":" Table missing: family_rsvp","service":"qrevent-backend","timestamp":"2026-02-08 20:05:42"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table story_events:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:43"}
{"level":"warn","message":" Table missing: story_events","service":"qrevent-backend","timestamp":"2026-02-08 20:05:43"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table games:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:43"}
{"level":"warn","message":" Table missing: games","service":"qrevent-backend","timestamp":"2026-02-08 20:05:43"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table game_questions:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:43"}
{"level":"warn","message":" Table missing: game_questions","service":"qrevent-backend","timestamp":"2026-02-08 20:05:43"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table game_participations:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:44"}
{"level":"warn","message":" Table missing: game_participations","service":"qrevent-backend","timestamp":"2026-02-08 20:05:44"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table feedbacks:","service":"qrevent-backend","timestamp":"2026-02-08 20:05:44"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:18:34"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:18:34"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:18:34"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:18:34"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:18:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:18:36"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:18:36"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:18:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:18:38"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:18:39"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:18:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:18:39"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:18:39"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 20:18:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 20:18:55","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:20:20"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:20:20"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:20:20"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:20:20"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:20:20"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:20:22"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:20:23"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:20:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:20:25"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:20:25"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:20:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:20:25"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:20:25"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:26:32"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:26:32"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:32"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:26:32"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:26:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:26:34"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:35"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:26:37"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:37"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:26:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:26:38"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:26:38"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:26:59"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:26:59"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:27:00"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:27:09"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:09"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:27:10"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"\n Migration to apply (999_final_schema_sync.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"-- ============================================================================\n-- FINAL SCHEMA SYNCHRONIZATION\n-- Date: 2026-02-07\n-- Description: Synchronise le schma final et optimise pour la scalabilit\n-- ============================================================================\n\n-- ============================================================================\n-- 1. TABLE: users\n-- ============================================================================\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'users' AND column_name = 'avatar_url') THEN\n        ALTER TABLE users ADD COLUMN avatar_url TEXT;\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'users' AND column_name = 'preferences') THEN\n        ALTER TABLE users ADD COLUMN preferences JSONB DEFAULT '{}';\n    END IF;\nEND $$;\n\n-- ============================================================================\n-- 2. TABLE: events\n-- ============================================================================\nDO $$\nBEGIN\n    -- Make description nullable\n    ALTER TABLE events ALTER COLUMN description DROP NOT NULL;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'bride_name') THEN\n        ALTER TABLE events ADD COLUMN bride_name VARCHAR(100);\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'groom_name') THEN\n        ALTER TABLE events ADD COLUMN groom_name VARCHAR(100);\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'total_budget') THEN\n        ALTER TABLE events ADD COLUMN total_budget DECIMAL(10, 2) DEFAULT 0;\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'guest_count') THEN\n        ALTER TABLE events ADD COLUMN guest_count INTEGER DEFAULT 0;\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'menu_settings') THEN\n        ALTER TABLE events ADD COLUMN menu_settings JSONB DEFAULT '{\n            \"enabled\": false,\n            \"title\": \"Menu du Jour\",\n            \"subtitle\": \"Une exprience culinaire unique\",\n            \"description\": \"\",\n            \"starter\": { \"title\": \"Entre\", \"description\": \"\" },\n            \"main\": { \"title\": \"Plat Principal\", \"description\": \"\" },\n            \"dessert\": { \"title\": \"Dessert\", \"description\": \"\" },\n            \"drinks\": { \"title\": \"Boissons\", \"description\": \"\" }\n        }';\n    END IF;\nEND $$;\n\n-- Optimized indexes for events\nCREATE INDEX IF NOT EXISTS idx_events_organizer_active ON events(organizer_id, is_active) WHERE is_active = true;\nCREATE INDEX IF NOT EXISTS idx_events_date_active ON events(date, is_active);\n\n-- ============================================================================\n-- 3. TABLE: guests\n-- ============================================================================\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'guests' AND column_name = 'is_active') THEN\n        ALTER TABLE guests ADD COLUMN is_active BOOLEAN DEFAULT TRUE;\n    END IF;\nEND $$;\n\nCREATE INDEX IF NOT EXISTS idx_guests_event_rsvp ON guests(event_id, rsvp_status) WHERE is_active = true;\nCREATE INDEX IF NOT EXISTS idx_guests_event_attendance ON guests(event_id, attendance_status) WHERE is_active = true;\nCREATE INDEX IF NOT EXISTS idx_guests_qr_code ON guests(qr_code) WHERE qr_code IS NOT NULL;\n\n-- ============================================================================\n-- 4. TABLE: families\n-- ============================================================================\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'families' AND column_name = 'max_people') THEN\n        ALTER TABLE families ADD COLUMN max_people INTEGER DEFAULT 1;\n    END IF;\nEND $$;\n\n-- ============================================================================\n-- 5. TABLE: qr_codes\n-- ============================================================================\nCREATE INDEX IF NOT EXISTS idx_qr_codes_code_valid ON qr_codes(code, is_valid) WHERE is_valid = true;\nCREATE INDEX IF NOT EXISTS idx_qr_codes_event_valid ON qr_codes(event_id, is_valid);\n\n-- ============================================================================\n-- 6. TABLE: attendance\n-- ============================================================================\nCREATE INDEX IF NOT EXISTS idx_attendance_event_status ON attendance(event_id, status);\n\n-- BRIN index for time-series data (very efficient for large tables)\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'idx_attendance_timestamp_brin') THEN\n        CREATE INDEX idx_attendance_timestamp_brin ON attendance USING BRIN (timestamp) \n        WITH (pages_per_range = 128);\n    END IF;\nEND $$;\n\n-- ============================================================================\n-- 7. TABLE: budget_items\n-- ============================================================================\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'budget_items' AND column_name = 'quantity') THEN\n        ALTER TABLE budget_items ADD COLUMN quantity INTEGER DEFAULT 1;\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'budget_items' AND column_name = 'unit_price') THEN\n        ALTER TABLE budget_items ADD COLUMN unit_price DECIMAL(10, 2);\n    END IF;\n    \n    -- Recalculate totals\n    UPDATE budget_items SET total_price = COALESCE(quantity, 1) * COALESCE(unit_price, total_price, 0) \n    WHERE quantity IS NOT NULL AND unit_price IS NOT NULL;\nEND $$;\n\nCREATE INDEX IF NOT EXISTS idx_budget_items_event_category ON budget_items(event_id, category);\n\n-- ============================================================================\n-- 8. Update function for updated_at\n-- ============================================================================\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- ============================================================================\n-- 9. Create triggers for all tables\n-- ============================================================================\nDO $$\nDECLARE\n    tbl TEXT;\n    tables TEXT[] := ARRAY['users', 'events', 'guests', 'qr_codes', 'families', 'seating_tables', \n                           'budget_items', 'games', 'wishes', 'feedback', 'story_events'];\nBEGIN\n    FOREACH tbl IN ARRAY tables\n    LOOP\n        IF EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = tbl) THEN\n            IF NOT EXISTS (SELECT 1 FROM pg_trigger WHERE tgname = 'update_' || tbl || '_updated_at') THEN\n                EXECUTE format('CREATE TRIGGER update_%I_updated_at BEFORE UPDATE ON %I FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()', tbl, tbl);\n            END IF;\n        END IF;\n    END LOOP;\nEND $$;\n\n-- ============================================================================\n-- 10. Drop redundant indexes (keep composite ones)\n-- ============================================================================\nDROP INDEX IF EXISTS idx_events_organizer;\n\n-- ============================================================================\n-- 11. TABLES DE JEUX - Corrections compltes\n-- ============================================================================\n\n-- 11.1 Table game_participations - Ajout des colonnes manquantes\nDO $$\nBEGIN\n    -- Ajouter family_id si elle n'existe pas\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'game_participations' AND column_name = 'family_id') THEN\n        ALTER TABLE game_participations ADD COLUMN family_id UUID REFERENCES families(id) ON DELETE CASCADE;\n    END IF;\n\n    -- Ajouter qr_code si elle n'existe pas\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'game_participations' AND column_name = 'qr_code') THEN\n        ALTER TABLE game_participations ADD COLUMN qr_code VARCHAR(50) REFERENCES qr_codes(code) ON DELETE SET NULL;\n    END IF;\n\n    -- Ajouter access_token si elle n'existe pas\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'game_participations' AND column_name = 'access_token') THEN\n        ALTER TABLE game_participations ADD COLUMN access_token VARCHAR(100);\n    END IF;\n\n    -- Ajouter player_name si elle n'existe pas\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'game_participations' AND column_name = 'player_name') THEN\n        ALTER TABLE game_participations ADD COLUMN player_name VARCHAR(100);\n    END IF;\n\n    -- Ajouter player_type si elle n'existe pas\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'game_participations' AND column_name = 'player_type') THEN\n        ALTER TABLE game_participations ADD COLUMN player_type VARCHAR(20) DEFAULT 'individual';\n    END IF;\n\n    -- Ajouter rank si elle n'existe pas\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'game_participations' AND column_name = 'rank') THEN\n        ALTER TABLE game_participations ADD COLUMN rank INTEGER;\n    END IF;\n\n    -- Rendre guest_id nullable (pour l'accs public)\n    ALTER TABLE game_participations ALTER COLUMN guest_id DROP NOT NULL;\n\n    -- Supprimer l'ancienne contrainte CHECK sur player_type si elle existe\n    ALTER TABLE game_participations DROP CONSTRAINT IF EXISTS game_participations_player_type_check;\n\n    -- Ajouter la nouvelle contrainte CHECK avec 'public' inclus\n    ALTER TABLE game_participations ADD CONSTRAINT game_participations_player_type_check \n    CHECK (player_type IN ('individual', 'family', 'public'));\nEND $$;\n\n-- Index pour game_participations\nCREATE INDEX IF NOT EXISTS idx_game_participations_family ON game_participations(family_id);\nCREATE INDEX IF NOT EXISTS idx_game_participations_qr ON game_participations(qr_code);\nCREATE INDEX IF NOT EXISTS idx_game_participations_token ON game_participations(access_token);\nCREATE INDEX IF NOT EXISTS idx_game_participations_score ON game_participations(game_id, total_score DESC);\nCREATE INDEX IF NOT EXISTS idx_game_participations_rank ON game_participations(game_id, rank);\n\n-- 11.2 Table game_guest_access (accs public et individuel)\nCREATE TABLE IF NOT EXISTS game_guest_access (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE,\n    qr_code VARCHAR(50) REFERENCES qr_codes(code) ON DELETE CASCADE,\n    access_token VARCHAR(100) UNIQUE NOT NULL,\n    has_played BOOLEAN DEFAULT FALSE,\n    played_at TIMESTAMP WITH TIME ZONE,\n    score INTEGER DEFAULT 0,\n    rank INTEGER,\n    is_public BOOLEAN DEFAULT FALSE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Index pour game_guest_access\nCREATE INDEX IF NOT EXISTS idx_game_guest_access_game ON game_guest_access(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_guest_access_guest ON game_guest_access(guest_id);\nCREATE INDEX IF NOT EXISTS idx_game_guest_access_token ON game_guest_access(access_token);\nCREATE INDEX IF NOT EXISTS idx_game_guest_access_public ON game_guest_access (game_id, is_public) WHERE is_public = TRUE;\n\n-- Rendre guest_id nullable dans game_guest_access\nALTER TABLE game_guest_access ALTER COLUMN guest_id DROP NOT NULL;\n\n-- 11.3 Table game_family_access (accs familles)\nCREATE TABLE IF NOT EXISTS game_family_access (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    family_id UUID REFERENCES families(id) ON DELETE CASCADE NOT NULL,\n    qr_code VARCHAR(50) REFERENCES qr_codes(code) ON DELETE CASCADE,\n    access_token VARCHAR(100) UNIQUE NOT NULL,\n    has_played BOOLEAN DEFAULT FALSE,\n    played_at TIMESTAMP WITH TIME ZONE,\n    score INTEGER DEFAULT 0,\n    rank INTEGER,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(game_id, family_id)\n);\n\n-- Index pour game_family_access\nCREATE INDEX IF NOT EXISTS idx_game_family_access_game ON game_family_access(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_family_access_family ON game_family_access(family_id);\nCREATE INDEX IF NOT EXISTS idx_game_family_access_token ON game_family_access(access_token);\n\n-- 11.4 Table game_ip_tracking (scurit anti-fraude)\nCREATE TABLE IF NOT EXISTS game_ip_tracking (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    ip_address VARCHAR(45) NOT NULL,\n    user_agent TEXT,\n    played_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    score INTEGER DEFAULT 0,\n    player_name VARCHAR(100),\n    UNIQUE(game_id, ip_address)\n);\n\nCREATE INDEX IF NOT EXISTS idx_game_ip_tracking_game_ip ON game_ip_tracking(game_id, ip_address);\nCREATE INDEX IF NOT EXISTS idx_game_ip_tracking_ip ON game_ip_tracking(ip_address);\n\n-- 11.5 Fonction pour gnrer un token d'accs unique\nCREATE OR REPLACE FUNCTION generate_access_token()\nRETURNS VARCHAR(100) AS $$\nDECLARE\n    token VARCHAR(100);\n    exists_check BOOLEAN;\nBEGIN\n    LOOP\n        token := encode(gen_random_bytes(24), 'base64');\n        SELECT EXISTS(\n            SELECT 1 FROM game_family_access WHERE access_token = token\n            UNION\n            SELECT 1 FROM game_guest_access WHERE access_token = token\n        ) INTO exists_check;\n        \n        EXIT WHEN NOT exists_check;\n    END LOOP;\n    \n    RETURN token;\nEND;\n$$ language 'plpgsql';\n\n-- 11.6 Fonction et trigger pour mettre  jour le classement\nCREATE OR REPLACE FUNCTION update_game_leaderboard()\nRETURNS TRIGGER AS $$\nBEGIN\n    -- Mettre  jour le classement pour toutes les participations du jeu\n    WITH ranked AS (\n        SELECT \n            id,\n            ROW_NUMBER() OVER (ORDER BY total_score DESC, completed_at ASC) as new_rank\n        FROM game_participations\n        WHERE game_id = NEW.game_id AND is_completed = TRUE\n    )\n    UPDATE game_participations gp\n    SET rank = r.new_rank\n    FROM ranked r\n    WHERE gp.id = r.id;\n    \n    -- Mettre  jour aussi les tables d'accs\n    UPDATE game_family_access\n    SET rank = subquery.new_rank,\n        score = subquery.total_score\n    FROM (\n        SELECT \n            gfa.family_id,\n            gp.total_score,\n            RANK() OVER (ORDER BY gp.total_score DESC) as new_rank\n        FROM game_family_access gfa\n        JOIN game_participations gp ON gp.game_id = gfa.game_id AND gp.family_id = gfa.family_id\n        WHERE gfa.game_id = NEW.game_id AND gp.is_completed = TRUE\n    ) subquery\n    WHERE game_family_access.game_id = NEW.game_id \n    AND game_family_access.family_id = subquery.family_id;\n    \n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Supprimer et recrer le trigger\nDROP TRIGGER IF EXISTS trigger_update_leaderboard ON game_participations;\n\nCREATE TRIGGER trigger_update_leaderboard\nAFTER INSERT OR UPDATE OF total_score, is_completed ON game_participations\nFOR EACH ROW\nWHEN (NEW.is_completed = TRUE)\nEXECUTE FUNCTION update_game_leaderboard();\n\n-- 11.7 Vue pour le classement global d'un jeu\nCREATE OR REPLACE VIEW game_leaderboard AS\nSELECT \n    gp.id as participation_id,\n    gp.game_id,\n    gp.guest_id,\n    gp.family_id,\n    gp.player_name,\n    gp.player_type,\n    gp.total_score,\n    gp.correct_answers,\n    gp.total_answers,\n    gp.completed_at,\n    gp.rank,\n    gp.qr_code,\n    g.name as game_name,\n    g.type as game_type,\n    CASE \n        WHEN gp.family_id IS NOT NULL THEN f.name\n        ELSE CONCAT(gt.first_name, ' ', gt.last_name)\n    END as player_display_name\nFROM game_participations gp\nJOIN games g ON gp.game_id = g.id\nLEFT JOIN families f ON gp.family_id = f.id\nLEFT JOIN guests gt ON gp.guest_id = gt.id\nWHERE gp.is_completed = TRUE\nORDER BY gp.game_id, gp.rank;\n\n-- 11.8 Trigger pour game_participations updated_at\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM pg_trigger WHERE tgname = 'update_game_participations_updated_at') THEN\n        CREATE TRIGGER update_game_participations_updated_at BEFORE UPDATE ON game_participations \n        FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n    END IF;\nEND $$;\n\n-- 11.9 Commentaires\nCOMMENT ON COLUMN game_participations.player_type IS 'Type de joueur: individual, family, ou public';\nCOMMENT ON COLUMN game_participations.guest_id IS 'ID de l''invit (NULL pour accs public)';\nCOMMENT ON COLUMN game_participations.family_id IS 'ID de la famille (NULL pour accs individuel ou public)';\nCOMMENT ON TABLE game_ip_tracking IS 'Suit les adresses IP qui ont jou  chaque jeu pour viter les fraudes';\nCOMMENT ON COLUMN game_guest_access.is_public IS 'Indique si cet accs est public (QR code partag)';\nCOMMENT ON COLUMN game_guest_access.guest_id IS 'ID de l''invit (NULL pour accs public)';\nCOMMENT ON VIEW game_leaderboard IS 'Vue pour afficher le classement global d''un jeu';\n\n-- ============================================================================\n-- VERIFICATION\n-- ============================================================================\nSELECT \n    'Schema Sync Complete' as status,\n    (SELECT COUNT(*) FROM information_schema.tables WHERE table_schema = 'public') as total_tables,\n    (SELECT COUNT(*) FROM pg_indexes WHERE schemaname = 'public') as total_indexes,\n    (SELECT COUNT(*) FROM pg_trigger WHERE tgname LIKE 'update_%_updated_at') as auto_update_triggers,\n    NOW() as executed_at;\n","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"Applying migration: 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:27:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:27:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:27:34"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:34"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:35"}
{"0":"c","1":"o","10":"t","11":"a","12":"l","13":"_","14":"p","15":"r","16":"i","17":"c","18":"e","19":"\"","2":"l","20":" ","21":"d","22":"o","23":"e","24":"s","25":" ","26":"n","27":"o","28":"t","29":" ","3":"u","30":"e","31":"x","32":"i","33":"s","34":"t","4":"m","5":"n","6":" ","7":"\"","8":"t","9":"o","level":"error","message":" Failed to apply migration 999_final_schema_sync.sql:","service":"qrevent-backend","timestamp":"2026-02-08 20:27:35"}
{"level":"info","message":"\n  Automatic migration failed.","service":"qrevent-backend","timestamp":"2026-02-08 20:27:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:27:37"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:27:37"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:27:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:27:37"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:27:37"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"Found 57 migration(s):","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"\n Migration to apply (999_final_schema_sync.sql):","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"-- ============================================================================\n-- FINAL SCHEMA SYNCHRONIZATION\n-- Date: 2026-02-07\n-- Description: Synchronise le schma final et optimise pour la scalabilit\n-- ============================================================================\n\n-- ============================================================================\n-- 1. TABLE: users\n-- ============================================================================\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'users' AND column_name = 'avatar_url') THEN\n        ALTER TABLE users ADD COLUMN avatar_url TEXT;\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'users' AND column_name = 'preferences') THEN\n        ALTER TABLE users ADD COLUMN preferences JSONB DEFAULT '{}';\n    END IF;\nEND $$;\n\n-- ============================================================================\n-- 2. TABLE: events\n-- ============================================================================\nDO $$\nBEGIN\n    -- Make description nullable\n    ALTER TABLE events ALTER COLUMN description DROP NOT NULL;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'bride_name') THEN\n        ALTER TABLE events ADD COLUMN bride_name VARCHAR(100);\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'groom_name') THEN\n        ALTER TABLE events ADD COLUMN groom_name VARCHAR(100);\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'total_budget') THEN\n        ALTER TABLE events ADD COLUMN total_budget DECIMAL(10, 2) DEFAULT 0;\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'guest_count') THEN\n        ALTER TABLE events ADD COLUMN guest_count INTEGER DEFAULT 0;\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'menu_settings') THEN\n        ALTER TABLE events ADD COLUMN menu_settings JSONB DEFAULT '{\n            \"enabled\": false,\n            \"title\": \"Menu du Jour\",\n            \"subtitle\": \"Une exprience culinaire unique\",\n            \"description\": \"\",\n            \"starter\": { \"title\": \"Entre\", \"description\": \"\" },\n            \"main\": { \"title\": \"Plat Principal\", \"description\": \"\" },\n            \"dessert\": { \"title\": \"Dessert\", \"description\": \"\" },\n            \"drinks\": { \"title\": \"Boissons\", \"description\": \"\" }\n        }';\n    END IF;\nEND $$;\n\n-- Optimized indexes for events\nCREATE INDEX IF NOT EXISTS idx_events_organizer_active ON events(organizer_id, is_active) WHERE is_active = true;\nCREATE INDEX IF NOT EXISTS idx_events_date_active ON events(date, is_active);\n\n-- ============================================================================\n-- 3. TABLE: guests\n-- ============================================================================\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'guests' AND column_name = 'is_active') THEN\n        ALTER TABLE guests ADD COLUMN is_active BOOLEAN DEFAULT TRUE;\n    END IF;\nEND $$;\n\nCREATE INDEX IF NOT EXISTS idx_guests_event_rsvp ON guests(event_id, rsvp_status) WHERE is_active = true;\nCREATE INDEX IF NOT EXISTS idx_guests_event_attendance ON guests(event_id, attendance_status) WHERE is_active = true;\nCREATE INDEX IF NOT EXISTS idx_guests_qr_code ON guests(qr_code) WHERE qr_code IS NOT NULL;\n\n-- ============================================================================\n-- 4. TABLE: families\n-- ============================================================================\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'families' AND column_name = 'max_people') THEN\n        ALTER TABLE families ADD COLUMN max_people INTEGER DEFAULT 1;\n    END IF;\nEND $$;\n\n-- ============================================================================\n-- 5. TABLE: qr_codes\n-- ============================================================================\nCREATE INDEX IF NOT EXISTS idx_qr_codes_code_valid ON qr_codes(code, is_valid) WHERE is_valid = true;\nCREATE INDEX IF NOT EXISTS idx_qr_codes_event_valid ON qr_codes(event_id, is_valid);\n\n-- ============================================================================\n-- 6. TABLE: attendance\n-- ============================================================================\nCREATE INDEX IF NOT EXISTS idx_attendance_event_status ON attendance(event_id, status);\n\n-- BRIN index for time-series data (very efficient for large tables)\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE indexname = 'idx_attendance_timestamp_brin') THEN\n        CREATE INDEX idx_attendance_timestamp_brin ON attendance USING BRIN (timestamp) \n        WITH (pages_per_range = 128);\n    END IF;\nEND $$;\n\n-- ============================================================================\n-- 7. TABLE: budget_items\n-- ============================================================================\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'budget_items' AND column_name = 'quantity') THEN\n        ALTER TABLE budget_items ADD COLUMN quantity INTEGER DEFAULT 1;\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'budget_items' AND column_name = 'unit_price') THEN\n        ALTER TABLE budget_items ADD COLUMN unit_price DECIMAL(10, 2);\n    END IF;\n    \n    -- Recalculate totals (seulement si total_price existe)\n    IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'budget_items' AND column_name = 'total_price') THEN\n        UPDATE budget_items SET total_price = COALESCE(quantity, 1) * COALESCE(unit_price, total_price, 0) \n        WHERE quantity IS NOT NULL AND unit_price IS NOT NULL;\n    END IF;\nEND $$;\n\nCREATE INDEX IF NOT EXISTS idx_budget_items_event_category ON budget_items(event_id, category);\n\n-- ============================================================================\n-- 8. Update function for updated_at\n-- ============================================================================\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- ============================================================================\n-- 9. Create triggers for all tables\n-- ============================================================================\nDO $$\nDECLARE\n    tbl TEXT;\n    tables TEXT[] := ARRAY['users', 'events', 'guests', 'qr_codes', 'families', 'seating_tables', \n                           'budget_items', 'games', 'wishes', 'feedback', 'story_events'];\nBEGIN\n    FOREACH tbl IN ARRAY tables\n    LOOP\n        IF EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = tbl) THEN\n            IF NOT EXISTS (SELECT 1 FROM pg_trigger WHERE tgname = 'update_' || tbl || '_updated_at') THEN\n                EXECUTE format('CREATE TRIGGER update_%I_updated_at BEFORE UPDATE ON %I FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()', tbl, tbl);\n            END IF;\n        END IF;\n    END LOOP;\nEND $$;\n\n-- ============================================================================\n-- 10. Drop redundant indexes (keep composite ones)\n-- ============================================================================\nDROP INDEX IF EXISTS idx_events_organizer;\n\n-- ============================================================================\n-- 11. TABLES DE JEUX - Corrections compltes\n-- ============================================================================\n\n-- 11.1 Table game_participations - Ajout des colonnes manquantes\nDO $$\nBEGIN\n    -- Ajouter family_id si elle n'existe pas\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'game_participations' AND column_name = 'family_id') THEN\n        ALTER TABLE game_participations ADD COLUMN family_id UUID REFERENCES families(id) ON DELETE CASCADE;\n    END IF;\n\n    -- Ajouter qr_code si elle n'existe pas\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'game_participations' AND column_name = 'qr_code') THEN\n        ALTER TABLE game_participations ADD COLUMN qr_code VARCHAR(50) REFERENCES qr_codes(code) ON DELETE SET NULL;\n    END IF;\n\n    -- Ajouter access_token si elle n'existe pas\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'game_participations' AND column_name = 'access_token') THEN\n        ALTER TABLE game_participations ADD COLUMN access_token VARCHAR(100);\n    END IF;\n\n    -- Ajouter player_name si elle n'existe pas\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'game_participations' AND column_name = 'player_name') THEN\n        ALTER TABLE game_participations ADD COLUMN player_name VARCHAR(100);\n    END IF;\n\n    -- Ajouter player_type si elle n'existe pas\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'game_participations' AND column_name = 'player_type') THEN\n        ALTER TABLE game_participations ADD COLUMN player_type VARCHAR(20) DEFAULT 'individual';\n    END IF;\n\n    -- Ajouter rank si elle n'existe pas\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'game_participations' AND column_name = 'rank') THEN\n        ALTER TABLE game_participations ADD COLUMN rank INTEGER;\n    END IF;\n\n    -- Rendre guest_id nullable (pour l'accs public)\n    ALTER TABLE game_participations ALTER COLUMN guest_id DROP NOT NULL;\n\n    -- Supprimer l'ancienne contrainte CHECK sur player_type si elle existe\n    ALTER TABLE game_participations DROP CONSTRAINT IF EXISTS game_participations_player_type_check;\n\n    -- Ajouter la nouvelle contrainte CHECK avec 'public' inclus\n    ALTER TABLE game_participations ADD CONSTRAINT game_participations_player_type_check \n    CHECK (player_type IN ('individual', 'family', 'public'));\nEND $$;\n\n-- Index pour game_participations\nCREATE INDEX IF NOT EXISTS idx_game_participations_family ON game_participations(family_id);\nCREATE INDEX IF NOT EXISTS idx_game_participations_qr ON game_participations(qr_code);\nCREATE INDEX IF NOT EXISTS idx_game_participations_token ON game_participations(access_token);\nCREATE INDEX IF NOT EXISTS idx_game_participations_score ON game_participations(game_id, total_score DESC);\nCREATE INDEX IF NOT EXISTS idx_game_participations_rank ON game_participations(game_id, rank);\n\n-- 11.2 Table game_guest_access (accs public et individuel)\nCREATE TABLE IF NOT EXISTS game_guest_access (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    guest_id UUID REFERENCES guests(id) ON DELETE CASCADE,\n    qr_code VARCHAR(50) REFERENCES qr_codes(code) ON DELETE CASCADE,\n    access_token VARCHAR(100) UNIQUE NOT NULL,\n    has_played BOOLEAN DEFAULT FALSE,\n    played_at TIMESTAMP WITH TIME ZONE,\n    score INTEGER DEFAULT 0,\n    rank INTEGER,\n    is_public BOOLEAN DEFAULT FALSE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Index pour game_guest_access\nCREATE INDEX IF NOT EXISTS idx_game_guest_access_game ON game_guest_access(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_guest_access_guest ON game_guest_access(guest_id);\nCREATE INDEX IF NOT EXISTS idx_game_guest_access_token ON game_guest_access(access_token);\nCREATE INDEX IF NOT EXISTS idx_game_guest_access_public ON game_guest_access (game_id, is_public) WHERE is_public = TRUE;\n\n-- Rendre guest_id nullable dans game_guest_access\nALTER TABLE game_guest_access ALTER COLUMN guest_id DROP NOT NULL;\n\n-- 11.3 Table game_family_access (accs familles)\nCREATE TABLE IF NOT EXISTS game_family_access (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    family_id UUID REFERENCES families(id) ON DELETE CASCADE NOT NULL,\n    qr_code VARCHAR(50) REFERENCES qr_codes(code) ON DELETE CASCADE,\n    access_token VARCHAR(100) UNIQUE NOT NULL,\n    has_played BOOLEAN DEFAULT FALSE,\n    played_at TIMESTAMP WITH TIME ZONE,\n    score INTEGER DEFAULT 0,\n    rank INTEGER,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    UNIQUE(game_id, family_id)\n);\n\n-- Index pour game_family_access\nCREATE INDEX IF NOT EXISTS idx_game_family_access_game ON game_family_access(game_id);\nCREATE INDEX IF NOT EXISTS idx_game_family_access_family ON game_family_access(family_id);\nCREATE INDEX IF NOT EXISTS idx_game_family_access_token ON game_family_access(access_token);\n\n-- 11.4 Table game_ip_tracking (scurit anti-fraude)\nCREATE TABLE IF NOT EXISTS game_ip_tracking (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    game_id UUID REFERENCES games(id) ON DELETE CASCADE NOT NULL,\n    ip_address VARCHAR(45) NOT NULL,\n    user_agent TEXT,\n    played_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    score INTEGER DEFAULT 0,\n    player_name VARCHAR(100),\n    UNIQUE(game_id, ip_address)\n);\n\nCREATE INDEX IF NOT EXISTS idx_game_ip_tracking_game_ip ON game_ip_tracking(game_id, ip_address);\nCREATE INDEX IF NOT EXISTS idx_game_ip_tracking_ip ON game_ip_tracking(ip_address);\n\n-- 11.5 Fonction pour gnrer un token d'accs unique\nCREATE OR REPLACE FUNCTION generate_access_token()\nRETURNS VARCHAR(100) AS $$\nDECLARE\n    token VARCHAR(100);\n    exists_check BOOLEAN;\nBEGIN\n    LOOP\n        token := encode(gen_random_bytes(24), 'base64');\n        SELECT EXISTS(\n            SELECT 1 FROM game_family_access WHERE access_token = token\n            UNION\n            SELECT 1 FROM game_guest_access WHERE access_token = token\n        ) INTO exists_check;\n        \n        EXIT WHEN NOT exists_check;\n    END LOOP;\n    \n    RETURN token;\nEND;\n$$ language 'plpgsql';\n\n-- 11.6 Fonction et trigger pour mettre  jour le classement\nCREATE OR REPLACE FUNCTION update_game_leaderboard()\nRETURNS TRIGGER AS $$\nBEGIN\n    -- Mettre  jour le classement pour toutes les participations du jeu\n    WITH ranked AS (\n        SELECT \n            id,\n            ROW_NUMBER() OVER (ORDER BY total_score DESC, completed_at ASC) as new_rank\n        FROM game_participations\n        WHERE game_id = NEW.game_id AND is_completed = TRUE\n    )\n    UPDATE game_participations gp\n    SET rank = r.new_rank\n    FROM ranked r\n    WHERE gp.id = r.id;\n    \n    -- Mettre  jour aussi les tables d'accs\n    UPDATE game_family_access\n    SET rank = subquery.new_rank,\n        score = subquery.total_score\n    FROM (\n        SELECT \n            gfa.family_id,\n            gp.total_score,\n            RANK() OVER (ORDER BY gp.total_score DESC) as new_rank\n        FROM game_family_access gfa\n        JOIN game_participations gp ON gp.game_id = gfa.game_id AND gp.family_id = gfa.family_id\n        WHERE gfa.game_id = NEW.game_id AND gp.is_completed = TRUE\n    ) subquery\n    WHERE game_family_access.game_id = NEW.game_id \n    AND game_family_access.family_id = subquery.family_id;\n    \n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Supprimer et recrer le trigger\nDROP TRIGGER IF EXISTS trigger_update_leaderboard ON game_participations;\n\nCREATE TRIGGER trigger_update_leaderboard\nAFTER INSERT OR UPDATE OF total_score, is_completed ON game_participations\nFOR EACH ROW\nWHEN (NEW.is_completed = TRUE)\nEXECUTE FUNCTION update_game_leaderboard();\n\n-- 11.7 Vue pour le classement global d'un jeu\nCREATE OR REPLACE VIEW game_leaderboard AS\nSELECT \n    gp.id as participation_id,\n    gp.game_id,\n    gp.guest_id,\n    gp.family_id,\n    gp.player_name,\n    gp.player_type,\n    gp.total_score,\n    gp.correct_answers,\n    gp.total_answers,\n    gp.completed_at,\n    gp.rank,\n    gp.qr_code,\n    g.name as game_name,\n    g.type as game_type,\n    CASE \n        WHEN gp.family_id IS NOT NULL THEN f.name\n        ELSE CONCAT(gt.first_name, ' ', gt.last_name)\n    END as player_display_name\nFROM game_participations gp\nJOIN games g ON gp.game_id = g.id\nLEFT JOIN families f ON gp.family_id = f.id\nLEFT JOIN guests gt ON gp.guest_id = gt.id\nWHERE gp.is_completed = TRUE\nORDER BY gp.game_id, gp.rank;\n\n-- 11.8 Trigger pour game_participations updated_at\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM pg_trigger WHERE tgname = 'update_game_participations_updated_at') THEN\n        CREATE TRIGGER update_game_participations_updated_at BEFORE UPDATE ON game_participations \n        FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n    END IF;\nEND $$;\n\n-- 11.9 Commentaires\nCOMMENT ON COLUMN game_participations.player_type IS 'Type de joueur: individual, family, ou public';\nCOMMENT ON COLUMN game_participations.guest_id IS 'ID de l''invit (NULL pour accs public)';\nCOMMENT ON COLUMN game_participations.family_id IS 'ID de la famille (NULL pour accs individuel ou public)';\nCOMMENT ON TABLE game_ip_tracking IS 'Suit les adresses IP qui ont jou  chaque jeu pour viter les fraudes';\nCOMMENT ON COLUMN game_guest_access.is_public IS 'Indique si cet accs est public (QR code partag)';\nCOMMENT ON COLUMN game_guest_access.guest_id IS 'ID de l''invit (NULL pour accs public)';\nCOMMENT ON VIEW game_leaderboard IS 'Vue pour afficher le classement global d''un jeu';\n\n-- ============================================================================\n-- VERIFICATION\n-- ============================================================================\nSELECT \n    'Schema Sync Complete' as status,\n    (SELECT COUNT(*) FROM information_schema.tables WHERE table_schema = 'public') as total_tables,\n    (SELECT COUNT(*) FROM pg_indexes WHERE schemaname = 'public') as total_indexes,\n    (SELECT COUNT(*) FROM pg_trigger WHERE tgname LIKE 'update_%_updated_at') as auto_update_triggers,\n    NOW() as executed_at;\n","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":"Applying migration: 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:28:06"}
{"level":"info","message":" Migration applied successfully: 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:28:07"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-08 20:28:07"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 20:30:04","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 20:30:18","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 20:30:19","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 20:30:30","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 20:30:31","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:32:46"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:32:46"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:32:46"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:32:46"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:32:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:32:48"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:32:48"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:32:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:32:50"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:32:51"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:32:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:32:51"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:32:51"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:35:26"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:35:26"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:35:26"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:35:26"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:35:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:35:28"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:35:29"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:35:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:35:31"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:35:31"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:35:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:35:31"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:35:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:35:44"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:35:44"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:35:44"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:35:44"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:35:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:35:46"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:35:46"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:35:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:35:48"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:35:49"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:35:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:35:49"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:35:49"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:39:51"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:39:51"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:39:51"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:39:51"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:39:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:39:53"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:39:53"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:39:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:39:56"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:39:56"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:39:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:39:56"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:39:56"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:39:59"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:39:59"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:39:59"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:39:59"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:39:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:40:01"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:40:02"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:40:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:40:04"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:40:04"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:40:04"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:40:04"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:40:04"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:40:05"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:40:05"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:40:05"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:40:05"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:40:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:40:07"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:40:07"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:40:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:40:09"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:40:09"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:40:09"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:41:14"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:41:14"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:41:14"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:41:14"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:41:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:41:17"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:41:18"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:41:18"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:41:20"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:41:20"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:41:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:41:20"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:41:20"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:42:25"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:42:25"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:42:25"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:42:25"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:42:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:42:27"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:42:27"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:42:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:42:29"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:42:30"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:42:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:42:30"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:42:30"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:42:44"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:42:44"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:42:44"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:42:44"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:42:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:42:46"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:42:46"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:42:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:42:48"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:42:48"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:42:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:42:48"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:42:48"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-08 20:43:19"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-08 20:43:20","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 20:43:21","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 20:43:22","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 20:43:34"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 20:43:34"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 20:43:36","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 20:43:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:18"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:18"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:18"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:19"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:20"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:20"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:20"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:20"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:21"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:21"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:21"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:22"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:23"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:23"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:24"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:24"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:24"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:25"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:25"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:27"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating menu settings:","service":"qrevent-backend","timestamp":"2026-02-08 20:44:27"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:50:33"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:50:34"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:50:34"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:50:34"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:50:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:50:36"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:50:36"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:50:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:50:38"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:50:38"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:50:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:50:39"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:50:39"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:50:44"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:50:44"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:50:44"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:50:44"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:50:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:50:46"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:50:46"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:50:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:50:48"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:50:48"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:50:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:50:48"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:50:48"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:52:20"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:52:20"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:52:20"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:52:20"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:52:20"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:52:22"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:52:22"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:52:22"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:52:25"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:52:25"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:52:25"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:52:25"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:52:25"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:52:46"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:52:46"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:52:46"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:52:46"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:52:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:52:48"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:52:48"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:52:48"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:52:50"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:52:51"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:52:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:52:51"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:52:51"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 20:54:15"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 20:54:15"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:54:15"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:54:15"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 20:54:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:54:17"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:54:18"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:54:18"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 20:54:20"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 20:54:20"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 20:54:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 20:54:20"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 20:54:20"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 20:54:27"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 20:54:27"}
{"error":"Error updating event: ceremony_venue is required for single venue type","level":"error","message":"Error updating event:","service":"qrevent-backend","timestamp":"2026-02-08 20:55:02"}
{"body":{"partner1_name":"","partner2_name":"Mino"},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Qrevent/backendqrevent/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/c6ebc892-fc3d-4c0d-9c9f-f83964d4eb05","service":"qrevent-backend","timestamp":"2026-02-08 20:56:45"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 20:57:59","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 21:07:53"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 21:07:53"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:07:53"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 21:07:53"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 21:07:53"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 21:07:55"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:07:56"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:07:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 21:07:58"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:07:58"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 21:07:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 21:07:58"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 21:07:58"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 21:08:13"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 21:08:13"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:08:13"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 21:08:13"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 21:08:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 21:08:15"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:08:15"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:08:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 21:08:17"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:08:17"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 21:08:17"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 21:08:17"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 21:08:17"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 21:08:40"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 21:08:40"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:08:40"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 21:08:40"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 21:08:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 21:08:42"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:08:42"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:08:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 21:08:44"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:08:44"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 21:08:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 21:08:44"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 21:08:44"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:08:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 21:09:49"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 21:09:49"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:09:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 21:10:05"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 21:10:05"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:10:05"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 21:10:05"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 21:10:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 21:10:07"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:10:07"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:10:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 21:10:09"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:10:09"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-08 21:10:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-08 21:10:10"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-08 21:10:10"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-08 21:12:19"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-08 21:12:19"}
{"error":"Error updating event: Could not find the 'programme_settings' column of 'events' in the schema cache","level":"error","message":"Error updating programme settings:","service":"qrevent-backend","timestamp":"2026-02-08 21:12:22"}
{"error":"Error updating event: Could not find the 'programme_settings' column of 'events' in the schema cache","level":"error","message":"Error updating programme settings:","service":"qrevent-backend","timestamp":"2026-02-08 21:12:24"}
{"error":"Cannot find module '../utils/storageService'\nRequire stack:\n- /home/kevin/Qrevent/backendqrevent/routes/api.js\n- /home/kevin/Qrevent/backendqrevent/server.js","level":"error","message":"Error uploading programme file:","service":"qrevent-backend","timestamp":"2026-02-08 21:12:25"}
{"error":"Error updating event: Could not find the 'programme_settings' column of 'events' in the schema cache","level":"error","message":"Error updating programme settings:","service":"qrevent-backend","timestamp":"2026-02-08 21:12:27"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:19:48","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:19:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:32:10","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:32:27","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:32:56","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:38:24","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:38:26","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:39:56","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:39:56","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:41:14","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:41:15","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:41:24","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:41:25","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:42:48","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-08 21:42:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-08 21:44:41"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-08 21:44:42"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:44:42"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-08 21:44:42"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-08 21:44:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-08 21:44:45"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:44:45"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-08 21:44:45"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 14:19:14"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 14:19:14"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 14:19:14"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 14:19:14"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 14:19:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 14:19:17"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 14:19:17"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 14:19:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 14:19:19"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 14:19:19"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 14:19:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 14:19:20"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 14:19:20"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 14:19:46"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 14:19:46"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 14:20:07","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 14:20:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 14:20:26","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 14:20:27","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:39:44","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:39:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:39:55","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"error":"Error fetching gallery: Could not find the table 'public.event_gallery' in the schema cache","level":"error","message":"Error fetching all gallery items:","service":"qrevent-backend","timestamp":"2026-02-09 16:40:11"}
{"error":"Error fetching gallery: Could not find the table 'public.event_gallery' in the schema cache","level":"error","message":"Error fetching all gallery items:","service":"qrevent-backend","timestamp":"2026-02-09 16:46:57"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:47:11","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:47:35"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:47:35"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:47:35"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:47:35"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:47:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:47:37"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:47:37"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:47:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:47:39"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:47:39"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:47:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:47:40"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:47:40"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:48:11","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:48:17"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:48:17"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:17"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:48:17"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:48:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:48:19"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:19"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:19"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:48:21"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:22"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:48:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:48:22"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:48:22"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:48:30"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:48:30"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:30"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:48:30"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:48:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:48:32"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:32"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:48:34"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:35"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:48:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:48:35"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:48:35"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 16:48:42"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 16:48:42"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:48:42","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:48:54"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:48:54"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:54"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:48:54"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:48:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:48:56"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:57"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:48:58"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:59"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:48:59"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:48:59"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:48:59"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:48:59"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:48:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:49:01"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:01"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:49:03"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:03"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:49:04"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:49:04"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:49:04"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 16:49:09"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 16:49:09"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:49:10","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:49:11","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:49:21"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:49:22"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:22"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:49:22"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:49:22"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:49:24"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:24"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:24"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:49:26"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:26"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:49:26"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:49:26"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:49:26"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:49:31"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:49:31"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:31"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:49:31"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:49:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:49:33"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:33"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:49:35"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:35"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:49:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:49:35"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:49:35"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:49:45"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:49:46"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:46"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:49:46"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:49:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:49:47"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:47"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:48"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:49:49"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:49:49"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:49:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:49:50"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:49:50"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:50:23"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:50:23"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:50:23"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:50:23"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:50:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:50:25"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:50:25"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:50:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:50:27"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:50:28"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:50:28"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:50:28"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:50:28"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:51:05"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:51:05"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:05"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:51:05"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:51:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:51:07"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:07"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:51:09"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:09"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:51:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:51:10"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:51:10"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:51:21"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:51:22"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:22"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:51:22"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:51:22"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:51:23"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:24"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:24"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:51:25"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:26"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:51:26"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:51:26"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:51:26"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:51:30"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:51:30"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:30"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:51:30"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:51:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:51:32"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:32"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:51:34"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:34"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:51:34"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:51:34"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:51:34"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 16:51:39"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 16:51:39"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:51:58"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:51:58"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:51:58"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:51:58"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:51:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:52:00"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:52:00"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:52:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:52:02"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:52:02"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:52:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:52:02"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:52:02"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:52:05"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:52:06"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:52:06"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:52:06"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:52:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:52:08"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:52:08"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:52:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:52:10"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:52:10"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:52:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:52:10"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:52:10"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 16:52:29"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 16:52:29"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:52:30","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:52:32","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:53:20","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:53:24","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:53:25","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:53:39","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:53:40","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 16:53:47"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 16:53:48"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:53:48"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:53:48"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 16:53:48"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:53:49"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:53:50"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:53:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 16:53:51"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 16:53:52"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 16:53:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 16:53:52"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 16:53:52"}
{"error":"Error fetching gallery: Could not find the table 'public.event_gallery' in the schema cache","level":"error","message":"Error fetching all gallery items:","service":"qrevent-backend","timestamp":"2026-02-09 16:54:13"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 16:55:12","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 17:02:53"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 17:02:53"}
{"error":"Error fetching gallery: Could not find the table 'public.event_gallery' in the schema cache","level":"error","message":"Error fetching all gallery items:","service":"qrevent-backend","timestamp":"2026-02-09 17:03:42"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:04:18","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:05:19","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:05:24","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:05:25","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:06:00","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:06:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:06:54","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:07:57","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:07:58","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:09:43","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:09:44","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:10:38","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:10:39","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:11:21","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:11:22","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:11:28","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:11:29","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 17:11:43"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 17:11:44"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:11:44"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 17:11:44"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 17:11:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 17:11:46"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:11:46"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:11:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 17:11:48"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:11:48"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 17:11:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 17:11:48"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 17:11:48"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 17:11:49"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 17:11:49"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:11:49","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:11:51","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:12:06","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:12:07","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:12:23","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:12:24","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:13:41","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:13:42","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 17:14:25"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 17:14:26"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:14:26"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 17:14:26"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 17:14:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 17:14:28"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:14:28"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:14:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 17:14:30"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:14:30"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 17:14:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 17:14:31"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 17:14:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 17:14:49"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 17:14:49"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:14:49"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 17:14:49"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 17:14:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 17:14:51"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:14:51"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:14:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 17:14:53"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:14:53"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 17:14:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 17:14:54"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 17:14:54"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 17:15:13"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 17:15:13"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:15:13"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 17:15:13"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 17:15:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 17:15:15"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:15:15"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:15:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 17:15:17"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:15:18"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 17:15:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 17:15:18"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 17:15:18"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:16:53","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:16:55","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 17:18:10"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 17:18:10"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:18:44","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:18:45","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 17:19:14"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 17:19:15"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:19:15"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 17:19:15"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 17:19:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 17:19:16"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:19:17"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:19:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 17:19:18"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:19:19"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 17:19:19"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 17:19:19"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 17:19:19"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:19:24","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 17:19:25"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 17:19:25"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:19:25"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 17:19:25"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 17:19:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 17:19:26"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:19:27"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:19:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 17:19:29"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 17:19:29"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 17:19:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 17:19:29"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 17:19:29"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:19:37","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:19:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:20:50","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 17:22:29"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 17:22:29"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:25:15","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:25:16","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:25:29","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:25:31","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:25:32","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:26:31","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:27:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:28:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:28:33","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:29:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:29:10","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:32:38","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:32:39","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:36:08","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:37:08","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:38:09","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:39:04","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:40:13","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:41:14","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:42:14","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:43:16","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:43:29","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:43:30","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:52:39","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:52:40","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:52:43","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:52:44","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 17:53:26","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 18:01:23","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 18:02:24","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 18:03:26","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 18:04:28","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-09 18:04:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 18:04:32"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 18:04:33"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:04:33"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:04:33"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 18:04:33"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 18:04:34"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 18:04:35"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:04:35"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:04:35"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 18:04:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 18:04:37"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:04:37"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:04:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 18:04:39"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:04:39"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:04:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 18:04:39"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 18:04:39"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 18:05:31"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 18:05:31"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:05:31"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:05:31"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 18:05:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 18:05:34"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:05:34"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:05:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 18:05:36"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:05:36"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:05:36"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 18:05:36"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 18:05:36"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 18:06:11"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 18:06:11"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:06:11"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:06:11"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 18:06:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 18:06:13"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:06:14"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:06:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 18:06:17"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:06:17"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:06:17"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 18:06:17"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 18:06:17"}
{"level":"info","message":"Redis not configured, using memory fallback for refresh tokens","service":"qrevent-backend","timestamp":"2026-02-09 18:15:58"}
{"level":"info","message":"User logged in","service":"qrevent-backend","timestamp":"2026-02-09 18:15:59","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 18:16:00","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 18:16:01","userEmail":"andriatsilavokevin@gmail.com","userId":"97324839-b03d-41f1-bef4-47011885453a"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 18:19:32"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 18:19:32"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:19:32"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:19:32"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 18:19:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 18:19:34"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:19:34"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:19:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 18:19:36"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:19:36"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:19:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 18:19:37"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 18:19:37"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 18:21:51"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 18:21:51"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:21:51"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:21:51"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 18:21:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 18:21:59"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:21:59"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:22:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 18:22:01"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:22:02"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:22:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 18:22:02"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 18:22:02"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 18:22:04"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 18:54:48"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 18:54:49"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:54:49"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:54:49"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 18:54:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 18:54:51"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:54:51"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:54:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 18:54:53"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 18:54:54"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:54:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 18:54:54"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 18:54:54"}
{"authId":"3512180f-2dbb-43a1-a833-69d2942cf01d","level":"warn","message":"Profile not found after signup, trigger may be slow:","service":"qrevent-backend","timestamp":"2026-02-09 18:57:45"}
{"email":"test@example.com","level":"info","message":"User signed up successfully","service":"qrevent-backend","timestamp":"2026-02-09 18:57:45","userId":"3512180f-2dbb-43a1-a833-69d2942cf01d"}
{"email":"test@example.com","level":"info","message":"New user registered via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-09 18:57:45"}
{"email":"test@example.com","error":"Email not confirmed","level":"warn","message":"Sign in failed:","service":"qrevent-backend","timestamp":"2026-02-09 18:57:58"}
{"error":"Email not confirmed","level":"error","message":"SignIn service error:","service":"qrevent-backend","timestamp":"2026-02-09 18:57:58"}
{"error":"Email not confirmed","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-09 18:57:58"}
{"authId":"5eb7a0c8-74dc-4dfe-8db0-53c56170596a","level":"warn","message":"Profile not found after signup, trigger may be slow:","service":"qrevent-backend","timestamp":"2026-02-09 19:07:23"}
{"email":"freshstart@example.com","level":"info","message":"User signed up successfully","service":"qrevent-backend","timestamp":"2026-02-09 19:07:23","userId":"5eb7a0c8-74dc-4dfe-8db0-53c56170596a"}
{"email":"freshstart@example.com","level":"info","message":"New user registered via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-09 19:07:23"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 20:44:40"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 20:44:40"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:44:40"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:44:40"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 20:44:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:44:42"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:44:43"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:44:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:44:45"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:44:46"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:44:46"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 20:44:46"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 20:44:46"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 20:45:13"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 20:45:13"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:45:13"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:45:13"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 20:45:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:45:15"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:45:15"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:45:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:45:17"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:45:18"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:45:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 20:45:18"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 20:45:18"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 20:45:46"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 20:45:47"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:45:47"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:45:47"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 20:45:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:45:49"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:45:49"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:45:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:45:51"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:45:52"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:45:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 20:45:52"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 20:45:52"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 20:46:07"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 20:46:08"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:46:08"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:46:08"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 20:46:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:46:10"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:46:10"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:46:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:46:13"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:46:13"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:46:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 20:46:14"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 20:46:14"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 20:46:25"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 20:46:25"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:46:25"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:46:25"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 20:46:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:46:27"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:46:28"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:46:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:46:30"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:46:30"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:46:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 20:46:30"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 20:46:30"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 20:46:47"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 20:46:48"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:46:48"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:46:48"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 20:46:48"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:46:50"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:46:50"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:46:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:46:53"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:46:53"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:46:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 20:46:54"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 20:46:54"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 20:47:25"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 20:47:25"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:47:25"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:47:25"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 20:47:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:47:27"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:47:28"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:47:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:47:30"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:47:31"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:47:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 20:47:31"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 20:47:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 20:48:04"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 20:48:04"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:04"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:48:04"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 20:48:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:48:06"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:07"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:48:09"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:09"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:48:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 20:48:10"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 20:48:10"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 20:48:22"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 20:48:22"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 20:48:22"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 20:48:22"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 20:48:22"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:22"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:48:22"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 20:48:22"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:48:24"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:24"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:48:26"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:27"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:48:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 20:48:27"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 20:48:27"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 20:48:36"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 20:48:36"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 20:48:36"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 20:48:36"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 20:48:36"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:36"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:48:36"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 20:48:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:48:38"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:38"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:48:40"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:41"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:48:41"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 20:48:41"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 20:48:41"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 20:48:52"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 20:48:52"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 20:48:52"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 20:48:52"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 20:48:52"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:52"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:48:52"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 20:48:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:48:54"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:54"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:48:56"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:48:57"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:48:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 20:48:57"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 20:48:57"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 20:49:00"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 20:49:00"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 20:49:00"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 20:49:00"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 20:49:00"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:49:00"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:49:00"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 20:49:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:49:02"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:49:02"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:49:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 20:49:04"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 20:49:05"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 20:49:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 20:49:05"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 20:49:05"}
{"error":"supabaseService.from(...).select(...).eq is not a function","level":"error","message":"SignIn service error:","service":"qrevent-backend","timestamp":"2026-02-09 21:00:11"}
{"error":"supabaseService.from(...).select(...).eq is not a function","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-09 21:00:11"}
{"email":"test@test.com","error":"Invalid login credentials","level":"warn","message":"Sign in failed:","service":"qrevent-backend","timestamp":"2026-02-09 21:03:02"}
{"error":"Invalid login credentials","level":"error","message":"SignIn service error:","service":"qrevent-backend","timestamp":"2026-02-09 21:03:02"}
{"error":"Invalid login credentials","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-09 21:03:02"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:03:15"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:03:15"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:03:15"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:03:16"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:03:16"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:03:16"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:03:16"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:03:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:03:18"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:03:18"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:03:19"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:03:21"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:03:21"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:03:21"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:04:15"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:04:15"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:04:15"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:04:15"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:04:15"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:04:15"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:04:15"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:04:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:04:17"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:04:17"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:04:18"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:04:19"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:04:20"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:04:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:04:20"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:04:20"}
{"error":"supabaseService.from(...).select(...).eq is not a function","level":"error","message":"SignUp service error:","service":"qrevent-backend","timestamp":"2026-02-09 21:04:41"}
{"error":"supabaseService.from(...).select(...).eq is not a function","level":"error","message":"Registration error:","service":"qrevent-backend","timestamp":"2026-02-09 21:04:41"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:06:02"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:06:02"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:06:02"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:06:02"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:06:03"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:06:03"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:06:03"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:06:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:06:05"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:06:05"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:06:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:06:08"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:06:08"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:06:08"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:06:08"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:06:08"}
{"email":"test@example.com","error":"A user with this email address has already been registered","level":"error","message":"Supabase signup error:","service":"qrevent-backend","timestamp":"2026-02-09 21:06:24"}
{"error":"A user with this email address has already been registered","level":"error","message":"SignUp service error:","service":"qrevent-backend","timestamp":"2026-02-09 21:06:24"}
{"error":"A user with this email address has already been registered","level":"error","message":"Registration error:","service":"qrevent-backend","timestamp":"2026-02-09 21:06:24"}
{"email":"test@example.com","error":"Email not confirmed","level":"warn","message":"Sign in failed:","service":"qrevent-backend","timestamp":"2026-02-09 21:06:37"}
{"error":"Email not confirmed","level":"error","message":"SignIn service error:","service":"qrevent-backend","timestamp":"2026-02-09 21:06:37"}
{"error":"Email not confirmed","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-09 21:06:37"}
{"error":"supabaseService.from(...).select(...).eq is not a function","level":"error","message":"SignUp service error:","service":"qrevent-backend","timestamp":"2026-02-09 21:06:47"}
{"error":"supabaseService.from(...).select(...).eq is not a function","level":"error","message":"Registration error:","service":"qrevent-backend","timestamp":"2026-02-09 21:06:47"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:07:01"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:07:01"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:07:01"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:07:01"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:07:02"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:07:02"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:07:02"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:07:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:07:04"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:07:04"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:07:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:07:07"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:07:07"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:07:08"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:07:08"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:07:08"}
{"authId":"42226a8c-7eb6-4043-837b-ed8f0674bb01","level":"warn","message":"Profile not found after signup, trigger may be slow:","service":"qrevent-backend","timestamp":"2026-02-09 21:07:17"}
{"email":"kevin@test.com","level":"info","message":"User signed up successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:07:17","userId":"42226a8c-7eb6-4043-837b-ed8f0674bb01"}
{"email":"kevin@test.com","level":"info","message":"New user registered via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-09 21:07:17"}
{"authId":"da2dd017-cf66-4210-99b7-d23266358f37","level":"error","message":"User profile not found after sign in:","service":"qrevent-backend","timestamp":"2026-02-09 21:08:06"}
{"error":"User profile not found","level":"error","message":"SignIn service error:","service":"qrevent-backend","timestamp":"2026-02-09 21:08:06"}
{"error":"User profile not found","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-09 21:08:06"}
{"authId":"980240a5-87b2-40e1-9da8-a26d41a20140","level":"warn","message":"Profile not found after signup, trigger may be slow:","service":"qrevent-backend","timestamp":"2026-02-09 21:10:12"}
{"email":"trigger@test.com","level":"info","message":"User signed up successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:10:12","userId":"980240a5-87b2-40e1-9da8-a26d41a20140"}
{"email":"trigger@test.com","level":"info","message":"New user registered via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-09 21:10:12"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"Found 65 migration(s):","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 040_fix_menu_settings_structure.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 041_fix_supabase_security_linter.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 042_fix_function_search_path_and_materialized_views.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 043_fix_game_statistics_and_ranking.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 044_supabase_auth_clean_integration.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 044_supabase_auth_integration.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 045_supabase_auth_triggers.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - SUPABASE_AUTH_SETUP.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:11:17"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:17"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-09 21:11:18"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:11:45"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:11:45"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:11:45"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:11:45"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:11:45"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:45"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:11:45"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:11:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:11:47"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:47"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:48"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:11:49"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:11:50"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:11:50"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:11:50"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:11:50"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:12:04"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:12:04"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:12:04"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:12:04"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:12:05"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:12:05"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:12:05"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:12:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:12:07"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:12:07"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:12:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:12:10"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:12:10"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:12:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:12:10"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:12:10"}
{"email":"final@test.com","level":"info","message":"User signed up successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:12:21","userId":"3a52b392-5965-4f39-8b7d-52ef623e1d15"}
{"email":"final@test.com","level":"info","message":"New user registered via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-09 21:12:21"}
{"email":"final@test.com","error":"Email not confirmed","level":"warn","message":"Sign in failed:","service":"qrevent-backend","timestamp":"2026-02-09 21:12:38"}
{"error":"Email not confirmed","level":"error","message":"SignIn service error:","service":"qrevent-backend","timestamp":"2026-02-09 21:12:38"}
{"error":"Email not confirmed","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-09 21:12:38"}
{"authId":"da2dd017-cf66-4210-99b7-d23266358f37","level":"error","message":"User profile not found after sign in:","service":"qrevent-backend","timestamp":"2026-02-09 21:13:01"}
{"error":"User profile not found","level":"error","message":"SignIn service error:","service":"qrevent-backend","timestamp":"2026-02-09 21:13:01"}
{"error":"User profile not found","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-09 21:13:01"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:14:27"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:14:27"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:14:27"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:14:28"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:14:28"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:14:28"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:14:28"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:14:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:14:30"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:14:30"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:14:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:14:32"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:14:33"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:14:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:14:33"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:14:33"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed up successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:14:38","userId":"4a82aeee-0001-4f64-b336-65c1a23cf7f9"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"New user registered via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-09 21:14:38"}
{"email":"andriatsilavokevin@gmail.com","error":"Email not confirmed","level":"warn","message":"Sign in failed:","service":"qrevent-backend","timestamp":"2026-02-09 21:14:48"}
{"error":"Email not confirmed","level":"error","message":"SignIn service error:","service":"qrevent-backend","timestamp":"2026-02-09 21:14:48"}
{"error":"Email not confirmed","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-09 21:14:48"}
{"email":"delete@test.com","level":"info","message":"User signed up successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:15:09","userId":"546d9b0e-7842-4d14-8976-9867ca4612ca"}
{"email":"delete@test.com","level":"info","message":"New user registered via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-09 21:15:09"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:15:28"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:15:28"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:15:28"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:15:28"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:15:28"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:15:28"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:15:28"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:15:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:15:30"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:15:31"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:15:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:15:34"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:15:34"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:15:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:15:35"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:15:35"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:18:03"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:18:03"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:18:03"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:18:03"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:18:03"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:18:03"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:18:03"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:18:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:18:06"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:18:06"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:18:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:18:09"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:18:09"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:18:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:18:10"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:18:10"}
{"email":"final@test.com","error":"Invalid login credentials","level":"warn","message":"Sign in failed:","service":"qrevent-backend","timestamp":"2026-02-09 21:18:21"}
{"error":"Invalid login credentials","level":"error","message":"SignIn service error:","service":"qrevent-backend","timestamp":"2026-02-09 21:18:21"}
{"error":"Invalid login credentials","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-09 21:18:21"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:21:42"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:21:42"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:21:42"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:21:42"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:21:43"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:21:43"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:21:43"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:21:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:21:45"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:21:45"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:21:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:21:47"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:21:48"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:21:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:21:48"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:21:48"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:22:03"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:22:03"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:22:03"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:22:03"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:22:03"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:22:03"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:22:04"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:22:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:22:06"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:22:06"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:22:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:22:08"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:22:09"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:22:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:22:09"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:22:09"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:22:11"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:22:11"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:22:11"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:22:11"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:22:11"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:22:11"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:22:11"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:22:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:22:13"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:22:13"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:22:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:22:15"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:22:15"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:22:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:22:16"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:22:16"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:24:34"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:24:34"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:24:34"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:24:34"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:24:35"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:24:35"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:24:35"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:24:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:24:38"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:24:38"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:24:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:24:40"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:24:41"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:24:41"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:26:02"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:26:02"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:26:02"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:26:02"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:26:03"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:26:03"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:26:03"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:26:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:26:05"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:26:05"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:26:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:26:07"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:26:07"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:26:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:26:07"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:26:07"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed up successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:26:36","userId":"8e84975c-bdba-4370-bcbd-526f88b3502e"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"New user registered via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-09 21:26:36"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed in successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:27:16","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"User logged in via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-09 21:27:18","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:27:26","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:27:28","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:27:52","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:27:53","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 21:27:58"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 21:27:58"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:27:59","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:28:00","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:29:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:29:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:29:43"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:29:43"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:29:43"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:29:43"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:29:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:29:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:29:45"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:29:46"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:29:46"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:29:46"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:29:46"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:29:46"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:29:47"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:29:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:30:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:30:01"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:30:01"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:30:01"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:30:02"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:30:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:30:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:30:04"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:30:04"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:30:04"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:30:05"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:30:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:30:05"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:30:05"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 21:30:13"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 21:30:13"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:30:16","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:30:17","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:32:11"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:32:11"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:32:11"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:32:12"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:32:12"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:32:12"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:32:12"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:32:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:32:15"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:32:16"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:32:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:32:19"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:32:19"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:32:19"}
{"code":"EPIPE","errno":-32,"level":"error","message":"Uncaught Exception: write EPIPE","service":"qrevent-backend","stack":"Error: write EPIPE\n    at afterWriteDispatched (node:internal/stream_base_commons:159:15)\n    at writeGeneric (node:internal/stream_base_commons:150:3)\n    at Socket._writeGeneric (node:net:971:11)\n    at Socket._write (node:net:983:8)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at Writable.write (node:internal/streams/writable:510:10)\n    at Console.log (/home/kevin/Mify/backendMify/node_modules/winston/lib/winston/transports/console.js:87:23)\n    at Console._write (/home/kevin/Mify/backendMify/node_modules/winston-transport/modern.js:103:17)\n    at doWrite (/home/kevin/Mify/backendMify/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)","syscall":"write","timestamp":"2026-02-09 21:33:19"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:33:56"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:33:56"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:33:56"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:33:56"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:33:56"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:33:56"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:33:56"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:33:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:33:58"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:33:59"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:33:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:34:01"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:34:01"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:34:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:34:01"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:34:01"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 21:34:06"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 21:34:06"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:34:09","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:34:10","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:35:56","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:35:57","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:38:06","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:38:07","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:38:24","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:38:24","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:38:28","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:38:29","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:39:27","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:39:28","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:40:30","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:40:31","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:40:42","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:40:43","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:41:54","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:41:55","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:41:59","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:42:00","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:42:04","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:42:05","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:42:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:42:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:42:32","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:42:33","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"fileSize":3029161,"level":"info","message":"Avatar upload request","mimeType":"image/png","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-09 21:43:54","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Bull Queue: Image processing queue initialized","service":"qrevent-backend","timestamp":"2026-02-09 21:43:54"}
{"error":"Stream isn't writeable and enableOfflineQueue options is false","level":"warn","message":"Bull Queue: Failed to add job, using fallback","service":"qrevent-backend","timestamp":"2026-02-09 21:43:54"}
{"jobName":"processImage","level":"info","message":"Image processing fallback (async immediate)","service":"qrevent-backend","timestamp":"2026-02-09 21:43:54","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar queued for background processing","service":"qrevent-backend","timestamp":"2026-02-09 21:43:54"}
{"error":"imageService.processAvatarWithFallback is not a function","jobId":"fallback-1770659034461-deiecopu6","jobName":"processImage","level":"error","message":"Image fallback processing failed","service":"qrevent-backend","timestamp":"2026-02-09 21:43:54"}
{"eventId":null,"level":"info","message":"Cache invalidated","patterns":["user:caf5b502-3e1d-4ee6-a753-c77d4c08fc38:*"],"service":"qrevent-backend","timestamp":"2026-02-09 21:43:54","type":["user"],"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"fileSize":3029161,"level":"info","message":"Avatar upload request","mimeType":"image/png","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-09 21:44:05","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"jobId":"1","jobName":"processImage","level":"info","message":"Image job queued","service":"qrevent-backend","timestamp":"2026-02-09 21:44:05","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar queued for background processing","service":"qrevent-backend","timestamp":"2026-02-09 21:44:05"}
{"eventId":null,"level":"info","message":"Cache invalidated","patterns":["user:caf5b502-3e1d-4ee6-a753-c77d4c08fc38:*"],"service":"qrevent-backend","timestamp":"2026-02-09 21:44:05","type":["user"],"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:44:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:44:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:44:18"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:44:18"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:44:18"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:44:18"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:44:18"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:44:20"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:44:20"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:44:20"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:44:20"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:44:20"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:44:20"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:44:20"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:44:20"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 21:44:39"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 21:44:39"}
{"fileSize":3029161,"level":"info","message":"Avatar upload request","mimeType":"image/png","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-09 21:45:10","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Bull Queue: Image processing queue initialized","service":"qrevent-backend","timestamp":"2026-02-09 21:45:10"}
{"error":"Stream isn't writeable and enableOfflineQueue options is false","level":"warn","message":"Bull Queue: Failed to add job, using fallback","service":"qrevent-backend","timestamp":"2026-02-09 21:45:11"}
{"jobName":"processImage","level":"info","message":"Image processing fallback (async immediate)","service":"qrevent-backend","timestamp":"2026-02-09 21:45:11","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar queued for background processing","service":"qrevent-backend","timestamp":"2026-02-09 21:45:11"}
{"error":"imageService.processAvatarWithFallback is not a function","jobId":"fallback-1770659111014-lqu6hfyp1","jobName":"processImage","level":"error","message":"Image fallback processing failed","service":"qrevent-backend","timestamp":"2026-02-09 21:45:11"}
{"eventId":null,"level":"info","message":"Cache invalidated","patterns":["user:caf5b502-3e1d-4ee6-a753-c77d4c08fc38:*"],"service":"qrevent-backend","timestamp":"2026-02-09 21:45:11","type":["user"],"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:47:06","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:47:07","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"fileSize":3029161,"level":"info","message":"Avatar upload request","mimeType":"image/png","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-09 21:47:35","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"jobId":"2","jobName":"processImage","level":"info","message":"Image job queued","service":"qrevent-backend","timestamp":"2026-02-09 21:47:35","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar queued for background processing","service":"qrevent-backend","timestamp":"2026-02-09 21:47:35"}
{"eventId":null,"level":"info","message":"Cache invalidated","patterns":["user:caf5b502-3e1d-4ee6-a753-c77d4c08fc38:*"],"service":"qrevent-backend","timestamp":"2026-02-09 21:47:35","type":["user"],"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:48:55"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:48:55"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:48:55"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:48:55"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:48:55"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:48:56"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:48:56"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:48:56"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:48:55"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:48:55"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:48:55"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:48:56"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:48:56"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:48:56"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:48:56"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:48:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:48:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:48:58"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:48:58"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:48:58"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:48:58"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:48:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:49:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:49:00"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:49:01"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:49:01"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:49:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:49:01"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:49:01"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:49:01"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 21:49:06"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 21:49:06"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:53:57"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:53:57"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:53:57"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:53:57"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:53:57"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:53:57"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:53:57"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:53:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:53:59"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:54:00"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:54:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:54:02"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:54:03"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:54:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:54:03"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:54:03"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 21:54:17"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 21:54:17"}
{"fileSize":3029161,"level":"info","message":"Avatar upload request","mimeType":"image/png","originalName":"ChatGPT Image Dec 4, 2025, 06_28_54 PM.png","service":"qrevent-backend","timestamp":"2026-02-09 21:54:21","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Profile updated successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:54:26","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar uploaded successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:54:26","url":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/39921795-ab5c-45f3-b02e-f0325f9c7211.png","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":null,"level":"info","message":"Cache invalidated","patterns":["user:caf5b502-3e1d-4ee6-a753-c77d4c08fc38:*"],"service":"qrevent-backend","timestamp":"2026-02-09 21:54:26","type":["user"],"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:55:22"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:55:22"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:55:22"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:55:22"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:55:22"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:55:22"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:55:22"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:55:22"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:55:24"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:55:25"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:55:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:55:27"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:55:27"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:55:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:55:27"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:55:27"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 21:55:33"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 21:55:33"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:56:02","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:56:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:57:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:57:22","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:57:24"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:57:24"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:57:24"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:57:25"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:57:25"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:57:25"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:57:25"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:57:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:57:27"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:57:27"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:57:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:57:30"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:57:30"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:57:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:57:30"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:57:30"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:57:47"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:57:47"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:57:47"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:57:47"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:57:48"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:57:48"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:57:48"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:57:48"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:57:50"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:57:50"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:57:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:57:53"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:57:53"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:57:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:57:53"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:57:53"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:58:02"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:58:02"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:58:02"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:58:02"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:58:03"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:58:03"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:58:03"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:58:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:58:05"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:58:05"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:58:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:58:08"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:58:08"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:58:08"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:58:08"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:58:08"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:58:29"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:58:29"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:58:29"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:58:29"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:58:29"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:58:29"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:58:29"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:58:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:58:31"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:58:32"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:58:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:58:34"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:58:34"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:58:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:58:35"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:58:35"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 21:58:38"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 21:58:38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:58:38","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:58:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:58:49"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:58:49"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:58:49"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:58:49"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:58:50"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:58:50"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:58:50"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:58:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:58:52"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:58:52"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:58:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:58:55"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:58:55"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:58:55"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:58:55"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:58:55"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 21:59:04"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 21:59:04"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:59:07","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:59:08","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:59:29"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 21:59:29"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 21:59:29"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:59:29"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 21:59:30"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:59:30"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:59:30"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 21:59:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:59:32"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:59:32"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:59:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 21:59:34"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 21:59:35"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 21:59:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 21:59:35"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 21:59:35"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:59:37","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 21:59:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 21:59:51"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:00:01"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 22:00:01"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:00:01"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 22:00:01"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 22:00:01"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:00:01"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:00:02"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 22:00:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:00:04"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:00:04"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:00:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:00:06"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:00:06"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:00:07"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 22:00:07"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 22:00:07"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 22:00:37"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 22:00:37"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:00:38","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:00:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:02:01","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:02:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:03:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:03:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"error":"supabaseAuthService.getProfile is not a function","level":"error","message":"Error removing avatar:","service":"qrevent-backend","timestamp":"2026-02-09 22:04:11"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:05:24"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 22:05:24"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:05:24"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 22:05:24"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 22:05:24"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:05:24"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:05:24"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 22:05:24"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:05:26"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:05:27"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:05:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:05:29"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:05:30"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:05:30"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 22:05:30"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 22:05:30"}
{"level":"info","message":"Avatar deleted from storage","service":"qrevent-backend","timestamp":"2026-02-09 22:06:19","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Profile updated successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:06:19","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar removed successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:06:19","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache pattern invalidation error:","service":"qrevent-backend","timestamp":"2026-02-09 22:06:19"}
{"eventId":null,"level":"info","message":"Cache invalidated","patterns":["user:caf5b502-3e1d-4ee6-a753-c77d4c08fc38:*"],"service":"qrevent-backend","timestamp":"2026-02-09 22:06:19","type":["user"],"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"fileSize":56060,"level":"info","message":"Avatar upload request","mimeType":"image/webp","originalName":"avatar.webp","service":"qrevent-backend","timestamp":"2026-02-09 22:06:37","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Profile updated successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:06:39","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar uploaded successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:06:39","url":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/55d89d6c-5329-4303-94dc-d0d9cd856b5f.webp","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":null,"level":"info","message":"Cache invalidated","patterns":["user:caf5b502-3e1d-4ee6-a753-c77d4c08fc38:*"],"service":"qrevent-backend","timestamp":"2026-02-09 22:06:39","type":["user"],"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:16:18","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:16:19","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:32:18","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:32:19","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-09 22:33:30","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-09 22:33:32","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-09 22:33:36","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:33:54"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 22:33:54"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:33:54"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 22:33:54"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 22:33:54"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:33:54"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:33:54"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 22:33:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:33:56"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:33:56"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:33:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:33:59"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:33:59"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:33:59"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:35:40"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 22:35:40"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:35:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 22:35:40"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 22:35:40"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:35:40"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:35:40"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 22:35:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:35:42"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:35:42"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:35:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:35:44"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:35:44"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:35:45"}
{"level":"info","message":"Qrevent backend server running on port 5001 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 22:35:45"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 22:35:45"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:36:27"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 22:36:27"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:36:27"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 22:36:27"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 22:36:27"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:36:27"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:36:27"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 22:36:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:36:29"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:36:29"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:36:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:36:31"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:36:31"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:36:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 22:36:32"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 22:36:32"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 22:36:47"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 22:36:47"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:36:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:36:50","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:38:14"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 22:38:14"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:38:14"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 22:38:14"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 22:38:14"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:38:14"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:38:14"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 22:38:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:38:16"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:38:16"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:38:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:38:18"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:38:19"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:38:19"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 22:38:19"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 22:38:19"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:38:32"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-09 22:38:32"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-09 22:38:32"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-09 22:38:32"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-09 22:38:32"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:38:32"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:38:32"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-09 22:38:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:38:34"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:38:34"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:38:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-09 22:38:36"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-09 22:38:36"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-09 22:38:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-09 22:38:37"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-09 22:38:37"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-09 22:43:16"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-09 22:43:16"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:43:17","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:43:18","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:46:00","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-09 22:46:02","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 07:12:09"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 07:12:09"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 07:12:09"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 07:12:09"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 07:12:10"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:12:10"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 07:12:10"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 07:12:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 07:12:12"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:12:13"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:12:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 07:12:15"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:12:16"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 07:12:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 07:12:16"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 07:12:16"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-10 07:12:54"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-10 07:12:54"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:12:56","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:12:57","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 07:13:48","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 07:13:50","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 07:13:53","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 07:16:39"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 07:16:39"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 07:16:39"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 07:16:40"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 07:16:40"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:16:40"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 07:16:40"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 07:16:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 07:16:42"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:16:42"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:16:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 07:16:45"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:16:45"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 07:16:45"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 07:17:12"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 07:17:12"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 07:17:12"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 07:17:13"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 07:17:13"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:17:13"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 07:17:13"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 07:17:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 07:17:15"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:17:15"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:17:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 07:17:17"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:17:18"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 07:17:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 07:17:18"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 07:17:18"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-10 07:17:21"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-10 07:17:21"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:17:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:17:24","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:17:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:17:50","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:27:00","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:27:02","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:27:54","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:27:55","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:28:34","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:28:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:29:05","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:29:06","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:29:19","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:29:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:29:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:29:50","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:31:24","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:31:25","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:32:34","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:32:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:32:42","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:32:43","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:34:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:34:21","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:34:56","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:34:57","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:35:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:35:04","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:35:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:35:21","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:37:34","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:37:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:38:22","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:38:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:39:09","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:39:10","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:39:13","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:39:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:39:37","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 07:39:38","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 07:45:06"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 07:45:06"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 07:45:06"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 07:45:06"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 07:45:07"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:45:07"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 07:45:07"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 07:45:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 07:45:09"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:45:10"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:45:10"}
{"code":"EPIPE","errno":-32,"level":"error","message":"Uncaught Exception: write EPIPE","service":"qrevent-backend","stack":"Error: write EPIPE\n    at afterWriteDispatched (node:internal/stream_base_commons:159:15)\n    at writeGeneric (node:internal/stream_base_commons:150:3)\n    at Socket._writeGeneric (node:net:971:11)\n    at Socket._write (node:net:983:8)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at Writable.write (node:internal/streams/writable:510:10)\n    at Console.log (/home/kevin/Mify/backendMify/node_modules/winston/lib/winston/transports/console.js:87:23)\n    at Console._write (/home/kevin/Mify/backendMify/node_modules/winston-transport/modern.js:103:17)\n    at doWrite (/home/kevin/Mify/backendMify/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)","syscall":"write","timestamp":"2026-02-10 07:45:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 07:45:13"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 07:45:13"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 07:45:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 07:45:13"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 07:45:13"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:02:48","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:02:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-10 08:03:23"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-10 08:03:23"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:05:26","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:05:27","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:07:24","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:07:25","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:16:00","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:16:01","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:17:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:17:04","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:17:50","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:17:51","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:29:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:29:41","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:34:45","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 08:34:47","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 08:42:50","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 08:42:52","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 08:52:34","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 08:52:35","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 08:52:38","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 08:59:12","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 08:59:14","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: ceremony_venue is required for single venue type (code: P0001)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 08:59:17","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:46:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:46:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:48:33","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:48:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:48:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:48:45","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:50:32","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:50:33","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:07","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:09","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:18"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:18"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:18"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 09:51:18"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 09:51:18"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:51:18"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:51:18"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 09:51:18"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:51:21"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:51:21"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:51:21"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:51:23"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:51:24"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:51:24"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 09:51:24"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 09:51:24"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:24"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:24"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:24"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:55"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:55"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:55"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 09:51:56"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 09:51:57"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:51:57"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:51:57"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 09:51:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:51:59"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:51:59"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:59"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:59"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:51:59"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:52:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:52:02"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:52:02"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:52:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 09:52:03"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 09:52:03"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-10 09:52:25"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-10 09:52:25"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:26","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:28","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:34"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:34"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:34"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 09:52:34"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 09:52:35"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:52:35"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:52:35"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 09:52:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:52:37"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:52:38"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:52:38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:37"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:37"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:52:40"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:52:40"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:52:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 09:52:40"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 09:52:40"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-10 09:52:44"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-10 09:52:44"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:47","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:48","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:55"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:55"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:52:55"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 09:52:55"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 09:52:56"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:52:56"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:52:56"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 09:52:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:52:58"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:52:58"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:52:59"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:53:00"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:01"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:53:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 09:53:01"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 09:53:01"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:02"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:02"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:02"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 09:53:03"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 09:53:04"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:04"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:53:04"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 09:53:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:53:06"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:06"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:53:08"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:08"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:53:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 09:53:09"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 09:53:09"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:10"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:10"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:10"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 09:53:10"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 09:53:11"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:11"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:53:11"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 09:53:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:53:12"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:12"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:53:15"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:15"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:53:15"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 09:53:15"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 09:53:15"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:40"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:40"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 09:53:40"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 09:53:40"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:40"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:53:40"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 09:53:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:53:43"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:43"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:43"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:45"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:45"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:53:45"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:45"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:53:46"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 09:53:46"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 09:53:46"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:57"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:57"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:53:57"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 09:53:57"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 09:53:57"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:57"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:53:57"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 09:53:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:53:59"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:53:59"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:54:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:54:01"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:54:01"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:54:01"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:54:01"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:54:01"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:54:02"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 09:54:02"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 09:54:02"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:54:27"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:54:27"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:54:27"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 09:54:27"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 09:54:28"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:54:28"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:54:28"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 09:54:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:54:29"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:54:30"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:54:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 09:54:32"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:54:32"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 09:54:32"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 09:54:32"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 09:54:32"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 09:54:33"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 09:54:33"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 09:54:33"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:55:17","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:55:18","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-10 09:56:11"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-10 09:56:11"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:56:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 09:56:13","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:00:04","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:00:05","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:02:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:02:13","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:02:28","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:02:29","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:04:51"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 10:04:51"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:04:51"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 10:04:51"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 10:04:51"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:04:51"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:04:52"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 10:04:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:04:54"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:04:55"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:04:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:04:57"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:04:57"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:04:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 10:04:57"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 10:04:57"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-10 10:05:05"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-10 10:05:05"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:05:06","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:05:07","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:04"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:04"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:04"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 10:06:04"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 10:06:04"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:04"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:06:04"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 10:06:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:06:06"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:06"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:06"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:06"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 10:06:06"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 10:06:06"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:06"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:06:06"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 10:06:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:06:08"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:09"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:06:11"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:06:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 10:06:11"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 10:06:11"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:23"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:23"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:23"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 10:06:23"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 10:06:23"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:23"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:06:23"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 10:06:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:06:25"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:25"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:06:27"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:27"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:06:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 10:06:27"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 10:06:27"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:31"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:31"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 10:06:31"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 10:06:31"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:31"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:06:31"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 10:06:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:06:33"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:34"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:34"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:35"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:35"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:35"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 10:06:35"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 10:06:36"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:36"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:06:36"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 10:06:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:06:37"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:38"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:06:39"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:40"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:40"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 10:06:40"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 10:06:40"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:40"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:06:40"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 10:06:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:06:42"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:42"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:06:44"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:45"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:06:45"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 10:06:45"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 10:06:45"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:54"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:54"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:06:54"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 10:06:54"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 10:06:55"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:55"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:06:55"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 10:06:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:06:57"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:57"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:06:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:06:59"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:07:00"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:07:00"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 10:07:00"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 10:07:00"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-10 10:07:07"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-10 10:07:07"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:07:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:07:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:07:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:07:24","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:09:02","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:09:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:09:31","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:09:32","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:09:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:09:40","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:14:04"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 10:14:04"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 10:14:04"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 10:14:04"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 10:14:04"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:14:04"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:14:04"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 10:14:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:14:07"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:14:07"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:14:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 10:14:09"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 10:14:10"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 10:14:10"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 10:14:10"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 10:14:10"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-10 10:17:54"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-10 10:17:54"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:19:40","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:19:41","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:20:56","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:20:57","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:21:13","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:21:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:21:26","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:21:27","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:21:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:21:45","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:22:05","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:22:07","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:58:29","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 10:58:30","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 11:01:43","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 11:01:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 11:15:23"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 11:15:23"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 11:15:23"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 11:15:23"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 11:15:23"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 11:15:23"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 11:15:23"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 11:15:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 11:15:25"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 11:15:26"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 11:15:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 11:15:28"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 11:15:28"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 11:15:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 11:15:29"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 11:15:29"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 11:15:47"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-10 11:15:47"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-10 11:15:47"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-10 11:15:47"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-10 11:15:47"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 11:15:47"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-10 11:15:47"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-10 11:15:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 11:15:50"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-10 11:15:50"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 11:15:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-10 11:15:52"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-10 11:15:53"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-10 11:15:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-10 11:15:53"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-10 11:15:53"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: new row violates row-level security policy for table \"events\" (code: 42501)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 11:16:31","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: new row violates row-level security policy for table \"events\" (code: 42501)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 11:16:33","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"UNKNOWN_ERROR","error":"Error creating event: new row violates row-level security policy for table \"events\" (code: 42501)","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-10 11:16:37","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-10 11:16:44"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-10 11:16:44"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 11:18:59","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 11:19:00","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 11:40:32","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 11:40:33","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 11:41:45","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 11:41:46","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 11:45:48","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 11:45:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed in successfully","service":"qrevent-backend","timestamp":"2026-02-10 13:54:56","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"User logged in via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-10 13:54:58","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 13:56:31","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 13:56:32","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 13:58:40","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 13:58:41","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:00:59","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:01:00","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:01:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:01:15","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:15:25","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:15:27","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:23:08","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:23:09","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:23:46","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:23:47","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:24:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:24:50","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:25:46","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:25:47","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:26:17","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:26:18","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:28:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:28:37","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:31:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:31:15","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:31:51","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:31:52","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:33:51","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:33:52","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:34:19","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:34:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:36:11","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:36:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:38:43","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:38:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:39:26","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:39:27","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:44:33","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:44:34","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:45:06","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 14:45:07","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 15:00:29","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 15:00:30","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 15:02:17","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 15:02:18","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 15:02:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 15:02:25","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 15:04:02","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 15:04:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 15:45:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 15:45:04","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 16:13:04","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"error":"Error fetching events: AbortError: This operation was aborted","level":"error","message":"Error fetching dashboard summary:","service":"qrevent-backend","timestamp":"2026-02-10 16:13:16"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 16:14:05","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 16:15:26","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 16:16:16","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 16:21:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 16:21:59","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 16:22:00","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 16:22:04","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 16:22:05","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 16:35:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 16:35:24","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"email":"andriatsilavokevin@gmail.com","error":"Invalid login credentials","level":"warn","message":"Sign in failed:","service":"qrevent-backend","timestamp":"2026-02-10 17:40:55"}
{"error":"Invalid login credentials","level":"error","message":"SignIn service error:","service":"qrevent-backend","timestamp":"2026-02-10 17:40:55"}
{"error":"Invalid login credentials","level":"error","message":"Login error:","service":"qrevent-backend","timestamp":"2026-02-10 17:40:55"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed in successfully","service":"qrevent-backend","timestamp":"2026-02-10 17:41:12","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"User logged in via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-10 17:41:13","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:41:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:41:16","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar deleted from storage","service":"qrevent-backend","timestamp":"2026-02-10 17:41:27","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Profile updated successfully","service":"qrevent-backend","timestamp":"2026-02-10 17:41:27","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar removed successfully","service":"qrevent-backend","timestamp":"2026-02-10 17:41:27","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":null,"level":"info","message":"Cache invalidated","patterns":["user:caf5b502-3e1d-4ee6-a753-c77d4c08fc38:*"],"service":"qrevent-backend","timestamp":"2026-02-10 17:41:27","type":["user"],"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"fileSize":103424,"level":"info","message":"Avatar upload request","mimeType":"image/webp","originalName":"avatar.webp","service":"qrevent-backend","timestamp":"2026-02-10 17:41:48","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Profile updated successfully","service":"qrevent-backend","timestamp":"2026-02-10 17:41:51","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar uploaded successfully","service":"qrevent-backend","timestamp":"2026-02-10 17:41:51","url":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/d61d04ac-6051-453b-b12c-b25747ab0b70.webp","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":null,"level":"info","message":"Cache invalidated","patterns":["user:caf5b502-3e1d-4ee6-a753-c77d4c08fc38:*"],"service":"qrevent-backend","timestamp":"2026-02-10 17:41:51","type":["user"],"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar deleted from storage","service":"qrevent-backend","timestamp":"2026-02-10 17:41:59","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Profile updated successfully","service":"qrevent-backend","timestamp":"2026-02-10 17:41:59","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar removed successfully","service":"qrevent-backend","timestamp":"2026-02-10 17:41:59","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":null,"level":"info","message":"Cache invalidated","patterns":["user:caf5b502-3e1d-4ee6-a753-c77d4c08fc38:*"],"service":"qrevent-backend","timestamp":"2026-02-10 17:41:59","type":["user"],"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:42:04","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:42:06","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:44:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:44:37","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:48:57","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:48:58","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:50:06","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:50:29","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:25"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:26"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:27"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:28"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:33"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:34"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:35"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:35"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:36"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:37"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:37"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:38"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:39"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:39"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:40"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:41"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:42"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:43"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:45"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:45"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:46"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:47"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:48"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:49"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:51"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:52"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:53"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:54"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:56"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:57"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:58"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:59"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:51:59"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:52:00"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:52:01"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:52:02"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:52:03"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:52:04"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:52:41"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:52:42"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:52:42"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-10 17:52:44"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:54:30","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:54:31","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:54:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:57:42","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 17:57:43","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 18:14:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 18:16:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 18:17:37","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 18:18:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 18:19:45","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 18:20:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 18:21:16","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:04:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:04:15","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:07:19","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:07:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:13:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:13:22","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:17:38","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:17:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:20:27","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:20:28","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:21:11","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:21:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:22:13","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:22:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:48:16","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:48:17","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:49:04","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:49:05","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:50:19","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:50:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:51:02","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:51:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:51:18","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-10 19:51:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 06:57:31"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-11 06:57:31"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 06:57:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-11 06:57:31"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-11 06:57:31"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-11 06:57:31"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-11 06:57:31"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-11 06:57:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-11 06:57:34"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-11 06:57:35"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-11 06:57:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-11 06:57:36"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-11 06:57:37"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-11 06:57:37"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-11 06:57:37"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-11 06:57:37"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-11 06:57:58"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-11 06:57:58"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-11 06:58:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-11 06:58:04","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 07:32:51"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-11 07:32:51"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 07:32:51"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-11 07:32:51"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-11 07:32:52"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:32:52"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-11 07:32:52"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-11 07:32:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-11 07:32:54"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:32:55"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:32:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-11 07:32:57"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:32:58"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-11 07:32:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-11 07:32:58"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-11 07:32:58"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 07:34:42"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-11 07:34:42"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 07:34:42"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-11 07:34:42"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-11 07:34:42"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:34:42"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-11 07:34:42"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-11 07:34:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-11 07:34:44"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:34:45"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:34:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-11 07:34:52"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:34:52"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-11 07:34:52"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-11 07:34:52"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-11 07:34:52"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 07:36:56"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-11 07:36:56"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 07:36:56"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-11 07:36:57"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-11 07:36:57"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:36:57"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-11 07:36:57"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-11 07:36:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-11 07:37:00"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:37:00"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:37:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-11 07:37:03"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:37:03"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-11 07:37:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-11 07:37:03"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-11 07:37:03"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 07:37:23"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-11 07:37:23"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 07:37:23"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-11 07:37:23"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-11 07:37:23"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:37:23"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-11 07:37:23"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-11 07:37:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-11 07:37:25"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:37:25"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:37:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-11 07:37:27"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:37:27"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-11 07:37:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-11 07:37:27"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-11 07:37:27"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 07:37:37"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-11 07:37:37"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 07:37:37"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-11 07:37:37"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-11 07:37:37"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:37:37"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-11 07:37:37"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-11 07:37:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-11 07:37:40"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:37:40"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:37:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-11 07:37:42"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-11 07:37:42"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-11 07:37:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-11 07:37:43"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-11 07:37:43"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-11 07:38:25"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-11 07:38:25"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 07:41:03"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-11 07:41:03"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-11 07:41:03"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-11 08:03:25"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-11 08:03:26"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-11 08:03:27"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-11 08:03:29"}
{"consecutiveFailures":3,"error":"AbortError: This operation was aborted","level":"error","message":" Database connection unhealthy","responseTime":"10000ms","service":"qrevent-backend","timestamp":"2026-02-11 10:20:24"}
{"consecutiveFailures":5,"level":"info","message":" Database connection restored","responseTime":"1161ms","service":"qrevent-backend","timestamp":"2026-02-11 10:23:15"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 07:53:26"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 07:53:26"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 07:53:26"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 07:53:26"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 07:53:26"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 07:53:26"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 07:53:26"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 07:53:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 07:53:28"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 07:53:29"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 07:53:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 07:53:32"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 07:53:32"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 07:53:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 07:53:32"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 07:53:32"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed in successfully","service":"qrevent-backend","timestamp":"2026-02-12 07:59:50","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"User logged in via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-12 07:59:50","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 07:59:56","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 07:59:56","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:00:14"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:00:15"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:00:16"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:00:18"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:01:56"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:01:58"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:01:59"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:00"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:01"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:02"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:03"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:04"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:04"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:05"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:06"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:08"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:09"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:10"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:11"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:12"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:13"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:14"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:15"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:17"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:18"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:19"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:20"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:21"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:02:23"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:04:17"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:04:18"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:04:24"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:04:25"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:05:22"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:05:23"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:05:44"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:05:45"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 08:06:29"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 08:06:29"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:14"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:15"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:16"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:17"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:18"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:19"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:20"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:21"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:21"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:22"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:22"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:23"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:23"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:24"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:25"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:26"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:27"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:28"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:29"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:30"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:31"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:32"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:33"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:34"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:35"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:36"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:08:37"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:09:29"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:09:31"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:09:31"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:09:32"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:09:56"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:10:12"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:10:23"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:10:30"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:10:38"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:10:43"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:10:54"}
{"code":"PGRST205","details":null,"hint":"Perhaps you meant the table 'public.story_events'","level":"error","message":"Could not find the table 'public.form_drafts' in the schema cache","service":"qrevent-backend","timestamp":"2026-02-12 08:11:11"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 08:11:43"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 08:11:43"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 08:11:43"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 08:11:43"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 08:11:44"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 08:11:44"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 08:11:44"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 08:11:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 08:11:45"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 08:11:46"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 08:11:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 08:11:48"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 08:11:49"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 08:11:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 08:11:49"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 08:11:49"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 08:11:58"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 08:11:58"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 08:11:58"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 08:11:58"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 08:11:58"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 08:11:58"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 08:11:58"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 08:11:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 08:12:00"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 08:12:00"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 08:12:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 08:12:02"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 08:12:02"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 08:12:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 08:12:04"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 08:12:05"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 08:12:05"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 08:12:05"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 08:12:05"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 08:19:53"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 08:19:53"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 08:23:56","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 08:23:57","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed in successfully","service":"qrevent-backend","timestamp":"2026-02-12 09:27:12","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"User logged in via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-12 09:27:13","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 09:29:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 09:29:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 11:07:51"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 11:07:51"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 11:07:51"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 11:07:51"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 11:07:52"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 11:07:52"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 11:07:52"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 11:07:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 11:07:54"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 11:07:55"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 11:07:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 11:07:57"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 11:07:58"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 11:07:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 11:08:00"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 11:08:01"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 11:08:01"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 11:08:01"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 11:08:01"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 11:08:10"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 11:08:10"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 11:08:16","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 11:08:16","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 11:35:51","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 11:35:53","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed in successfully","service":"qrevent-backend","timestamp":"2026-02-12 14:33:39","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"User logged in via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-12 14:33:41","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 14:36:10","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 14:36:11","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 14:41:45","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 14:41:47","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 14:44:40"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 14:44:40"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 14:44:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 14:44:40"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 14:44:40"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 14:44:40"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 14:44:40"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 14:44:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 14:44:42"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 14:44:42"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 14:44:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 14:44:44"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 14:44:45"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 14:44:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 14:44:47"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 14:44:47"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 14:44:47"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 14:44:47"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 14:44:48"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 14:48:34"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 14:48:34"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 14:50:52","title":"Mariage"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"c","53":"o","54":"l","55":"u","56":"m","57":"n","58":"s","59":"'","6":"n","60":" ","61":"i","62":"n","63":" ","64":"t","65":"h","66":"e","67":" ","68":"s","69":"c","7":"o","70":"h","71":"e","72":"m","73":"a","74":" ","75":"c","76":"a","77":"c","78":"h","79":"e","8":"t","9":" ","level":"warn","message":"[events.safe] Impossible de dtecter le schma:","service":"qrevent-backend","timestamp":"2026-02-12 14:50:52"}
{"level":"info","message":"[events.safe] Utilisation de l'insertion directe","service":"qrevent-backend","timestamp":"2026-02-12 14:50:53"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"error","message":"[events.safe] chec de l'insertion:","service":"qrevent-backend","timestamp":"2026-02-12 14:50:53"}
{"code":"42501","error":"new row violates row-level security policy for table \"events\"","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-12 14:50:53","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 14:50:55","title":"Mariage"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"c","53":"o","54":"l","55":"u","56":"m","57":"n","58":"s","59":"'","6":"n","60":" ","61":"i","62":"n","63":" ","64":"t","65":"h","66":"e","67":" ","68":"s","69":"c","7":"o","70":"h","71":"e","72":"m","73":"a","74":" ","75":"c","76":"a","77":"c","78":"h","79":"e","8":"t","9":" ","level":"warn","message":"[events.safe] Impossible de dtecter le schma:","service":"qrevent-backend","timestamp":"2026-02-12 14:50:55"}
{"level":"info","message":"[events.safe] Utilisation de l'insertion directe","service":"qrevent-backend","timestamp":"2026-02-12 14:50:55"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"error","message":"[events.safe] chec de l'insertion:","service":"qrevent-backend","timestamp":"2026-02-12 14:50:56"}
{"code":"42501","error":"new row violates row-level security policy for table \"events\"","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-12 14:50:56","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 14:50:59","title":"Mariage"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"c","53":"o","54":"l","55":"u","56":"m","57":"n","58":"s","59":"'","6":"n","60":" ","61":"i","62":"n","63":" ","64":"t","65":"h","66":"e","67":" ","68":"s","69":"c","7":"o","70":"h","71":"e","72":"m","73":"a","74":" ","75":"c","76":"a","77":"c","78":"h","79":"e","8":"t","9":" ","level":"warn","message":"[events.safe] Impossible de dtecter le schma:","service":"qrevent-backend","timestamp":"2026-02-12 14:50:59"}
{"level":"info","message":"[events.safe] Utilisation de l'insertion directe","service":"qrevent-backend","timestamp":"2026-02-12 14:51:00"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"error","message":"[events.safe] chec de l'insertion:","service":"qrevent-backend","timestamp":"2026-02-12 14:51:00"}
{"code":"42501","error":"new row violates row-level security policy for table \"events\"","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-12 14:51:00","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 14:56:14","title":"Mariage"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"c","53":"o","54":"l","55":"u","56":"m","57":"n","58":"s","59":"'","6":"n","60":" ","61":"i","62":"n","63":" ","64":"t","65":"h","66":"e","67":" ","68":"s","69":"c","7":"o","70":"h","71":"e","72":"m","73":"a","74":" ","75":"c","76":"a","77":"c","78":"h","79":"e","8":"t","9":" ","level":"warn","message":"[events.safe] Impossible de dtecter le schma:","service":"qrevent-backend","timestamp":"2026-02-12 14:56:14"}
{"level":"info","message":"[events.safe] Utilisation de l'insertion directe","service":"qrevent-backend","timestamp":"2026-02-12 14:56:14"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"error","message":"[events.safe] chec de l'insertion:","service":"qrevent-backend","timestamp":"2026-02-12 14:56:15"}
{"code":"42501","error":"new row violates row-level security policy for table \"events\"","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-12 14:56:15","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 14:56:16","title":"Mariage"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"c","53":"o","54":"l","55":"u","56":"m","57":"n","58":"s","59":"'","6":"n","60":" ","61":"i","62":"n","63":" ","64":"t","65":"h","66":"e","67":" ","68":"s","69":"c","7":"o","70":"h","71":"e","72":"m","73":"a","74":" ","75":"c","76":"a","77":"c","78":"h","79":"e","8":"t","9":" ","level":"warn","message":"[events.safe] Impossible de dtecter le schma:","service":"qrevent-backend","timestamp":"2026-02-12 14:56:17"}
{"level":"info","message":"[events.safe] Utilisation de l'insertion directe","service":"qrevent-backend","timestamp":"2026-02-12 14:56:17"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"error","message":"[events.safe] chec de l'insertion:","service":"qrevent-backend","timestamp":"2026-02-12 14:56:17"}
{"code":"42501","error":"new row violates row-level security policy for table \"events\"","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-12 14:56:17","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 14:56:20","title":"Mariage"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"c","53":"o","54":"l","55":"u","56":"m","57":"n","58":"s","59":"'","6":"n","60":" ","61":"i","62":"n","63":" ","64":"t","65":"h","66":"e","67":" ","68":"s","69":"c","7":"o","70":"h","71":"e","72":"m","73":"a","74":" ","75":"c","76":"a","77":"c","78":"h","79":"e","8":"t","9":" ","level":"warn","message":"[events.safe] Impossible de dtecter le schma:","service":"qrevent-backend","timestamp":"2026-02-12 14:56:20"}
{"level":"info","message":"[events.safe] Utilisation de l'insertion directe","service":"qrevent-backend","timestamp":"2026-02-12 14:56:21"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"error","message":"[events.safe] chec de l'insertion:","service":"qrevent-backend","timestamp":"2026-02-12 14:56:21"}
{"code":"42501","error":"new row violates row-level security policy for table \"events\"","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-12 14:56:21","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:04:44"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 15:04:44"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:04:44"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 15:04:44"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 15:04:45"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:04:45"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 15:04:45"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 15:04:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:04:47"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:04:47"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:04:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:04:49"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:04:50"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:04:50"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:04:52"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:04:52"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 15:04:53"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 15:04:53"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 15:04:53"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:05:34"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 15:05:34"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:05:34"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 15:05:35"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 15:05:35"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:05:35"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 15:05:35"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 15:05:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:05:37"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:05:37"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:05:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:05:40"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:05:40"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:05:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:05:45"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:05:45"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 15:05:45"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 15:05:45"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 15:05:45"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 15:09:19","title":"Mariage"}
{"level":"info","message":"[events.safe] Schma optimiste vrifi avec succs","service":"qrevent-backend","timestamp":"2026-02-12 15:09:19"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 1/5","service":"qrevent-backend","timestamp":"2026-02-12 15:09:20"}
{"id":"b2264e3a-4721-4aad-9a7c-1eef440161ca","level":"info","message":"[events.safe] vnement cr avec succs:","service":"qrevent-backend","timestamp":"2026-02-12 15:09:20"}
{"eventId":"b2264e3a-4721-4aad-9a7c-1eef440161ca","guestCount":0,"level":"info","message":"Event created successfully","service":"qrevent-backend","timestamp":"2026-02-12 15:09:20","titleLength":7,"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/b2264e3a-4721-4aad-9a7c-1eef440161ca","service":"qrevent-backend","timestamp":"2026-02-12 15:09:48"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/b2264e3a-4721-4aad-9a7c-1eef440161ca","service":"qrevent-backend","timestamp":"2026-02-12 15:09:51"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/b2264e3a-4721-4aad-9a7c-1eef440161ca","service":"qrevent-backend","timestamp":"2026-02-12 15:09:55"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/b2264e3a-4721-4aad-9a7c-1eef440161ca","service":"qrevent-backend","timestamp":"2026-02-12 15:09:56"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 15:10:26"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 15:10:26"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:10:32","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:10:33","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:10:40","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:10:41","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:12:15","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:12:42","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:24:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:24:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:36:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:36:13","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:36:19","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:36:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"body":{},"error_message":"Invalid JSON","error_stack":"Error: Invalid JSON\n    at verify (/home/kevin/Mify/backendMify/server.js:200:13)\n    at /home/kevin/Mify/backendMify/node_modules/body-parser/lib/read.js:111:9\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:238:16)\n    at done (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/auth/logout","service":"qrevent-backend","timestamp":"2026-02-12 15:38:41"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:38:53","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:38:54","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"body":{},"error_message":"Invalid JSON","error_stack":"Error: Invalid JSON\n    at verify (/home/kevin/Mify/backendMify/server.js:200:13)\n    at /home/kevin/Mify/backendMify/node_modules/body-parser/lib/read.js:111:9\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:238:16)\n    at done (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/auth/logout","service":"qrevent-backend","timestamp":"2026-02-12 15:39:00"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:39:07","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:39:08","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:42","title":"Mariage"}
{"level":"info","message":"[events.safe] Schma optimiste vrifi avec succs","service":"qrevent-backend","timestamp":"2026-02-12 15:39:43"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 1/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:43"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 1 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:44"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 2/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:44"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 2 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:44"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 3/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:44"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 3 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:44"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 4/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:44"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 4 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:45"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 5/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:45"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"error","message":"[events.safe] chec de l'insertion aprs tous les essais:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:45"}
{"code":"42501","error":"new row violates row-level security policy for table \"events\"","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:45","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:47","title":"Mariage"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 1/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:48"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 1 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:48"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 2/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:48"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 2 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:49"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 3/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:49"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 3 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:49"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 4/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:49"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 4 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:50"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 5/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:50"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"error","message":"[events.safe] chec de l'insertion aprs tous les essais:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:50"}
{"code":"42501","error":"new row violates row-level security policy for table \"events\"","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:50","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:53","title":"Mariage"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 1/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:53"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 1 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:54"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 2/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:54"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 2 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:54"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 3/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:54"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 3 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:55"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 4/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:55"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 4 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:55"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 5/5","service":"qrevent-backend","timestamp":"2026-02-12 15:39:55"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"error","message":"[events.safe] chec de l'insertion aprs tous les essais:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:55"}
{"code":"42501","error":"new row violates row-level security policy for table \"events\"","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-12 15:39:55","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:42:50"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 15:42:50"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:42:50"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 15:42:51"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 15:42:51"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:42:51"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 15:42:51"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 15:42:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:43:00"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:43:00"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:43:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:43:02"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:43:02"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:43:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:43:05"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:43:06"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 15:43:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 15:43:06"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 15:43:06"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 15:46:33"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 15:46:33"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:42","title":"Mariage"}
{"level":"info","message":"[events.safe] Schma optimiste vrifi avec succs","service":"qrevent-backend","timestamp":"2026-02-12 15:49:43"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 1/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:43"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 1 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:44"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 2/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:44"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 2 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:44"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 3/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:44"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 3 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:45"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 4/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:45"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 4 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:45"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 5/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:45"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"error","message":"[events.safe] chec de l'insertion aprs tous les essais:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:45"}
{"code":"42501","error":"new row violates row-level security policy for table \"events\"","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:45","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:47","title":"Mariage"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 1/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:47"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 1 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:48"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 2/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:48"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 2 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:48"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 3/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:48"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 3 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:49"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 4/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:49"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 4 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:49"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 5/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:49"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"error","message":"[events.safe] chec de l'insertion aprs tous les essais:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:49"}
{"code":"42501","error":"new row violates row-level security policy for table \"events\"","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:49","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:52","title":"Mariage"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 1/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:53"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 1 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:53"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 2/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:53"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 2 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:53"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 3/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:53"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 3 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:53"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 4/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:53"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"warn","message":"[events.safe] Tentative 4 choue:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:54"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 5/5","service":"qrevent-backend","timestamp":"2026-02-12 15:49:54"}
{"0":"n","1":"e","10":"o","11":"l","12":"a","13":"t","14":"e","15":"s","16":" ","17":"r","18":"o","19":"w","2":"w","20":"-","21":"l","22":"e","23":"v","24":"e","25":"l","26":" ","27":"s","28":"e","29":"c","3":" ","30":"u","31":"r","32":"i","33":"t","34":"y","35":" ","36":"p","37":"o","38":"l","39":"i","4":"r","40":"c","41":"y","42":" ","43":"f","44":"o","45":"r","46":" ","47":"t","48":"a","49":"b","5":"o","50":"l","51":"e","52":" ","53":"\"","54":"e","55":"v","56":"e","57":"n","58":"t","59":"s","6":"w","60":"\"","7":" ","8":"v","9":"i","level":"error","message":"[events.safe] chec de l'insertion aprs tous les essais:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:54"}
{"code":"42501","error":"new row violates row-level security policy for table \"events\"","level":"error","message":"Error creating event:","service":"qrevent-backend","timestamp":"2026-02-12 15:49:54","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:53:26"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 15:53:26"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:53:26"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:54:03"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 15:54:03"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:54:03"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:54:21","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:54:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:54:51"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 15:54:51"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:54:51"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:57:05"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 15:57:05"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:57:05"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:57:22"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 15:57:22"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:57:22"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 15:57:22","title":"Test Mariage"}
{"level":"info","message":"[events.safe] Schma optimiste vrifi avec succs","service":"qrevent-backend","timestamp":"2026-02-12 15:57:22"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","reception_venue","partner1_name","groom_name","bride_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 1/5","service":"qrevent-backend","timestamp":"2026-02-12 15:57:23"}
{"id":"a9994554-9a23-4076-b9a6-313cec0040c6","level":"info","message":"[events.safe] vnement cr avec succs:","service":"qrevent-backend","timestamp":"2026-02-12 15:57:23"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:57:32"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 15:57:32"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:57:32"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 15:57:32"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 15:57:33"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:33"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 15:57:33"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 15:57:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:57:35"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:36"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:57:37"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:38"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:57:39"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:40"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 15:57:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 15:57:40"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 15:57:40"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"Found 70 migration(s):","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 040_fix_menu_settings_structure.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 041_fix_supabase_security_linter.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 042_fix_function_search_path_and_materialized_views.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 043_fix_game_statistics_and_ranking.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 044_supabase_auth_clean_integration.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 044_supabase_auth_integration.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 045_supabase_auth_triggers.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 046_auth_cascade_deletion.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 047_r2_cleanup_integration.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 048_fix_events_schema.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 051_robust_event_creation_fix.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - SUPABASE_AUTH_SETUP.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:57:58"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:57:59"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-12 15:57:59"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"Found 70 migration(s):","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 040_fix_menu_settings_structure.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 041_fix_supabase_security_linter.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 042_fix_function_search_path_and_materialized_views.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 043_fix_game_statistics_and_ranking.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 044_supabase_auth_clean_integration.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 044_supabase_auth_integration.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 045_supabase_auth_triggers.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 046_auth_cascade_deletion.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 047_r2_cleanup_integration.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 048_fix_events_schema.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 051_robust_event_creation_fix.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - SUPABASE_AUTH_SETUP.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"\n Migration to apply (051_robust_event_creation_fix.sql):","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"-- ============================================================================\n-- MIGRATION 051: Robust Event Creation Fix\n-- Date: 2026-02-11\n-- Description: Solution complte et adaptive pour la cration d'vnements\n--              Cette migration est IDEMPOTENTE et peut tre rexcute sans danger\n-- ============================================================================\n\n-- ============================================================================\n-- PARTIE 1: VRIFICATION ET CORRECTION DU SCHMA EVENTS\n-- ============================================================================\n\nDO $$\nDECLARE\n    v_column_exists BOOLEAN;\n    v_trigger_exists BOOLEAN;\n    v_policy_exists BOOLEAN;\n    v_constraint_exists BOOLEAN;\nBEGIN\n    RAISE NOTICE ' Dbut de la vrification du schma events...';\n\n    -- 1.1 Vrifier et ajouter les colonnes de base si elles n'existent pas\n    \n    -- partner1_name\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'partner1_name'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN partner1_name VARCHAR(100);\n        RAISE NOTICE ' Colonne partner1_name ajoute';\n    END IF;\n\n    -- partner2_name\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'partner2_name'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN partner2_name VARCHAR(100);\n        RAISE NOTICE ' Colonne partner2_name ajoute';\n    END IF;\n\n    -- event_schedule\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'event_schedule'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN event_schedule JSONB DEFAULT '[]';\n        RAISE NOTICE ' Colonne event_schedule ajoute';\n    END IF;\n\n    -- settings (avec valeur par dfaut complte)\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'settings'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN settings JSONB DEFAULT '{\n            \"enableRSVP\": true,\n            \"enableGames\": false,\n            \"enablePhotoGallery\": true,\n            \"enableGuestBook\": true,\n            \"enableQRVerification\": true\n        }';\n        RAISE NOTICE ' Colonne settings ajoute';\n    END IF;\n\n    -- cover_image\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'cover_image'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN cover_image TEXT;\n        RAISE NOTICE ' Colonne cover_image ajoute';\n    END IF;\n\n    -- banner_image\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'banner_image'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN banner_image TEXT;\n        RAISE NOTICE ' Colonne banner_image ajoute';\n    END IF;\n\n    -- guest_count\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'guest_count'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN guest_count INTEGER DEFAULT 0;\n        RAISE NOTICE ' Colonne guest_count ajoute';\n    END IF;\n\n    -- total_budget\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'total_budget'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN total_budget DECIMAL(10, 2) DEFAULT 0;\n        RAISE NOTICE ' Colonne total_budget ajoute';\n    END IF;\n\n    -- menu_settings\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'menu_settings'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN menu_settings JSONB DEFAULT '{\n            \"enabled\": false,\n            \"title\": \"Menu du Jour\",\n            \"subtitle\": \"Une exprience culinaire unique\",\n            \"description\": \"\",\n            \"starter\": { \"title\": \"Entre\", \"description\": \"\" },\n            \"main\": { \"title\": \"Plat Principal\", \"description\": \"\" },\n            \"dessert\": { \"title\": \"Dessert\", \"description\": \"\" },\n            \"drinks\": { \"title\": \"Boissons\", \"description\": \"\" }\n        }';\n        RAISE NOTICE ' Colonne menu_settings ajoute';\n    END IF;\n\n    -- Colonnes pour les venues (ceremony/reception)\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'venue_type'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN venue_type VARCHAR(20) DEFAULT 'single';\n        RAISE NOTICE ' Colonne venue_type ajoute';\n    END IF;\n\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'ceremony_venue'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN ceremony_venue JSONB;\n        RAISE NOTICE ' Colonne ceremony_venue ajoute';\n    END IF;\n\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'reception_venue'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN reception_venue JSONB;\n        RAISE NOTICE ' Colonne reception_venue ajoute';\n    END IF;\n\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'ceremony_date'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN ceremony_date DATE;\n        RAISE NOTICE ' Colonne ceremony_date ajoute';\n    END IF;\n\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'ceremony_time'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN ceremony_time TIME;\n        RAISE NOTICE ' Colonne ceremony_time ajoute';\n    END IF;\n\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'reception_date'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN reception_date DATE;\n        RAISE NOTICE ' Colonne reception_date ajoute';\n    END IF;\n\n    SELECT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'events' AND column_name = 'reception_time'\n    ) INTO v_column_exists;\n    IF NOT v_column_exists THEN\n        ALTER TABLE events ADD COLUMN reception_time TIME;\n        RAISE NOTICE ' Colonne reception_time ajoute';\n    END IF;\n\n    -- 1.2 Rendre description nullable (si ce n'est pas dj fait)\n    BEGIN\n        ALTER TABLE events ALTER COLUMN description DROP NOT NULL;\n        RAISE NOTICE ' Colonne description rendue nullable';\n    EXCEPTION\n        WHEN OTHERS THEN\n            RAISE NOTICE ' Colonne description dj nullable ou erreur: %', SQLERRM;\n    END;\n\n    RAISE NOTICE ' Vrification du schma events termine';\nEND $$;\n\n-- ============================================================================\n-- PARTIE 2: SUPPRESSION DU TRIGGER DE VALIDATION PROBLMATIQUE\n-- ============================================================================\n\n-- Supprimer le trigger validate_event_venues_trigger s'il existe\n-- Ce trigger impose des contraintes trop strictes qui empchent la cration d'vnements\nDROP TRIGGER IF EXISTS validate_event_venues_trigger ON events;\n\n-- Supprimer aussi la fonction associe si elle existe\nDROP FUNCTION IF EXISTS validate_event_venues();\n\n-- Crer une version plus souple du trigger (optionnelle)\nCREATE OR REPLACE FUNCTION validate_event_venues_soft()\nRETURNS trigger AS $$\nBEGIN\n    -- Validation souple: si venue_type n'est pas dfini, le mettre  'single'\n    IF NEW.venue_type IS NULL THEN\n        NEW.venue_type := 'single';\n    END IF;\n    \n    -- Si crmonie non dfinie mais date principale oui, utiliser la date principale\n    IF NEW.ceremony_date IS NULL AND NEW.date IS NOT NULL THEN\n        NEW.ceremony_date := NEW.date::DATE;\n    END IF;\n    \n    -- Si pas d'heure de crmonie, mettre une valeur par dfaut\n    IF NEW.ceremony_time IS NULL THEN\n        NEW.ceremony_time := '14:00'::TIME;\n    END IF;\n    \n    -- Si venue crmonie non dfinie mais location oui, utiliser location\n    IF NEW.ceremony_venue IS NULL AND NEW.location IS NOT NULL THEN\n        NEW.ceremony_venue := NEW.location;\n    END IF;\n    \n    -- Pour les rceptions, si non dfinies, utiliser les valeurs de la crmonie\n    IF NEW.reception_date IS NULL THEN\n        NEW.reception_date := NEW.ceremony_date;\n    END IF;\n    \n    IF NEW.reception_time IS NULL THEN\n        NEW.reception_time := '18:00'::TIME;\n    END IF;\n    \n    IF NEW.reception_venue IS NULL THEN\n        NEW.reception_venue := NEW.ceremony_venue;\n    END IF;\n    \n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Crer le trigger qui s'excute BEFORE INSERT/UPDATE pour remplir les valeurs par dfaut\nDROP TRIGGER IF EXISTS validate_event_venues_soft_trigger ON events;\nCREATE TRIGGER validate_event_venues_soft_trigger\n    BEFORE INSERT OR UPDATE ON events\n    FOR EACH ROW EXECUTE FUNCTION validate_event_venues_soft();\n\n-- ============================================================================\n-- PARTIE 3: CORRECTION DES POLITIQUES RLS POUR EVENTS\n-- ============================================================================\n\n-- Activer RLS sur events (idempotent)\nALTER TABLE events ENABLE ROW LEVEL SECURITY;\n\n-- Supprimer les anciennes politiques qui pourraient causer des problmes\nDROP POLICY IF EXISTS \"Deny Public Access\" ON events;\nDROP POLICY IF EXISTS events_organizer_policy ON events;\nDROP POLICY IF EXISTS \"Events access policy\" ON events;\nDROP POLICY IF EXISTS \"Events organizer access\" ON events;\n\n-- Crer une politique RLS qui fonctionne avec l'architecture hybride\n-- Cette politique permet l'accs via Service Role (backend) et via auth.uid() (RLS standard)\nCREATE POLICY \"Events full access for service role\" ON events\n    FOR ALL\n    TO service_role\n    USING (true)\n    WITH CHECK (true);\n\n-- Politique pour les utilisateurs authentifis (via auth.users)\n-- Note: Cette politique suppose que organizer_id dans events correspond  auth.users.id\n-- Si votre architecture utilise public.users.id, ajustez en consquence\nCREATE POLICY \"Events access for authenticated users\" ON events\n    FOR ALL\n    TO authenticated\n    USING (\n        -- L'utilisateur est l'organisateur (comparaison directe avec auth.uid)\n        organizer_id = auth.uid()\n        -- OU l'utilisateur est li via public.users\n        OR organizer_id IN (\n            SELECT id FROM public.users WHERE auth_id = auth.uid()\n        )\n    )\n    WITH CHECK (\n        organizer_id = auth.uid()\n        OR organizer_id IN (\n            SELECT id FROM public.users WHERE auth_id = auth.uid()\n        )\n    );\n\n-- ============================================================================\n-- PARTIE 4: FONCTION ROBUSTE DE CRATION D'VNEMENT\n-- ============================================================================\n\nCREATE OR REPLACE FUNCTION create_event_robust(p_event_data JSONB)\nRETURNS TABLE(\n    id UUID,\n    title VARCHAR(200),\n    description TEXT,\n    guest_count INTEGER,\n    date TIMESTAMP WITH TIME ZONE,\n    location JSONB,\n    cover_image TEXT,\n    banner_image TEXT,\n    settings JSONB,\n    is_active BOOLEAN,\n    organizer_id UUID,\n    created_at TIMESTAMP WITH TIME ZONE,\n    updated_at TIMESTAMP WITH TIME ZONE,\n    partner1_name VARCHAR(100),\n    partner2_name VARCHAR(100),\n    venue_type VARCHAR(20),\n    ceremony_venue JSONB,\n    reception_venue JSONB,\n    ceremony_date DATE,\n    ceremony_time TIME,\n    reception_date DATE,\n    reception_time TIME,\n    event_schedule JSONB\n) AS $$\nDECLARE\n    v_event_id UUID;\n    v_organizer_id UUID;\n    v_event_date TIMESTAMP WITH TIME ZONE;\n    v_title VARCHAR(200);\n    v_description TEXT;\n    v_guest_count INTEGER;\n    v_location JSONB;\n    v_settings JSONB;\n    v_cover_image TEXT;\n    v_banner_image TEXT;\n    v_partner1_name VARCHAR(100);\n    v_partner2_name VARCHAR(100);\n    v_venue_type VARCHAR(20);\n    v_ceremony_venue JSONB;\n    v_reception_venue JSONB;\n    v_ceremony_date DATE;\n    v_ceremony_time TIME;\n    v_reception_date DATE;\n    v_reception_time TIME;\n    v_event_schedule JSONB;\n    v_created_event events%ROWTYPE;\nBEGIN\n    --  Validation UUID pour l'ID (gnrer si non fourni)\n    BEGIN\n        v_event_id := (p_event_data->>'id')::UUID;\n    EXCEPTION\n        WHEN OTHERS THEN\n            v_event_id := gen_random_uuid();\n    END;\n    \n    IF v_event_id IS NULL THEN\n        v_event_id := gen_random_uuid();\n    END IF;\n    \n    --  Validation organizer_id obligatoire\n    BEGIN\n        v_organizer_id := (p_event_data->>'organizer_id')::UUID;\n    EXCEPTION\n        WHEN OTHERS THEN\n            RAISE EXCEPTION 'Organizer ID is required and must be a valid UUID';\n    END;\n    \n    IF v_organizer_id IS NULL THEN\n        RAISE EXCEPTION 'Organizer ID is required';\n    END IF;\n    \n    --  Vrifier que l'organisateur existe (dans auth.users ou public.users)\n    IF NOT EXISTS (\n        SELECT 1 FROM auth.users WHERE id = v_organizer_id\n        UNION\n        SELECT 1 FROM public.users WHERE id = v_organizer_id OR auth_id = v_organizer_id\n    ) THEN\n        RAISE EXCEPTION 'Organizer not found: %', v_organizer_id;\n    END IF;\n    \n    --  Validation du titre obligatoire\n    v_title := p_event_data->>'title';\n    IF v_title IS NULL OR LENGTH(TRIM(v_title)) = 0 THEN\n        RAISE EXCEPTION 'Event title is required and cannot be empty';\n    END IF;\n    \n    IF LENGTH(v_title) > 200 THEN\n        RAISE EXCEPTION 'Event title cannot exceed 200 characters';\n    END IF;\n    \n    --  Validation de la date obligatoire et future\n    BEGIN\n        v_event_date := (p_event_data->>'date')::TIMESTAMP WITH TIME ZONE;\n    EXCEPTION\n        WHEN OTHERS THEN\n            RAISE EXCEPTION 'Event date is required and must be a valid timestamp';\n    END;\n    \n    IF v_event_date IS NULL THEN\n        RAISE EXCEPTION 'Event date is required';\n    END IF;\n    \n    IF v_event_date < NOW()::DATE THEN\n        RAISE EXCEPTION 'Event date cannot be in the past';\n    END IF;\n    \n    -- Extraction des autres champs avec valeurs par dfaut\n    v_description := p_event_data->>'description';\n    \n    BEGIN\n        v_guest_count := (p_event_data->>'guest_count')::INTEGER;\n    EXCEPTION\n        WHEN OTHERS THEN\n        v_guest_count := NULL;\n    END;\n    \n    v_location := p_event_data->'location';\n    \n    -- Settings avec valeur par dfaut\n    v_settings := p_event_data->'settings';\n    IF v_settings IS NULL THEN\n        v_settings := '{\n            \"enableRSVP\": true,\n            \"enableGames\": false,\n            \"enablePhotoGallery\": true,\n            \"enableGuestBook\": true,\n            \"enableQRVerification\": true\n        }'::JSONB;\n    END IF;\n    \n    -- Images\n    v_cover_image := p_event_data->>'cover_image';\n    v_banner_image := p_event_data->>'banner_image';\n    \n    -- Partner names\n    v_partner1_name := p_event_data->>'partner1_name';\n    v_partner2_name := p_event_data->>'partner2_name';\n    \n    -- Event schedule\n    v_event_schedule := p_event_data->'event_schedule';\n    IF v_event_schedule IS NULL THEN\n        v_event_schedule := '[]'::JSONB;\n    END IF;\n    \n    -- Venue data avec valeurs par dfaut automatiques\n    v_venue_type := COALESCE(p_event_data->>'venue_type', 'single');\n    \n    -- Ceremony venue: utiliser location si non fourni\n    v_ceremony_venue := p_event_data->'ceremony_venue';\n    IF v_ceremony_venue IS NULL AND v_location IS NOT NULL THEN\n        v_ceremony_venue := v_location;\n    END IF;\n    \n    -- Ceremony date: utiliser date principale si non fourni\n    BEGIN\n        v_ceremony_date := (p_event_data->>'ceremony_date')::DATE;\n    EXCEPTION\n        WHEN OTHERS THEN\n        v_ceremony_date := NULL;\n    END;\n    IF v_ceremony_date IS NULL THEN\n        v_ceremony_date := v_event_date::DATE;\n    END IF;\n    \n    -- Ceremony time avec valeur par dfaut depuis event_schedule ou 14:00\n    BEGIN\n        v_ceremony_time := (p_event_data->>'ceremony_time')::TIME;\n    EXCEPTION\n        WHEN OTHERS THEN\n        v_ceremony_time := NULL;\n    END;\n    IF v_ceremony_time IS NULL THEN\n        -- Essayer d'extraire depuis event_schedule\n        BEGIN\n            v_ceremony_time := (p_event_data->'event_schedule'->0->>'time')::TIME;\n        EXCEPTION\n            WHEN OTHERS THEN\n            v_ceremony_time := NULL;\n        END;\n        IF v_ceremony_time IS NULL THEN\n            v_ceremony_time := '14:00'::TIME;\n        END IF;\n    END IF;\n    \n    -- Reception data: utiliser les mmes valeurs que ceremony par dfaut\n    v_reception_venue := p_event_data->'reception_venue';\n    IF v_reception_venue IS NULL THEN\n        v_reception_venue := v_ceremony_venue;\n    END IF;\n    \n    BEGIN\n        v_reception_date := (p_event_data->>'reception_date')::DATE;\n    EXCEPTION\n        WHEN OTHERS THEN\n        v_reception_date := NULL;\n    END;\n    IF v_reception_date IS NULL THEN\n        v_reception_date := v_ceremony_date;\n    END IF;\n    \n    BEGIN\n        v_reception_time := (p_event_data->>'reception_time')::TIME;\n    EXCEPTION\n        WHEN OTHERS THEN\n        v_reception_time := NULL;\n    END;\n    IF v_reception_time IS NULL THEN\n        -- Essayer d'extraire depuis event_schedule (deuxime tape)\n        BEGIN\n            v_reception_time := (p_event_data->'event_schedule'->1->>'time')::TIME;\n        EXCEPTION\n            WHEN OTHERS THEN\n            v_reception_time := NULL;\n        END;\n        IF v_reception_time IS NULL THEN\n            v_reception_time := '18:00'::TIME;\n        END IF;\n    END IF;\n    \n    --  Transaction atomique - crer l'vnement\n    BEGIN\n        INSERT INTO events (\n            id, title, description, guest_count, date, location, \n            cover_image, banner_image, settings, is_active, organizer_id,\n            created_at, updated_at,\n            partner1_name, partner2_name,\n            venue_type, ceremony_venue, reception_venue,\n            ceremony_date, ceremony_time, reception_date, reception_time,\n            event_schedule\n        ) VALUES (\n            v_event_id,\n            v_title,\n            v_description,\n            v_guest_count,\n            v_event_date,\n            v_location,\n            v_cover_image,\n            v_banner_image,\n            v_settings,\n            COALESCE((p_event_data->>'is_active')::BOOLEAN, true),\n            v_organizer_id,\n            NOW(),\n            NOW(),\n            v_partner1_name,\n            v_partner2_name,\n            v_venue_type,\n            v_ceremony_venue,\n            v_reception_venue,\n            v_ceremony_date,\n            v_ceremony_time,\n            v_reception_date,\n            v_reception_time,\n            v_event_schedule\n        ) RETURNING * INTO v_created_event;\n        \n    EXCEPTION\n        WHEN unique_violation THEN\n            RAISE EXCEPTION 'An event with this ID already exists';\n        WHEN foreign_key_violation THEN\n            RAISE EXCEPTION 'Invalid organizer ID: %', v_organizer_id;\n        WHEN OTHERS THEN\n            RAISE EXCEPTION 'Database error during event creation: %', SQLERRM;\n    END;\n    \n    -- Retourner l'vnement cr avec toutes les colonnes\n    RETURN QUERY SELECT \n        v_created_event.id,\n        v_created_event.title,\n        v_created_event.description,\n        v_created_event.guest_count,\n        v_created_event.date,\n        v_created_event.location,\n        v_created_event.cover_image,\n        v_created_event.banner_image,\n        v_created_event.settings,\n        v_created_event.is_active,\n        v_created_event.organizer_id,\n        v_created_event.created_at,\n        v_created_event.updated_at,\n        v_created_event.partner1_name,\n        v_created_event.partner2_name,\n        v_created_event.venue_type,\n        v_created_event.ceremony_venue,\n        v_created_event.reception_venue,\n        v_created_event.ceremony_date,\n        v_created_event.ceremony_time,\n        v_created_event.reception_date,\n        v_created_event.reception_time,\n        v_created_event.event_schedule;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\n-- Accorder les permissions\nGRANT EXECUTE ON FUNCTION create_event_robust(JSONB) TO authenticated;\nGRANT EXECUTE ON FUNCTION create_event_robust(JSONB) TO service_role;\n\n-- ============================================================================\n-- PARTIE 5: CORRECTION DE LA LIAISON AUTH.USERS <-> PUBLIC.USERS\n-- ============================================================================\n\n-- S'assurer que auth_id existe et est correctement index\nDO $$\nBEGIN\n    IF NOT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'users' AND column_name = 'auth_id'\n    ) THEN\n        ALTER TABLE public.users ADD COLUMN auth_id UUID UNIQUE REFERENCES auth.users(id) ON DELETE SET NULL;\n        RAISE NOTICE ' Colonne auth_id ajoute  public.users';\n    END IF;\nEND $$;\n\nCREATE INDEX IF NOT EXISTS idx_users_auth_id ON public.users(auth_id);\n\n-- S'assurer que password_hash est nullable\nDO $$\nBEGIN\n    ALTER TABLE public.users ALTER COLUMN password_hash DROP NOT NULL;\nEXCEPTION\n    WHEN OTHERS THEN\n        RAISE NOTICE ' password_hash dj nullable ou erreur: %', SQLERRM;\nEND $$;\n\n-- Fonction pour synchroniser un utilisateur auth avec public.users\nCREATE OR REPLACE FUNCTION sync_auth_user_to_public(p_auth_id UUID)\nRETURNS UUID AS $$\nDECLARE\n    v_public_user_id UUID;\n    v_auth_user RECORD;\nBEGIN\n    -- Rcuprer les infos de auth.users\n    SELECT id, email, raw_user_meta_data INTO v_auth_user\n    FROM auth.users\n    WHERE id = p_auth_id;\n    \n    IF v_auth_user IS NULL THEN\n        RAISE EXCEPTION 'Auth user not found: %', p_auth_id;\n    END IF;\n    \n    -- Vrifier si l'utilisateur existe dj dans public.users\n    SELECT id INTO v_public_user_id\n    FROM public.users\n    WHERE auth_id = p_auth_id;\n    \n    IF v_public_user_id IS NULL THEN\n        -- Crer l'utilisateur dans public.users\n        INSERT INTO public.users (\n            id,\n            auth_id,\n            name,\n            email,\n            role,\n            is_active,\n            created_at,\n            updated_at\n        ) VALUES (\n            gen_random_uuid(),\n            p_auth_id,\n            COALESCE(v_auth_user.raw_user_meta_data->>'name', split_part(v_auth_user.email, '@', 1)),\n            v_auth_user.email,\n            COALESCE(v_auth_user.raw_user_meta_data->>'role', 'organizer'),\n            true,\n            NOW(),\n            NOW()\n        )\n        RETURNING id INTO v_public_user_id;\n        \n        RAISE NOTICE ' Created public.users entry for auth_id: %', p_auth_id;\n    END IF;\n    \n    RETURN v_public_user_id;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER;\n\nGRANT EXECUTE ON FUNCTION sync_auth_user_to_public(UUID) TO authenticated;\nGRANT EXECUTE ON FUNCTION sync_auth_user_to_public(UUID) TO service_role;\n\n-- ============================================================================\n-- PARTIE 6: INDEX DE PERFORMANCE\n-- ============================================================================\n\nCREATE INDEX IF NOT EXISTS idx_events_organizer_active ON events(organizer_id, is_active) WHERE is_active = true;\nCREATE INDEX IF NOT EXISTS idx_events_date_active ON events(date, is_active);\nCREATE INDEX IF NOT EXISTS idx_events_partners ON events(partner1_name, partner2_name) WHERE partner1_name IS NOT NULL OR partner2_name IS NOT NULL;\nCREATE INDEX IF NOT EXISTS idx_events_schedule ON events USING GIN (event_schedule) WHERE event_schedule IS NOT NULL;\nCREATE INDEX IF NOT EXISTS idx_events_settings ON events USING GIN (settings) WHERE settings IS NOT NULL;\n\n-- ============================================================================\n-- PARTIE 7: COMMENTAIRES ET DOCUMENTATION\n-- ============================================================================\n\nCOMMENT ON FUNCTION create_event_robust(JSONB) IS \n'Fonction robuste de cration d''vnement avec validation complte et valeurs par dfaut automatiques.\nGre automatiquement:\n- La conversion des dates et heures\n- Les venues par dfaut depuis location\n- Les valeurs manquantes avec des defaults sensibles';\n\nCOMMENT ON FUNCTION validate_event_venues_soft() IS \n'Trigger souple qui remplit automatiquement les champs venue manquants avec des valeurs par dfaut cohrentes';\n\nCOMMENT ON FUNCTION sync_auth_user_to_public(UUID) IS \n'Synchronise un utilisateur auth.users vers public.users si ncessaire';\n\n-- ============================================================================\n-- PARTIE 8: VRIFICATION FINALE\n-- ============================================================================\n\nDO $$\nDECLARE\n    v_missing_columns TEXT[] := '{}';\n    v_all_good BOOLEAN := true;\nBEGIN\n    -- Vrifier toutes les colonnes critiques\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'venue_type') THEN\n        v_missing_columns := array_append(v_missing_columns, 'venue_type');\n        v_all_good := false;\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'ceremony_venue') THEN\n        v_missing_columns := array_append(v_missing_columns, 'ceremony_venue');\n        v_all_good := false;\n    END IF;\n    \n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'events' AND column_name = 'partner1_name') THEN\n        v_missing_columns := array_append(v_missing_columns, 'partner1_name');\n        v_all_good := false;\n    END IF;\n    \n    IF v_all_good THEN\n        RAISE NOTICE E'\\n MIGRATION 051 TERMINE AVEC SUCCS!\\n';\n        RAISE NOTICE ' Toutes les colonnes ncessaires sont prsentes';\n        RAISE NOTICE ' Le trigger de validation problmatique a t remplac';\n        RAISE NOTICE ' Les politiques RLS sont configures';\n        RAISE NOTICE ' La fonction create_event_robust est disponible';\n        RAISE NOTICE E'\\n Utilisez SELECT * FROM create_event_robust(''{\"title\":\"Test\",\"date\":\"2026-12-31T14:00:00Z\",\"organizer_id\":\"votre-uuid\"}''::jsonb);\\n';\n    ELSE\n        RAISE WARNING E'\\n PROBLME: Colonnes manquantes: %\\n', array_to_string(v_missing_columns, ', ');\n    END IF;\nEND $$;\n","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":"Applying migration: 051_robust_event_creation_fix.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:58:09"}
{"level":"info","message":" Migration applied successfully: 051_robust_event_creation_fix.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:10"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-12 15:58:10"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:58:19"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 15:58:19"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:58:19"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 15:58:19"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 15:58:20"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:20"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 15:58:20"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 15:58:20"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:58:21"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:22"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:22"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:58:24"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:24"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:24"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 15:58:26"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 15:58:26"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 15:58:26"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 15:58:26"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 15:58:26"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:58:37"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 15:58:37"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 15:58:37"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 15:58:37","title":"Test Final API"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 15:58:37"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 15:58:37"}
{"level":"info","message":"[events.safe] Schma optimiste vrifi avec succs","service":"qrevent-backend","timestamp":"2026-02-12 15:58:38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:58:38","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","reception_venue","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 1/5","service":"qrevent-backend","timestamp":"2026-02-12 15:58:39"}
{"id":"8904ebf8-7990-455b-8042-3d0819a8c5bf","level":"info","message":"[events.safe] vnement cr avec succs:","service":"qrevent-backend","timestamp":"2026-02-12 15:58:39"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 15:58:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/b2264e3a-4721-4aad-9a7c-1eef440161ca","service":"qrevent-backend","timestamp":"2026-02-12 15:59:19"}
{"eventId":"b2264e3a-4721-4aad-9a7c-1eef440161ca","level":"info","message":"DELETE /events/:eventId - Attempting to delete event","service":"qrevent-backend","timestamp":"2026-02-12 16:04:43","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"b2264e3a-4721-4aad-9a7c-1eef440161ca","eventOwnerId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","level":"info","match":true,"message":"Found event for deletion","requestUserId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","service":"qrevent-backend","timestamp":"2026-02-12 16:04:43"}
{"eventId":"b2264e3a-4721-4aad-9a7c-1eef440161ca","level":"info","message":"Event deleted successfully","service":"qrevent-backend","timestamp":"2026-02-12 16:04:44","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 16:04:47","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 16:04:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 16:12:29","title":"Mariage"}
{"level":"info","message":"[events.safe] Schma optimiste vrifi avec succs","service":"qrevent-backend","timestamp":"2026-02-12 16:12:29"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 1/5","service":"qrevent-backend","timestamp":"2026-02-12 16:12:29"}
{"id":"83b12c82-a8be-4ff1-a123-5c167c03f760","level":"info","message":"[events.safe] vnement cr avec succs:","service":"qrevent-backend","timestamp":"2026-02-12 16:12:30"}
{"eventId":"83b12c82-a8be-4ff1-a123-5c167c03f760","guestCount":0,"level":"info","message":"Event created successfully","service":"qrevent-backend","timestamp":"2026-02-12 16:12:30","titleLength":7,"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"83b12c82-a8be-4ff1-a123-5c167c03f760","level":"info","message":"DELETE /events/:eventId - Attempting to delete event","service":"qrevent-backend","timestamp":"2026-02-12 16:21:38","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"83b12c82-a8be-4ff1-a123-5c167c03f760","eventOwnerId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","level":"info","match":true,"message":"Found event for deletion","requestUserId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","service":"qrevent-backend","timestamp":"2026-02-12 16:21:38"}
{"eventId":"83b12c82-a8be-4ff1-a123-5c167c03f760","level":"info","message":"Event deleted successfully","service":"qrevent-backend","timestamp":"2026-02-12 16:21:39","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 16:22:17","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 16:22:18","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-12 16:25:12","title":"Mariage"}
{"level":"info","message":"[events.safe] Schma optimiste vrifi avec succs","service":"qrevent-backend","timestamp":"2026-02-12 16:25:12"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 1/5","service":"qrevent-backend","timestamp":"2026-02-12 16:25:13"}
{"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":"[events.safe] vnement cr avec succs:","service":"qrevent-backend","timestamp":"2026-02-12 16:25:13"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","guestCount":0,"level":"info","message":"Event created successfully","service":"qrevent-backend","timestamp":"2026-02-12 16:25:13","titleLength":7,"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:26:00"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:31:42"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:33:54"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:33:54"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:34:45"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:34:46"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:34:48"}
{"jobId":"hr15ujv2bz7","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"banner-1770899703868.webp","service":"qrevent-backend","timestamp":"2026-02-12 16:35:05","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","folder":"events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"banner-1770899703868.webp","service":"qrevent-backend","timestamp":"2026-02-12T12:35:05.529Z","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Event 97c2110a-7732-46c5-a4dd-fad0cb0e61de banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","service":"qrevent-backend","timestamp":"2026-02-12T12:35:10.443Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"banner-1770899703868.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","service":"qrevent-backend","timestamp":"2026-02-12T12:35:10.444Z"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:35:38"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:35:42"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:36:52"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 16:38:02"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 16:38:02"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 16:38:02"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 16:38:02"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 16:38:02"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 16:38:02"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 16:38:02"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 16:38:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 16:38:05"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 16:38:05"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 16:38:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 16:38:08"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 16:38:09"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 16:38:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 16:38:11"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 16:38:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 16:38:11"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:38:20"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:38:22"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:38:25"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 16:40:33"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 16:40:33"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 16:40:33"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 16:40:33"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 16:40:33"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 16:40:33"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 16:40:33"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 16:40:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 16:40:35"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 16:40:35"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 16:40:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 16:40:37"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 16:40:38"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 16:40:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 16:40:40"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 16:40:40"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 16:40:40"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 16:40:40"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 16:40:40"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 16:40:42"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 16:40:42"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-12 16:42:29","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":null,"partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T12:35:10.304109+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-12 16:42:29"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":null,"partner2":null,"service":"qrevent-backend","timestamp":"2026-02-12 16:42:29"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 16:42:41"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 17:19:07"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 17:19:15"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 17:19:15"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 17:23:32"}
{"body":{"partner1_name":"","partner2_name":""},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-12 17:26:43"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 17:38:25"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 17:38:25"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 17:38:25"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 17:38:26"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 17:38:27"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:38:27"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 17:38:27"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 17:38:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 17:38:29"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:38:29"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:38:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 17:38:31"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:38:32"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:38:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 17:38:34"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:38:35"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 17:38:35"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 17:38:35"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 17:38:35"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-12 17:38:41","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":null,"partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T12:35:10.304109+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-12 17:38:41"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":null,"partner2":null,"service":"qrevent-backend","timestamp":"2026-02-12 17:38:41"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 17:42:09"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 17:42:09"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 17:44:22"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 17:44:22"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 17:44:22"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 17:44:22"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 17:44:22"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:44:22"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 17:44:22"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 17:44:22"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 17:44:25"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:44:25"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:44:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 17:44:27"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:44:28"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:44:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 17:44:30"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:44:30"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 17:44:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 17:44:31"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 17:44:31"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 17:47:05"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 17:47:05"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 17:47:05"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 17:47:05"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 17:47:06"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:47:06"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 17:47:06"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 17:47:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 17:47:07"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:47:08"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:47:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 17:47:10"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:47:10"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:47:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 17:47:12"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:47:13"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 17:47:13"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 17:47:13"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 17:47:13"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 17:49:48"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 17:49:48"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 17:49:48"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 17:49:48"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 17:49:48"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:49:48"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 17:49:48"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 17:49:48"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 17:49:51"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:49:51"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:49:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 17:49:54"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:49:54"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:49:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 17:49:56"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 17:49:56"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 17:49:57"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 17:49:57"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 17:49:57"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed in successfully","service":"qrevent-backend","timestamp":"2026-02-12 17:52:25","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"User logged in via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-12 17:52:26","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 17:52:27","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 17:52:29","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 17:52:45"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 17:52:45"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-12 17:52:47","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":null,"partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T12:35:10.304109+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-12 17:52:48"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":null,"partner2":null,"service":"qrevent-backend","timestamp":"2026-02-12 17:52:48"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-12 17:56:04","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Sarah","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T13:56:04.079824+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-12 17:56:05"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"Sarah","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-12 17:56:05"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-12 17:56:46","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Sarah","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T13:56:04.079824+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-12 17:56:47"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"Sarah","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-12 17:56:47"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-12 17:57:41","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Sarah","partner2_name":"Marc","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T13:57:40.217684+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-12 17:57:42"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"Sarah","partner2":"Marc","service":"qrevent-backend","timestamp":"2026-02-12 17:57:42"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-12 17:58:59","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Sarah","partner2_name":"Marc","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T13:57:40.217684+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-12 17:59:00"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"Sarah","partner2":"Marc","service":"qrevent-backend","timestamp":"2026-02-12 17:59:00"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:00:29"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 18:00:29"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:00:29"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 18:00:30"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 18:00:30"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:00:30"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:00:30"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 18:00:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:00:33"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:00:33"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:00:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:00:36"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:00:36"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:00:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:00:38"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:00:39"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:00:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 18:00:39"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 18:00:39"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:01:29"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 18:01:29"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:01:29"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 18:01:29"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 18:01:30"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:01:30"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:01:30"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 18:01:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:01:32"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:01:32"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:01:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:01:34"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:01:35"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:01:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:01:37"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:01:38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:01:38"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 18:01:38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:01:38"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 18:01:38"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 18:01:39"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:01:39"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:01:39"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 18:01:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:01:41"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:01:41"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:01:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:01:44"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:01:44"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:01:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:01:47"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:01:47"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:01:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 18:01:48"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 18:01:48"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-12 18:02:10","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Sarah","partner2_name":"Marc","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T13:57:40.217684+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-12 18:02:10"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"Sarah","partner2":"Marc","service":"qrevent-backend","timestamp":"2026-02-12 18:02:10"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 18:07:48"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 18:07:48"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 18:07:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 18:07:51","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-12 18:08:57","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Sarah","partner2_name":"Marc","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:08:56.117059+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-12 18:08:57"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"Sarah","partner2":"Marc","service":"qrevent-backend","timestamp":"2026-02-12 18:08:57"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:14:05"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 18:14:05"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:14:05"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 18:14:05"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 18:14:06"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:14:06"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:14:06"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 18:14:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:14:09"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:14:09"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:14:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:14:12"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:14:12"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:14:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:14:15"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:14:15"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:14:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 18:14:16"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 18:14:16"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:15:53"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 18:15:53"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:15:53"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 18:15:54"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 18:15:54"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:15:54"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:15:54"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 18:15:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:15:57"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:15:57"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:15:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:15:59"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:15:59"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:16:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:16:02"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:16:03"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:16:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 18:16:03"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 18:16:03"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:19:05"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 18:19:05"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:19:05"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 18:19:06"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 18:19:06"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:19:06"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:19:06"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 18:19:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:19:08"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:19:08"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:19:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:19:10"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:19:11"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:19:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:19:14"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:19:14"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:19:14"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 18:19:14"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 18:19:14"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:19:24"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 18:19:24"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:19:24"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 18:19:24"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 18:19:24"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:19:24"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:19:24"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 18:19:24"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:19:27"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:19:27"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:19:27"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:19:29"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:19:29"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:19:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:19:31"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:19:32"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:19:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 18:19:32"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 18:19:32"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 18:20:12"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 18:20:12"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:20:29"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 18:20:29"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:20:29"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 18:20:29"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 18:20:30"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:20:30"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:20:30"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 18:20:30"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:20:30"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-12 18:20:30"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-12 18:20:30"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-12 18:20:31"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-12 18:20:31"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:20:31"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:20:31"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-12 18:20:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:20:33"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:20:33"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:20:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:20:36"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:20:36"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:20:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-12 18:20:38"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-12 18:20:39"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:20:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-12 18:20:39"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-12 18:20:39"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed in successfully","service":"qrevent-backend","timestamp":"2026-02-12 18:20:47","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"User logged in via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-12 18:20:48","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 18:20:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-12 18:20:50","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-12 18:21:06"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-12 18:21:06"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:37:39"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 06:37:39"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:37:39"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 06:37:39"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 06:37:39"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:37:39"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 06:37:39"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 06:37:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:37:42"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:37:43"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:37:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:37:46"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:37:46"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:37:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:37:48"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:37:48"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 06:37:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 06:37:49"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 06:37:49"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 06:38:17"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 06:38:17"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 06:38:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 06:38:24","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:38:52","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:38:52"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:38:53"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:38:53","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:38:53"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:38:53"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-13 06:38:58"}
{"body":{"banner_image":null},"error_message":"Validation failed","error_stack":"Error: Validation failed\n    at /home/kevin/Mify/backendMify/node_modules/celebrate/lib/celebrate.js:95:19\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Global error handler triggered","method":"PUT","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de","service":"qrevent-backend","timestamp":"2026-02-13 06:38:59"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:45:49"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 06:45:49"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:45:49"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 06:45:49"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 06:45:49"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:45:49"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 06:45:49"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 06:45:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:45:51"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:45:51"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:45:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:45:53"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:45:53"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:45:54"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:45:56"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:45:56"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 06:45:56"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 06:45:56"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 06:45:56"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:46:08"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 06:46:08"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:46:08"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 06:46:08"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 06:46:08"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:46:08"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 06:46:08"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 06:46:08"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:46:10"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:46:10"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:46:11"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:46:13"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:46:13"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:46:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:46:16"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:46:16"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 06:46:16"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 06:46:16"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 06:46:16"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 06:46:47"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 06:46:47"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:46:50","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:46:50"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:46:50"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:48:17","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:48:18"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:48:18"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:48:28","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:48:28"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:48:28"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:48:50","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:48:50"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:48:50"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:52:40","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:52:40"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:52:40"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:53:20","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:53:20"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:53:20"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:54:44"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 06:54:44"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:54:44"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 06:54:44"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 06:54:44"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:54:44"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 06:54:44"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 06:54:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:54:47"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:54:47"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:54:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:54:49"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:54:49"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:54:49"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:54:51"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 06:54:51"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:54:51"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 06:54:51"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 06:54:51"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:54:51"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 06:54:51"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 06:54:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:54:53"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:54:53"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:54:53"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:54:55"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:54:55"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:54:56"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 06:54:58"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 06:54:58"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 06:54:58"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 06:54:58"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 06:54:58"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:55:09","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:55:09"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:55:09"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 06:55:28"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 06:55:28"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:55:30","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:55:31"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:55:31"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:57:30","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:57:30"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:57:30"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:57:48","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:57:48"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:57:48"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:57:49","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:57:49"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:57:49"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 06:58:44","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 06:58:44"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 06:58:44"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:59:42"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 06:59:42"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:59:42"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:59:50"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 06:59:50"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 06:59:50"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:00:13"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:00:13"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:00:13"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:00:13"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:00:13"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:00:13"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:00:13"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:00:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:00:16"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:00:16"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:00:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:00:18"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:00:18"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:00:19"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:00:21"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:00:22"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:00:22"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 07:00:22"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 07:00:22"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:00:24"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:00:24"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:00:24"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:00:24"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:00:24"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:00:24"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:00:24"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:00:24"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:00:26"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:00:26"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:00:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:00:28"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:00:29"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:00:29"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:00:31"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:00:31"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:00:31"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 07:00:31"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 07:00:31"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 07:00:50"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 07:00:50"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:00:52","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:00:52"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:00:52"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:01:48","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:01:48"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:01:48"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:01:49","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:01:50"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:01:50"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:02:15","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:02:15"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:02:15"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:02:16","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:02:16"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:02:16"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:04:37","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/2603242e-5c01-4a80-9006-fc21f6c6f691.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-12T14:20:21.655841+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:04:38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:04:38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:05:10"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:05:10"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:05:10"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:05:10"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:05:10"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:05:10"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:05:10"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:05:10"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:05:12"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:05:13"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:05:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:05:15"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:05:16"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:05:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:05:17"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:05:18"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:05:18"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 07:05:18"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 07:05:18"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:05:33","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:05:34"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:05:34"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:15:46","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:15:46"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:15:46"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:15:46","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:15:47"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:15:47"}
{"body":{},"error_message":"Only image files (JPEG, PNG, WebP) are allowed!","error_stack":"Error: Only image files (JPEG, PNG, WebP) are allowed!\n    at fileFilter (/home/kevin/Mify/backendMify/middleware/upload.js:39:12)\n    at wrappedFileFilter (/home/kevin/Mify/backendMify/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/home/kevin/Mify/backendMify/node_modules/multer/lib/make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/home/kevin/Mify/backendMify/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/home/kevin/Mify/backendMify/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/home/kevin/Mify/backendMify/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/home/kevin/Mify/backendMify/node_modules/streamsearch/lib/sbmh.js:248:10)\n    at SBMH.push (/home/kevin/Mify/backendMify/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/home/kevin/Mify/backendMify/node_modules/busboy/lib/types/multipart.js:567:19)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/upload-banner","service":"qrevent-backend","timestamp":"2026-02-13 07:17:00"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 07:18:26"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 07:18:26"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:18:27"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:18:27"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:18:27"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:18:27"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:18:28"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:28"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:18:28"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:18:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:18:30"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:30"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:18:32"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:33"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:33"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:18:35"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:18:35"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:18:35"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:18:35"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:18:36"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:36"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:18:36"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:18:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:18:37"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:37"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:18:39"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:40"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:18:42"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:42"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:18:42"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 07:18:42"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 07:18:42"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:18:57"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:18:57"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:18:57"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:18:57"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:18:57"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:57"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:18:57"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:18:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:18:59"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:18:59"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:19:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:19:01"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:19:02"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:19:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:19:04"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:19:04"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:19:04"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 07:19:04"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 07:19:04"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:19:21","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:19:22"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:19:22"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 07:19:48"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 07:19:48"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:19:50","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:19:50"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:19:50"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:20:10","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:20:10"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:20:10"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:20:52"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:20:52"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:20:52"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:20:52"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:20:52"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:20:52"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:20:52"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:20:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:20:54"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:20:55"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:20:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:20:57"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:20:57"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:20:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:20:59"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:20:59"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:21:00"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:21:49","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:21:49"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:21:49"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed in successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:22:07","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"User logged in via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-13 07:22:08","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 07:22:09","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 07:22:11","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:22:17","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:22:18"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:22:18"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:22:19","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:22:19"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:22:19"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:22:57","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:22:58"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:22:58"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:23:11","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:23:12"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:23:12"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:23:32","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:23:33"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:23:33"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:28:19"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:28:19"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:28:19"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:28:19"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:28:20"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:28:20"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:28:20"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:28:20"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:28:22"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:28:23"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:28:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:28:25"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:28:26"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:28:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:28:28"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:28:29"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:28:29"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 07:28:29"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 07:28:29"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 07:28:34"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 07:28:34"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 07:28:43","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 07:28:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:28:53","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:28:53"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:28:53"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:28:54","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:05:33.964936+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:28:55"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:28:55"}
{"jobId":"csx3telbg6k","level":"info","message":"Initiating direct image optimization (Redis unavailable)","originalName":"banner-1770953365420.webp","service":"qrevent-backend","timestamp":"2026-02-13 07:29:27","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","folder":"events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners","imageUsage":"banner","level":"info","message":"Processing image optimization directly (no Redis)","originalName":"banner-1770953365420.webp","service":"qrevent-backend","timestamp":"2026-02-13T03:29:27.022Z","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Event 97c2110a-7732-46c5-a4dd-fad0cb0e61de banner image updated (direct processing)","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/c7233a4c-e143-4e78-987e-fae5d69d0523.webp","service":"qrevent-backend","timestamp":"2026-02-13T03:29:30.317Z"}
{"level":"info","message":"Image optimization and upload completed (direct processing)","originalName":"banner-1770953365420.webp","publicUrl":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/c7233a4c-e143-4e78-987e-fae5d69d0523.webp","service":"qrevent-backend","timestamp":"2026-02-13T03:29:30.317Z"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:29:31","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/c7233a4c-e143-4e78-987e-fae5d69d0523.webp","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:29:30.120564+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:29:31"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:29:31"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:30:42","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:30:41.856503+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:30:43"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:30:43"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:31:41","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:30:41.856503+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:31:41"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:31:41"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:32:00","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/d4a1cbc4-a04d-4124-b956-a01bddead70f.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:32:00.113206+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:32:01"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:32:01"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:38:52"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:38:52"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:38:52"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:38:52"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:38:52"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:38:52"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:38:52"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:38:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:38:55"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:38:55"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:38:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:38:57"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:38:57"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:38:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:38:59"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:38:59"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:39:00"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 07:39:00"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 07:39:00"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:39:04"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:39:04"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:39:04"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:39:04"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:39:04"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:39:04"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:39:04"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:39:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:39:06"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:39:06"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:39:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:39:08"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:39:08"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:39:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:39:10"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:39:10"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:39:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 07:39:11"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 07:39:11"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:39:13"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:39:13"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:39:13"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:39:13"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:39:13"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:39:13"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:39:13"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:39:13"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:39:15"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:39:15"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:39:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:39:17"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:39:17"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:39:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:39:19"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:39:19"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:39:19"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:42:53","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/d4a1cbc4-a04d-4124-b956-a01bddead70f.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:32:00.113206+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:42:53"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:42:53"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:42:54","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/d4a1cbc4-a04d-4124-b956-a01bddead70f.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:32:00.113206+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:42:54"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:42:54"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 07:42:58"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 07:42:58"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:43:00","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/d4a1cbc4-a04d-4124-b956-a01bddead70f.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:32:00.113206+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:43:00"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:43:00"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:43:13","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:43:12.070788+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:43:13"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:43:13"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:45:26","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:43:12.070788+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:45:26"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:45:26"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:46:34"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:46:34"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:46:34"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:46:34"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:46:34"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:46:34"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:46:34"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:46:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:46:36"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:46:37"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:46:37"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:46:39"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:46:39"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:46:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:46:41"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:46:41"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:46:42"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:47:17","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:47:17"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:47:17"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:47:23","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:47:24"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:47:24"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:49:31","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:49:31"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:49:31"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:49:42","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:49:42"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:49:42"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:49:56","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:49:57"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:49:57"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:50:25","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:50:25"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:50:25"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:52:22","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:52:22"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:52:22"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 07:54:43"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:54:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:54:46"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:54:47"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:54:47"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:54:47"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:54:47"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:54:49"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:54:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:54:49"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:54:49"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:54:49"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:54:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:54:51"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:54:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 07:54:51"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:54:51"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 07:54:51"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 07:54:51"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 07:54:51"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 07:54:52"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:55:01","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:55:01"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:55:01"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:55:02","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:55:02"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:55:02"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:55:20","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:55:21"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:55:21"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:55:21","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:55:22"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:55:22"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:55:30","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:55:30"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:55:30"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:55:31","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:55:32"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:55:32"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:55:40","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:55:40"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:55:40"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 07:56:12"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 07:56:12"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:56:14","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:56:15"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:56:15"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:57:06","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:57:06"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:57:06"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:58:24","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:58:24"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:58:24"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 07:58:59","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 07:58:59"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 07:58:59"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:00:21","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:00:21"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:00:21"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:00:35","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:00:35"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:00:35"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:00:36","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:00:37"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:00:37"}
{"code":"EPIPE","errno":-32,"level":"error","message":"Uncaught Exception: write EPIPE","service":"qrevent-backend","stack":"Error: write EPIPE\n    at afterWriteDispatched (node:internal/stream_base_commons:159:15)\n    at writeGeneric (node:internal/stream_base_commons:150:3)\n    at Socket._writeGeneric (node:net:971:11)\n    at Socket._write (node:net:983:8)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at Writable.write (node:internal/streams/writable:510:10)\n    at console.value (node:internal/console/constructor:298:16)\n    at console.log (node:internal/console/constructor:384:26)\n    at authenticateHybrid (/home/kevin/Mify/backendMify/middleware/auth.js:121:25)","syscall":"write","timestamp":"2026-02-13 08:11:11"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 08:27:36"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 08:27:36"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 08:27:36"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 08:27:36"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 08:27:36"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 08:27:36"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 08:27:36"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 08:27:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 08:27:39"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 08:27:40"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 08:27:40"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 08:27:42"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 08:27:42"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 08:27:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 08:27:44"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 08:27:44"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 08:27:44"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 08:27:44"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 08:27:44"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 08:27:54"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 08:27:54"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 08:28:00","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 08:28:02","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:28:29","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:28:30"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:28:30"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:28:30","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:28:31"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:28:31"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 08:31:25","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 08:31:27","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:34:56","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:34:56"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:34:56"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:34:57","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:34:57"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:34:57"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:42:31","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:42:31"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:42:31"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:42:32","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:42:32"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:42:32"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:43:18","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:43:18"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:43:18"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:43:42","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:43:43"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:43:43"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:47:41","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:47:41"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:47:41"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:51:54","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:51:55"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:51:55"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:52:39","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:52:40"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:52:40"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:53:33","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:53:34"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:53:34"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 08:54:14","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 08:54:15"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 08:54:15"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 09:03:04","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 09:03:05"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 09:03:05"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 09:19:49","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 09:19:49"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 09:19:49"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 09:20:42","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 09:20:42"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 09:20:42"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 09:24:24","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 09:24:24"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 09:24:24"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 09:24:26","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 09:24:26"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 09:24:26"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 09:25:31","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 09:25:31"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 09:25:31"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 09:25:46","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 09:25:46"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 09:25:46"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 09:29:33","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 09:29:33"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 09:29:33"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 09:29:40","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 09:29:41"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 09:29:41"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 09:42:10","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 09:42:10"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 09:42:10"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 09:42:11","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 09:42:11"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 09:42:11"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 10:17:52"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 10:17:56"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 10:18:02"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:27:11","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:28:54","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:35:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:35:24","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:35:38","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:35:40","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:36:37","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:36:38","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 10:37:23","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 10:37:23"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 10:37:23"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 10:37:24","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 10:37:24"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 10:37:24"}
{"body":{},"error_message":"Invalid JSON","error_stack":"Error: Invalid JSON\n    at verify (/home/kevin/Mify/backendMify/server.js:200:13)\n    at /home/kevin/Mify/backendMify/node_modules/body-parser/lib/read.js:111:9\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:238:16)\n    at done (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/auth/logout","service":"qrevent-backend","timestamp":"2026-02-13 10:39:24"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed in successfully","service":"qrevent-backend","timestamp":"2026-02-13 10:39:35","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"User logged in via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-13 10:39:35","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:51:30","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:51:31","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"body":{},"error_message":"Invalid JSON","error_stack":"Error: Invalid JSON\n    at verify (/home/kevin/Mify/backendMify/server.js:200:13)\n    at /home/kevin/Mify/backendMify/node_modules/body-parser/lib/read.js:111:9\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:238:16)\n    at done (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/auth/logout","service":"qrevent-backend","timestamp":"2026-02-13 10:51:39"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:51:47","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:51:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"body":{},"error_message":"Invalid JSON","error_stack":"Error: Invalid JSON\n    at verify (/home/kevin/Mify/backendMify/server.js:200:13)\n    at /home/kevin/Mify/backendMify/node_modules/body-parser/lib/read.js:111:9\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:238:16)\n    at done (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/home/kevin/Mify/backendMify/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","level":"error","message":"Global error handler triggered","method":"POST","path":"/api/auth/logout","service":"qrevent-backend","timestamp":"2026-02-13 10:51:56"}
{"email":"andriatsilavokevin@gmail.com","level":"info","message":"User signed in successfully","service":"qrevent-backend","timestamp":"2026-02-13 10:52:04","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"User logged in via Supabase Auth","service":"qrevent-backend","timestamp":"2026-02-13 10:52:05","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:52:06","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 10:52:07","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 10:56:21","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 10:56:21"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 10:56:21"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 10:56:22","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 10:56:22"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 10:56:22"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 11:01:44","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 11:01:44"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 11:01:44"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 11:01:45","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 11:01:45"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 11:01:45"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 11:01:45","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 11:01:46"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 11:01:46"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 11:01:47","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 11:01:47"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 11:01:47"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 12:57:00"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 12:57:00"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 12:57:00"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 12:57:00"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 12:57:01"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 12:57:01"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 12:57:01"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 12:57:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 12:57:04"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 12:57:04"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 12:57:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 12:57:07"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 12:57:07"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 12:57:07"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 12:57:09"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 12:57:09"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 12:57:09"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 12:57:09"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 12:57:09"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 12:57:22"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 12:57:22"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 12:57:30","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 12:57:31","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 12:58:03","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 12:58:03"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 12:58:03"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 12:58:03","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 12:58:04"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 12:58:04"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 13:00:02"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 13:00:02"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 13:00:02"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 13:00:02"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 13:00:02"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 13:00:02"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 13:00:02"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 13:00:02"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 13:00:05"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 13:00:06"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 13:00:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 13:00:08"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 13:00:09"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 13:00:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 13:00:11"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 13:00:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 13:00:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 13:00:12"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 13:00:12"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 13:01:16"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 13:01:16"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:01:18","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:01:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:01:38","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:01:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:27:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:27:40","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:28:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:28:41","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:29:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:29:07","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 13:37:02","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 13:37:02"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 13:37:02"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 13:37:03","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 13:37:03"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 13:37:03"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:37:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:37:13","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:38:08","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:38:10","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 13:38:16","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 13:38:16"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 13:38:16"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 13:38:16","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 13:38:17"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 13:38:17"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 13:42:11","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 13:42:33"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 13:42:38"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 13:42:43"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 13:49:12","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 13:49:12"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 13:49:12"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 13:49:13","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 13:49:13"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 13:49:13"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:05:11","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:05:11"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:05:11"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:05:12","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/9b659b65-327b-4b0d-9649-7e2b49ce3aef.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T03:47:16.563122+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:05:12"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:05:12"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:08:09","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:05:20.604782+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:08:09"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:08:09"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:08:25","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:05:20.604782+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:08:26"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:08:26"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:08:26","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:05:20.604782+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:08:27"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:08:27"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:09:23","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:05:20.604782+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:09:24"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:09:24"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:11:47","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:05:20.604782+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:11:47"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:11:47"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:15:29","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:15:30"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:15:30"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:17:05","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:17:05"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:17:05"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:19:06","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:19:06"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:19:06"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:19:57","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:19:57"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:19:57"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:19:58","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:19:58"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:19:58"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:20:30","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:20:50","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:21:50","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:22:52","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:23:53","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:24:55","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:26:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:27:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:28:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:30:05","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:30:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:30:37","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:38:36","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:38:38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:38:38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 14:38:43","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 14:38:44"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 14:38:44"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:47:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:47:16","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:49:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:49:46","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:53:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:53:15","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 14:53:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:04:01","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:04:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:04:19","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:04:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:04:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:04:50","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:07:55","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:07:56","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:09:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:09:15","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"fileSize":56060,"level":"info","message":"Avatar upload request","mimeType":"image/webp","originalName":"avatar.webp","service":"qrevent-backend","timestamp":"2026-02-13 15:11:50","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Profile updated successfully","service":"qrevent-backend","timestamp":"2026-02-13 15:11:52","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":"Avatar uploaded successfully","service":"qrevent-backend","timestamp":"2026-02-13 15:11:52","url":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/avatars/39336284-85fb-499c-b290-3c7f2d4371ed.webp","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":null,"level":"info","message":"Cache invalidated","patterns":["user:caf5b502-3e1d-4ee6-a753-c77d4c08fc38:*"],"service":"qrevent-backend","timestamp":"2026-02-13 15:11:52","type":["user"],"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:11:58","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:11:59","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:13:33","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:13:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:14:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:14:46","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:18:43","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:18:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:20:10","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:20:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:20:53","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:21:00","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:21:54","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:22:26","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:22:27"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:22:27"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:22:27","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:22:28"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:22:28"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:24:20","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:24:20"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:24:20"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:24:29","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:24:30"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:24:30"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:25:45","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:25:45"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:25:45"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:25:46","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:25:46"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:25:46"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:25:59","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:29:24","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:29:24"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:29:24"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:29:25","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:29:25"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:29:25"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:30:08","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:31:08","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:32:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:33:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:34:45","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:34:58","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:35:00","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:35:06","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:35:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:35:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:35:50","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:35:51","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:35:53","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:36:06","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:36:46","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:36:48","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:37:00","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:38:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:38:11","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:38:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:46:34","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:46:35","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:46:56","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:49:54","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:49:55","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:58:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:58:13","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:58:28","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:58:37","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:58:38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:58:38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:58:39","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:58:39"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:58:39"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:59:02","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:59:03"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:59:03"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:59:03","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:59:04"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:59:04"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:59:15","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:59:16"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:59:16"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 15:59:16","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 15:59:17"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 15:59:17"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 15:59:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 15:59:52"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 15:59:56"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 16:00:01"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 16:00:19"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 16:00:23"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 16:00:28"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 16:01:57"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 16:01:57"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 16:01:57"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 16:01:57"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 16:01:57"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:01:57"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:01:58"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 16:01:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:02:00"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:02:00"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:02:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:02:02"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:02:03"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:02:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:02:05"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:02:05"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:02:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 16:02:06"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 16:02:06"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:02:11","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:02:12"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 16:02:12"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:02:12","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:02:13"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 16:02:13"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 16:03:03"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 16:03:03"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 16:03:03"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 16:03:03"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 16:03:04"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:03:04"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:03:04"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 16:03:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:03:06"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:03:06"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:03:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:03:09"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:03:09"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:03:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:03:11"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:03:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:03:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 16:03:11"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 16:03:11"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 16:03:50"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 16:03:50"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:05:50","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:05:50"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 16:05:50"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:05:51","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:05:51"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 16:05:51"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:09:03","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:09:03"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 16:09:03"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:09:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:09:44","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:09:44"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 16:09:44"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:09:45","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:09:46"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 16:09:46"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:11:05","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:11:05"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 16:11:05"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:11:24","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:11:26","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:12:12","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:12:12"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 16:12:12"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:12:13","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/97c2110a-7732-46c5-a4dd-fad0cb0e61de/banners/a50a5a6f-e2eb-4317-a8e5-bce9b0bb66fe.mp4","bride_name":null,"ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-12T12:25:13.489509+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[],"groom_name":null,"guest_count":null,"id":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"","partner2_name":"","reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T10:15:21.565786+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:12:13"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":" Event retrieved successfully:","partner1":"","partner2":"","service":"qrevent-backend","timestamp":"2026-02-13 16:12:13"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":"DELETE /events/:eventId - Attempting to delete event","service":"qrevent-backend","timestamp":"2026-02-13 16:12:45","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","eventOwnerId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","level":"info","match":true,"message":"Found event for deletion","requestUserId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","service":"qrevent-backend","timestamp":"2026-02-13 16:12:46"}
{"eventId":"97c2110a-7732-46c5-a4dd-fad0cb0e61de","level":"info","message":"Event deleted successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:12:46","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:13:27","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:13:28","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 16:23:30"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 16:23:30"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 16:23:30"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 16:23:30"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 16:23:31"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:23:31"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:23:31"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 16:23:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:23:32"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:23:32"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:23:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:23:35"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:23:35"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:23:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:23:37"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:23:38"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:23:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 16:23:38"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 16:23:38"}
{"hasOrganizerId":true,"level":"info","message":"[events.safe] Tentative de cration d'vnement:","service":"qrevent-backend","timestamp":"2026-02-13 16:26:38","title":"Mariage"}
{"level":"info","message":"[events.safe] Schma optimiste vrifi avec succs","service":"qrevent-backend","timestamp":"2026-02-13 16:26:38"}
{"columns":["title","description","date","organizer_id","is_active","venue_type","ceremony_venue","reception_venue","location","partner1_name","groom_name","bride_name","event_schedule","settings","guest_count","cover_image","banner_image","total_budget","menu_settings"],"level":"info","message":"[events.safe] Insertion directe - tentative 1/5","service":"qrevent-backend","timestamp":"2026-02-13 16:26:39"}
{"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":"[events.safe] vnement cr avec succs:","service":"qrevent-backend","timestamp":"2026-02-13 16:26:40"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","guestCount":0,"level":"info","message":"Event created successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:26:40","titleLength":7,"userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:26:50","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":null,"bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:26:40.155062+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:26:50"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 16:26:50"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:27:23","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:27:24"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 16:27:24"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:27:24","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:27:25"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 16:27:25"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 16:29:06"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 16:29:06"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:29:10","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:29:11","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:29:18","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:29:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:29:29","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 16:30:24"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 16:30:24"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 16:30:24"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 16:30:24"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 16:30:25"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:30:25"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:30:25"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 16:30:25"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:30:27"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:30:27"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:30:28"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:30:30"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:30:30"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:30:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:30:32"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:30:32"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:30:32"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 16:30:32"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 16:30:32"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 16:30:39"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 16:30:39"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 16:30:39"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 16:30:39"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 16:30:39"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:30:39"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:30:39"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 16:30:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:30:41"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:30:41"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:30:41"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:30:43"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:30:44"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:30:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:30:46"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:30:46"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:30:47"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 16:30:47"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 16:30:47"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:31:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:32:28","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 16:35:11"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 16:35:11"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:35:22","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:35:23"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 16:35:23"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:35:24","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:35:24"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 16:35:24"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:35:34","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:35:34"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 16:35:34"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:35:35","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:35:35"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 16:35:35"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:35:38","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:36:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:39:03","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:39:04"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 16:39:04"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 16:39:04","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 16:39:05"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 16:39:05"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:40:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 16:40:55"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 16:40:55"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 16:40:55"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 16:40:55"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 16:40:55"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:40:55"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:40:55"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 16:40:55"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:40:58"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:40:58"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:40:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:41:00"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:41:00"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:41:01"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 16:41:02"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 16:41:03"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 16:41:03"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 16:41:03"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 16:41:03"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 16:41:05"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 16:41:05"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:42:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:47:02","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:48:02","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:54:46","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 16:55:46","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:14:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:14:13","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:14:34","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 20:16:42","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 20:16:42"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 20:16:42"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:18:24","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:19:04","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:19:05","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 20:20:03"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 20:20:03"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 20:20:03"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 20:20:03"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 20:20:04"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 20:20:04"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 20:20:04"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 20:20:04"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 20:20:06"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 20:20:06"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 20:20:06"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 20:20:08"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 20:20:09"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 20:20:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 20:20:10"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 20:20:11"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 20:20:11"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 20:20:11"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 20:20:11"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 20:20:20"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 20:20:20"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:20:21","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:20:22","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 20:20:30"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 20:20:30"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 20:20:30"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 20:20:30"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 20:20:30"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 20:20:30"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 20:20:30"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 20:20:30"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 20:20:32"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 20:20:32"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 20:20:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 20:20:35"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 20:20:35"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 20:20:35"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 20:20:37"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 20:20:37"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 20:20:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 20:20:38"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 20:20:38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:21:51","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 20:22:02"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 20:22:02"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:22:02","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:22:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:22:42","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:22:54","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:27:09","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:29:10","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:30:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:31:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:32:16","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:33:19","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:34:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:36:04","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:39:13","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:40:14","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:40:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:40:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:41:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:42:05","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:42:48","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:44:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:45:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:46:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:47:41","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:48:43","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:49:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:49:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:49:37","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:50:37","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:52:50","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:54:12","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:55:38","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:56:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:57:21","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:58:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:59:25","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 20:59:31","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:00:32","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:00:57","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:01:45","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:02:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:03:46","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:04:17","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:05:17","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:06:19","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:07:11"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:07:11"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:07:11"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 21:07:11"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 21:07:12"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:07:12"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:07:12"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 21:07:12"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:07:14"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:07:14"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:07:15"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:07:16"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:07:16"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:07:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:07:19"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:07:19"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:07:19"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 21:07:19"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 21:07:19"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"Found 75 migration(s):","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 004_fix_rls_policies.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 020_create_invitation_designs.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 040_fix_menu_settings_structure.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 041_fix_supabase_security_linter.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 042_fix_function_search_path_and_materialized_views.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 043_fix_game_statistics_and_ranking.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 044_supabase_auth_clean_integration.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 044_supabase_auth_integration.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 045_supabase_auth_triggers.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 046_auth_cascade_deletion.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 047_r2_cleanup_integration.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 048_fix_events_schema.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 051_robust_event_creation_fix.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - COMPLETE_FIX.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - FIX_RLS.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - FIX_SIMPLE.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - SUPABASE_AUTH_SETUP.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:38"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:12:40"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:12:40"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-13 21:12:41"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:12:52"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:12:52"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:12:52"}
{"level":"info","message":"Checking database tables...","service":"qrevent-backend","timestamp":"2026-02-13 21:12:52"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table users:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:53"}
{"level":"warn","message":" Table missing: users","service":"qrevent-backend","timestamp":"2026-02-13 21:12:53"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table events:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:54"}
{"level":"warn","message":" Table missing: events","service":"qrevent-backend","timestamp":"2026-02-13 21:12:54"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table guests:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:54"}
{"level":"warn","message":" Table missing: guests","service":"qrevent-backend","timestamp":"2026-02-13 21:12:54"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table qr_codes:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:54"}
{"level":"warn","message":" Table missing: qr_codes","service":"qrevent-backend","timestamp":"2026-02-13 21:12:54"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table attendance:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:55"}
{"level":"warn","message":" Table missing: attendance","service":"qrevent-backend","timestamp":"2026-02-13 21:12:55"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table families:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:55"}
{"level":"warn","message":" Table missing: families","service":"qrevent-backend","timestamp":"2026-02-13 21:12:55"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table family_invitations:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:56"}
{"level":"warn","message":" Table missing: family_invitations","service":"qrevent-backend","timestamp":"2026-02-13 21:12:56"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table family_rsvp:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:56"}
{"level":"warn","message":" Table missing: family_rsvp","service":"qrevent-backend","timestamp":"2026-02-13 21:12:56"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table story_events:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:56"}
{"level":"warn","message":" Table missing: story_events","service":"qrevent-backend","timestamp":"2026-02-13 21:12:56"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table games:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:57"}
{"level":"warn","message":" Table missing: games","service":"qrevent-backend","timestamp":"2026-02-13 21:12:57"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table game_questions:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:57"}
{"level":"warn","message":" Table missing: game_questions","service":"qrevent-backend","timestamp":"2026-02-13 21:12:57"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table game_participations:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:57"}
{"level":"warn","message":" Table missing: game_participations","service":"qrevent-backend","timestamp":"2026-02-13 21:12:57"}
{"0":"C","1":"o","10":"f","11":"i","12":"n","13":"d","14":" ","15":"t","16":"h","17":"e","18":" ","19":"t","2":"u","20":"a","21":"b","22":"l","23":"e","24":" ","25":"'","26":"p","27":"u","28":"b","29":"l","3":"l","30":"i","31":"c","32":".","33":"i","34":"n","35":"f","36":"o","37":"r","38":"m","39":"a","4":"d","40":"t","41":"i","42":"o","43":"n","44":"_","45":"s","46":"c","47":"h","48":"e","49":"m","5":" ","50":"a","51":".","52":"t","53":"a","54":"b","55":"l","56":"e","57":"s","58":"'","59":" ","6":"n","60":"i","61":"n","62":" ","63":"t","64":"h","65":"e","66":" ","67":"s","68":"c","69":"h","7":"o","70":"e","71":"m","72":"a","73":" ","74":"c","75":"a","76":"c","77":"h","78":"e","8":"t","9":" ","level":"error","message":"Error checking table feedbacks:","service":"qrevent-backend","timestamp":"2026-02-13 21:12:58"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"Found 75 migration(s):","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 004_fix_rls_policies.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 021_create_invitation_designs.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 040_fix_menu_settings_structure.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 041_fix_supabase_security_linter.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 042_fix_function_search_path_and_materialized_views.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 043_fix_game_statistics_and_ranking.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 044_supabase_auth_clean_integration.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 044_supabase_auth_integration.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 045_supabase_auth_triggers.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 046_auth_cascade_deletion.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 047_r2_cleanup_integration.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 048_fix_events_schema.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 051_robust_event_creation_fix.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - COMPLETE_FIX.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - FIX_RLS.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - FIX_SIMPLE.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - SUPABASE_AUTH_SETUP.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"\n Migration to apply (005_add_story_events_table.sql):","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"-- Migration: Add story_events table for Histoire feature\n-- Created: 2026-02-05\n\n-- Create story_events table if not exists\nCREATE TABLE IF NOT EXISTS story_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    title VARCHAR(200) NOT NULL,\n    event_date DATE,\n    location VARCHAR(200),\n    description TEXT,\n    media_type VARCHAR(20) DEFAULT 'photo' CHECK (media_type IN ('photo', 'video')),\n    media_url TEXT,\n    sort_order INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries by event_id\nCREATE INDEX IF NOT EXISTS idx_story_events_event_id ON story_events(event_id);\n\n-- Create index for sorting\nCREATE INDEX IF NOT EXISTS idx_story_events_sort_order ON story_events(sort_order);\n\n-- Enable Row Level Security\nALTER TABLE story_events ENABLE ROW LEVEL SECURITY;\n\n-- Create policy for users to only see their own event's story events\n-- Note: This requires a join with events table to check organizer_id\n-- For now, we rely on application-level authorization\n\n-- Create updated_at trigger function if not exists\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\n-- Create trigger for updated_at\nDROP TRIGGER IF EXISTS update_story_events_updated_at ON story_events;\nCREATE TRIGGER update_story_events_updated_at\n    BEFORE UPDATE ON story_events\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":"Applying migration: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:17"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:13:19"}
{"level":"info","message":" Migration applied successfully: 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:19"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-13 21:13:19"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"Found 75 migration(s):","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 004_fix_rls_policies.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 021_create_invitation_designs.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 040_fix_menu_settings_structure.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 041_fix_supabase_security_linter.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 042_fix_function_search_path_and_materialized_views.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 043_fix_game_statistics_and_ranking.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 044_supabase_auth_clean_integration.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 044_supabase_auth_integration.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 045_supabase_auth_triggers.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 046_auth_cascade_deletion.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 047_r2_cleanup_integration.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 048_fix_events_schema.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 051_robust_event_creation_fix.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - COMPLETE_FIX.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - FIX_RLS.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - FIX_SIMPLE.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - SUPABASE_AUTH_SETUP.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"\n Migration to apply (021_create_invitation_designs.sql):","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"-- Migration: Create invitation_designs table\n-- Description: Store multiple invitation designs per event\n-- Each event can have multiple invitation templates/designs\n-- Each design can be assigned to different family groups\n\n-- Create invitation_designs table\nCREATE TABLE IF NOT EXISTS invitation_designs (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n\n    -- Design information\n    name VARCHAR(255) NOT NULL,\n    template VARCHAR(100) NOT NULL,\n    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'published', 'completed')),\n\n    -- Visual assets\n    cover_image TEXT,\n\n    -- Design customization (JSON for flexibility)\n    custom_data JSONB DEFAULT '{}',\n\n    -- Stats\n    views_count INTEGER DEFAULT 0,\n    responses_count INTEGER DEFAULT 0,\n\n    -- Timestamps\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n\n    -- Constraints\n    CONSTRAINT unique_design_per_event UNIQUE(event_id, name)\n);\n\n-- Create indexes for better performance\nCREATE INDEX IF NOT EXISTS idx_invitation_designs_event ON invitation_designs(event_id);\nCREATE INDEX IF NOT EXISTS idx_invitation_designs_user ON invitation_designs(user_id);\nCREATE INDEX IF NOT EXISTS idx_invitation_designs_status ON invitation_designs(status);\nCREATE INDEX IF NOT EXISTS idx_invitation_designs_created_at ON invitation_designs(created_at DESC);\n\n-- Create trigger for updated_at\nCREATE TRIGGER update_invitation_designs_updated_at\n    BEFORE UPDATE ON invitation_designs\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column();\n\n-- Add comments for documentation\nCOMMENT ON TABLE invitation_designs IS 'Stores invitation design templates for events. Each event can have multiple designs.';\nCOMMENT ON COLUMN invitation_designs.event_id IS 'Reference to the event this design belongs to';\nCOMMENT ON COLUMN invitation_designs.template IS 'Template identifier (e.g., \"elegant-arch\", \"modern-minimal\")';\nCOMMENT ON COLUMN invitation_designs.custom_data IS 'JSON data for custom design settings (colors, fonts, layout options)';\nCOMMENT ON COLUMN invitation_designs.views_count IS 'Number of times this design has been viewed';\nCOMMENT ON COLUMN invitation_designs.responses_count IS 'Number of RSVP responses received for this design';\n","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":"Applying migration: 021_create_invitation_designs.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:13:47"}
{"level":"info","message":" Migration applied successfully: 021_create_invitation_designs.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:13:47"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-13 21:13:48"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:15:18"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:15:18"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:15:18"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 21:15:18"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 21:15:18"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:18"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:15:18"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 21:15:18"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:15:20"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:21"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:21"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:15:23"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:23"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:24"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:15:26"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:26"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:15:27"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 21:15:27"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 21:15:27"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:15:31"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:15:31"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:15:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 21:15:31"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 21:15:32"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:32"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:15:32"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 21:15:32"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:15:33"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:34"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:34"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:15:36"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:36"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:15:38"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:38"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:15:39"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 21:15:39"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 21:15:39"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:15:46"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:15:46"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:15:46"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 21:15:46"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 21:15:46"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:46"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:15:46"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 21:15:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:15:48"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:49"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:15:50"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:51"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:51"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:15:53"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:15:53"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:15:54"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 21:15:54"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 21:15:54"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:16:40"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:16:40"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:16:40"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 21:16:40"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 21:16:41"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:16:41"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:16:41"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 21:16:41"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:16:43"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:16:44"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:16:44"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:16:46"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:16:46"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:16:46"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:16:49"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:16:49"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:16:49"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 21:16:49"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 21:16:49"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 21:17:09"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 21:17:09"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:17:11","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:17:13","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","message":" Database Migration Tool","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"========================","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"Found 76 migration(s):","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 001_add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 001_create_rpc_functions.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 001_create_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 002_add_couple_names.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 002_add_files_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 003_secure_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 004_add_avatar_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 004_fix_rls_policies.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 005_add_story_events_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 006_add_games_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 006_add_games_tables_fixed.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 006_create_families_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 007_add_guest_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 007_add_performance_indexes.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 007_create_family_invitations.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 008_add_dashboard_optimizations.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 008b_add_is_active_to_guests.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 009_add_feedback_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 009_create_wishes_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 010_create_seating_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 011_link_families_to_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 012_add_preferences_to_users.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 013_create_audit_logging.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 014_create_budget_items_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 015_add_quantity_unit_price.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 016_add_total_budget_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 017_add_budget_item_details.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 017_add_menu_settings_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 018_add_max_people_to_families.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 018_create_messages_tables.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 019_make_description_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 019_secure_messages_rls.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 020_create_event_gallery_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 020_security_fixes.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 021_create_invitation_designs.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 022_cleanup_test_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 022_create_invitation_family_assignments.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 023_consolidated_schema_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 024_create_robust_menu_system.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 025_enforce_event_isolation.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 026_secure_event_creation_function.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 028_add_family_id_to_qr_codes.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 029_add_ceremony_reception_venues.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 030_add_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 030_fix_qr_codes_trigger.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 031_add_simple_event_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 032_add_partner_names_and_schedule.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 033_simple_add_columns.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 034_add_public_game_access.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 035_fix_missing_game_guest_access.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 036_add_ip_tracking.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 037_fix_guest_id_nullable.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 038_fix_player_type_constraint.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 039_add_rank_to_participations.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 040_fix_menu_settings_structure.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 041_fix_supabase_security_linter.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 042_fix_function_search_path_and_materialized_views.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 043_fix_game_statistics_and_ranking.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 044_supabase_auth_clean_integration.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 044_supabase_auth_integration.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 045_supabase_auth_triggers.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 046_auth_cascade_deletion.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 047_r2_cleanup_integration.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 048_fix_events_schema.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 051_robust_event_creation_fix.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 100_SAFE_database_optimization.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - 999_final_schema_sync.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - COMPLETE_FIX.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - EXECUTE_IN_SUPABASE_SQL_EDITOR.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - FIX_RLS.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - FIX_SIMPLE.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - SUPABASE_AUTH_SETUP.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"  - add_avatar_url.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"\n Migration to apply (022_create_invitation_family_assignments.sql):","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"-- Migration: Create invitation_family_assignments table\n-- Description: Link invitation designs to family groups\n-- Allows each family to be assigned to a specific invitation design\n\n-- Create invitation_family_assignments table\nCREATE TABLE IF NOT EXISTS invitation_family_assignments (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    invitation_id UUID NOT NULL REFERENCES invitation_designs(id) ON DELETE CASCADE,\n    family_id UUID NOT NULL REFERENCES families(id) ON DELETE CASCADE,\n    event_id UUID NOT NULL REFERENCES events(id) ON DELETE CASCADE,\n\n    -- Metadata\n    assigned_by UUID REFERENCES users(id) ON DELETE SET NULL,\n    assigned_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n\n    -- Constraints: A family can only be assigned to one invitation design per event\n    CONSTRAINT unique_family_invitation_per_event UNIQUE(event_id, family_id)\n);\n\n-- Create indexes for better performance\nCREATE INDEX IF NOT EXISTS idx_invitation_family_assignments_invitation ON invitation_family_assignments(invitation_id);\nCREATE INDEX IF NOT EXISTS idx_invitation_family_assignments_family ON invitation_family_assignments(family_id);\nCREATE INDEX IF NOT EXISTS idx_invitation_family_assignments_event ON invitation_family_assignments(event_id);\nCREATE INDEX IF NOT EXISTS idx_invitation_family_assignments_assigned_at ON invitation_family_assignments(assigned_at DESC);\n\n-- Add comments for documentation\nCOMMENT ON TABLE invitation_family_assignments IS 'Links invitation designs to family groups. Each family can be assigned to one design per event.';\nCOMMENT ON COLUMN invitation_family_assignments.invitation_id IS 'The invitation design assigned to this family';\nCOMMENT ON COLUMN invitation_family_assignments.family_id IS 'The family receiving this invitation design';\nCOMMENT ON COLUMN invitation_family_assignments.event_id IS 'The event this assignment belongs to (for quick filtering)';\nCOMMENT ON COLUMN invitation_family_assignments.assigned_by IS 'User who made the assignment (optional)';\n","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"---","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"\n Attempting to execute migration...","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":"Applying migration: 022_create_invitation_family_assignments.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:18"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:24:21"}
{"level":"info","message":" Migration applied successfully: 022_create_invitation_family_assignments.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:22"}
{"level":"info","message":"\n All done!","service":"qrevent-backend","timestamp":"2026-02-13 21:24:22"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:24:57"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:24:57"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:24:57"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 21:24:57"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 21:24:57"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:24:57"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:24:57"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 21:24:57"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:24:59"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:00"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:25:03"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:03"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:03"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:25:05"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:25:05"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:25:05"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 21:25:05"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 21:25:05"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:05"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:25:05"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 21:25:05"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:25:08"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:09"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:09"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:25:11"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:11"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:11"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:25:13"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:25:13"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:25:13"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 21:25:13"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 21:25:14"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:14"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:25:14"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 21:25:14"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:25:16"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:16"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:16"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:25:18"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:18"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:19"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:25:21"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:25:21"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:25:21"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 21:25:21"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 21:25:21"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 21:25:54"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 21:25:54"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:29:27","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:29:29","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:30:23"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:30:23"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:30:23"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 21:30:23"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 21:30:23"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:23"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:30:23"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 21:30:23"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:30:25"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:26"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:26"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:30:29"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:29"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:29"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:30:31"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:30:31"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:30:31"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 21:30:31"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 21:30:31"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:31"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:30:31"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 21:30:31"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:30:33"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:33"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:33"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:30:35"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:35"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:36"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:30:38"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:38"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:30:38"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 21:30:38"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 21:30:38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:30:38"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:30:38"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:30:38"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 21:30:39"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 21:30:39"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:39"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:30:39"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 21:30:39"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:30:42"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:42"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:42"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:30:44"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:45"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:45"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:30:47"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:47"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:30:48"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 21:30:48"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 21:30:48"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:30:58"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 21:30:58"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 21:30:58"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 21:30:58"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 21:30:58"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:30:58"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:30:58"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 21:30:58"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:31:00"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:31:00"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:31:00"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:31:02"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:31:03"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:31:03"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 21:31:05"}
{"level":"info","message":" Migration applied successfully: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 21:31:05"}
{"level":"info","message":"Database migrations completed successfully","service":"qrevent-backend","timestamp":"2026-02-13 21:31:06"}
{"level":"info","message":"Qrevent backend server running on port 5000 in development mode","service":"qrevent-backend","timestamp":"2026-02-13 21:31:06"}
{"level":"info","message":" Database health monitoring started (interval: 60000ms)","service":"qrevent-backend","timestamp":"2026-02-13 21:31:06"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache get error:","service":"qrevent-backend","timestamp":"2026-02-13 21:35:50"}
{"0":"S","1":"t","10":"'","11":"t","12":" ","13":"w","14":"r","15":"i","16":"t","17":"e","18":"a","19":"b","2":"r","20":"l","21":"e","22":" ","23":"a","24":"n","25":"d","26":" ","27":"e","28":"n","29":"a","3":"e","30":"b","31":"l","32":"e","33":"O","34":"f","35":"f","36":"l","37":"i","38":"n","39":"e","4":"a","40":"Q","41":"u","42":"e","43":"u","44":"e","45":" ","46":"o","47":"p","48":"t","49":"i","5":"m","50":"o","51":"n","52":"s","53":" ","54":"i","55":"s","56":" ","57":"f","58":"a","59":"l","6":" ","60":"s","61":"e","7":"i","8":"s","9":"n","level":"warn","message":"Cache set error:","service":"qrevent-backend","timestamp":"2026-02-13 21:35:50"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:37:36","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:37:52","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:38:41","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:39:15","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:39:16"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:39:16"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:39:16","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:39:17"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:39:17"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:42:05","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:42:05"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:42:05"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:42:22","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:42:23"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:42:23"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:42:33","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:42:36","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:42:36"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:42:36"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:42:37","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:42:37"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:42:37"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:42:47","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:42:47"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:42:47"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:42:48","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:42:49"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:42:49"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:42:55","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:43:00","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:43:00"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:43:00"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:43:01","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:43:01"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:43:01"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:44:54","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:44:54"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:44:54"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:45:59","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:45:59"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:45:59"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:46:55","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:46:56"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:46:56"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:47:06","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:47:07"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:47:07"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:47:43","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:47:43"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:47:43"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:48:27","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:48:28"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:48:28"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:48:41","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:48:42"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:48:42"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:53:08","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:53:38","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:53:39"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:53:39"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 21:53:40","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 21:53:40"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 21:53:40"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:54:40","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 21:55:25"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 21:55:30"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 21:55:35"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:55:58","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:56:58","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:58:01","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 21:59:03","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:00:05","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:01:07","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:02:09","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:04:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:05:23","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:05:55","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:05:55"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:05:55"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:05:56","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:05:56"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:05:56"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:05:58","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:06:29","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:06:29"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:06:29"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:06:30","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:06:30"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:06:30"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:08:20","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 22:08:25"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 22:08:30"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 22:08:36"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:09:08","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:09:11","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:09:11"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:09:11"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:09:12","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:09:12"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:09:12"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:11:48","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:11:48"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:11:48"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:12:26","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:12:35","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:12:36"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:12:36"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:12:37","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:12:37"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:12:37"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:13:51","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:14:51","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:15:53","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:16:36","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:16:36"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:16:36"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:16:37","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:16:37"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:16:37"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:16:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:17:39","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:18:41","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:19:42","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:20:44","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:21:45","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:22:47","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:23:49","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:24:52","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 22:25:46"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 22:25:51"}
{"error":"Error creating QR code: new row violates row-level security policy for table \"qr_codes\"","level":"error","message":"Error generating QR code for family:","service":"qrevent-backend","timestamp":"2026-02-13 22:25:56"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:34:17","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:34:17"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:34:17"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:34:18","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:34:18"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:34:18"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:36:55","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:36:56"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:36:56"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:36:56","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:36:57"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:36:57"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:39:20","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:39:21"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:39:21"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:40:53","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"level":"info","limit":50,"message":"GET /invitations - Fetching events for user","page":1,"service":"qrevent-backend","timestamp":"2026-02-13 22:40:55","userEmail":"andriatsilavokevin@gmail.com","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:47:19","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:47:20"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:47:20"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" GET /events/:eventId","service":"qrevent-backend","timestamp":"2026-02-13 22:47:20","userId":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38"}
{"event":{"banner_image":"https://pub-1f346dbddb2b41169a36239ebd6d4408.r2.dev/events/7bcd7189-991e-4a07-8e8f-801c6ba6311f/banners/7e11d2c2-90f7-40d5-968d-26b7b696d8cb.mp4","bride_name":"Mino","ceremony_date":"2026-04-30","ceremony_time":"14:00:00","ceremony_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"cover_image":null,"created_at":"2026-02-13T12:26:40.155062+00:00","date":"2026-04-30T00:00:00+00:00","description":null,"event_schedule":[{"id":"1","location":"FJKM analamahitsy","name":"Crmonie","time":"14:00"},{"id":"2","location":"Villa Espace Ivato","name":"Rception","time":"18:00"}],"groom_name":"Kevin","guest_count":null,"id":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","is_active":true,"location":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"menu_settings":null,"organizer_id":"caf5b502-3e1d-4ee6-a753-c77d4c08fc38","partner1_name":"Kevin","partner2_name":null,"reception_date":"2026-04-30","reception_time":"18:00:00","reception_venue":{"address":"FJKM analamahitsy","coordinates":{"lat":0,"lng":0}},"settings":{"enableGames":false,"enableGuestBook":true,"enablePhotoGallery":true,"enableQRVerification":true,"enableRSVP":true},"title":"Mariage","total_budget":0,"updated_at":"2026-02-13T12:27:09.785287+00:00","venue_type":"single"},"level":"info","message":" Event found from DB:","service":"qrevent-backend","timestamp":"2026-02-13 22:47:21"}
{"eventId":"7bcd7189-991e-4a07-8e8f-801c6ba6311f","level":"info","message":" Event retrieved successfully:","partner1":"Kevin","partner2":null,"service":"qrevent-backend","timestamp":"2026-02-13 22:47:21"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'supabase' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 22:51:48"}
{"failureThreshold":3,"level":"info","message":"Circuit Breaker 'redis' initialized","resetTimeout":15000,"service":"qrevent-backend","timestamp":"2026-02-13 22:51:48"}
{"failureThreshold":5,"level":"info","message":"Circuit Breaker 'r2' initialized","resetTimeout":30000,"service":"qrevent-backend","timestamp":"2026-02-13 22:51:48"}
{"level":"info","message":"AuditService: Supabase client initialized for persistent logging","service":"qrevent-backend","timestamp":"2026-02-13 22:51:48"}
{"level":"info","message":"Running database migrations on startup...","service":"qrevent-backend","timestamp":"2026-02-13 22:51:49"}
{"level":"info","message":"Applying migration: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 22:51:49"}
{"level":"info","message":"Redis: Connected successfully","service":"qrevent-backend","timestamp":"2026-02-13 22:51:49"}
{"level":"info","message":"Redis: Ready to accept commands","service":"qrevent-backend","timestamp":"2026-02-13 22:51:49"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 22:51:51"}
{"level":"info","message":" Migration applied successfully: 021_add_guest_count_to_events.sql","service":"qrevent-backend","timestamp":"2026-02-13 22:51:52"}
{"level":"info","message":"Applying migration: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 22:51:52"}
{"level":"info","message":" Connected to database","service":"qrevent-backend","timestamp":"2026-02-13 22:51:54"}
{"level":"info","message":" Migration applied successfully: 027_ensure_max_people_column.sql","service":"qrevent-backend","timestamp":"2026-02-13 22:51:54"}
{"level":"info","message":"Applying migration: 050_create_drafts_table.sql","service":"qrevent-backend","timestamp":"2026-02-13 22:51:54"}
